<!DOCTYPE HTML>
<html class="is-adaptive">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Components: Multi Field</title>

    <link type="text/css" rel="stylesheet" href="../../css/MagpieUI.css">
    <script type="text/javascript" src="../../js/MagpieUI.js"></script>

    <script type="text/javascript">
        cm.onReady(function(){
            window.Collector = new Com.Collector()
                .addEvent('onConstruct', function(collector, data){
                    Part.Menu();
                    Part.Autoresize(data['node']);
                })
                .add('tabset', function(node){
                    new Com.Tabset({'node' : node});
                })

                .add('multifield', function(node){
                    var name = node.getAttribute('name');
                    switch(name){
                        case 'sample-javascript':
                            new Com.MultiField({
                                'node' : node,
                                'container' : node,
                                'renderStructure' : true,
                                'embedStructureOnRender' : true,
                                'renderItems' : 1,
                                'events' : {
                                    'onItemAdd' : function(that, item){
                                        item['field'].appendChild(
                                            cm.node('input', {'type' : 'text'})
                                        );
                                    }
                                }
                            });
                            break;
                        case 'sample-template':
                            new Com.MultiField({
                                'node' : node,
                                'events' : {
                                    'onItemAdd' : function(that, item){
                                        item['field'].appendChild(
                                            cm.node('input', {'type' : 'text'})
                                        );
                                    }
                                }
                            });
                            break;
                        default:
                            new Com.MultiField({
                                'node' : node
                            });
                            break;
                    }
                })
                .construct();
        });
    </script>
</head>

<body>

<h1 class="pt__box-title">Components: Multi Field</h1>

<ul class="com__tabset__content-ul" data-element="Com.Tabset">
    <li data-node="tabs:[]:container" data-config='{"id" : "overview", "title" : "Overview"}'>
        <h2>Overview</h2>
        <p>This component provide form multi fields.</p>

        <h4>Embedded Modules</h4>
        <ul class="cm__list">
            <li><code>Params</code></li>
            <li><code>Events</code></li>
            <li><code>DataConfig</code></li>
            <li><code>DataNodes</code></li>
            <li><code>Stack</code></li>
            <li><code>Langs</code></li>
        </ul>

        <h4>Required Components</h4>
        <ul class="cm__list">
            <li><code>Com.Sortable</code></li>
            <li><code>Com.Draganddrop</code></li>
        </ul>

        <h2>Initialize</h2>
        <textarea class="pt__box-code cm-autoresize" readonly>
<script type="text/javascript">
    cm.onReady(function(){
        new Com.Collector()
            .add('multifield', function(node){
                new Com.MultiField({'node' : node});
            })
            .construct()
    });
</script>

<div class="com__multifield" data-element="multifield" data-node="ComMultiField:{}:container" data-config='{"template":"<input type=\"text\">"}'>
    <div class="com__multifield__content" data-node="content">
        <div class="com__multifield__item" data-node="items:[]:container">
            <div class="icon drag linked" data-node="drag"></div>
            <div class="field" data-node="field">
                <input type="text">
            </div>
            <div class="icon remove linked" data-node="remove" title="Remove"></div>
        </div>
    </div>
    <div class="com__multifield__toolbar" data-node="toolbar:{}:container">
        <div class="com__multifield__item">
            <div class="icon add linked" data-node="add" title="Add"></div>
        </div>
    </div>
</div></textarea>

        <p>or</p>

        <textarea class="pt__box-code cm-autoresize" readonly>
<script type="text/javascript">
    cm.onReady(function(){
        new Com.Collector()
            .add('multifield', function(node){
                new Com.MultiField({
                    'node' : node,
                    'container' : node,
                    'renderStructure' : true,
                    'embedStructureOnRender' : true,
                    'events' : {
                        'onItemAdd' : function(that, item){
                            item['field'].appendChild(
                                cm.node('input', {'type' : 'text'})
                            );
                        }
                    }
                });
            })
            .construct()
    });
</script>

<div data-element="multifield"></div></textarea>
    </li>

    <li data-node="tabs:[]:container" data-config='{"id" : "methods", "title" : "Methods"}'>
        <h2>Add field:</h2>
        <pre class="pt__box-code">multifield.addItem();</pre>
        <p>Returns class of multifield component.</p>

        <h2>Remove field:</h2>
        <pre class="pt__box-code">multifield.removeItem(<i>item or index</i>);</pre>
        <p>Returns class of multifield component.</p>

        <h2>Get field:</h2>
        <pre class="pt__box-code">multifield.getItem(<i>index</i>);</pre>
        <p>Returns field item.</p>

        <h2>Get all fields:</h2>
        <pre class="pt__box-code">multifield.getItems();</pre>
        <p>Returns fields array.</p>

        <h2>Set event:</h2>
        <pre class="pt__box-code">multifield.addEvent(event, handler);</pre>
        <p>Available events: onRender, onItemAdd, onItemRemove, onItemProcess, onItemSort, onItemIndexChange.  Returns class of multifield component.</p>

        <h2>Remove event:</h2>
        <pre class="pt__box-code">multifield.removeEvent(event, handler);</pre>
        <p>Available events: onRender, onItemAdd, onItemRemove, onItemProcess, onItemSort, onItemIndexChange.  Returns class of multifield component.</p>

        <h2>Trigger event:</h2>
        <pre class="pt__box-code">multifield.triggerEvent(event);</pre>
        <p>Available events: onRender, onItemAdd, onItemRemove, onItemProcess, onItemSort, onItemIndexChange.  Returns class of multifield component.</p>
    </li>

    <li data-node="tabs:[]:container" data-config='{"id" : "examples", "title" : "Examples"}'>
        <h2>Render component structure and field template via Java-Script</h2>
        <textarea class="pt__box-code cm-autoresize" readonly>
<script type="text/javascript">
    new Com.MultiField({
        'node' : node,
        'container' : node,
        'renderStructure' : true,
        'renderItems' : 1,
        'events' : {
            'onItemAdd' : function(that, item){
                item['field'].appendChild(
                    cm.node('input', {'type' : 'text'})
                );
            }
        }
    });
</script>

<div data-element="multifield"></div></textarea>
        <div data-element="multifield" name="sample-javascript"></div>

        <hr>

        <h2>Render field template via Java-Script</h2>
        <textarea class="pt__box-code cm-autoresize" readonly>
<script type="text/javascript">
    new Com.MultiField({
        'node' : node,
        'events' : {
            'onItemAdd' : function(that, item){
                item['field'].appendChild(
                    cm.node('input', {'type' : 'text'})
                );
            }
        }
    });
</script>

<div class="com__multifield" data-element="multifield" data-node="ComMultiField:{}:container">
    <div class="com__multifield__content" data-node="content">
        <div class="com__multifield__item" data-node="items:[]:container">
            <div class="icon drag linked" data-node="drag"></div>
            <div class="field" data-node="field">
                <input type="text">
            </div>
            <div class="icon remove linked" data-node="remove" title="Remove"></div>
        </div>
    </div>
    <div class="com__multifield__toolbar" data-node="toolbar:{}:container">
        <div class="com__multifield__item">
            <div class="icon add linked" data-node="add" title="Add"></div>
        </div>
    </div>
</div></textarea>
        <div class="com__multifield" data-element="multifield" data-node="ComMultiField:{}:container" name="sample-template">
            <div class="com__multifield__content" data-node="content">
                <div class="com__multifield__item" data-node="items:[]:container">
                    <div class="icon drag linked" data-node="drag"></div>
                    <div class="field" data-node="field">
                        <input type="text">
                    </div>
                    <div class="icon remove linked" data-node="remove" title="Remove"></div>
                </div>
            </div>
            <div class="com__multifield__toolbar" data-node="toolbar:{}:container">
                <div class="com__multifield__item">
                    <div class="icon add linked" data-node="add" title="Add"></div>
                </div>
            </div>
        </div>

        <hr>

        <h2>Set field template via config or parameter</h2>
        <textarea class="pt__box-code cm-autoresize" readonly>
<script type="text/javascript">
    new Com.MultiField({
        'node' : node
    });
</script>

<div class="com__multifield" data-element="multifield" data-node="ComMultiField:{}:container" data-config='{"template":"<input type=\"text\">"}'>
    <div class="com__multifield__content" data-node="content">
        <div class="com__multifield__item" data-node="items:[]:container">
            <div class="icon drag linked" data-node="drag"></div>
            <div class="field" data-node="field">
                <input type="text">
            </div>
            <div class="icon remove linked" data-node="remove" title="Remove"></div>
        </div>
    </div>
    <div class="com__multifield__toolbar" data-node="toolbar:{}:container">
        <div class="com__multifield__item">
            <div class="icon add linked" data-node="add" title="Add"></div>
        </div>
    </div>
</div></textarea>
        <div class="com__multifield" data-element="multifield" data-node="ComMultiField:{}:container" data-config='{"template":"<input type=\"text\">"}'>
            <div class="com__multifield__content" data-node="content">
                <div class="com__multifield__item" data-node="items:[]:container">
                    <div class="icon drag linked" data-node="drag"></div>
                    <div class="field" data-node="field">
                        <input type="text">
                    </div>
                    <div class="icon remove linked" data-node="remove" title="Remove"></div>
                </div>
            </div>
            <div class="com__multifield__toolbar" data-node="toolbar:{}:container">
                <div class="com__multifield__item">
                    <div class="icon add linked" data-node="add" title="Add"></div>
                </div>
            </div>
        </div>

        <hr>

        <h2>Template attribute replacement</h2>
        <textarea class="pt__box-code cm-autoresize" readonly>
<script type="text/javascript">
    new Com.MultiField({
        'node' : node
    });
</script>

<div class="com__multifield" data-element="multifield" data-node="ComMultiField:{}:container" data-config='{"template":"<input type=\"text\" data-attributes-name=\"test[%index%]\">", "templateAttributeReplace" : true}'>
    <div class="com__multifield__content" data-node="content">
        <div class="com__multifield__item" data-node="items:[]:container">
            <div class="icon drag linked" data-node="drag"></div>
            <div class="field" data-node="field">
                <input type="text" name="test[0]" data-attributes-name="test[%index%]">
            </div>
            <div class="icon remove linked" data-node="remove" title="Remove"></div>
        </div>
    </div>
    <div class="com__multifield__toolbar" data-node="toolbar:{}:container">
        <div class="com__multifield__item">
            <div class="icon add linked" data-node="add" title="Add"></div>
        </div>
    </div>
</div></textarea>
        <div class="com__multifield" data-element="multifield" data-node="ComMultiField:{}:container" data-config='{"template":"<input type=\"text\" data-attributes-name=\"test[%index%]\">", "templateAttributeReplace" : true}'>
            <div class="com__multifield__content" data-node="content">
                <div class="com__multifield__item" data-node="items:[]:container">
                    <div class="icon drag linked" data-node="drag"></div>
                    <div class="field" data-node="field">
                        <input type="text" name="test[0]" data-attributes-name="test[%index%]">
                    </div>
                    <div class="icon remove linked" data-node="remove" title="Remove"></div>
                </div>
            </div>
            <div class="com__multifield__toolbar" data-node="toolbar:{}:container">
                <div class="com__multifield__item">
                    <div class="icon add linked" data-node="add" title="Add"></div>
                </div>
            </div>
        </div>

        <hr>

        <h2>Limit max field count</h2>
        <div class="com__multifield" data-element="multifield" data-node="ComMultiField:{}:container" data-config='{"max" : 3, "template":"<input type=\"text\">"}'>
            <div class="com__multifield__content" data-node="content">
                <div class="com__multifield__item" data-node="items:[]:container">
                    <div class="icon drag linked" data-node="drag"></div>
                    <div class="field" data-node="field">
                        <input type="text">
                    </div>
                    <div class="icon remove linked" data-node="remove" title="Remove"></div>
                </div>
            </div>
            <div class="com__multifield__toolbar" data-node="toolbar:{}:container">
                <div class="com__multifield__item">
                    <div class="icon add linked" data-node="add" title="Add"></div>
                </div>
            </div>
        </div>

        <hr>

        <h2>Only edit pre-rendered fields</h2>
        <div class="com__multifield" data-element="multifield" data-node="ComMultiField:{}:container" data-config='{"mode" : "edit"}'>
            <div class="com__multifield__content" data-node="content">
                <div class="com__multifield__item" data-node="items:[]:container" data-config='{"id" : "input"}'>
                    <div class="icon drag linked" data-node="drag"></div>
                    <div class="field" data-node="field">
                        <input type="hidden" autocomplete="off" value="1" data-node="field-hidden-visible">
                        <input type="hidden" autocomplete="off" data-node="field-hidden-index">
                        <input type="text">
                    </div>
                    <div class="icon remove linked" data-node="remove" title="Remove"></div>
                </div>
                <div class="com__multifield__item" data-node="items:[]:container" data-config='{"id" : "textarea"}'>
                    <div class="icon drag linked" data-node="drag"></div>
                    <div class="field" data-node="field">
                        <input type="hidden" autocomplete="off" value="0" data-node="field-hidden-visible">
                        <input type="hidden" autocomplete="off" data-node="field-hidden-index">
                        <textarea></textarea>
                    </div>
                    <div class="icon remove linked" data-node="remove" title="Remove"></div>
                </div>
                <div class="com__multifield__item" data-node="items:[]:container" data-config='{"id" : "select"}'>
                    <div class="icon drag linked" data-node="drag"></div>
                    <div class="field" data-node="field">
                        <input type="hidden" autocomplete="off" value="1" data-node="field-hidden-visible">
                        <input type="hidden" autocomplete="off" data-node="field-hidden-index">
                        <select data-element="Com.Select"></select>
                    </div>
                    <div class="icon remove linked" data-node="remove" title="Remove"></div>
                </div>
            </div>
            <div class="com__multifield__toolbar" data-node="toolbar:{}:container">
                <div class="pt__buttons pull-center">
                    <div class="inner">
                        <div class="button button-transparent has-icon has-icon-small" data-node="buttons:[]:container" data-config='{"id" : "input"}'>
                            <div class="icon small add"></div>
                            <div class="label">Add input</div>
                        </div>
                        <div class="button button-transparent has-icon has-icon-small" data-node="buttons:[]:container" data-config='{"id" : "textarea"}'>
                            <div class="icon small add"></div>
                            <div class="label">Add textarea</div>
                        </div>
                        <div class="button button-transparent has-icon has-icon-small" data-node="buttons:[]:container" data-config='{"id" : "select"}'>
                            <div class="icon small add"></div>
                            <div class="label">Add select</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr>

        <h2>Theme: Cards</h2>
        <div class="com__multifield" data-element="multifield" data-node="ComMultiField:{}:container" data-config='{"theme" : "theme-cards", "template":"<input type=\"text\">"}'>
            <div class="com__multifield__content" data-node="content">
                <div class="com__multifield__item" data-node="items:[]:container">
                    <div class="icon drag linked" data-node="drag"></div>
                    <div class="field" data-node="field">
                        <input type="text">
                    </div>
                    <div class="icon remove linked" data-node="remove" title="Remove"></div>
                </div>
            </div>
            <div class="com__multifield__toolbar" data-node="toolbar:{}:container">
                <div class="com__multifield__item">
                    <div class="icon add linked" data-node="add" title="Add"></div>
                </div>
            </div>
        </div>
    </li>
</ul>

</body>
</html>