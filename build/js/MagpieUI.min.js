function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof2(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _regeneratorRuntime(){_regeneratorRuntime=function(){return s};var c,s={},e=Object.prototype,d=e.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(c){o=function(e,t,n){return e[t]=n}}function i(e,t,n,a){var r,o,s,i,t=t&&t.prototype instanceof v?t:v,t=Object.create(t.prototype),a=new x(a||[]);return l(t,"_invoke",{value:(r=e,o=n,s=a,i=u,function(e,t){if(i===h)throw Error("Generator is already running");if(i===g){if("throw"===e)throw t;return{value:c,done:!0}}for(s.method=e,s.arg=t;;){var n=s.delegate;if(n){n=function e(t,n){var a=n.method,r=t.iterator[a];if(r===c)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=c,e(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),f;a=m(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;r=a.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=c),n.delegate=null,f):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}(n,s);if(n){if(n===f)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(i===u)throw i=g,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);i=h;n=m(r,o,s);if("normal"===n.type){if(i=s.done?g:p,n.arg===f)continue;return{value:n.arg,done:s.done}}"throw"===n.type&&(i=g,s.method="throw",s.arg=n.arg)}})}),t}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}s.wrap=i;var u="suspendedStart",p="suspendedYield",h="executing",g="completed",f={};function v(){}function b(){}function y(){}var t={},C=(o(t,a,function(){return this}),Object.getPrototypeOf),C=C&&C(C(P([]))),E=(C&&C!==e&&d.call(C,a)&&(t=C),y.prototype=v.prototype=Object.create(t));function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function S(s,i){var t;l(this,"_invoke",{value:function(n,a){function e(){return new i(function(e,t){!function t(e,n,a,r){var o,e=m(s[e],s,n);if("throw"!==e.type)return(n=(o=e.arg).value)&&"object"==_typeof2(n)&&d.call(n,"__await")?i.resolve(n.__await).then(function(e){t("next",e,a,r)},function(e){t("throw",e,a,r)}):i.resolve(n).then(function(e){o.value=e,a(o)},function(e){return t("throw",e,a,r)});r(e.arg)}(n,a,e,t)})}return t=t?t.then(e,e):e()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var n,e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(d.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=c,e.done=!0,e}).next=e}throw new TypeError(_typeof2(t)+" is not iterable")}return l(E,"constructor",{value:b.prototype=y,configurable:!0}),l(y,"constructor",{value:b,configurable:!0}),b.displayName=o(y,r,"GeneratorFunction"),s.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,o(e,r,"GeneratorFunction")),e.prototype=Object.create(E),e},s.awrap=function(e){return{__await:e}},w(S.prototype),o(S.prototype,n,function(){return this}),s.AsyncIterator=S,s.async=function(e,t,n,a,r){void 0===r&&(r=Promise);var o=new S(i(e,t,n,a),r);return s.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},w(E),o(E,r,"Generator"),o(E,a,function(){return this}),o(E,"toString",function(){return"[object Generator]"}),s.keys=function(e){var t,n=Object(e),a=[];for(t in n)a.push(t);return a.reverse(),function e(){for(;a.length;){var t=a.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=P,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&d.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var a=this;function e(e,t){return o.type="throw",o.arg=n,a.next=e,t&&(a.method="next",a.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=d.call(r,"catchLoc"),i=d.call(r,"finallyLoc");if(s&&i){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!i)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&d.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}var o=(r=r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc?null:r)?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,a,r=this.tryEntries[t];if(r.tryLoc===e)return"throw"===(n=r.completion).type&&(a=n.arg,_(r)),a}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=c),f}},s}function asyncGeneratorStep(e,t,n,a,r,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(a,r)}function _asyncToGenerator(i){return function(){var e=this,s=arguments;return new Promise(function(t,n){var a=i.apply(e,s);function r(e){asyncGeneratorStep(a,t,n,r,o,"next",e)}function o(e){asyncGeneratorStep(a,t,n,r,o,"throw",e)}r(void 0)})}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}((e,t)=>{"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).tinycolor=t()})(this,function(){function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=/^\s+/,l=/\s+$/;function m(e,t){var n;return t=t||{},(e=e||"")instanceof m?e:this instanceof m?(n=(e=>{var t={r:0,g:0,b:0},n=1,a=null,r=null,o=null,s=!1,i=!1;return"string"==typeof e&&(e=(e=>{e=e.replace(d,"").replace(l,"").toLowerCase();var t,n=!1;if(C[e])e=C[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=H.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=H.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=H.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=H.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=H.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=H.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=H.hex8.exec(e))?{r:_(t[1]),g:_(t[2]),b:_(t[3]),a:A(t[4]),format:n?"name":"hex8"}:(t=H.hex6.exec(e))?{r:_(t[1]),g:_(t[2]),b:_(t[3]),format:n?"name":"hex"}:(t=H.hex4.exec(e))?{r:_(t[1]+""+t[1]),g:_(t[2]+""+t[2]),b:_(t[3]+""+t[3]),a:A(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=H.hex3.exec(e))&&{r:_(t[1]+""+t[1]),g:_(t[2]+""+t[2]),b:_(t[3]+""+t[3]),format:n?"name":"hex"}})(e)),n=w(n="object"==c(e)&&(F(e.r)&&F(e.g)&&F(e.b)?(t=((e,t,n)=>({r:255*S(e,255),g:255*S(t,255),b:255*S(n,255)}))(e.r,e.g,e.b),s=!0,i="%"===String(e.r).substr(-1)?"prgb":"rgb"):F(e.h)&&F(e.s)&&F(e.v)?(a=P(e.s),r=P(e.v),t=((e,t,n)=>{e=6*S(e,360),t=S(t,100),n=S(n,100);var a=Math.floor(e),r=n*(1-t),o=n*(1-(e=e-a)*t);return{r:255*[n,o,r,r,e=n*(1-(1-e)*t),n][t=a%6],g:255*[e,n,n,o,r,r][t],b:255*[r,r,e,n,n,o][t]}})(e.h,a,r),s=!0,i="hsv"):F(e.h)&&F(e.s)&&F(e.l)&&(a=P(e.s),o=P(e.l),t=((e,t,n)=>{var a,r,o;function s(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}return e=S(e,360),t=S(t,100),n=S(n,100),0===t?a=r=o=n:(a=s(t=2*n-(n=n<.5?n*(1+t):n+t-n*t),n,e+1/3),r=s(t,n,e),o=s(t,n,e-1/3)),{r:255*a,g:255*r,b:255*o}})(e.h,a,o),s=!0,i="hsl"),e.hasOwnProperty("a"))?e.a:n),{ok:s,format:e.format||i,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}})(e),this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),void(this._ok=n.ok)):new m(e,t)}function a(e,t,n){e=S(e,255),t=S(t,255),n=S(n,255);var a,r=Math.max(e,t,n),o=Math.min(e,t,n),s=(r+o)/2;if(r==o)a=c=0;else{var i=r-o,c=.5<s?i/(2-r-o):i/(r+o);switch(r){case e:a=(t-n)/i+(t<n?6:0);break;case t:a=(n-e)/i+2;break;case n:a=(e-t)/i+4}a/=6}return{h:a,s:c,l:s}}function r(e,t,n){e=S(e,255),t=S(t,255),n=S(n,255);var a,r=Math.max(e,t,n),o=Math.min(e,t,n),s=r,i=r-o,c=0===r?0:i/r;if(r==o)a=0;else{switch(r){case e:a=(t-n)/i+(t<n?6:0);break;case t:a=(n-e)/i+2;break;case n:a=(e-t)/i+4}a/=6}return{h:a,s:c,v:s}}function t(e,t,n,a){e=[x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16))];return a&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function o(e,t,n,a){return[x(T(a)),x(Math.round(e).toString(16)),x(Math.round(t).toString(16)),x(Math.round(n).toString(16))].join("")}function e(e,t){t=0===t?0:t||10;e=m(e).toHsl();return e.s-=t/100,e.s=k(e.s),m(e)}function n(e,t){t=0===t?0:t||10;e=m(e).toHsl();return e.s+=t/100,e.s=k(e.s),m(e)}function s(e){return m(e).desaturate(100)}function i(e,t){t=0===t?0:t||10;e=m(e).toHsl();return e.l+=t/100,e.l=k(e.l),m(e)}function u(e,t){t=0===t?0:t||10;e=m(e).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(-t/100*255))),e.g=Math.max(0,Math.min(255,e.g-Math.round(-t/100*255))),e.b=Math.max(0,Math.min(255,e.b-Math.round(-t/100*255))),m(e)}function p(e,t){t=0===t?0:t||10;e=m(e).toHsl();return e.l-=t/100,e.l=k(e.l),m(e)}function h(e,t){e=m(e).toHsl(),t=(e.h+t)%360;return e.h=t<0?360+t:t,m(e)}function g(e){e=m(e).toHsl();return e.h=(e.h+180)%360,m(e)}function f(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=m(e).toHsl(),a=[m(e)],r=360/t,o=1;o<t;o++)a.push(m({h:(n.h+o*r)%360,s:n.s,l:n.l}));return a}function v(e){var t=m(e).toHsl(),n=t.h;return[m(e),m({h:(n+72)%360,s:t.s,l:t.l}),m({h:(n+216)%360,s:t.s,l:t.l})]}function b(e,t,n){t=t||6,n=n||30;var a=m(e).toHsl(),r=360/n,o=[m(e)];for(a.h=(a.h-(r*t>>1)+720)%360;--t;)a.h=(a.h+r)%360,o.push(m(a));return o}function y(e,t){t=t||6;for(var e=m(e).toHsv(),n=e.h,a=e.s,r=e.v,o=[],s=1/t;t--;)o.push(m({h:n,s:a,v:r})),r=(r+s)%1;return o}m.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,e=e.b/255,t=t<=.03928?t/12.92:Math.pow((.055+t)/1.055,2.4),n=n<=.03928?n/12.92:Math.pow((.055+n)/1.055,2.4),e=e<=.03928?e/12.92:Math.pow((.055+e)/1.055,2.4);return.2126*t+.7152*n+.0722*e},setAlpha:function(e){return this._a=w(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=r(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),e=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+e+"%)":"hsva("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),e=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+e+"%)":"hsla("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){var t=this._r,n=this._g,a=this._b,r=this._a;return t=[x(Math.round(t).toString(16)),x(Math.round(n).toString(16)),x(Math.round(a).toString(16)),x(T(r))],e&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)&&t[3].charAt(0)==t[3].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0)+t[3].charAt(0):t.join("")},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*S(this._r,255))+"%",g:Math.round(100*S(this._g,255))+"%",b:Math.round(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*S(this._r,255))+"%, "+Math.round(100*S(this._g,255))+"%, "+Math.round(100*S(this._b,255))+"%)":"rgba("+Math.round(100*S(this._r,255))+"%, "+Math.round(100*S(this._g,255))+"%, "+Math.round(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&E[t(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+o(this._r,this._g,this._b,this._a),n=t;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+t+",endColorstr="+(n=e?"#"+o((t=m(e))._r,t._g,t._b,t._a):n)+")"},toString:function(e){var t=!!e,n=(e=e||this._format,!1),a=this._a<1&&0<=this._a;return t||!a||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),(n="hsv"===e?this.toHsvString():n)||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return m(this.toString())},_applyModification:function(e,t){e=e.apply(null,[this].concat([].slice.call(t)));return this._r=e._r,this._g=e._g,this._b=e._b,this.setAlpha(e._a),this},lighten:function(){return this._applyModification(i,arguments)},brighten:function(){return this._applyModification(u,arguments)},darken:function(){return this._applyModification(p,arguments)},desaturate:function(){return this._applyModification(e,arguments)},saturate:function(){return this._applyModification(n,arguments)},greyscale:function(){return this._applyModification(s,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(b,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(y,arguments)},splitcomplement:function(){return this._applyCombination(v,arguments)},triad:function(){return this._applyCombination(f,[3])},tetrad:function(){return this._applyCombination(f,[4])}},m.fromRatio=function(e,t){if("object"==c(e)){var n,a={};for(n in e)e.hasOwnProperty(n)&&(a[n]="a"===n?e[n]:P(e[n]));e=a}return m(e,t)},m.equals=function(e,t){return!(!e||!t)&&m(e).toRgbString()==m(t).toRgbString()},m.random=function(){return m.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},m.mix=function(e,t,n){n=0===n?0:n||50;e=m(e).toRgb(),t=m(t).toRgb(),n/=100;return m({r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b,a:(t.a-e.a)*n+e.a})},m.readability=function(e,t){e=m(e),t=m(t);return(Math.max(e.getLuminance(),t.getLuminance())+.05)/(Math.min(e.getLuminance(),t.getLuminance())+.05)},m.isReadable=function(e,t,n){var a=m.readability(e,t),r=!1,e=(e=>{var t;return t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),e=(e.size||"small").toLowerCase(),{level:t="AA"!==t&&"AAA"!==t?"AA":t,size:e="small"!==e&&"large"!==e?"small":e}})(n);switch(e.level+e.size){case"AAsmall":case"AAAlarge":r=4.5<=a;break;case"AAlarge":r=3<=a;break;case"AAAsmall":r=7<=a}return r},m.mostReadable=function(e,t,n){for(var a,r=null,o=0,s=(n=n||{}).includeFallbackColors,i=n.level,c=n.size,d=0;d<t.length;d++)o<(a=m.readability(e,t[d]))&&(o=a,r=m(t[d]));return m.isReadable(e,r,{level:i,size:c})||!s?r:(n.includeFallbackColors=!1,m.mostReadable(e,["#fff","#000"],n))};var C=m.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},E=m.hexNames=(e=>{var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n})(C);function w(e){return e=parseFloat(e),e=isNaN(e)||e<0||1<e?1:e}function S(e,t){"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var n="string"==typeof(n=e)&&-1!=n.indexOf("%");return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function k(e){return Math.min(1,Math.max(0,e))}function _(e){return parseInt(e,16)}function x(e){return 1==e.length?"0"+e:""+e}function P(e){return e=e<=1?100*e+"%":e}function T(e){return Math.round(255*parseFloat(e)).toString(16)}function A(e){return _(e)/255}D="[\\s|\\(]+("+(R="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?",I="[\\s|\\(]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?";var R,D,I,H={CSS_UNIT:new RegExp(R),rgb:new RegExp("rgb"+D),rgba:new RegExp("rgba"+I),hsl:new RegExp("hsl"+D),hsla:new RegExp("hsla"+I),hsv:new RegExp("hsv"+D),hsva:new RegExp("hsva"+I),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function F(e){return H.CSS_UNIT.exec(e)}return m}),window.URL=window.URL||window.webkitURL;var cm={_version:"3.101.2",_lang:"en",_locale:"en-IN",_loadTime:Date.now(),_isDocumentReady:!1,_isDocumentLoad:!1,_debug:!0,_debugAlert:!1,_deviceType:"desktop",_deviceOrientation:"landscape",_adaptive:!1,_baseUrl:[window.location.protocol,window.location.hostname].join("//"),_pathUrl:"",_assetsUrl:[window.location.protocol,window.location.hostname].join("//"),_scrollSize:0,_pageSize:{},_clientPosition:{left:0,top:0},_config:{redrawOnLoad:!0,motionAsymmetric:"cubic-bezier(.5,0,.15,1)",motionSmooth:"ease-in-out",animDuration:250,animDurationShort:150,animDurationLong:500,loadDelay:500,lazyDelay:1e3,hideDelay:250,hideDelayShort:150,hideDelayLong:500,autoHideDelay:2e3,requestDelay:300,adaptiveFrom:768,screenTablet:1024,screenTabletPortrait:768,screenMobile:640,screenMobilePortrait:480,screenXSmall:375,dateFormat:"%Y-%m-%d",dateTimeFormat:"%Y-%m-%d %H:%i:%s",dateFormatCase:"nominative",timeFormat:"%H:%i:%s",displayDateFormat:"%F %j, %Y",displayDateTimeFormat:"%F %j, %Y, %H:%i",displayDateFormatCase:"nominative",tooltipIndent:4,tooltipTop:"targetHeight + 4",tooltipDown:"targetHeight + 4",tooltipUp:"- (selfHeight + 4)",tooltipLeft:"targetWidth + 4",tooltipRight:"- (selfWidth + 4)",fileExtensions:{image:"jpg|jpeg|png|gif|bmp|tga|svg|tiff|webp",video:"avi|ogg|mpeg|mp4|m4a|m4b|mov|wmv|webm"},fileTypes:{image:/image\/.*/,video:/video\/(mp4|webm|ogg|avi|mp4|mov|mpg|x-ms-wmv|quicktime)/,embed:/application\/pdf/}},_variables:{"%baseUrl%":"cm._baseUrl","%assetsUrl%":"cm._assetsUrl","%pathUrl%":"cm._pathUrl","%version%":"cm._version"},_strings:{common:{server_error:"An unexpected error has occurred. Please try again later."},months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysAbbr:["S","M","T","W","T","F","S"]}},Mod={},Part={},Com={Elements:{}},animFrame=(cm.getBreakpoints=function(){return{desktop:cm._config.screenTablet,desktopUp:cm._config.screenTablet,desktopDown:cm._config.screenTablet-1,tablet:cm._config.screenTabletPortrait,tabletUp:cm._config.screenTabletPortrait+1,tabletDown:cm._config.screenTabletPortrait,mobile:cm._config.screenMobile,mobileUp:cm._config.screenMobile+1,mobileDown:cm._config.screenMobile,small:cm._config.screenMobilePortrait,smallUp:cm._config.screenMobilePortrait+1,smallDown:cm._config.screenMobilePortrait,xSmall:cm._config.screenXSmall,xSmallUp:cm._config.screenXSmall+1,xSmallDown:cm._config.screenXSmall}},cm.getBreakpoint=function(){var n=cm._pageSize||cm.getPageSize(),a=[];return cm.forEach(cm._breakpoints,function(e,t){-1<t.indexOf("Up")&&n.winWidth>=e&&a.push(t),-1<t.indexOf("Down")&&n.winWidth<=e&&a.push(t)}),a},cm.isBreakpoint=function(e){return cm.isArray(e)?e.some(function(e){return cm.inArray(cm._breakpoint,e)}):cm.inArray(cm._breakpoint,e)},cm.isFileReader="FileReader"in window,cm.isHistoryAPI=!(!window.history||!history.pushState),cm.isLocalStorage=(()=>{try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}})(),cm.isSessionStorage=(()=>{try{return"sessionStorage"in window&&null!==window.sessionStorage}catch(e){return!1}})(),cm.isCanvas=!!document.createElement("canvas").getContext,cm.hasBeacon=!!navigator.sendBeacon,cm.hasPointerEvent=!!window.PointerEvent,cm.isMotionReduced=function(){return!0===window.matchMedia("(prefers-reduced-motion: reduce)")||!0===window.matchMedia("(prefers-reduced-motion: reduce)").matches},cm._getVariables=function(){var n={};return cm.forEach(cm._variables,function(e,t){n[t]=cm.reducePath(e,window)}),n},cm.top=(()=>{try{return window.top.cm}catch(e){return window.cm}})(),cm.isType=function(t,e){var n;return cm.isString(e)?Object.prototype.toString.call(t)==="[object "+e+"]":cm.isRegExp(e)?e.test(Object.prototype.toString.call(t)):!!cm.isObject(e)&&(n=!1,cm.forEach(e,function(e){n=n||Object.prototype.toString.call(t)==="[object "+e+"]"}),n)},cm.isBoolean=function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},cm.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},cm.isNumber=function(e){return"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)},cm.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},cm.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},cm.isArguments=function(e){return"[object Arguments]"===Object.prototype.toString.call(e)},cm.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)||"[object AsyncFunction]"===Object.prototype.toString.call(e)},cm.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},cm.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},cm.isFile=function(e){return"[object File]"===Object.prototype.toString.call(e)},cm.isWindow=function(e){return"[object Window]"===Object.prototype.toString.call(e)||"[object global]"===Object.prototype.toString.call(e)},cm.isNode=function(e){try{return!(!e||!e.nodeType||9===e.nodeType)}catch(e){}return!1},cm.isTextNode=function(e){try{return!(!e||!e.nodeType||3!==e.nodeType)}catch(e){}return!1},cm.isElementNode=function(e){try{return!(!e||!e.nodeType||1!==e.nodeType)}catch(e){}return!1},cm.isTagName=function(e,t){return cm.isElementNode(e)&&e.tagName.toLowerCase()===t.toLowerCase()},cm.isPlainObject=function(e){var t;return"object"===_typeof2(e)&&null!==e&&("function"==typeof Object.getPrototypeOf?(t=Object.getPrototypeOf(e))===Object.prototype||null===t:"[object Object]"===Object.prototype.toString.call(e))},cm.forEach=function(t,n){var a,r;if(t&&n&&"function"==typeof n)if(cm.isObject(t))for(var e in t)t.hasOwnProperty(e)&&n(t[e],e,t);else if(cm.isArray(t))t.forEach(n);else if(cm.isNumber(t))for(a=0;a<t;a++)n(a);else try{Array.prototype.forEach.call(t,n)}catch(e){try{for(a=0,r=t.length;a<r;a++)n(t[a],a,t)}catch(e){}}return t},cm.forEachReverse=function(e,t){return e?(t&&(e.reverse(),cm.forEach(e,t),e.reverse()),e):null},cm.merge=function(e,t){var a;return t=t||(cm.isArray(e)?[]:{}),e=e||(cm.isArray(t)?[]:{}),cm.isObject(e)?(a=cm.clone(e),cm.forEach(t,function(t,n){try{void 0===t||t._isComponent?a[n]=t:cm.isObject(t)?cm.isObject(a[n])?a[n]=cm.merge(a[n],t):a[n]=cm.clone(t):cm.isArray(t)?a[n]=cm.clone(t):a[n]=t}catch(e){a[n]=t}})):cm.isArray(e)&&(a=cm.clone(e),cm.forEach(t,function(e){cm.inArray(a,e)||a.push(e)})),a},cm.extend=function(e,t,n,a){var r;return e?t?(n=!cm.isUndefined(n)&&n,a=!!cm.isUndefined(a)||a,cm.isArray(e)?e.concat(t):cm.isObject(e)?(r=a?cm.clone(e):e,cm.forEach(t,function(e,t){r[t]=n?cm.extend(r[t],e,n,a):e}),r):t):e:t},cm.join=function(e,t){return e.filter(function(e){return!cm.isEmpty(e)}).join(t)},cm.extract=function(e,t){var n;return e?t?cm.isArray(e)?e.filter(function(e){return!cm.inArray(t,e)}):n:e:t},cm.clone=function(e,n,a){var r;return e&&(n=!cm.isUndefined(n)&&n,a=!!cm.isUndefined(a)||a,cm.isType(e,"Arguments")?[].slice.call(e):cm.isType(e,/Array|StyleSheetList|CSSRuleList|HTMLCollection|NodeList|DOMTokenList|FileList/)?a?(r=[],cm.forEach(e,function(e){r.push(cm.clone(e,n))}),r):[].slice.call(e):cm.isObject(e)&&!e._isComponent?(r={},cm.forEach(e,function(e,t){r[t]=a?cm.clone(e,n):e}),r):cm.isDate(e)?((r=new Date).setTime(e.getTime()),r):cm.isNode(e)?r=n?e.cloneNode(!0):e:e)},cm.getLength=function(e){return(cm.isArray(e)?e:Object.keys(e)).length},cm.getCount=function(e){var t=0;return cm.forEach(e,function(e){cm.isUndefined(e)||t++}),t},cm.arrayIndex=function(e,t){return Array.prototype.indexOf.call(e,t)},cm.inArray=function(e,t){return cm.isString(e)?e===t:!!cm.isArray(e)&&e.includes(t)},cm.arrayRemove=function(e,t){t=cm.arrayIndex(e,t);return-1<t&&e.splice(t,1),e},cm.arrayClear=function(e){for(;0<e.length;)e.pop();return e},cm.arrayAdd=function(e,t,n){return n&&(e=cm.arrayRemove(e,t)),cm.inArray(e,t)||e.push(t),e},cm.arrayPrepend=function(e,t,n){return n&&(e=cm.arrayRemove(e,t)),cm.inArray(e,t)||e.unshift(t),e},cm.arrayFilter=function(e,t){return e.filter(function(e){return!t.includes(e)})},cm.arraySort=function(e,n,t,a){var r;if(!cm.isArray(e))return e;switch(t=cm.isUndefined(t)?"asc":t.toLowerCase(),t=cm.inArray(["asc","desc"],t)?t:"asc",r=(a=!!cm.isUndefined(a)||a)?cm.clone(e):e,t){case"asc":r.sort(function(e,t){return cm.arraySortAsc(e,t,n)});break;case"desc":r.sort(function(e,t){return cm.arraySortDesc(e,t,n)})}return r},cm.arraySortAsc=function(e,t,n){return n?e[n]<t[n]?1:e[n]>t[n]?-1:0:e<t?1:t<e?-1:0},cm.arraySortDesc=function(e,t,n){return n?e[n]<t[n]?-1:e[n]>t[n]?1:0:e<t?-1:t<e?1:0},cm.arrayParseFloat=function(e){return e.map(Number.parseFloat)},cm.objectToArray=function(e){var t;return cm.isObject(e)?(t=[],cm.forEach(e,function(e){cm.isEmpty(e)||t.push(e)}),t):[e]},cm.arrayToObject=function(e){var n={};return e.forEach(function(e,t){"object"===_typeof2(e)?n[t]=e:n[e]=e}),n},cm.objectReplace=function(e,n,a){var r,o=cm.isArray(e)?[]:{};return a=!!cm.isUndefined(a)||a,cm.forEach(e,function(e,t){r=cm.isString(t)&&a?cm.strReplace(t,n):t,cm.isObject(e)?o[r]=cm.objectReplace(e,n,a):cm.isString(e)?o[r]=cm.strReplace(e,n):o[r]=e}),o},cm.getDiffCompare=function(e,t){var n={};return cm.diffCompare(n,e,t,"key"),n.key},cm.isEmpty=function(e){return!!cm.isUndefined(e)||(cm.isString(e)||cm.isArray(e)?0===e.length:!!cm.isObject(e)&&0===cm.getLength(e))},cm.isUndefined=function(e){return null==e},cm.objectFormPath=function(e,n,t){var a={},r=a,e=e.toString().split("."),o=e.length;return t=cm.isUndefined(t)?{}:t,n=cm.isEmpty(n)?t:n,e.map(function(e,t){o===t+1?r[e]=n:r=r[e]={}}),a},cm.objectSelector=function(e,t,n){if(cm.isUndefined(t)||cm.isUndefined(e))return t;e=e.toString().split(".");var a=t,r=e.length;return cm.forEach(e,function(e,t){a[e]||(a[e]={}),n&&t===r-1&&(a[e]=n),a=a[e]}),a},cm.reducePath=cm.objectPath=function(e,t){return cm.isUndefined(t)||cm.isUndefined(e)?t:(e=e.toString().split(".")).reduce(function(e,t){return cm.isUndefined(e)?void 0:e[t]},t)},cm.fillDataMap=function(e,n){var a,r={};return cm.forEach(e,function(e,t){a=cm.reducePath(e,n),cm.isEmpty(a)&&/[{%]\w+[%}]/.test(e)&&(a=cm.fillVariables(e,n)),cm.isEmpty(a)||(r[t]=a)}),r},cm.objectFillVariables=function(e,n,a,r){var o,s=cm.isArray(e)?[]:{};return r=!!cm.isUndefined(r)||r,a=!cm.isUndefined(a)&&a,cm.forEach(e,function(e,t){o=cm.isString(t)&&r?cm.fillVariables(t,n,a):t,cm.isObject(e)?s[o]=cm.objectFillVariables(e,n,a,r):cm.isString(e)?s[o]=cm.fillVariables(e,n,a):s[o]=e}),s},cm.sort=function(t,e){var e=cm.arraySort(Object.keys(t),null,e),n={};return cm.forEach(e,function(e){n[e]=t[e]}),n},cm.replaceDeep=function(e,n,a){var r=cm.clone(e);return cm.forEach(r,function(e,t){"object"===_typeof2(e)?r[t]=cm.replaceDeep(e,n,a):r[t]=e.replace(n,a)}),r},cm.log=(()=>{var e,t=[];return cm._debug&&Function.prototype.bind&&window.console?(e=Function.prototype.bind.call(console.log,console),function(){e.apply(console,arguments)}):cm._debug&&cm._debugAlert?function(){cm.forEach(arguments,function(e){t.push(e)}),alert(t.join(", "))}:function(){}})(),cm.errorLog=function(e){var e=cm.merge({type:"error",name:"",message:"",langs:{error:"Error!",success:"Success!",attention:"Attention!",common:"Common"}},e),t=[e.langs[e.type],e.name,e.message].join(" > ");switch(e.type){case"error":console.error(t);break;case"attention":console.warn(t);break;default:console.info(t)}},cm.getEvent=function(e){return e||window.event},cm.stopPropagation=function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},cm.preventDefault=function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1},cm.getObjFromEvent=cm.getEventObject=cm.getEventTarget=function(e){return e.target||e.srcElement},cm.getObjToEvent=cm.getRelatedTarget=function(e){return e.relatedTarget||e.srcElement},cm.getEventClientPosition=function(e){var t={left:0,top:0};if(e)try{t.left=e.clientX,t.top=e.clientY,e.touches&&e.touches.length?(t.left=e.touches[0].clientX,t.top=e.touches[0].clientY):e.changedTouches&&e.changedTouches.length&&(t.left=e.changedTouches[0].clientX,t.top=e.changedTouches[0].clientY)}catch(e){}return t},cm.getElementAbove=function(e){var t=e.clientX||cm._clientPosition.left,e=e.clientY||cm._clientPosition.top;return document.elementFromPoint(t,e)},cm.onSchedule=function(e){animFrame(function(){animFrame(function(){e()})})},cm.addEvent=function(e,t,n,a){return e&&(a=!cm.isUndefined(a)&&a,e.addEventListener(t,n,a)),e},cm.removeEvent=function(e,t,n,a){return e&&(a=!cm.isUndefined(a)&&a,e.removeEventListener(t,n,a)),e},cm.triggerEvent=function(e,t,n){return e&&(n=cm.merge({bubbles:!0,cancelable:!0},n),t=new Event(t,n),e.dispatchEvent(t)),e},cm.click=(()=>{var o=new Map;return{add:function(t,n,e){var a;return t&&cm.isFunction(n)&&((a=o.get(t))||(a=new Map,o.set(t,a)),a.set(n,r),cm.addEvent(t,"click",n,e),cm.addEvent(t,"keypress",r,e)),t;function r(e){e&&cm.isNotToggleKey(e)||/button|input/i.test(t.tagName)||n(e)}},remove:function(e,t,n){var a,r;return e&&cm.isFunction(t)&&(a=o.get(e))&&(r=a.get(t))&&(a.delete(t),cm.removeEvent(e,"click",t,n),cm.removeEvent(e,"keypress",r,n)),e},list:function(){return o}}})(),cm.customEvent=(()=>{var o={};return{add:function(e,t,n){return o[t]||(o[t]=[]),o[t].push({node:e,type:t,handler:cm.isFunction(n)?n:function(){}}),e},remove:function(t,e,n){return o[e]||(o[e]=[]),o[e]=o[e].filter(function(e){return e.node!==t&&e.handler!==n}),t},trigger:function(n,e,a){var r;return n?(r=!1,a=cm.merge({target:n,type:e,direction:"all",self:!0,stopPropagation:function(){r=!0}},a),o[e]&&(o[e].sort(function(e,t){return"parent"===a.direction?cm.getNodeOffsetIndex(t.node)>cm.getNodeOffsetIndex(e.node):cm.getNodeOffsetIndex(e.node)-cm.getNodeOffsetIndex(t.node)}),cm.forEach(o[e],function(e){var t=cm.merge(a,{currentTarget:e.node,item:e});if(!r)switch(t.self&&n===e.node&&e.handler(t),t.direction){case"child":cm.isParent(n,e.node,!1)&&e.handler(t);break;case"parent":cm.isParent(e.node,n,!1)&&e.handler(t);break;default:n!==e.node&&e.handler(t)}})),n):null}}})(),cm.hook=(()=>{var r={};return{get:function(e){return e?(r[e]||(r[e]=[]),r[e]):r},add:function(e,t){r[e]||(r[e]=[]),cm.isFunction(t)?r[e].push(t):cm.errorLog({name:"cm.hook",message:["Handler of event",cm.strWrap(e,'"'),"must be a function."].join(" ")})},remove:function(e,t){r[e]||(r[e]=[]),cm.isFunction(t)?r[e]=r[e].filter(function(e){return e!==t}):cm.errorLog({name:"cm.hook",message:["Handler of event",cm.strWrap(e,'"'),"must be a function."].join(" ")})},trigger:function(e,t){var n=this,a=cm.clone(arguments);a.shift(),r[e]&&cm.forEach(r[e],function(e){e.apply(n,a)})}}})(),cm.onLoad=function(e,t){t=!!cm.isUndefined(t)||t;var n=!1;try{cm.addEvent(window,"load",function(){n||(n=!0,t&&cm.errorLog({type:"common",name:"cm.onLoad",message:["Load time",Date.now()-cm._loadTime,"ms."].join(" ")}),e())})}catch(e){}},cm.onReady=function(e,t){t=!!cm.isUndefined(t)||t;function n(){a||(a=!0,t&&cm.errorLog({type:"common",name:"cm.onReady",message:["Ready time",Date.now()-cm._loadTime,"ms."].join(" ")}),e())}var a=!1;cm.addEvent(document,"DOMContentLoaded",n);try{cm.addEvent(window,"load",n)}catch(e){}},cm.addScrollEvent=function(e,t,n){return n=!cm.isUndefined(n)&&n,cm.isWindow(e)?cm.addEvent(e,"scroll",t,n):cm.isNode(e)&&(/body|html/gi.test(e.tagName)?cm.addEvent(cm.getOwnerWindow(e),"scroll",t,n):cm.addEvent(e,"scroll",t,n)),e},cm.removeScrollEvent=function(e,t,n){return n=!cm.isUndefined(n)&&n,cm.isWindow(e)&&cm.removeEvent(e,"scroll",t,n),cm.isNode(e)&&(/body|html/gi.test(e.tagName)?cm.removeEvent(cm.getOwnerWindow(e),"scroll",t,n):cm.removeEvent(e,"scroll",t,n)),e},cm.isolateScrolling=function(e){var t=this;return 0<e.deltaY&&t.clientHeight+t.scrollTop>=t.scrollHeight?(t.scrollTop=t.scrollHeight-t.clientHeight,cm.stopPropagation(e),cm.preventDefault(e),!1):!(e.deltaY<0&&t.scrollTop<=0&&(t.scrollTop=0,cm.stopPropagation(e),cm.preventDefault(e),1))},cm.addIsolateScrolling=function(e){return cm.addEvent(e,"wheel",cm.isolateScrolling),e},cm.removeIsolateScrolling=function(e){return cm.removeEvent(e,"wheel",cm.isolateScrolling),e},cm.isCenterButton=function(e){return 1===e.button},cm.throttle=function(r,o){var s=0;return function(){var e=Date.now();if(o<=e-s){s=e;for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];r.apply(this,n)}}},cm.debounce=function(a,r,o){var s,i;return function(){var e=this,t=arguments,n=o&&!s;return clearTimeout(s),s=setTimeout(function(){s=null,o||(i=a.apply(e,t))},r),i=n?a.apply(e,t):i}},cm.onScrollStart=function(e,t){function n(){a||t(),a=!0,r()}var a=!1,r=cm.debounce(function(){a=!1},100);return cm.addEvent(e,"scroll",n),{remove:function(){cm.removeEvent(e,"scroll",n)}}},cm.onScrollEnd=function(e,t){var n=cm.debounce(t,100);return cm.addEvent(e,"scroll",n),{remove:function(){cm.removeEvent(e,"scroll",n)}}},cm.onImageLoad=function(e,n,a){var r=[],o=cm.isArray(e),e=o?e:[e],s=e.length,i=0;return e.forEach(function(e,t){r[t]=cm.node("img",{alt:""}),r[t].onload=function(){++i===s&&cm.isFunction(n)&&n(o?r:r[0])},r[t].onerror=function(e){cm.isFunction(a)&&a(o?r:r[0],e)},r[t].src=e}),o?r:r[0]},cm.fileFromDataTransfer=function(e,t){var n,a,r=new Image,o=document.createElement("canvas"),s=e.dataTransfer,i=s.getData("text/html");return cm.isEmpty(i)||(i=cm.strToHTML(i),cm.isEmpty(i))||(i=i.querySelector("img"),cm.isEmpty(i))||(n=i.src),cm.isEmpty(n)&&cm.forEach(["url","text/plain","text/uri-list"],function(e){i=s.getData(e),cm.isEmpty(i)||(n=i)}),r.crossOrigin="anonymous",cm.addEvent(r,"load",function(){o.width=this.naturalWidth,o.height=this.naturalHeight,o.getContext("2d").drawImage(this,0,0),a=o.toDataURL("image/png"),a=cm.dataURItoBlob(a),a=new File([a],n),cm.isFunction(t)&&t(a)}),r.src=n},cm.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),e=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),a=new Uint8Array(n),r=0;r<t.length;r++)a[r]=t.charCodeAt(r);return new Blob([n],{type:e})},cm.dataURItoFile=function(e,t){t=cm.merge({name:cm.quid("$$$$$$$"),type:"image/jpeg"},t);e=cm.dataURItoBlob(e);return new File([e],t.name,t)},cm.bufferToHEX=function(e){for(var t=new Uint8Array(e),n=[],a=0;a<t.byteLength;a++){var r=("00"+t[a].toString(16)).slice(-2);n.push(r)}return n.join("")},cm.bufferToBase64=function(e){return btoa(String.fromCharCode.apply(String,_toConsumableArray(new Uint8Array(e))))},cm.getOwnerWindow=function(e){return e.ownerDocument.defaultView},cm._addScriptStack={},cm.addScript=function(e,t,n){var a,r=cm._getVariables();return e=cm.isArray(e)?cm.objectReplace(e,r):cm.strReplace(e,r),t=!cm.isUndefined(t)&&t,n=cm.isUndefined(n)?function(){}:n,cm._addScriptStack[e]?(a=cm._addScriptStack[e]).loaded?n():a.callbacks.push(n):(a={src:e,async:t,loaded:!1,callback:function(e){for(a.loaded=!0;a.callbacks.length;)a.callbacks[0](e),cm.arrayRemove(a.callbacks,a.callbacks[0])},callbacks:[n]},(cm._addScriptStack[e]=a).script=document.createElement("script"),a.script.async=a.async,a.script.src=a.src,cm.addEvent(a.script,"load",a.callback),cm.addEvent(a.script,"error",a.callback),cm.appendChild(a.script,cm.getDocumentHead())),a.script},cm.loadScript=function(a){a=cm.merge({path:"",src:"",async:!0,callback:function(){}},a);var r=cm.objectPath(a.path,window);return cm.isEmpty(r)?new Promise(function(t,n){cm.addScript(a.src,a.async,function(e){r=cm.objectPath(a.path,window),cm.isEmpty(r)?(cm.errorLog({type:"error",name:"cm.loadScript",message:[a.path,"was not loaded."].join(" ")}),a.callback(null),n(e)):(a.callback(r),t(r))})}):new Promise(function(e,t){a.callback(r),e(r)})},cm.addLink=function(e,t){var n=document.createElement("link");return n.rel="stylesheet",n.type="text/css",n.media="all",n.href=e,cm.appendChild(n,cm.getDocumentHead()),n},cm.getEl=function(e){return document.getElementById(e)},cm.getByClass=function(e,t){return(t=t||document).getElementsByClassName(e)},cm.getByAttr=function(e,t,n){return(n||document).querySelectorAll("["+e+'="'+t+'"]')},cm.getByName=function(e,t){return cm.isNode(t)?t.querySelectorAll('[name="'+e+'"]'):document.getElementsByName(e)},cm.getParentByTagName=function(e,t){if(!cm.isEmpty(e)&&cm.hasParentNode(t)){var n=t.parentNode;do{if(n.tagName&&n.tagName.toLowerCase()===e.toLowerCase())return n}while(n=n.parentNode)}return null},cm.getIFrameDOM=function(e){return e.contentDocument||e.document},cm.getDocumentHead=function(){return document.getElementsByTagName("head")[0]},cm.getDocumentHtml=function(){return document.documentElement},cm.getNodeOffsetIndex=function(e){if(!cm.isNode(e))return 0;for(var t=e,n=0;t.parentNode;)t=t.parentNode,n++;return n},cm.node=cm.Node=function(){for(var e=arguments,n=document.createElement(e[0]),t=0,t=cm.isObject(e[1])?(cm.forEach(e[1],function(e,t){if(!cm.isUndefined(e))switch(cm.isObject(e)&&!["class","classes","style","styles"].includes(t)&&(e=JSON.stringify(e)),t){case"style":case"styles":cm.addStyles(n,e);break;case"class":case"classes":cm.addClass(n,e);break;case"innerHTML":n.innerHTML=e;break;case"innerText":n.innerText=e;break;default:n.setAttribute(t,e)}}),2):1,a=e.length;t<a;t++)void 0!==e[t]&&("string"==typeof e[t]||"number"==typeof e[t]?cm.appendChild(cm.textNode(e[t]),n):cm.appendNodes(e[t],n));return n},cm.textNode=function(e){return document.createTextNode(e)},cm.wrap=function(e,t){return e&&t?(t.parentNode&&cm.insertBefore(e,t),e.appendChild(t),e):null},cm.inDOM=function(e){return e===document.body||document.body.contains(e)},cm.hasParentNode=function(e){return!!cm.isNode(e)&&!!e.parentNode},cm.isParent=function(e,t,n){if(n&&e===t)return!0;if(cm.isNode(t)){if(cm.isWindow(e)&&cm.inDOM(t))return!0;if(e.contains(t)&&e!==t)return!0}return!1},cm.isParentByClass=function(e,t){if(t&&t.parentNode){var n=t.parentNode;do{if(cm.isClass(n,e))return!0}while(n=n.parentNode)}return!1},cm.getData=function(e,t){return e?e.dataset?e.dataset[t]:e.getAttribute(["data",t].join("-")):null},cm.getTextValue=cm.getTxtVal=function(e){return 1===e.nodeType&&e.firstChild?e.firstChild.nodeValue:""},cm.getTextNodesStr=function(e){var t="";return e&&(cm.isArray(e)?cm.forEach(e,function(e){t+=cm.getTextNodesStr(e)}):cm.isNode(e)&&(e=e.childNodes,cm.forEach(e,function(e){1===e.nodeType?t+=cm.getTextNodesStr(e):t+=e.nodeValue}))),t},cm.remove=cm.removeNode=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},cm.removeNodes=function(e){if(!cm.isEmpty(e))if(cm.isNode(e))cm.remove(e);else for(;e.length;)cm.remove(e[0])},cm.clearNode=function(e){if(cm.isNode(e))for(;e.childNodes.length;)e.removeChild(e.firstChild);return e},cm.prevEl=function(e){return e=(e=e.previousSibling)&&e.nodeType&&1!==e.nodeType?cm.prevEl(e):e},cm.nextEl=function(e){return e=(e=e.nextSibling)&&e.nodeType&&1!==e.nodeType?cm.nextEl(e):e},cm.firstEl=function(e){return e&&e.firstChild?1!==(e=e.firstChild).nodeType?cm.nextEl(e):e:null},cm.insertFirst=function(e,t,n){var a;return n=!!cm.isUndefined(n)||n,cm.isNode(e)&&cm.isNode(t)&&(t.firstChild?(a=cm.isParent(t,e),(n||!a||a&&e!==t.firstChild)&&cm.insertBefore(e,t.firstChild)):cm.appendChild(e,t,n)),e},cm.insertLast=cm.appendChild=function(e,t,n){return n=!!cm.isUndefined(n)||n,cm.isNode(e)&&cm.isNode(t)&&(!n&&cm.isParent(t,e)||t.appendChild(e)),e},cm.insertBefore=function(e,t){return cm.isNode(e)&&cm.isNode(t)&&t.parentNode&&t.parentNode.insertBefore(e,t),e},cm.insertAfter=function(e,t){var n;return cm.isNode(e)&&cm.isNode(t)&&t.parentNode&&((n=t.nextSibling)?cm.insertBefore(e,n):t.parentNode.appendChild(e)),e},cm.replaceNode=function(e,t){return cm.insertBefore(e,t),cm.remove(t),e},cm.appendNodes=function(e,t){if(!cm.isEmpty(e))if(cm.isNode(e))cm.appendChild(e,t);else if(cm.isArray(e))cm.forEach(e,function(e){cm.appendChild(e,t)});else for(;e.length;)cm.isNode(e[0])?cm.appendChild(e[0],t):cm.remove(e[0]);return t},cm.hideSpecialTags=function(){var e;document.querySelectorAll?(e=document.querySelectorAll("iframe,object,embed"),cm.forEach(e,function(e){e.style.visibility="hidden"})):(e=document.getElementsByTagName("*"),cm.forEach(e,function(e){e.tagName&&/iframe|object|embed/.test(e.tagName)&&(e.style.visibility="hidden")}))},cm.showSpecialTags=function(){var e;document.querySelectorAll?(e=document.querySelectorAll("iframe,object,embed"),cm.forEach(e,function(e){e.style.visibility="visible"})):(e=document.getElementsByTagName("*"),cm.forEach(e,function(e){e.tagName&&/iframe|object|embed/.test(e.tagName)&&(e.style.visibility="visible")}))},cm.strToHTML=function(e){var t;return!e||cm.isNode(e)?e:((t=cm.node("div")).insertAdjacentHTML("beforeend",e),1===t.childNodes.length?t.firstChild:t.childNodes)},cm.getNodes=function(e,o){e=e||document.body,o=o||"data-node";function a(t,n,a){var r,e=(e=t.getAttribute(o))?e.split("|"):[];cm.forEach(e,function(e){r=[],-1===e.indexOf(".")?c(t,e,n,r):s(t,e,r),cm.forEach(r,function(e){a.push(e)})})}function s(n,e,a){var r=e?e.split("."):[],o=i;cm.forEach(r,function(e,t){0===t&&cm.isEmpty(e)?o=i:t+1===r.length?c(n,e,o,a):(o[e]||(o[e]={}),o=o[e])})}var i={},t=[],c=function(e,t,n,a){var r,t=t?t.split(":"):[];1===t.length?n[t[0]]=e:2!==t.length&&3!==t.length||("[]"===t[1]?(n[t[0]]||(n[t[0]]=[]),r={},t[2]&&(r[t[2]]=e),d(e,r,a),n[t[0]].push(r)):"[&]"===t[1]?(n[t[0]]||(n[t[0]]=[]),n[t[0]].push(e)):"{}"===t[1]&&(n[t[0]]||(n[t[0]]={}),t[2]&&(n[t[0]][t[2]]=e),d(e,n[t[0]],a))),a.push(e)},d=function(e,t,n){e=e.querySelectorAll("["+o+"]");cm.forEach(e,function(e){cm.inArray(n,e)||a(e,t,n)})};return a(e,i,t),d(e,i,t),i},cm.processDataAttributes=function(e,t,n){n=cm.isUndefined(n)?{}:n;function a(e){(r=e.getAttribute(o))&&e.setAttribute(t,cm.strReplace(r,n))}var r,o=["data-attributes",t].join("-"),s=e.querySelectorAll("["+o+"]");a(e),cm.forEach(s,a)},cm.setFDO=function(e,o){return cm.forEach(e,function(e,t){for(var n=cm.getByAttr("name",t,o),a=0,r=n.length;a<r;a++)switch((n[a].type||"").toLowerCase()){case"radio":e==n[a].value&&(n[a].checked=!0);break;case"checkbox":n[a].checked=!!e;break;default:cm.isTagName(n[a],"select")?cm.setSelect(n[a],e):n[a].value=e}}),o},cm.getFDO=function(e,t){var a={};if(cm.isNode(e))for(var n=[e.getElementsByTagName("input"),e.getElementsByTagName("textarea"),e.getElementsByTagName("select")],r=function(e,r){if(/\[.*\]$/.test(e)){for(var t,o=[],n=/\[(.*?)\]/g;t=n.exec(e);)o.push(t[1]);e=e.replace(/\[.*\]$/,""),a[e]=function(e,t){var n=o[e],a=!cm.isUndefined(o[e+1]);return""===n?t&&t instanceof Array?t.push(a?arguments.callee(e+1,t):r):t=[a?arguments.callee(e+1,t):r]:(t=t&&t instanceof Object?t:{})[n]=a?arguments.callee(e+1,t[n]):r,t}(0,a[e])}else a[e]=r;return 1},o=0,s=n.length;o<s;o++)for(var i=0,c=n[o].length;i<c;i++)if(n[o][i].name.length)switch(n[o][i].tagName.toLowerCase()){case"input":switch(n[o][i].type.toLowerCase()){case"radio":n[o][i].checked&&r(n[o][i].name,n[o][i].value||1);break;case"checkbox":n[o][i].checked?r(n[o][i].name,n[o][i].value||1):cm.isUndefined(t)||!1===t||r(n[o][i].name,t);break;default:r(n[o][i].name,n[o][i].value)}break;case"select":if(n[o][i].multiple){var d,l=n[o][i].getElementsByTagName("option");for(d in l)l[d].selected&&r(n[o][i].name,l[d].value)}else r(n[o][i].name,n[o][i].value);break;case"textarea":r(n[o][i].name,n[o][i].value)}return a},cm.clearForm=function(e){for(var t=cm.getByClass("formData",e),n=0,a=t.length;n<a;n++)if(cm.isTagName(t[n],"input"))"checkbox"===t[n].type.toLowerCase()||"radio"===t[n].type.toLowerCase()?t[n].checked=!1:t[n].value="";else if(cm.isTagName(t[n],"textarea"))t[n].value="";else if(cm.isTagName(t[n],"select"))for(var r=t[n].getElementsByTagName("option"),o=0,s=r.length;o<s;o++)r[o].selected=!1;return e},cm.setSelect=function(e,t){var n;return e&&cm.isNode(e)?(n=e.getElementsByTagName("option"),cm.forEach(n,function(e){cm.isArray(t)?e.selected=cm.inArray(t,e.value):(cm.isBoolean(t)&&(t=t.toString()),e.selected=e.value==t)}),e):null},cm.toggleRadio=function(e,t,n){n=n||document.body;for(var a=cm.getByName(e,n),r=0;r<a.length;r++)a[r].value==t&&(a[r].checked=a[r].value==t)},cm.getValue=function(e,t){t=t||document.body;for(var n,a=cm.getByName(e,t),r=0,o=a.length;r<o;r++)a[r].checked&&(n=a[r].value);return n},cm.getSelectedOptions=function(e,t){return cm.isNode(e)?(e=e.selectedOptions||e.querySelectorAll("option:checked"),cm.isUndefined(t)?e:e[t]):null},cm.getSelectValue=function(e){if(!cm.isNode(e))return null;if(!e.multiple)return e.value;var t,n=[];try{t=cm.getSelectedOptions(e),n=Array.from(t).map(function(e){return e.value})}catch(e){}return n},cm.setInputMaxLength=function(e,t,n,a){var r;return a=!!cm.isUndefined(a)||a,cm.isNode(e)&&(r=0,"number"===e.type?(r=n||"9".repeat(t))&&(e.max=r):(r=t||n,a&&r&&(e.maxLength=r))),e},cm.setInputMinLength=function(e,t,n){var a;return cm.isNode(e)&&(a=0,"number"===e.type?(a=n||(t?Math.pow(10,t-1):0))&&(e.min=a):(a=t||n)&&(e.minLength=a)),e},cm.getMinMax=function(e,t,n,a,r){return e=parseFloat(e),t=t||(a?Math.pow(10,a-1):0),n=n||(r?"9".repeat(r):1/0),Math.min(Math.max(e,t),n)},cm.constraintsPattern=function(t,n,a){var r,o;return function(e){return o=cm.isFunction(t)?t(e):t,r=cm.isRegExp(o)?o.test(e.value):o===e.value,e.pattern=o,e.message=a,e.valid=n?r:!r,e}},cm.constraintsCallback=function(t,n){return function(e){return e.message=n,e.valid=cm.isFunction(t)?t(e):function(){},e}},cm.constraintsCallbackAsync=function(n,a){return(()=>{var t=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.async=!0,t.message=a,cm.isFunction(n))return e.next=5,n(t);e.next=8;break;case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=function(){};case 9:return t.valid=e.t0,e.abrupt("return",t);case 11:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}})()},cm.toFixed=function(e,t,n){return t&&0!==t?(t=Number.parseFloat(e).toFixed(t),n?Number(t):t):Math.round(e)},cm.toNumber=function(e){return parseInt(e.replace(/\s+/,""))},cm.is=function(e){return cm.isUndefined(Com.UA)?(cm.log('Error. UA.js is not exists or not loaded. Method "cm.is()" returns false.'),!1):Com.UA.is(e)},cm.isVersion=function(){return cm.isUndefined(Com.UA)?(cm.log('Error. UA.js is not exists or not loaded. Method "cm.isVersion()" returns null.'),null):Com.UA.isVersion()},cm.isMobile=function(){return cm.isUndefined(Com.UA)?(cm.log('Error. UA.js is not exists or not loaded. Method "cm.isMobile()" returns false.'),!1):Com.UA.isMobile()},cm.decode=(()=>{var t;return function(e){return t=t||cm.node("textarea",{class:"cm__textarea-clipboard"}),cm.isEmpty(e)?"":(t.innerHTML=e,t.value)}})(),cm.copyToClipboard=function(e,t){var n,a,r;cm.isEmpty(e)||(n=function(){cm.isFunction(t)&&t(!0)},a=function(){cm.errorLog({type:"error",name:"cm.copyToClipboard",message:"Unable to copy text to clipboard!"}),cm.isFunction(t)&&t(!1)},null!=(r=navigator.clipboard)&&r.writeText?navigator.clipboard.writeText(e).then(n).catch(a):((r=cm.node("textarea")).value=e,cm.appendChild(r,document.body),r.select(),e=document.execCommand("copy"),cm.remove(r),(e?n:a)()))},cm.share=(()=>{var t=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.share(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),cm.errorLog({type:"error",name:"cm.share",message:"Unable to share text: ".concat(e.t0)});case 8:case"end":return e.stop()}},e,null,[[0,5]])}));return function(e){return t.apply(this,arguments)}})(),cm.RegExpEscape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},cm.strWrap=function(e,t){return["",e=e.toString(),""].join(t)},cm.strReplace=function(n,e){return e&&cm.isObject(e)&&(n=n.toString(),cm.forEach(e,function(e,t){cm.isObject(e)&&(e=JSON.stringify(e)),n=n.replace(new RegExp(t,"g"),e)})),n},cm.fillVariables=function(e,n,a){return a=!cm.isUndefined(a)&&a,e.replace(/[{%](\w.+?)[%}]/g,function(e,t){return[cm.reducePath(t,n),cm.reducePath("%"+t+"%",n),cm.reducePath("{"+t+"}",n),a?e:""].find(function(e){return!cm.isUndefined(e)})})},cm.reduceText=function(e,t,n){return e=e.toString(),n=!cm.isUndefined(n)&&n,e.length>t?e.slice(0,t)+(n?"…":""):e},cm.reduceTextSmart=function(e,t,n){if(e.length<=t)return e;for(var a=e.split(/[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+/),r="",o="",s=0;a[s]&&o.length<=t;)r=o,o+=" "+a[s],s++;return cm.isUndefined(n)||(r+="…"),r},cm.removeDanger=function(e){return e.replace(/(<|>|&lt;|&gt;)/gim,"")},cm.removeSpaces=function(e){return e.replace(/[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+/g,"")},cm.escapeHTML=function(e){if(cm.isString(e))return e.replace(/['"<>&]/g,function(e){switch(e){case"'":return"&#039;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;"}})},cm.cutHTML=function(e){if(cm.isString(e))return e.replace(/<[^>]*>/g,"")},cm.splitNumber=function(e){return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")},cm.formatNumber=function(e,t,n){return t=cm.isEmpty(t)?cm._locale:t,new Intl.NumberFormat(t,n).format(e)},cm.getPercentage=function(e,t){return e/t/100},cm.rand=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},cm.quid=function(e){return(e=cm.isUndefined(e)?"$":e).replaceAll("$",function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)})},cm.isEven=function(e){return!(e%2)},cm.addLeadZero=function(e,t){return t=cm.isUndefined(t)?1:t,e.toString().padStart(++t,"0")},cm.plural=cm.getNumberDeclension=function(e,t){return cm.isArray(t)?t[e=4<e%100&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]||t[e-1]||t[0]:t},cm.toRadians=function(e){return e*Math.PI/180},cm.toDegrees=function(e){return 180*e/Math.PI},cm.isDateValid=function(e){return cm.isDate(e)&&!isNaN(e.valueOf())},cm.getCurrentDate=function(e){return e=e||cm._config.dateTimeFormat,cm.dateFormat(new Date,e)},cm.dateFormat=function(e,t,n,a){cm.isDate(e)?e=new Date(+e):(cm.isString(e)||cm.isNumber(e))&&(e=new Date(e)),isNaN(e)&&(e=null),t=cm.isString(t)?t:cm._config.dateTimeFormat,a=cm.isString(a)?a:cm._config.dateFormatCase,n=cm.merge({months:cm._strings.months,days:cm._strings.days},n),cm.isObject(n.months)&&n.months[a]&&(n.months=n.months[a]);var r;return t=cm.strReplace(t,{"%Y%":"%Y","%m%":"%m","%n%":"%n","%F%":"%F","%d%":"%d","%j%":"%j","%l%":"%l","%a%":"%a","%A%":"%A","%g%":"%g","%G%":"%G","%h%":"%h","%H%":"%H","%i%":"%i","%s%":"%s"}),t=cm.strReplace(t,(r=e,{"%Y":function(){return r?r.getFullYear():"0000"},"%m":function(){return r?cm.addLeadZero(r.getMonth()+1):"00"},"%n":function(){return r?r.getMonth()+1:"00"},"%F":function(){return r?n.months[r.getMonth()]:"00"},"%d":function(){return r?cm.addLeadZero(r.getDate()):"00"},"%j":function(){return r?r.getDate():"00"},"%l":function(){return r?n.days[r.getDay()]:"00"},"%a":function(){return r?12<=r.getHours()?"pm":"am":""},"%A":function(){return r?12<=r.getHours()?"PM":"AM":""},"%g":function(){return r?r.getHours()%12||12:"00"},"%G":function(){return r?r.getHours():"00"},"%h":function(){return r?cm.addLeadZero(r.getHours()%12||12):"00"},"%H":function(){return r?cm.addLeadZero(r.getHours()):"00"},"%i":function(){return r?cm.addLeadZero(r.getMinutes()):"00"},"%s":function(){return r?cm.addLeadZero(r.getSeconds()):"00"},"%v":function(){return r?cm.addLeadZero(r.getMilliseconds(),2):"000"}}))},cm.parseDate=function(n,a){var t,e,r,o;return n?(t=new Date,e={YYYY:function(e){return"0000"!==e?e:t.getFullYear()},mm:function(e){return"00"!==e?e-1:t.getMonth()},dd:function(e){return"00"!==e?e:t.getDate()},hh:function(e){return e},HH:function(e){return e},ii:function(e){return e},ss:function(e){return e},vv:function(e){return e},e:function(e){return e}},r={YYYY:"0000",mm:"00",dd:"00",hh:"00",HH:"00",ii:"00",ss:"00",vvv:"000",e:"Z"},o=0,a=cm.isString(a)?a:cm._config.dateTimeFormat,a=cm.strReplace(a,{"%Y%":"YYYY","%m%":"mm","%d%":"dd","%H%":"HH","%i%":"ii","%s%":"ss","%Y":"YYYY","%m":"mm","%d":"dd","%h":"hh","%H":"HH","%i":"ii","%s":"ss","%v":"vvv",$e:"e"}),cm.forEach(e,function(e,t){for(o=a.indexOf(t);-1!==o;)r[t]=e(n.substr(o,t.length)),o=a.indexOf(t,o+1)}),new Date(r.YYYY,r.mm,r.dd,r.HH,r.ii,r.ss,r.vvv)):null},cm.parseFormatDate=function(e,t,n,a,r){t=t||cm._config.dateFormat,n=n||cm._config.displayDateFormat,r=r||cm._config.displayDateFormatCase;e=cm.parseDate(e,t);return cm.dateFormat(e,n,a,r)},cm.parseFormatDateTime=function(e,t,n,a,r){t=t||cm._config.dateTimeFormat,n=n||cm._config.displayDateTimeFormat,r=r||cm._config.displayDateFormatCase;e=cm.parseDate(e,t);return cm.dateFormat(e,n,a,r)},cm.getWeek=function(e){var t=new Date;return cm.isDate(e)?t=new Date(+e):cm.isString(e)&&(t=new Date(e)),t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t-new Date(t.getFullYear(),0,1))/864e5+1)/7)},cm.getWeeksInYear=function(e){e=e||(new Date).getFullYear();var e=new Date(e,11,31),t=cm.getWeek(e);return 1===t?cm.getWeek(e.setDate(24)):t},cm.addClass=function(t,e,n){if(cm.isNode(t)&&!cm.isEmpty(e))return n=n&&t.clientHeight,(cm.isString(e)||cm.isNumber(e))&&(e=e.toString().split(/\s+/)),cm.forEach(e,function(e){cm.isEmpty(e)||t.classList.add(e)}),t},cm.removeClass=function(t,e,n){if(cm.isNode(t)&&!cm.isEmpty(e))return n=n&&t.clientHeight,(cm.isString(e)||cm.isNumber(e))&&(e=e.toString().split(/\s+/)),cm.forEach(e,function(e){cm.isEmpty(e)||t.classList.remove(e)}),t},cm.toggleClass=function(e,t,n){return cm.isNode(e)?n?cm.addClass(e,t):cm.removeClass(e,t):null},cm.replaceClass=function(e,t,n,a){return cm.isNode(e)?cm.addClass(cm.removeClass(e,t,a),n,a):null},cm.clearClass=function(e){if(!cm.isNode(e))return null;for(var t=e.classList;0<t.length;)t.remove(t.item(0));return e},cm.hasClass=cm.isClass=function(e,t){return!!cm.isNode(e)&&e.classList.contains(t)},cm.getPageSize=function(e){var t=document,n=t.documentElement,t=t.body,t={height:Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight)),width:Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),winHeight:n.clientHeight,winWidth:n.clientWidth};return t.scrollTop=cm.getBodyScrollTop(),t.scrollLeft=cm.getBodyScrollLeft(),t.scrollHeight=t.height-t.winHeight,t.scrollWidth=t.width-t.winWidth,t[e]||t},cm.getScrollBarSize=(()=>{var e;return function(){return e||(e=cm.node("div",{class:"cm__scrollbar-size-checker","aria-hidden":!0}),cm.insertFirst(e,document.body)),Math.max(e.offsetWidth-e.clientWidth,0)}})(),cm.setOpacity=function(e,t){return cm.isNode(e)&&(e.style.opacity=t),e},cm.getX=function(e){var t=0,n=e;try{for(;n;)t+=n.offsetLeft,n!==e&&(t+=cm.getStyle(n,"borderLeftWidth",!0)||0),n=n.offsetParent}catch(e){}return t},cm.getY=function(e){var t=0,n=e;try{for(;n;)t+=n.offsetTop,n!==e&&(t+=cm.getStyle(n,"borderTopWidth",!0)||0),n=n.offsetParent}catch(e){}return t},cm.getRealX=function(e){return cm.isNode(e)?e.getBoundingClientRect().left:0},cm.getRealY=function(e){return cm.isNode(e)?e.getBoundingClientRect().top:0},cm.getRect=function(e){var t;return cm.isWindow(e)?{top:0,right:(t=e.document.documentElement).clientWidth,bottom:t.clientHeight,left:0,width:t.clientWidth,height:t.clientHeight}:cm.isNode(e)?(t=e.getBoundingClientRect(),(e={top:Math.round(t.top),right:Math.round(t.right),bottom:Math.round(t.bottom),left:Math.round(t.left)}).width=cm.isUndefined(t.width)?t.right-t.left:Math.round(t.width),e.height=cm.isUndefined(t.height)?t.bottom-t.top:Math.round(t.height),e):{top:0,right:0,bottom:0,left:0,width:0,height:0}},cm.getOffsetRect=function(e){var e=cm.getRect(e),t=cm.getBodyScrollTop(),n=cm.getBodyScrollLeft();return e.offset={top:e.top+t,right:e.right+n,bottom:e.bottom+t,left:e.left+n},e},cm.getFullRect=function(e,t){var n;return cm.isNode(e)?(n={},t=cm.isUndefined(t)?cm.getStyleObject(e):t,n.width=e.offsetWidth,n.height=e.offsetHeight,n.x1=cm.getRealX(e),n.y1=cm.getRealY(e),n.x2=n.x1+n.width,n.y2=n.y1+n.height,n.padding={top:cm.getCSSStyle(t,"paddingTop",!0),right:cm.getCSSStyle(t,"paddingRight",!0),bottom:cm.getCSSStyle(t,"paddingBottom",!0),left:cm.getCSSStyle(t,"paddingLeft",!0)},n.innerWidth=n.width-n.padding.left-n.padding.right,n.innerHeight=n.height-n.padding.top-n.padding.bottom,n.innerX1=n.x1+n.padding.left,n.innerY1=n.y1+n.padding.top,n.innerX2=n.innerX1+n.innerWidth,n.innerY2=n.innerY1+n.innerHeight,n.margin={top:cm.getCSSStyle(t,"marginTop",!0),right:cm.getCSSStyle(t,"marginRight",!0),bottom:cm.getCSSStyle(t,"marginBottom",!0),left:cm.getCSSStyle(t,"marginLeft",!0)},n.absoluteWidth=n.width+n.margin.left+n.margin.right,n.absoluteHeight=n.height+n.margin.top+n.margin.bottom,n.absoluteX1=n.x1-n.margin.left,n.absoluteY1=n.y1-n.margin.top,n.absoluteX2=n.x2+n.margin.right,n.absoluteY2=n.y2+n.margin.bottom,n):null},cm.getNodeIndents=function(e,t){if(!cm.isNode(e))return null;t=cm.isUndefined(t)?cm.getStyleObject(e):t;e={};return e.margin={top:cm.getCSSStyle(t,"marginTop",!0),right:cm.getCSSStyle(t,"marginRight",!0),bottom:cm.getCSSStyle(t,"marginBottom",!0),left:cm.getCSSStyle(t,"marginLeft",!0)},e.padding={top:cm.getCSSStyle(t,"paddingTop",!0),right:cm.getCSSStyle(t,"paddingRight",!0),bottom:cm.getCSSStyle(t,"paddingBottom",!0),left:cm.getCSSStyle(t,"paddingLeft",!0)},e},cm.getNodeOffset=function(e,t,n,a){return cm.isNode(e)?(t=cm.isUndefined(t)?cm.getStyleObject(e):t,(n=cm.isUndefined(n)?cm.getNodeIndents(e,t):n).offset=cm.getRect(e),a&&(n.offset.top+=a.top,n.offset.right+=a.left,n.offset.bottom+=a.top,n.offset.left+=a.left),n.inner={width:n.offset.width-n.padding.left-n.padding.right,height:n.offset.height-n.padding.top-n.padding.bottom,top:n.offset.top+n.padding.top,right:n.offset.right-n.padding.right,bottom:n.offset.bottom-n.padding.bottom,left:n.offset.left+n.padding.left},n.outer={width:n.offset.width+n.margin.left+n.margin.right,height:n.offset.height+n.margin.top+n.margin.bottom,top:n.offset.top-n.margin.top,right:n.offset.right+n.margin.right,bottom:n.offset.bottom+n.margin.bottom,left:n.offset.left-n.margin.left},n):null},cm.getRealWidth=function(e,t){var n,a=0,a=e.offsetWidth;return e.style.width="auto",n=e.offsetWidth,e.style.width=cm.isUndefined(t)?[a,"px"].join(""):t,n},cm.getRealHeight=function(e,t,n){var a,r=["self","current","offset","offsetRelative"],o={};return e&&cm.isNode(e)?(a=cm.getStyleObject(e),t=cm.isUndefined(t)||!cm.inArray(r,t)?"offset":t,n=!(cm.isUndefined(n)||!cm.inArray(r,n))&&n,cm.forEach(r,function(e){o[e]=0}),r={display:e.style.display,height:e.style.height,position:e.style.position},e.style.display="block",o.current=e.offsetHeight,e.style.height="auto",o.offset=e.offsetHeight,o.self=o.offset-cm.getStyle(a,"borderTopWidth",!0)-cm.getStyle(a,"borderBottomWidth",!0)-cm.getStyle(a,"paddingTop",!0)-cm.getStyle(a,"paddingBottom",!0),e.style.position="relative",o.offsetRelative=e.offsetHeight,e.style.display=r.display,e.style.height=r.height,e.style.position=r.position,n&&(e.style.height=[o[n],"px"].join("")),o[t]):0},cm.getIndentX=function(e){return e?cm.getStyle(e,"paddingLeft",!0)+cm.getStyle(e,"paddingRight",!0)+cm.getStyle(e,"borderLeftWidth",!0)+cm.getStyle(e,"borderRightWidth",!0):null},cm.getIndentY=function(e){return e?cm.getStyle(e,"paddingTop",!0)+cm.getStyle(e,"paddingBottom",!0)+cm.getStyle(e,"borderTopWidth",!0)+cm.getStyle(e,"borderBottomWidth",!0):null},cm.addStyles=function(n,e){if(cm.isNode(n))return cm.isObject(e)?cm.forEach(e,function(e,t){n.style[t]=e}):n.style.cssText=e,n},cm.getStyleObject=window.getComputedStyle?function(e){return document.defaultView.getComputedStyle(e,null)}:function(e){return e.currentStyle},cm.getCSSStyle=cm.getStyle=function(e,t,n){var e=cm.isNode(e)?cm.getStyleObject(e):e;return e?(e=e[t],n?cm.styleToNumber(e):e):0},cm.getCurrentStyle=function(e,t,n){switch(t){case"width":case"height":case"top":case"left":var a,r,o=t.charAt(0).toUpperCase()+t.substr(1,t.length-1);return"%"!==n||e.style[t].match(/%/)?"%"===n&&/%/.test(e.style[t])?(a=e.style.display,e.style.display="none",r=cm.getCSSStyle(e,t,!0)||0,e.style.display=a,r):"px"===n&&/px/.test(e.style[t])?cm.getCSSStyle(e,t,!0)||0:e["offset"+o]:(a=/body/i.test(e.parentNode.tagName)||/top|left/i.test(o)?"client":"offset",r=/width|left/i.test(o)?e.parentNode[a+"Width"]:e.parentNode[a+"Height"],e["offset"+o]/r*100);case"opacity":var s=parseFloat(e.style.opacity||cm.getCSSStyle(e,"opacity"));return isNaN(s)?1:s;case"color":case"backgroundColor":case"borderColor":return(s=cm.getCSSStyle(e,t)).match(/rgb/i)?(s=s.match(/\d+/g),[parseInt(s[0]),parseInt(s[1]),parseInt(s[2])]):cm.hex2rgb(s.match(/[\w\d]+/)[0]);case"docScrollTop":return cm.getBodyScrollTop();case"scrollLeft":case"scrollTop":return e[t];case"x1":case"x2":case"y1":case"y2":return parseInt(e.getAttribute(t));default:return cm.getCSSStyle(e,t,!0)||0}},cm.getStyleDimension=function(e){e=e.toString().match(/\d+(\D*)/);return e?e[1]:""},cm.styleToNumber=function(e){return e=parseFloat(e.toString().replace(/(pt|px|%)/g,"")),e=isNaN(e)?0:e},cm.hex2rgb=function(e){return[(e=parseInt(e,16))>>16&255,e>>8&255,255&e]},cm.rgb2hex=function(e,t,n){var a,r=[e,t,n];for(a in r)r[a]=Number(r[a]).toString(16),"0"==r[a]?r[a]="00":1===r[a].length&&(r[a]="0"+r[a]);return"#"+r.join("")},cm.styleStrToKey=function(e){var t;return"float"===(e=e.replace(/\s/g,""))?e=["cssFloat","styleFloat"]:e.match("-")&&(e=(t=e.split("-"))[0]+t[1].replace(t[1].charAt(0),t[1].charAt(0).toUpperCase())),e},cm.getScrollTop=function(e){return cm.isWindow(e)?cm.getBodyScrollTop():cm.isNode(e)?/body|html/gi.test(e.tagName)?cm.getBodyScrollTop():e.scrollTop:0},cm.getScrollLeft=function(e){return cm.isWindow(e)?cm.getBodyScrollLeft():cm.isNode(e)?/body|html/gi.test(e.tagName)?cm.getBodyScrollLeft():e.scrollLeft:0},cm.setScrollTop=function(e,t){return cm.isWindow(e)?cm.setBodyScrollTop(t):cm.isNode(e)&&(/body|html/gi.test(e.tagName)?cm.setBodyScrollTop(t):e.scrollTop=t),e},cm.setScrollLeft=function(e,t){return cm.isWindow(e)?cm.setBodyScrollLeft(t):cm.isNode(e)&&(/body|html/gi.test(e.tagName)?cm.setBodyScrollLeft(t):e.scrollLeft=t),e},cm.getScrollHeight=function(e){return cm.isWindow(e)?cm.getBodyScrollHeight():cm.isNode(e)?/body|html/gi.test(e.tagName)?cm.getBodyScrollHeight():e.scrollHeight:0},cm.getScrollOffsetHeight=function(e){return cm.isWindow(e)?cm._pageSize.winHeight:cm.isNode(e)?/body|html/gi.test(e.tagName)?cm._pageSize.winHeight:e.offsetHeight:0},cm.getScrollTopMax=function(e){return cm.isWindow(e)?cm.getBodyScrollMaxTop():cm.isNode(e)?/body|html/gi.test(e.tagName)?cm.getBodyScrollMaxTop():e.scrollHeight-e.offsetHeight:0},cm.setBodyScrollTop=function(e){document.documentElement.scrollTop=e,document.body.scrollTop=e},cm.setBodyScrollLeft=function(e){document.documentElement.scrollLeft=e,document.body.scrollLeft=e},cm.getBodyScrollTop=function(){return Math.max(document.documentElement.scrollTop,document.body.scrollTop,window.scrollY,0)},cm.getBodyScrollLeft=function(){return Math.max(document.documentElement.scrollLeft,document.body.scrollLeft,window.scrollX,0)},cm.getBodyScrollWidth=function(){return Math.max(document.documentElement.scrollWidth,document.body.scrollWidth,0)},cm.getBodyScrollHeight=function(){return Math.max(document.documentElement.scrollHeight,document.body.scrollHeight,0)},cm.getBodyScrollMaxTop=function(){return cm.getBodyScrollHeight()-cm._pageSize.winHeight},cm.showBodyScroll=function(){cm.removeClass(cm.getDocumentHtml(),"cm__scroll--none")},cm.hideBodyScroll=function(){var e=cm.getBodyScrollTop();cm.addClass(cm.getDocumentHtml(),"cm__scroll--none"),cm.setBodyScrollTop(e)},cm.bodyScroll=(()=>{var t=[];return{add:function(e){cm.isNode(e)&&(cm.arrayAdd(t,e),cm.bodyScroll.hide())},remove:function(e){cm.isNode(e)&&(cm.arrayRemove(t,e),cm.bodyScroll.show())},show:function(){cm.isEmpty(t)&&cm.showBodyScroll()},hide:function(){cm.isEmpty(t)||cm.hideBodyScroll()}}})(),cm.scrollTo=function(e,t,n,a){if(cm.isNode(e)){t=cm.isUndefined(t)?window:t;var r=cm.isWindow(t)?cm.getDocumentHtml():t,o=cm.getScrollHeight(r),s=cm.getScrollOffsetHeight(r),i=cm.getScrollTopMax(r);if(o!==s){if("auto"===(n=cm.merge({type:"auto",behavior:"smooth",block:"start",top:"auto",scrollPadding:"auto",duration:cm._config.animDuration,callback:cm.isFunction(a)?a:function(){}},n)).type&&(n.type=cm.isWindow(t)||t===document.body?"docScrollTop":"scrollTop"),"auto"===n.top){var o=0,c=("auto"===n.scrollPadding?o=cm.getStyle(r,"scroll-padding-top",!0)||0:cm.isNumber(n.scrollPadding)&&(o=n.scrollPadding),("docScrollTop"===n.type?cm.getY(e):e.offsetTop)-o);switch(n.block){case"end":n.top=Math.max(Math.min(c+e.offsetHeight,i),0);break;case"center":n.top=Math.max(Math.min(c-(s-e.offsetHeight)/2,i),0);break;default:n.top=Math.max(Math.min(c,i),0)}}"instant"===n.behavior?(cm.setScrollTop(t,n.top),n.callback()):new cm.Animation(t).go({anim:n.behavior,duration:n.duration,onStop:n.callback,style:_defineProperty({},n.type,n.top)})}return e}},cm.getSupportedStyle=(()=>{var n=document.createElement("div");return function(t){var e=cm.styleStrToKey(t).replace(t.charAt(0),t.charAt(0).toUpperCase()),e=[cm.styleStrToKey(t),["Webkit",e].join(""),["Moz",e].join(""),["O",e].join(""),["ms",e].join("")];return t=!1,cm.forEach(e,function(e){cm.isUndefined(n.style[e])||(t=t||e)}),t}})(),cm.getTransitionDurationFromRule=function(e){var e=cm.getCSSRule(null,e)[0];return e&&(e=e.style[cm.getSupportedStyle("transitionDuration")])?cm.parseTransitionDuration(e):0},cm.getTransitionDurationFromLESS=function(e,t){e=cm.getLESSVariable(e,t,!1);return cm.parseTransitionDuration(e)},cm.parseTransitionDuration=function(e){return cm.isEmpty(e)?0:!(e=e.toString()).match("ms")&&e.match("s")?e/1e3:parseFloat(e)},cm.getLESSVariable=function(e,t,n){e=e.replace(/^@/,"");e=window.LESS&&window.LESS[e]?window.LESS[e]:t;return n?cm.styleToNumber(e):e},cm.createStyleSheet=function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet},cm.createCSStyleSheet=function(e,t){e=new CSSStyleSheet(e);return cm.isNode(t)?t.attachShadow({mode:"open"}).adoptedStyleSheets=[e]:document.adoptedStyleSheets=cm.extend(document.adoptedStyleSheets,[e]),e},cm.removeCSStyleSheet=function(e,t){e&&(cm.replaceCSSRule(e),document.adoptedStyleSheets=cm.arrayRemove(document.adoptedStyleSheets,e))},cm.getCSSRule=function(e,t){var n=[];return cm.isUndefined(e)?cm.forEach(document.styleSheets,function(e){cm.forEach(e.cssRules,function(e){e.selectorText===t&&n.push(e)})}):cm.forEach(e.cssRules,function(e){e.selectorText===t&&n.push(e)}),n},cm.reduceCSSRule=function(e,t){return t=cm.isUndefined(t)?[]:t,cm.isObject(t)&&(t=Object.keys(t).map(function(e){return[e,t[e]].join(":")})),e+"{"+(t=cm.isArray(t)?t.join(";"):t)+"}"},cm.addCSSRule=function(e,t,n,a){(e=cm.isUndefined(e)?document.styleSheets[0]:e).insertRule(cm.reduceCSSRule(t,n),a)},cm.replaceCSSRule=function(e,t,n,a){if(e){a=!cm.isUndefined(a)&&a;t=cm.isEmpty(t)?"":cm.reduceCSSRule(t,n);if(a)return e.replace(t);e.replaceSync(t)}},cm.removeCSSRule=function(n,a,e){cm.isUndefined(n)?cm.forEach(document.styleSheets,function(n){cm.forEach(n.cssRules,function(e,t){e.selectorText===a&&n.deleteRule(t)})}):cm.isEmpty(e)?cm.forEach(n.cssRules,function(e,t){e.selectorText===a&&n.deleteRule(t)}):n.deleteRule(e)},cm.setCSSTranslate=(()=>{var o=cm.getSupportedStyle("transform");return o?function(e,t,n,a,r){return t=cm.isUndefined(t)||"auto"===t?0:t,n=cm.isUndefined(n)||"auto"===n?0:n,a=cm.isUndefined(a)||"auto"===a?0:a,r=cm.isUndefined(r)?"":r,e.style[o]=["translate3d(",t,",",n,",",a,")",r].join(" "),e}:function(e,t,n,a,r){return t=cm.isUndefined(t)?0:t,n=cm.isUndefined(n)?0:n,e.style.left=t,e.style.top=n,e}})(),cm.clearCSSTranslate=(()=>{var t=cm.getSupportedStyle("transform");return t?function(e){e.style[t]=""}:function(e){e.style.left="",e.style.top=""}})(),cm.setCSSTransitionDuration=(()=>{var n=cm.getSupportedStyle("transition-duration");return function(e,t){return n&&(cm.isNumber(t)&&(t=[t,"ms"].join("")),e.style[n]=t),e}})(),cm.inRange=function(e,t,n,a){return n<=e&&e<=a||n<=t&&t<=a||e<=n&&n<=t},cm.CSSValuesToArray=function(n){if(cm.isEmpty(n))return[0,0,0,0];switch(n=n.toString().replace(/[^\d\s-]/g,"").split(/\s+/),cm.forEach(n,function(e,t){n[t]=cm.isEmpty(e)?0:parseFloat(e)}),n.length){case 0:n=[0,0,0,0];break;case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return n},cm.arrayToCSSValues=function(n,r){var a;return r=cm.isUndefined(r)?"px":r,cm.forEach(n,function(e,t){a=cm.isEmpty(e)?0:parseFloat(e),a=isNaN(a)?0:a,n[t]=a}),n.reduce(function(e,t,n,a){return[e+r,t+(n===a.length-1?r:"")].join(" ")})},cm.URLToCSSURL=function(e){return cm.isEmpty(e)?"none":'url("'+e+'")'},cm.setCSSVariable=function(e,t,n){return n=cm.isUndefined(n)?document.documentElement:n,cm.isNode(n)&&n.style.setProperty(e,t),n},cm.getCSSVariable=function(e,t){if(t=cm.isUndefined(t)?document.documentElement:t,cm.isNode(t))return cm.getStyleObject(t).getPropertyValue(e)},cm.removeCSSVariable=function(e,t){t=cm.isUndefined(t)?document.documentElement:t,cm.isNode(t)&&t.style.removeProperty(e)},cm.isKey=function(){cm.errorLog({type:"error",name:"cm.isKey",message:"Deprecated!"})},cm.isKeyCode=function(){cm.errorLog({type:"error",name:"cm.isKeyCode",message:"Deprecated!"})},cm.handleKey=function(e,t,n){cm.isArray(t)||(t=[t]),!cm.isInputFocused()&&cm.inArray(t,e.code)&&n&&n(e)},cm.isNotToggleKey=function(e){return"keypress"===e.type&&!["Enter","Space"].includes(e.code)},cm.isLinkClick=function(e){return!(e.button||e.metaKey||e.ctrlKey)},cm.isInputFocused=function(){var e=document.activeElement,t=e.tagName.toLowerCase();return"textarea"===t||"input"===t&&!/button|file/.test(e.type)},cm.isFormInputFocused=function(){var e=document.activeElement;return"input"===e.tagName.toLowerCase()&&!/button|file/.test(e.type)},cm.allowKeyCode=function(){cm.errorLog({type:"error",name:"cm.allowKeyCode",message:"Deprecated!"})},cm.disallowKeyCode=function(){cm.errorLog({type:"error",name:"cm.disallowKeyCode",message:"Deprecated!"})},cm.charCodeIsDigit=function(e){e=String.fromCharCode(e);return/^\d$/.test(e)},cm.allowOnlyDigitInputEvent=function(e,t){return cm.allowOnlyNumbersInputEvent(e,t,{allowNegative:!1,allowFloat:!1})},cm.allowOnlyNumbersInputEvent=function(t,n,e){var a,r,o,s;return e=cm.merge({allowNegative:!1,allowFloat:!1},e),a=e.allowNegative&&e.allowFloat?/[^\d-.]/g:e.allowNegative?/[^\d-]/g:e.allowFloat?/[^\d.]/g:/[^\d]/g,cm.addEvent(t,"input",function(e){r=t.value.replace(a,""),o=!cm.isEmpty(t.maxlength)&&0<t.maxlength,s=!cm.isEmpty(t.max)&&0<t.max,o||s?"number"===t.type?t.value=Math.min(parseFloat(r),parseFloat(t.max)):t.value=cm.reduceText(r,parseFloat(t.maxlength)):t.value=r,n&&n(e,t.value)}),t},window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(e,1e3/60)}),is=(cm.Animation=function(e){var c=this,u=e,p=[],h={random:function(e){return e=e,Math.random()*(1-e)+e},simple:function(e){return e},acceleration:function(e){return Math.pow(e,3)},inhibition:function(e){return 1-h.acceleration(1-e)},smooth:function(e){return e<.5?h.acceleration(2*e)/2:1-h.acceleration(2*(1-e))/2}};c.getTarget=function(){return u},c.go=function(){var e,t,n,a=cm.merge({style:"",duration:"",anim:"simple",onStop:function(){}},arguments[0]),r="animation_process_"+Math.random(),d=h[a.anim]||h.simple,l=[],m=Date.now();for(e in a.style){var o=a.style[e].toString(),s=cm.getStyleDimension(o);l.push({name:e,new:(o=o,(t=e).match(/color/i)?/rgb/i.test(o)?(t=o.match(/\d+/g),[parseInt(t[0]),parseInt(t[1]),parseInt(t[2])]):cm.hex2rgb(o.match(/[\w\d]+/)[0]):o.replace(/[^\-0-9\.]/g,"")),dimension:s,old:cm.getCurrentStyle(u,e,s)})}for(n in p)p[n]=!1;return p[r]=!0,function e(){var t,o,s,c,n=r;return p[n]?(t=(Date.now()-m)/a.duration,o=t,s=d,c=l,a.duration,void((o<=1?(c.forEach(function(e){var t,n,a,r=e.old+(e.new-e.old)*s(o);"opacity"===e.name?cm.setOpacity(u,r):/color/i.test(e.name)?(t=parseInt((e.new[0]-e.old[0])*s(o)+e.old[0]),n=parseInt((e.new[1]-e.old[1])*s(o)+e.old[1]),a=parseInt((e.new[2]-e.old[2])*s(o)+e.old[2]),u.style[c[i].name]=cm.rgb2hex(t,n,a)):/scrollLeft|scrollTop/.test(e.name)?u[e.name]=r:/x1|x2|y1|y2/.test(e.name)?u.setAttribute(e.name,Math.round(r)):"docScrollTop"===e.name?cm.setBodyScrollTop(r):u.style[e.name]=Math.round(r)+e.dimension}),1):(c.forEach(function(e){"opacity"===e.name?cm.setOpacity(u,e.new):/color/i.test(e.name)?u.style[e.name]=cm.rgb2hex(e.new[0],e.new[1],e.new[2]):/scrollLeft|scrollTop/.test(e.name)?u[e.name]=e.new:/x1|x2|y1|y2/.test(e.name)?u.setAttribute(e.name,e.new):"docScrollTop"===e.name?cm.setBodyScrollTop(e.new):u.style[e.name]=e.new+e.dimension}),0))?animFrame(e):(delete p[n],a.onStop&&a.onStop()))):(delete p[n],!1)}(),c},c.stop=function(){for(var e in p)p[e]=!1;return c}},cm.transition=function(n,a){function e(){cm.forEach(a.properties,function(e,t){t=cm.styleStrToKey(t),r=cm.getStyleDimension(e),n.style[t]=cm.getCurrentStyle(n,t,r)+r}),a.immediately?(s(),i()):(setTimeout(s,a.delayIn),setTimeout(i,a.duration+a.delayIn+a.delayOut))}var r,t=cm.getSupportedStyle("transition"),o=[],s=function(){n.style[t]=o,cm.forEach(a.properties,function(e,t){t=cm.styleStrToKey(t),n.style[t]=e})},i=function(){n.style[t]="",a.clear&&cm.forEach(a.properties,function(e,t){t=cm.styleStrToKey(t),n.style[t]=""}),a.onStop(n)};a=cm.merge({properties:{},duration:0,easing:"ease-in-out",delayIn:0,delayOut:0,immediately:!1,clear:!1,onStop:function(){}},a),cm.forEach(a.properties,function(e,t){t=cm.styleStrToKey(t),o.push([t,a.duration+"ms",a.easing].join(" "))}),o=o.join(", "),e()},cm.storageSet=function(e,t,n){if(n=!1!==n,cm.isLocalStorage)try{window.localStorage.setItem(e,t)}catch(e){}else n&&cm.cookieSet(e,t)},cm.storageGet=function(e,t){return t=!1!==t,cm.isLocalStorage?window.localStorage.getItem(e):t?cm.cookieGet(e):null},cm.storageRemove=function(e,t){t=!1!==t,cm.isLocalStorage?window.localStorage.removeItem(e):t&&cm.cookieRemove(e)},cm.sessionStorageSet=function(e,t){if(cm.isSessionStorage)try{window.sessionStorage.setItem(e,t)}catch(e){cm.storageSet.apply(this,arguments)}},cm.sessionStorageGet=function(e){return cm.isSessionStorage?window.sessionStorage.getItem(e):cm.storageGet.apply(this,arguments)},cm.sessionStorageRemove=function(e){cm.isSessionStorage?window.sessionStorage.removeItem(e):cm.storageRemove.apply(this,arguments)},cm.cookieSet=function(e,t,n,a){a="path="+(cm.isEmpty(a)?"/":encodeURI(a)),n=cm.isEmpty(n)?"":cm.cookieDate(n),document.cookie=encodeURI(e)+"="+encodeURI(t)+";"+a+";"+n},cm.cookieGet=function(e){var t,n=" "+document.cookie,e=" "+encodeURI(e)+"=",a=null,r=0;return 0<n.length&&-1!==(t=n.indexOf(e))&&(-1===(r=n.indexOf(";",t+=e.length))&&(r=n.length),a=encodeURI(n.substring(t,r))),a},cm.cookieRemove=function(e){var t=new Date;t.setDate(t.getDate()-1),document.cookie=encodeURI(e)+"=;expires="+t},cm.cookieDate=function(e){return"expires="+new Date(Date.now()+864e5*e).toUTCString()+";"},cm.ajax=function(e){function t(){cm.hook.trigger("ajax.beforePrepare",p),p.httpRequestObject=cm.createXmlHttpRequestObject(),p.type=p.type.toLowerCase(),p.method=p.method.toUpperCase(),!0===p.formData&&(p.paramsType="form-data"),cm.isEmpty(p.variablesMap)||(p._originVariables=cm.clone(p.variables),p.variables=cm.fillDataMap(p.variablesMap,p.variables)),p.data instanceof FormData||p.params instanceof FormData?delete p.headers["Content-Type"]:cm.isEmpty(p.data)?p.params=f(p.params):p.data=f(p.data),cm.isObject(p.uriParams)&&(p.uriParams=cm.obj2URI(p.uriParams,p.uriConfig)),p.url=cm.strReplace(p.url,g),p.url=cm.fillVariables(p.url,p.variables,!0),"none"!==p.paramsType&&(cm.isEmpty(p.uriParams)?cm.isEmpty(p.params)||cm.inArray(["POST","PUT","PATCH"],p.method)||(p.url=[p.url,p.params].join("?")):p.url=[p.url,p.uriParams].join("?")),cm.hook.trigger("ajax.afterPrepare",p)}function n(){p.httpRequestObject.open(p.method,p.url,p.async),p.httpRequestObject.responseType=p.type,"withCredentials"in p.httpRequestObject&&(p.httpRequestObject.withCredentials=p.withCredentials),cm.forEach(p.headers,function(e,t){p.httpRequestObject.setRequestHeader(t,e)}),cm.addEvent(p.httpRequestObject,"load",b),cm.addEvent(p.httpRequestObject,"error",C),cm.addEvent(p.httpRequestObject,"abort",E),p.httpRequestObject.upload&&cm.addEvent(p.httpRequestObject.upload,"progress",v),p.onStart(),p.beacon&&cm.hasBeacon?navigator.sendBeacon(p.url,cm.isEmpty(p.data)?cm.isEmpty(p.params)?null:p.params:p.data):cm.isEmpty(p.data)?!cm.isEmpty(p.params)&&cm.inArray(["POST","PUT","PATCH"],p.method)?p.httpRequestObject.send(p.params):p.httpRequestObject.send(null):p.httpRequestObject.send(p.data)}function a(){window[i]=function(){c||(c=!0,y.apply(y,arguments),S())},window[d]=function(){l||(l=!0,C.apply(C,arguments),S())},m=cm.Node("script",{type:"application/javascript"}),cm.addEvent(m,"load",window[i]),cm.addEvent(m,"error",window[d]),p.onStart(),m.setAttribute("src",p.url),cm.getDocumentHead().appendChild(m)}function r(){window[i]=function(){E(),S()}}var o,s,i,c,d,l,m,u,p=cm.merge({debug:!0,type:"json",method:"POST",paramsType:"uri",uriConfig:{},uriParams:{},data:{},params:"",url:"",variables:{},variablesMap:{},formData:!1,headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},withCredentials:!1,async:!0,beacon:!1,onStart:function(){},onEnd:function(){},onProgress:function(){},onSuccess:function(){},onError:function(){},onAbort:function(){},onResolve:function(){},onReject:function(){},handler:!1},e),h=[200,201,202,204],g=cm._getVariables(),f=function(e){return(cm.isObject(e)||cm.isArray(e))&&(e=cm.objectReplace(e,g),e=cm.objectFillVariables(e,p.variables,!0),"json"===p.paramsType?(p.headers["Content-Type"]="application/json",e=cm.stringifyJSON(e)):"form-data"===p.paramsType?(e=cm.obj2FormData(e),delete p.headers["Content-Type"]):e=cm.obj2URI(e,p.uriConfig)),e},v=function(e){p.onProgress.apply(p.onProgress,arguments)},b=function(e){4===p.httpRequestObject.readyState&&(o=p.httpRequestObject.response,cm.inArray(h,p.httpRequestObject.status)?(p.onSuccess(o,e),p.onResolve(o,e)):(p.onError(o,e),p.onReject(o,e)),w(o),p.onEnd(o,e))},y=function(){p.onSuccess.apply(p.onSuccess,arguments),p.onResolve.apply(p.onResolve,arguments),w.apply(w,arguments),p.onEnd.apply(p.onEnd,arguments)},C=function(){p.onError.apply(p.onError,arguments),p.onReject.apply(p.onReject,arguments),w.apply(w,arguments),p.onEnd.apply(p.onEnd,arguments)},E=function(){p.onAbort.apply(p.onAbort,arguments),w.apply(w,arguments),p.onEnd.apply(p.onEnd,arguments)},w=function(){cm.isFunction(p.handler)&&(cm.errorLog({type:"attention",name:"cm.ajax",message:'Parameter "handler" is deprecated. Use "onSuccess", "onError" or "onAbort" callbacks instead.'}),p.handler.apply(p.handler,arguments))},S=function(){cm.removeEvent(m,"load",window[i]),cm.removeEvent(m,"error",window[d]),cm.remove(m),delete window[i],delete window[d]};return("jsonp"===p.type?(function(){s=["cmAjaxJSONP",Date.now()].join("__"),i=[s,"Success"].join("__"),d=[s,"Error"].join("__"),g["%callback%"]=i,g["%25callback%25"]=i}(),t(),u={abort:r},a):(t(),u=p.httpRequestObject,n))(),u},cm.ajaxPromise=function(n){return new Promise(function(e,t){cm.ajax(cm.merge(n,{onResolve:e,onReject:t}))})},cm.parseJSON=function(t){if(cm.isObject(t)||cm.isArray(t))return t;var e;if(t)try{e=JSON.parse(t)}catch(e){cm.errorLog({type:"common",name:"cm.parseJSON",message:["Error while parsing JSON. Input string:",t].join(" ")})}return e},cm.stringifyJSON=function(e){return cm.isObject(e)||cm.isArray(e)?JSON.stringify(e):e},cm.obj2Filter=function(e,n,a,r){var o,s={};return a=cm.isUndefined(a)?"=":a,r=!cm.isUndefined(r)&&r,cm.forEach(e,function(e,t){r&&cm.isEmpty(e)||(o=cm.isEmpty(n)?t:n+a+t,cm.isObject(e)?s=cm.merge(s,cm.obj2Filter(e,o,a,r)):cm.isArray(e)?s[o]=e.join(","):s[o]=e)}),s},cm.obj2URI=function(e,n){var a,r,o=[];return cm.isString(arguments[1])&&(n={multipleValues:"brackets",prefix:arguments[1]}),n=cm.merge({multipleValues:"brackets",multipleValuesConjunction:",",prefix:null,itemConjunction:"&",valueConjunction:"=",skipEmpty:!1},n),cm.isArray(e)&&"join"===n.multipleValues?(cm.forEach(e,function(e){cm.isUndefined(e)||n.skipEmpty&&cm.isEmpty(e)||o.push(encodeURIComponent(e))}),cm.isEmpty(o)||(o=o.join(n.multipleValuesConjunction),cm.isEmpty(n.prefix))||(o=[n.prefix,o].join(n.valueConjunction)),cm.isEmpty(o)?null:o):(cm.forEach(e,function(e,t){if(!(cm.isUndefined(e)||n.skipEmpty&&cm.isEmpty(e))){if(r=e,cm.isEmpty(n.prefix))a=t;else switch(n.multipleValues){case"brackets":a=n.prefix+"["+t+"]";break;case"keys":case"join":a=[n.prefix,t].join(n.valueConjunction);break;case"same":a=n.prefix}r=cm.isArray(e)&&"keys"===n.multipleValues?cm.obj2URI(r,cm.merge(n,{multipleValues:"same",prefix:a})):"object"===_typeof2(e)?cm.obj2URI(r,cm.merge(n,{prefix:a})):[a,encodeURIComponent(r)].join(n.valueConjunction),o.push(r)}}),cm.isEmpty(o)?null:o.join(n.itemConjunction))},cm.obj2FormData=function(e){var n=new FormData;return cm.forEach(e,function(e,t){n.append(t,e)}),n},cm.formData2Obj=function(e){var t={};return e.entries&&(e=e.entries())&&cm.forEach(e,function(e){t[e[0]]=e[1]}),t},cm.formData2URI=function(e){return cm.obj2URI(cm.formData2Obj(e))},cm.xml2arr=function(e){if(3===(e=9===e.nodeType?cm.firstEl(e):e).nodeType||4===e.nodeType){var t=cm.nextEl(e);if(!t)return e.nodeValue;e=t}if(1!==e.nodeType)return null;for(var n={},a=(n[e.tagName]={},e.childNodes),r=0,o=a.length;r<o;r++){var s=arguments.callee(a[r]);if("object"===_typeof2(s))for(var i in s)n[e.tagName][i]?(n[e.tagName][i],n[e.tagName][i].push?n[e.tagName][i].push(s[i]):n[e.tagName][i]=[n[e.tagName][i],s[i]]):n[e.tagName][i]=s[i];else n[e.tagName]=s}return n[e.tagName]=o?n[e.tagName]:"",n},cm.responseInArray=function(e){for(var t=[],n=e.getElementsByTagName("response")[0].childNodes,a=0;n.length>a;a++)if(1===n[a].nodeType){for(var r=n[a].childNodes,o=[],s=0;r.length>s;s++)1===r[s].nodeType&&(o[r[s].tagName]=r[s].firstChild?r[s].firstChild.nodeValue:"");t.push(o)}return t},cm.createXmlHttpRequestObject=function(){return new XMLHttpRequest},cm.loadHashData=function(){var e=document.location.hash.replace("#","").split("&");return window.userRequest={},e.forEach(function(e){window.userRequest[e.split("=")[0]]=e.split("=")[1]}),!0},cm.reloadHashData=function(){var n="#";return cm.forEach(window.userRequest,function(e,t){n+=t+"="+e}),document.location.hash=n,!0},cm.createSvg=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttribute("version","1.1"),e},cm._defineStack={},cm._defineExtendStack={},cm.defineHelper=function(n,e,a){var r=this;e=cm.merge({modules:[],require:[],params:{},events:[],extend:!1},e),r.build={constructor:a,_raw:cm.clone(e),_update:{},_name:{full:n,short:n.replace(".",""),split:n.split(".")},_className:n,_constructor:a,_modules:{},params:e.params,strings:e.strings},e.extend&&cm.getConstructor(e.extend,function(e,t){a.prototype=Object.create(e.prototype),r.build._inheritName=t,r.build._inherit=e,r.build._raw.modules=cm.merge(r.build._inherit.prototype._raw.modules,r.build._raw.modules),r.build._raw.events=cm.merge(r.build._inherit.prototype._raw.events,r.build._raw.events),cm._defineExtendStack[t]&&cm._defineExtendStack[t].push(n)}),cm.forEach(Mod,function(e,t){e._config&&e._config.predefine&&Mod.Extend._extend.call(r,t,e)}),cm.forEach(r.build._raw.modules,function(e){Mod[e]&&Mod.Extend._extend.call(r,e,Mod[e])}),cm.forEach(r.build,function(e,t){a.prototype[t]=e}),cm._defineExtendStack[n]||(cm._defineExtendStack[n]=[]),cm._defineStack[n]=a,cm.objectSelector(n,window,a)},cm.define=function(){var e=Function.prototype.call.bind(cm.defineHelper,arguments);return function(){e.apply(cm.defineHelper,arguments)}}(),cm.getConstructor=function(t,n){var e;return n=cm.isFunction(n)?n:function(){},cm.isUndefined(t)?(cm._debug&&cm.errorLog({type:"error",name:"cm.getConstructor",message:['Parameter "className" does not specified.'].join(" ")}),!1):"*"===t?(cm.forEach(cm._defineStack,function(e){n(e,t,e.prototype,e.prototype._inherit)}),cm._defineStack):(e=cm._defineStack[t])?(n(e,t,e.prototype,e.prototype._inherit),e):(cm._debug&&cm.errorLog({type:"attention",name:"cm.getConstructor",message:["Class",cm.strWrap(t,'"'),"is not defined."].join(" ")}),!1)},cm.isInstance=function(e,t){var n=!1;return cm.isString(t)&&(t=cm.getConstructor(t)),n=cm.isEmpty(e)||cm.isEmpty(t)?n:e instanceof t},cm.find=function(e,t,n,a,r){var o,s=[],i={};return a=cm.isFunction(a)?a:function(){},r=cm.merge({childs:!1},r),e&&"*"!==e?(o=cm._defineStack[e])?o.prototype.findInStack?(s=cm.extend(s,o.prototype.findInStack(t,n,a)),r.childs&&cm._defineExtendStack[e]&&!i[e]&&(i[e]=!0,cm.forEach(cm._defineExtendStack[e],function(e){s=cm.extend(s,cm.find(e,t,n,a,r))}))):cm.errorLog({type:"error",name:"cm.find",message:["Class",cm.strWrap(e,'"'),"does not support Module Stack."].join(" ")}):cm.errorLog({type:"error",name:"cm.find",message:["Class",cm.strWrap(e,'"'),"does not exist."].join(" ")}):cm.forEach(cm._defineStack,function(e){e.prototype.findInStack&&(s=cm.extend(s,e.prototype.findInStack(t,n,a)))}),s},cm.Finder=function(t,n,a,r,o){function s(e){e.removeEvent(o.event,s),e.isAppropriateToStack(n,a,r)&&!o.multiple&&c&&i.remove(e._constructor)}var e,i=this,c=!1;i.remove=function(e){e?e.prototype.removeEvent(o.event,s):cm.getConstructor(t,function(e){e.prototype.removeEvent(o.event,s)})},r=cm.isFunction(r)?r:function(){},o=cm.merge({event:"onRender",multiple:!1,childs:!1},o),(e=cm.find(t,n,a,r,{childs:o.childs}))&&e.length&&!o.multiple||(c=!0,cm.getConstructor(t,function(e){e.prototype.addEvent(o.event,s)}))},cm.setParams=function(e,a){cm.getConstructor(e,function(e,t,n){n.setParams(a)})},cm.setMessages=cm.setStrings=function(e,a){cm.getConstructor(e,function(e,t,n){n.setMessages(a)})},cm.getMessage=cm.getString=function(e,a){var r;return cm.getConstructor(e,function(e,t,n){r=n.message(a)}),r},cm.getMessages=cm.getStrings=function(e,a){var r;return(cm.isUndefined(a)||cm.isEmpty(a))&&(a="*"),cm.getConstructor(e,function(e,t,n){r=n.messageObject(a)}),r},Mod.Extend={_config:{extend:!0,predefine:!0},_construct:function(){},_extend:function(e,t){var n=this;n.build._modules[e]||(t._config=cm.merge({extend:!1,predefine:!1,require:[],events:[]},t._config),cm.forEach(t._config.require,function(e){Mod[e]&&Mod.Extend._extend.call(n,e,Mod[e])}),t._config.extend&&cm.forEach(t,function(e,t){/^(_)/.test(t)||(n.build[t]=e)}),cm.isEmpty(t._config.events)||(n.build._raw.events=cm.extend(n.build._raw.events,t._config.events)),cm.isFunction(t._construct)?t._construct.call(n):cm.errorLog({type:"error",name:n.build._name.full,message:["Module",cm.strWrap(e,'"'),'does not have "_construct" method.'].join(" ")}),n.build._modules[e]=t)},extend:function(e,t){var n=this;t?e?n._modules[e]?cm.errorLog({type:"error",name:n._name.full,message:["Module with name",cm.strWrap(e,'"'),"already constructed."].join(" ")}):(t._config=cm.merge({extend:!1,predefine:!1,require:[],events:[]},t._config),cm.forEach(t._config.require,function(e){Mod[e]&&Mod.Extend._extend.call(n,e,Mod[e])}),t._config.extend&&cm.forEach(t,function(e,t){/^(_)/.test(t)||(cm._defineStack[n._name.full].prototype[t]=e)}),cm.isEmpty(t._config.events)||(cm._defineStack[n._name.full].prototype._raw.events=cm.extend(cm._defineStack[n._name.full].prototype._raw.events,t._config.events)),cm.isFunction(t._construct)?t._construct.call(n):cm.errorLog({type:"error",name:n._name.full,message:["Module",cm.strWrap(e,'"'),'does not have "_construct" method.'].join(" ")}),n._modules[e]=t):cm.errorLog({type:"error",name:n._name.full,message:"Module should have a name."}):cm.errorLog({type:"error",name:n._name.full,message:"Trying to extend the class by non-existing module."})}},Mod.Component={_config:{extend:!0,predefine:!0},_construct:function(){this.build._isComponent=!0,void 0===this.build.params.consoleLogErrors&&(this.build.params.consoleLogErrors=!0)},renderComponent:function(){var t=this;cm.forEach(t._modules,function(e){cm.isFunction(e._render)&&e._render.call(t)})},cloneComponent:function(t){var n=this,a=null;return cm.getConstructor(n._className,function(e){a=new e(cm.merge(n.params,t))}),a}},Mod.Params={_config:{extend:!0,predefine:!1,require:["Extend"],events:["onSetParams"]},_construct:function(){var e=this;e.build.params||(e.build.params={}),e.build._update.params||(e.build._update.params={}),e.build._inherit&&(e.build.params=cm.merge(e.build._inherit.prototype.params,e.build.params))},_render:function(){this._inherit&&(this.params=cm.merge(this._inherit.prototype.params,this.params))},setParams:function(e,t,n){var a=this;return t=!cm.isUndefined(t)&&t,n=!!cm.isUndefined(n)||n,a.params=cm.merge((t?a._raw:a).params,e),a._update=cm.clone(a._update),a._update.params=cm.merge(a._update.params,a.params),cm.forEach(a.params,function(e,t){switch(t){case"messages":case"strings":case"langs":cm.isFunction(a.setLangs)&&a.setLangs(e);break;default:switch(e){case"document.window":a.params[t]=window;break;case"document.html":cm.getDocumentHtml()&&(a.params[t]=cm.getDocumentHtml());break;case"document.body":document.body&&(a.params[t]=document.body);break;case"top.document.body":window.top.document.body&&(a.params[t]=window.top.document.body);break;case"document.head":cm.getDocumentHead()&&(a.params[t]=cm.getDocumentHead());break;default:/^cm._config./i.test(e)&&(a.params[t]=cm._config[e.replace("cm._config.","")]),/^@LESS./i.test(e)&&(a.params[t]=window.LESS[e.replace("@LESS.","")])}}}),n&&a._modules.Events&&a.triggerEvent("onSetParams"),a},getParams:function(e){return e?this.params[e]:this.params},getRawParams:function(e){return e?this._raw.params[e]:this._raw.params}},Mod.Events={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){var t=this;t.build.events={},cm.forEach(t.build._raw.events,function(e){t.build.events[e]=[]}),t.build.params.events||(t.build.params.events={}),t.build._inherit&&(t.build.params.events=cm.extend(t.build._inherit.prototype.params.events,t.build.params.events,!0),t.build.events=cm.extend(t.build._inherit.prototype.events,t.build.events,!0))},_render:function(){var e=this;e._inherit&&(e.params.events=cm.extend(e._inherit.prototype.params.events,e.params.events,!0),e.events=cm.extend(e._inherit.prototype.events,e.events,!0))},addEvent:function(e,t){var n=this;return n.events=cm.clone(n.events),n.events[e]?cm.isFunction(t)?n.events[e].push(t):cm.errorLog({name:n._name.full,message:["Handler of event",cm.strWrap(e,'"'),"must be a function."].join(" ")}):cm.errorLog({type:"attention",name:n._name.full,message:[cm.strWrap(e,'"'),"does not exists."].join(" ")}),n},addEvents:function(e){return e&&this.convertEvents(e),this},removeEvent:function(e,t){var n=this;return n.events=cm.clone(n.events),n.events[e]?cm.isFunction(t)?n.events[e]=n.events[e].filter(function(e){return e!==t}):cm.errorLog({name:n._name.full,message:["Handler of event",cm.strWrap(e,'"'),"must be a function."].join(" ")}):cm.errorLog({type:"attention",name:n._name.full,message:[cm.strWrap(e,'"'),"does not exists."].join(" ")}),n},removeAllEvent:function(e){var t=this;return t.events=cm.clone(t.events),t.events[e]?t.events=[]:cm.errorLog({type:"attention",name:t._name.full,message:[cm.strWrap(e,'"'),"does not exists."].join(" ")}),t},triggerEvent:function(e,t){var n,a=this,r=cm.clone(arguments);return(r[0]=a).events[e]?(n=cm.clone(a.events[e]),cm.forEach(n,function(e){e.apply(a,r)})):cm.errorLog({type:"attention",name:a._name.full,message:[cm.strWrap(e,'"'),"does not exists."].join(" ")}),a},hasEvent:function(e){return!!this.events[e]},convertEvents:function(e){var n=this;return cm.forEach(e,function(e,t){cm.isArray(e)?cm.forEach(e,function(e){n.addEvent(t,e)}):n.addEvent(t,e)}),n}},Mod.Langs={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){this.build.strings||(this.build.strings={}),this.build.params.langs||(this.build.params.langs={})},_render:function(){this.strings=cm.merge(this.strings,this.params.langs)},lang:function(e,t,n){var a;return cm.isUndefined(e)||cm.isEmpty(e)?"":(a=this.getLang(e),cm.isUndefined(a)&&(a=e),a=cm.isObject(a)||cm.isArray(a)?cm.objectReplace(a,t):cm.strReplace(a,t),!cm.isUndefined(n)&&cm.isArray(a)?cm.plural(n,a):a)},message:function(){return this.lang.apply(this,arguments)},msg:function(){return this.lang.apply(this,arguments)},getLang:function(e){var t,n;if(!cm.isUndefined(e)&&!cm.isEmpty(e))return t=cm.reducePath(n="*"===e?void 0:e,this.params.langs),(cm.isUndefined(t)||cm.isObject(t))&&(n=cm.reducePath(n,this.strings),t=cm.isObject(t)?cm.merge(n,t):n),this._inherit&&(cm.isUndefined(t)||cm.isObject(t))&&(n=this._inherit.prototype.getLang(e),t=cm.isObject(t)?cm.merge(n,t):n),t},getMessage:function(){return this.getLang.apply(this,arguments)},getMsg:function(){return this.getLang.apply(this,arguments)},langObject:function(e){var t=this.lang(e);return cm.isFunction(t)?t(e):cm.isObject(t)||cm.isArray(t)?t:{}},messageObject:function(){return this.langObject.apply(this,arguments)},msgObject:function(){return this.langObject.apply(this,arguments)},setLangs:function(e){var t=this;return cm.isObject(e)&&(cm.isFunction(t)?t.prototype.strings=cm.merge(t.prototype.strings,e):t.strings=cm.merge(t.strings,e)),t},setMessages:function(){return this.setLangs.apply(this,arguments)},setMsgs:function(){return this.setLangs.apply(this,arguments)}},Mod.DataConfig={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){cm.isUndefined(this.build.params.configDataMarker)&&(this.build.params.configDataMarker="data-config")},getDataConfig:function(e,t){return cm.isNode(e)&&(t=t||this.params.configDataMarker,e=(e=e.getAttribute(t))&&cm.parseJSON(e))&&this.setParams(e),this},getNodeDataConfig:function(e,t){return cm.isNode(e)&&(t=t||this.params.configDataMarker,e=(e=e.getAttribute(t))&&cm.parseJSON(e))?e:{}}},Mod.DataNodes={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){var e=this;e.build.params.nodes||(e.build.params.nodes={}),e.build.params.nodesDataMarker="data-node",e.build.params.nodesMarker=e.build._name.short,e.build.nodes||(e.build.nodes={}),e.build._inherit&&(e.build.params.nodes=cm.merge(e.build._inherit.prototype.params.nodes,e.build.params.nodes),e.build.nodes=cm.merge(e.build._inherit.prototype.nodes,e.build.nodes))},getDataNodes:function(e,t,n){var a=this,r={};return(e=cm.isUndefined(e)?document.body:e)&&(t=cm.isUndefined(t)?a.params.nodesDataMarker:t,r=(n=cm.isUndefined(n)?a.params.nodesMarker:n)?cm.getNodes(e,t)[n]||{}:cm.getNodes(e,t),a.nodes=cm.merge(a.nodes,r)),a.nodes=cm.merge(a.nodes,a.params.nodes),a},getDataNodesObject:function(e,t,n){return e=void 0===e?document.body:e,t=void 0===t?this.params.nodesDataMarker:t,(n=void 0===n?this.params.nodesMarker:n)?cm.getNodes(e,t)[n]||{}:cm.getNodes(e,t)}},Mod.Storage={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){this.build.params.name||(this.build.params.name="")},storageGet:function(e,t){var n=this,t=cm.parseJSON(cm[t?"sessionStorageGet":"storageGet"](n._className))||{};return cm.isEmpty(n.params.name)?(cm.errorLog({type:"error",name:n._className,message:'Storage cannot be read because "name" parameter not provided.'}),null):!t[n.params.name]||cm.isUndefined(t[n.params.name][e])?(cm.errorLog({type:"attention",name:n._className,message:["Parameter",cm.strWrap(e,'"'),"does not exist or is not set in component with name",cm.strWrap(n.params.name,'"'),"."].join(" ")}),null):t[n.params.name][e]},storageRead:function(){return this.storageGet.apply(this,arguments)},storageGetAll:function(e){var t=this,e=cm.parseJSON(cm[e?"sessionStorageGet":"storageGet"](t._className))||{};return cm.isEmpty(t.params.name)?(cm.errorLog({type:"error",name:t._className,message:'Storage cannot be read because "name" parameter not provided.'}),{}):e[t.params.name]||(cm.errorLog({type:"attention",name:t._className,message:"Storage is empty."}),{})},storageReadAll:function(){return this.storageGetAll.apply(this,arguments)},storageSet:function(e,t,n){var a=this,r=cm.parseJSON(cm[n?"sessionStorageGet":"storageGet"](a._className))||{};return cm.isEmpty(a.params.name)?(cm.errorLog({type:"error",name:a._className,message:'Storage cannot be written because "name" parameter not provided.'}),{}):(r[a.params.name]||(r[a.params.name]={}),r[a.params.name][e]=t,cm[n?"sessionStorageSet":"storageSet"](a._className,JSON.stringify(r)),r[a.params.name])},storageWrite:function(){return this.storageSet.apply(this,arguments)},storageSetAll:function(e,t){var n=this,a=cm.parseJSON(cm[t?"sessionStorageGet":"storageGet"](n._className))||{};return cm.isEmpty(n.params.name)?(cm.errorLog({type:"error",name:n._className,message:'Storage cannot be written because "name" parameter not provided.'}),{}):(a[n.params.name]=e,cm[t?"sessionStorageSet":"storageSet"](n._className,JSON.stringify(a)),a[n.params.name])},storageWriteAll:function(){return this.storageSetAll.apply(this,arguments)},storageRemove:function(e,t){var n=this,a=cm.parseJSON(cm[t?"sessionStorageGet":"storageGet"](n._className))||{};return cm.isEmpty(n.params.name)?(cm.errorLog({type:"error",name:n._className,message:'Storage cannot be written because "name" parameter not provided.'}),{}):(a[n.params.name]||(a[n.params.name]={}),delete a[n.params.name][e],cm[t?"sessionStorageSet":"storageSet"](n._className,JSON.stringify(a)),a[n.params.name])},storageClear:function(){return this.storageRemove.apply(this,arguments)}},Mod.Callbacks={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){var e=this;e.build.params.callbacks||(e.build.params.callbacks={}),e.build.callbacks={},e.build._callbacks={},e.build._inherit&&(e.build.params.callbacks=cm.extend(e.build._inherit.prototype.params.callbacks,e.build.params.callbacks),e.build.callbacks=cm.extend(e.build._inherit.prototype.callbacks,e.build.callbacks))},_render:function(){var e=this;e._inherit&&(e.params.callbacks=cm.merge(e._inherit.prototype.params.callbacks,e.params.callbacks),e.callbacks=cm.extend(e._inherit.prototype.callbacks,e.callbacks))},callbacksProcess:function(){var n=this;return n.callbacks=cm.clone(n.callbacks),cm.forEach(n.callbacks,function(e,t){n._callbacks[t]=e}),cm.forEach(n.params.callbacks,function(e,t){n.callbacks[t]=e}),n},callbacksRestore:function(){var n=this;return n.callbacks=cm.clone(n.callbacks),cm.forEach(n._callbacks,function(e,t){n.callbacks[t]=e}),n}},Mod.Stack={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){this.build.params.name||(this.build.params.name=""),this.build._stack=[]},addToStack:function(e){var t=this,n=cm.isNumber(t.params.name)?t.params.name.toString():t.params.name;return t._stackItem?cm.isNode(e)&&(t._stackItem.node=e):(t._stackItem={name:n,node:e,class:t,classInstance:t,className:t._name.full},t._stack.push(t._stackItem)),t},removeFromStack:function(){return cm.arrayRemove(this._stack,this._stackItem),this._stackItem=null,this},isAppropriateToStack:function(e,t,n){var a=this._stackItem;return e=cm.isNumber(e)?e.toString():e,n=cm.isFunction(n)?n:function(){},!(!cm.isEmpty(e)&&a.name!==e||!cm.isEmpty(t)&&!cm.isParent(t,a.node,!0)||(n(a.classInstance,a,e),0))},findInStack:function(t,n,a){var r=[];return t=cm.isNumber(t)?t.toString():t,a=cm.isFunction(a)?a:function(){},cm.forEach(this._stack,function(e){!cm.isEmpty(t)&&e.name!==t||!cm.isEmpty(n)&&!cm.isParent(n,e.node,!0)||(r.push(e),a(e.classInstance,e,t))}),r},getStackNode:function(){return this._stackItem?this._stackItem.node:null}},Mod.Structure={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){cm.isUndefined(this.build.params.renderStructure)&&(this.build.params.renderStructure=!0),cm.isUndefined(this.build.params.embedStructure)&&(this.build.params.embedStructure="append")},embedStructure:function(e,t){var n=this;switch(n.params.embedStructure){case"replace":n.replaceStructure(e);break;case"append":case"last":n.appendStructure(e,"insertLast",t);break;case"prepend":case"first":n.appendStructure(e,"insertFirst",t)}return n},appendStructure:function(e,t,n){return(n=n||this.params.container||this.params.node)&&cm[t](e,n),this},replaceStructure:function(e,t){var n=this;return(t=t||n.params.container)?n.params.container===n.params.node?cm.insertBefore(e,n.params.node):n.params.container.appendChild(e):n.params.node&&cm.insertBefore(e,n.params.node),cm.remove(n.params.node),n}},Part.Menu=(()=>{function r(e,t){e=cm.getEventTarget(e),cm.isParent(t.drop,e,!0)||c(t)}function o(e,t){var n;cm._pageSize.winWidth>cm._config.adaptiveFrom&&!t._show&&(t._interval&&clearTimeout(t._interval),t._interval=setTimeout(function(){t._show=!1},500),t._show=!0,n=cm.getEventTarget(e),cm.isParent(t.drop,n,!0)||(cm.isClass(t.node,"is-show")?cm.removeClass(t.node,"is-show"):(cm.preventDefault(e),cm.addClass(t.node,"is-show"))))}function s(e,t){e=cm.getEventTarget(e),cm.isParent(t.node,e,!0)||cm.removeClass(t.node,"is-show")}var a,i=[],c=function(e){a=cm.getPageSize();var t=e.drop.offsetWidth,n=cm.getX(e.node);t+(e.node.parentNode&&cm.isClass(e.node.parentNode,"pt__menu-dropdown")?e.node.parentNode.offsetWidth:0)+n>=a.winWidth?cm.replaceClass(e.drop,"pull-left","pull-right"):cm.replaceClass(e.drop,"pull-right","pull-left")};return function(e){e=cm.isUndefined(e)?document.body:e;var n,e=cm.getByClass("pt__menu",e),a=[];cm.forEach(e,function(e){var t;cm.inArray(i,e)||cm.hasClass(e,"is-manual")||((n={node:e,drop:cm.getByClass("pt__menu-dropdown",e)[0]}).drop&&(t=n,cm.addEvent(t.node,"pointerenter",function(e){r(e,t)}),cm.addEvent(t.node,"touchenter",function(e){r(e,t)}),cm.addEvent(t.node,"mouseover",function(e){r(e,t)}),cm.addEvent(t.node,"pointerdown",function(e){o(e,t)}),cm.addEvent(t.node,"touchstart",function(e){o(e,t)}),cm.addEvent(t.node,"mousedown",function(e){o(e,t)}),cm.addEvent(document.body,"pointerdown",function(e){s(e,t)}),cm.addEvent(document.body,"touchstart",function(e){s(e,t)}),cm.addEvent(document.body,"mousedown",function(e){s(e,t)}),c(t)),a.push(n),i.push(e))}),cm.addEvent(window,"resize",function(){cm.forEach(a,function(e){c(e)})})}})(),Part.Autoresize=(()=>{var t,n=[];function a(e){cm.inArray(n,e)||(cm.isNode(e)&&"textarea"===e.tagName.toLowerCase()&&(cm.addEvent(e,"input",r),cm.addEvent(e,"change",r),cm.addEvent(e,"focus",r),cm.addEvent(e,"blur",r),cm.customEvent.add(e,"redraw",r)),n.push(e))}function r(e){e=e.currentTarget||e.target;e.style.height="0px",e.style.height=[e.scrollHeight+(e.offsetHeight-e.clientHeight),"px"].join("")}return function(e){e=cm.isUndefined(e)?document.body:e,t=cm.getByClass("cm-autoresize",e),cm.forEach(t,a)}})(),cm._breakpoints=cm.getBreakpoints(),cm._breakpoint=cm.getBreakpoint(),cm.init=function(){function e(){animFrame(function(){l(),u()})}function t(){l(),m(),u(),p()}function n(){void 0!==Com.UA&&Com.UA.setBrowserClass()}function a(e){cm._clientPosition=cm.getEventClientPosition(e)}var r,o,s,i,c,d,l=function(){cm._pageSize=cm.getPageSize(),o=JSON.stringify(cm._pageSize),r!==o&&(r=o,cm.hook.trigger(window,"pageSizeChange",{pageSize:cm._pageSize}),cm.customEvent.trigger(window,"pageSizeChange",{direction:"all",self:!0,pageSize:cm._pageSize}))},m=function(){cm._breakpoints=cm.getBreakpoints(),cm._breakpoint=cm.getBreakpoint()},u=function(){cm._scrollSize=cm.getScrollBarSize(),s!==cm._scrollSize&&(s=cm._scrollSize,cm.toggleClass(cm.getDocumentHtml(),"is-scrollbar-visible",0<s),cm.hook.trigger("scrollSizeChange",{scrollSize:cm._scrollSize}),cm.customEvent.trigger(window,"scrollSizeChange",{direction:"all",self:!0,scrollSize:cm._scrollSize}))},p=(d=cm.getDocumentHtml(),function(){i=cm._pageSize.winWidth,c=cm._pageSize.height,cm.removeClass(d,["is",cm._deviceType].join("-")),cm.removeClass(d,["is",cm._deviceOrientation].join("-")),cm._adaptive=i<=cm._config.adaptiveFrom,cm._deviceOrientation=i<c?"portrait":"landscape",i>=cm._breakpoints.desktop&&(cm._deviceType="desktop"),i<=cm._breakpoints.desktopDown&&(cm._deviceType="tablet"),i<=cm._breakpoints.mobileDown&&(cm._deviceType="mobile"),cm.addClass(d,["is",cm._deviceType].join("-")),cm.addClass(d,["is",cm._deviceOrientation].join("-"))});cm._isDocumentReady=!0,n(),l(),m(),u(),p(),cm.addEvent(document,"touchstart",function(){},!1),cm.addEvent(window,"mousemove",a),cm.addEvent(window,"resize",t),setInterval(e,50)},cm.load=function(){cm._isDocumentLoad=!0,cm._config.redrawOnLoad&&cm.customEvent.trigger(document.body,"redraw",{direction:"child",self:!1})},cm.onReady(cm.init,!1),cm.onLoad(cm.load,!1),cm.diff=function(e,t){if(!t||"[object Object]"!==Object.prototype.toString.call(t))return e;var n,a={};for(n in e)e.hasOwnProperty(n)&&cm.diffCompare(a,e[n],t[n],n);for(n in t)!t.hasOwnProperty(n)||e[n]||e[n]===t[n]||(a[n]=t[n]);return a},cm.diffCompare=function(e,t,n,a){var r=Object.prototype.toString.call(t),o=Object.prototype.toString.call(n);"[object Undefined]"===o?e[a]=null:r!==o?e[a]=n:"[object Object]"===r?(o=cm.diff(t,n),0<Object.keys(o).length&&(e[a]=o)):"[object Array]"===r?cm.diffArraysMatch(t,n)||(e[a]=n):"[object Function]"===r?t.toString()!==n.toString()&&(e[a]=n):t!==n&&(e[a]=n)},cm.diffArraysMatch=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},cm.define("Com.AbstractController",{modules:["Params","Events","Langs","Structure","DataConfig","DataNodes","Storage","Callbacks","Stack"],events:["onConstruct","onConstructStart","onConstructProcess","onConstructEnd","onInitComponentsStart","onInitComponentsEnd","onGetLESSVariables","onGetLESSVariablesStart","onGetLESSVariablesProcess","onGetLESSVariablesEnd","onValidateParams","onValidateParamsStart","onValidateParamsProcess","onValidateParamsEnd","onRenderStart","onRender","onRenderEnd","onBeforeRender","onAfterRender","onRenderViewModel","onDestruct","onDestructStart","onDestructProcess","onDestructEnd","onRedraw","onResize","onScroll","onScrollUpdate","onSetEvents","onSetEventsStart","onSetEventsProcess","onSetEventsEnd","onUnsetEvents","onUnsetEventsStart","onUnsetEventsProcess","onUnsetEventsEnd","onSetCustomEvents","onUnsetCustomEvents","onRenderViewStart","onRenderViewProcess","onRenderViewEnd"],params:{node:null,container:null,name:"",getDataNodes:!0,getDataConfig:!0,embedStructure:"append",renderStructure:!0,embedStructureOnRender:!0,redrawOnRender:"immediately",redrawOnResize:"frame",removeOnDestruct:!1,destructOnRemove:!0,className:"",controllerEvents:!1,customEvents:!0,resizeEvent:!0,resizeNode:window,scrollEvent:!1,scrollNode:window,collector:null,constructCollector:!1,destructCollector:!1}},function(e){var t=this;t.isDestructed=!1,t.isConstructed=!0,t.nodes={},t.components={},t.construct(e)}),cm.getConstructor("Com.AbstractController",function(e,t,n,a){n.construct=function(e){var t=this;return t.isConstructed=!1,t.isScrollTicking=!1,t.redrawHandler=t.redraw.bind(t),t.resizeHandler=t.resize.bind(t),t.scrollHandler=t.scroll.bind(t),t.destructHandler=t.destruct.bind(t),t.constructCollectorHandler=t.constructCollector.bind(t),t.destructCollectorHandler=t.destructCollector.bind(t),t.params.controllerEvents&&t.bindControllerEvents(),t.triggerEvent("onConstructStart"),t.renderComponent(),t.initComponents(),t.getLESSVariables(),t.setParams(e),t.convertEvents(t.params.events),t.params.getDataNodes&&t.getDataNodes(t.params.node),t.params.getDataConfig&&t.getDataConfig(t.params.node),t.callbacksProcess(),t.validateParams(),t.addToStack(t.params.node),t.triggerEvent("onConstruct"),t.triggerEvent("onRenderStart"),t.triggerEvent("onBeforeRender"),t.render(),t.triggerEvent("onAfterRender"),t.triggerEvent("onConstructProcess"),t.addToStack(t.nodes.container),t.setEvents(),t.isConstructed=!0,t.triggerEvent("onRender"),t.triggerEvent("onRenderEnd"),t.triggerEvent("onConstructEnd"),t},n.destruct=function(){var e=this;return e.isDestructed||(e.isConstructed=!1,e.isDestructed=!0,e.triggerEvent("onDestructStart"),e.triggerEvent("onDestruct"),e.triggerEvent("onDestructProcess"),cm.customEvent.trigger(e.nodes.container,"destruct",{direction:"child",self:!1}),e.unsetEvents(),e.params.removeOnDestruct&&cm.remove(e.nodes.container),e.removeFromStack(),e.triggerEvent("onDestructEnd")),e},n.remove=function(){return this.params.destructOnRemove&&this.destruct(),cm.remove(this.nodes.container),this},n.redraw=function(e,t){var n=this;switch(t=cm.merge({direction:"child",self:!0},t),e){case"full":cm.customEvent.trigger(n.nodes.container,"redraw",t);break;case"immediately":n.triggerEvent("onRedraw");break;default:animFrame(function(){n.triggerEvent("onRedraw")})}return n},n.resize=function(e){var t=this;return t.params.redrawOnResize&&t.redraw(t.params.redrawOnResize),"immediately"===e?t.triggerEvent("onResize"):animFrame(function(){t.triggerEvent("onResize")}),t},n.scroll=function(e){var t=this;return t.triggerEvent("onScroll"),"immediately"===e?t.scrollUpdate():(t.isScrollTicking||requestAnimationFrame(t.scrollUpdate.bind(t)),t.isScrollTicking=!0),t},n.scrollUpdate=function(){this.isScrollTicking=!1,this.triggerEvent("onScrollUpdate")},n.bindControllerEvents=function(){var t=this;return cm.forEach(t._raw.events,function(e){t[e]||(t[e]=function(){}),t[e+"Handler"]||(t[e+"Handler"]=t[e].bind(t)),t.addEvent(e,t[e+"Handler"])}),t},n.initComponents=function(){return this.triggerEvent("onInitComponentsStart"),this.triggerEvent("onInitComponentsEnd"),this},n.getLESSVariables=function(){var e=this;return e.triggerEvent("onGetLESSVariablesStart"),e.triggerEvent("onGetLESSVariables"),e.triggerEvent("onGetLESSVariablesProcess"),e.triggerEvent("onGetLESSVariablesEnd"),e},n.validateParams=function(){return this.triggerEvent("onValidateParamsStart"),this.validateParamsHandler(),this.triggerEvent("onValidateParamsEnd"),this},n.validateParamsHandler=function(){this.triggerEvent("onValidateParams"),this.triggerEvent("onValidateParamsProcess")},n.render=function(){var e=this;return e.params.renderStructure&&e.renderView(),e.setAttributes(),e.renderViewModel(),e.params.embedStructureOnRender&&e.appendView(),e},n.renderView=function(){var e=this;return e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__abstract"}),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd"),e},n.renderViewModel=function(){return this.triggerEvent("onRenderViewModel"),this},n.appendView=function(){var e=this;e.embedStructure(e.nodes.container),!0===e.params.redrawOnRender?e.redraw():cm.isString(e.params.redrawOnRender)&&e.redraw(e.params.redrawOnRender)},n.setAttributes=function(){return cm.addClass(this.nodes.container,this.params.className),this},n.setEvents=function(){return this.triggerEvent("onSetEventsStart"),this.setEventsHandler(),this.triggerEvent("onSetEventsEnd"),this},n.setEventsHandler=function(){var e=this;e.params.resizeEvent&&cm.addEvent(e.params.resizeNode,"resize",e.resizeHandler),e.params.scrollEvent&&cm.addEvent(e.params.scrollNode,"scroll",e.scrollHandler),e.triggerEvent("onSetEvents"),e.triggerEvent("onSetEventsProcess"),e.params.customEvents&&(cm.customEvent.add(e.getStackNode(),"redraw",e.redrawHandler),cm.customEvent.add(e.getStackNode(),"destruct",e.destructHandler),e.triggerEvent("onSetCustomEvents"))},n.unsetEvents=function(){return this.triggerEvent("onUnsetEventsStart"),this.unsetEventsHandler(),this.triggerEvent("onUnsetEventsEnd"),this},n.unsetEventsHandler=function(){var e=this;e.params.resizeEvent&&cm.removeEvent(e.params.resizeNode,"resize",e.resizeHandler),e.params.scrollEvent&&cm.removeEvent(e.params.scrollNode,"scroll",e.scrollHandler),e.triggerEvent("onUnsetEvents"),e.triggerEvent("onUnsetEventsProcess"),e.params.customEvents&&(cm.customEvent.remove(e.getStackNode(),"redraw",e.redrawHandler),cm.customEvent.remove(e.getStackNode(),"destruct",e.destructHandler),e.triggerEvent("onUnsetCustomEvents"))},n.constructCollector=function(t){var e=this;return t=cm.isUndefined(t)?e.getStackNode():t,e.params.constructCollector&&(e.params.collector?e.params.collector.construct(t):cm.find("Com.Collector",null,null,function(e){e.construct(t)})),e},n.destructCollector=function(t){var e=this;return t=cm.isUndefined(t)?e.getStackNode():t,e.params.destructCollector&&(e.params.collector?e.params.collector.destruct(t):cm.find("Com.Collector",null,null,function(e){e.destruct(t)})),e}}),cm.define("Com.AbstractContainer",{extend:"Com.AbstractController",events:["onOpen","onOpenEnd","onCloseStart","onClose","onOpenPlaceholder","onOpenPlaceholderEnd","onClosePlaceholderStart","onClosePlaceholder","onRenderControllerStart","onRenderControllerProcess","onRenderController","onRenderControllerEnd","onRenderPlaceholderStart","onRenderPlaceholderProcess","onRenderPlaceholderEnd","onRenderPlaceholderViewStart","onRenderPlaceholderViewProcess","onRenderPlaceholderViewEnd"],params:{embedStructure:"none",controllerEvents:!0,preventDefault:!0,stopPropagation:!1,constructor:null,constructorParams:{},params:{},placeholder:!1,placeholderConstructor:null,placeholderParams:{},destructOnClose:!0,openOnConstruct:!1},strings:{title:"Container",close:"Close",save:"Save",help:""}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.AbstractContainer",function(e,t,n,a){n.construct=function(){var e=this;e.hasOpen=!1,e.targetNode=null,e.openHandler=e.open.bind(e),e.closeHandler=e.close.bind(e),e.afterOpenControllerHandler=e.afterOpenController.bind(e),e.afterOpenControllerEndHandler=e.afterOpenControllerEnd.bind(e),e.afterCloseControllerStartHandler=e.afterCloseControllerStart.bind(e),e.afterCloseControllerHandler=e.afterCloseController.bind(e),e.afterOpenPlaceholderHandler=e.afterOpenPlaceholder.bind(e),e.afterOpenPlaceholderEndHandler=e.afterOpenPlaceholderEnd.bind(e),e.afterClosePlaceholderStartHandler=e.afterClosePlaceholderStart.bind(e),e.afterClosePlaceholderHandler=e.afterClosePlaceholder.bind(e),a.prototype.construct.apply(e,arguments)},n.onDestructProcess=function(){this.destructPlaceholder(),this.destructController()},n.validateParams=function(){var e=this;e.triggerEvent("onValidateParamsStart"),e.triggerEvent("onValidateParams"),e.triggerEvent("onValidateParamsProcess"),e.params.constructorParams=cm.merge(e.params.constructorParams,e.params.params),e.params.constructorParams=cm.merge(e.params.constructorParams,{node:e.params.node,container:e.params.container}),e.params.params=e.params.constructorParams,e.triggerEvent("onValidateParamsEnd")},n.open=function(e){var t=this;return e&&(t.params.preventDefault&&cm.preventDefault(e),t.params.stopPropagation)&&cm.stopPropagation(e),t.params.placeholder?t.openPlaceholder():t.openController(),t},n.close=function(e){var t=this;return e&&(t.params.preventDefault&&cm.preventDefault(e),t.params.stopPropagation)&&cm.stopPropagation(e),t.params.placeholder?t.closePlaceholder():t.closeController(),t},n.isOpen=function(){return this.wasOpen},n.getController=function(){return this.components.controller},n.getPlaceholder=function(){return this.components.placeholder},n.render=function(){var e=this;e.nodes.button?e.setTarget(e.nodes.button):e.setTarget(e.params.node),e.params.openOnConstruct&&e.open()},n.setTarget=function(e){var t=this;return t.targetNode&&(cm.click.remove(t.targetNode,t.openHandler),t.targetNode.removeAttribute("aria-haspopup","dialog"),t.targetNode=null),cm.isNode(e)&&(t.targetNode=e,t.targetNode.setAttribute("aria-haspopup","dialog"),cm.click.add(e,t.openHandler)),t},n.setControllerParams=function(e){var t=this;return t.params.constructorParams=cm.merge(t.params.constructorParams,e),t.components.controller&&t.components.controller.setParams(e),t},n.renderController=function(){var t=this;cm.getConstructor(t.params.constructor,function(e){t.triggerEvent("onRenderControllerStart",arguments),t.renderControllerView(),t.components.controller=t.constructController(e),t.triggerEvent("onRenderControllerProcess",t.components.controller),t.renderControllerEvents(),t.triggerEvent("onRenderController",t.components.controller),t.triggerEvent("onRenderControllerEnd",t.components.controller)})},n.renderControllerView=function(){},n.constructController=function(e){return new e(this.constructControllerParams(this.params.constructorParams))},n.constructControllerParams=function(e){var t=this;return cm.merge(e,{opener:t,container:t.params.placeholder?t.nodes.placeholder.content:t.params.container,content:t.params.constructorParams.content||t.params.content,events:t.constructControllerEvents()})},n.constructControllerEvents=function(){return{}},n.renderControllerEvents=function(){var e=this;e.components.controller.addEvent("onOpen",e.afterOpenControllerHandler),e.components.controller.addEvent("onOpenEnd",e.afterOpenControllerEndHandler),e.components.controller.addEvent("onCloseStart",e.afterCloseControllerStartHandler),e.components.controller.addEvent("onClose",e.afterCloseControllerHandler)},n.destructController=function(){this.components.controller&&this.components.controller.destruct&&this.components.controller.destruct()},n.openController=function(){var e=this;e.components.controller&&!e.components.controller.isDestructed||e.renderController(),e.components.controller&&e.components.controller.open?e.components.controller.open():(e.afterOpenController(),e.afterOpenControllerEnd())},n.closeController=function(){var e=this;e.components.controller&&e.components.controller.close?e.components.controller.close():(e.afterCloseControllerStart(),e.afterCloseController())},n.afterOpenController=function(){this.wasOpen=!0,this.triggerEvent("onOpen",this.components.controller)},n.afterOpenControllerEnd=function(){this.triggerEvent("onOpenEnd",this.components.controller)},n.afterCloseControllerStart=function(){this.triggerEvent("onCloseStart",this.components.controller)},n.afterCloseController=function(){var e=this;e.wasOpen=!1,e.params.destructOnClose&&e.destructController(),e.triggerEvent("onClose",e.components.controller)},n.setPlaceholderParams=function(e){var t=this;return t.params.placeholderParams=cm.merge(t.params.placeholderParams,e),t.components.placeholder&&t.components.placeholder.setParams(e),t},n.renderPlaceholder=function(){var t=this;cm.getConstructor(t.params.placeholderConstructor,function(e){t.triggerEvent("onRenderPlaceholderStart",arguments),t.renderPlaceholderView(),t.components.placeholder=t.constructPlaceholder(e),t.renderPlaceholderButtons(),t.triggerEvent("onRenderPlaceholderProcess",t.components.placeholder),t.renderPlaceholderEvents(),t.triggerEvent("onRenderPlaceholderEnd",t.components.placeholder)})},n.constructPlaceholder=function(e){return new e(cm.merge(this.params.placeholderParams,{opener:this,content:this.nodes.placeholder}))},n.renderPlaceholderView=function(){var e=this;e.triggerEvent("onRenderPlaceholderViewStart"),e.nodes.placeholder={},e.nodes.placeholder.title=e.renderPlaceholderTitle(),e.nodes.placeholder.content=cm.node("div",{classes:"com__container__content"}),e.nodes.placeholder.help=e.lang("help"),e.triggerEvent("onRenderPlaceholderViewProcess"),e.triggerEvent("onRenderPlaceholderViewEnd")},n.renderPlaceholderTitle=function(){return cm.textNode(this.lang("title"))},n.renderPlaceholderButtons=function(){this.components.placeholder.addButton({name:"close",label:this.lang("close"),classes:"button-primary",callback:this.closeHandler})},n.renderPlaceholderEvents=function(){var e=this;e.components.placeholder.addEvent("onOpen",e.afterOpenPlaceholderHandler),e.components.placeholder.addEvent("onOpenEnd",e.afterOpenPlaceholderEndHandler),e.components.placeholder.addEvent("onCloseStart",e.afterClosePlaceholderStartHandler),e.components.placeholder.addEvent("onClose",e.afterClosePlaceholderHandler)},n.destructPlaceholder=function(){this.components.placeholder&&this.components.placeholder.destruct&&this.components.placeholder.destruct()},n.openPlaceholder=function(){var e=this;e.components.placeholder&&!e.components.placeholder.isDestructed||e.renderPlaceholder(),e.components.placeholder&&e.components.placeholder.open?e.components.placeholder.open():(e.afterOpenPlaceholder(),e.afterOpenPlaceholderEnd())},n.closePlaceholder=function(){var e=this;e.components.placeholder&&e.components.placeholder.close?e.components.placeholder.close():(e.afterClosePlaceholderStart(),e.afterClosePlaceholder())},n.afterOpenPlaceholder=function(){this.openController(),this.constructCollector(),this.triggerEvent("onOpenPlaceholder",this.components.placeholder)},n.afterOpenPlaceholderEnd=function(){this.triggerEvent("onOpenPlaceholderEnd",this.components.placeholder)},n.afterClosePlaceholderStart=function(){this.triggerEvent("onClosePlaceholderStart",this.components.placeholder)},n.afterClosePlaceholder=function(){var e=this;e.closeController(),e.params.destructOnClose&&(e.destructPlaceholder(),e.destructCollector()),e.triggerEvent("onClosePlaceholder",e.components.placeholder)}}),cm.define("Com.AbstractInput",{extend:"Com.AbstractController",events:["onSet","onSelect","onInput","onChange","onClear","onReset","onDisable","onEnable","onRenderContent","onRenderContentStart","onRenderContentProcess","onRenderContentEnd"],params:{embedStructure:"replace",renderStructure:!0,renderHiddenContent:!0,renderStructureContent:!0,hiddenType:"hidden",value:"",defaultValue:"",isValueOption:!1,isValueObject:!1,id:"",title:"",placeholder:"",autocomplete:null,ariaLabel:"",disabled:!1,checked:null,className:"",contentClassName:"",adaptive:!0,ui:!0,size:"full",justify:"left",required:!1,minLength:0,maxLength:0,limitMaxLength:!0,min:0,max:0,setHiddenInput:!0,setContentInput:!0}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.AbstractInput",function(e,t,n,a){n.construct=function(e){var t=this;t.nodes={},t.components={},t.previousValue=null,t.value=null,t.valueText=null,t.valueOption=null,t.rawValue=null,t.tempRawValue=null,t.disabled=!1,t.setHandler=t.set.bind(t),t.getHandler=t.get.bind(t),t.clearHandler=t.clear.bind(t),t.enableHandler=t.enable.bind(t),t.disableHandler=t.disable.bind(t),t.clearEventHandler=t.clearEvent.bind(t),t.setActionHandler=t.setAction.bind(t),t.selectActionHandler=t.selectAction.bind(t),t.afterRenderHandler=t.afterRender.bind(t),t.addEvent("onAfterRender",t.afterRenderHandler),a.prototype.construct.apply(t,arguments)},n.set=function(e,t){return t=!!cm.isUndefined(t)||t,this.selectAction(e,t),this.setAction(e,t),this.changeAction(t),this},n.get=function(){return this.value},n.getText=function(){return this.valueText},n.getJSON=function(){return cm.stringifyJSON(this.value)},n.getRaw=function(){return this.rawValue},n.getValueOption=function(){return this.valueOption},n.getContainer=function(){return this.nodes.container},n.reset=n.clear=function(e){var t=this;return t.isDestructed||((e=!!cm.isUndefined(e)||e)&&t.triggerEvent("onClear"),e&&t.triggerEvent("onReset"),t.set(t.params.defaultValue,e)),t},n.enable=function(){var e=this;return e.disabled&&(e.disabled=!1,cm.removeClass(e.nodes.container,"disabled"),cm.removeClass(e.nodes.contentContainer,"disabled"),e.triggerEvent("onEnable")),e},n.disable=function(){var e=this;return e.disabled||(e.disabled=!0,cm.addClass(e.nodes.container,"disabled"),cm.addClass(e.nodes.contentContainer,"disabled"),e.triggerEvent("onDisable")),e},n.clearEvent=function(e){return cm.preventDefault(e),this.clear(),this},n.validateParams=function(){var e=this;return e.triggerEvent("onValidateParamsStart"),cm.isNode(e.params.node)&&(e.params.id=e.params.node.getAttribute("id")||e.params.id,e.params.title=e.params.node.getAttribute("title")||e.params.title,e.params.name=e.params.node.getAttribute("name")||e.params.name,e.params.disabled=e.params.node.disabled||e.params.node.readOnly||e.params.disabled,e.params.checked=e.params.node.checked||e.params.checked,e.params.required=e.params.node.required||e.params.required,e.params.minLength=e.params.node.getAttribute("minlength")||e.params.minLength,e.params.maxLength=e.params.node.getAttribute("maxlength")||e.params.maxLength,e.params.min=e.params.node.getAttribute("min")||e.params.min,e.params.max=e.params.node.getAttribute("max")||e.params.max,e.params.placeholder=e.params.node.getAttribute("placeholder")||e.params.placeholder,e.params.autocomplete=e.params.node.getAttribute("autocomplete")||e.params.autocomplete,e.params.ariaLabel=e.params.node.getAttribute("aria-label")||e.params.ariaLabel),e.triggerEvent("onValidateParams"),e.triggerEvent("onValidateParamsProcess"),e.validateParamsValue(),e.triggerEvent("onValidateParamsEnd"),e},n.validateParamsValue=function(){var e,t,n=this;cm.isNode(n.params.node)&&(e=n.params.node.getAttribute("data-value"),t=n.params.node.getAttribute("value"),cm.isEmpty(t)&&(t=n.params.node.value),cm.isEmpty(e)||!n.params.isValueOption&&!n.params.isValueObject||(t=cm.parseJSON(e)),n.params.value=cm.isEmpty(t)?n.params.value:t),n.params.value=cm.isEmpty(n.params.value)?n.params.defaultValue:n.params.value},n.afterRender=function(){var e=this;return e.set(e.params.value,!1),e.params.disabled&&e.disable(),e},n.renderView=function(){var e=this;return e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__input"}),e.nodes.hiddenContainer=e.renderHiddenContent(),e.nodes.hidden=e.nodes.hiddenContent.input,e.params.renderHiddenContent&&cm.appendChild(e.nodes.hiddenContainer,e.nodes.container),e.params.renderStructureContent?(e.nodes.contentContainer=e.renderContent(),cm.appendChild(e.nodes.contentContainer,e.nodes.container)):e.nodes.contentContainer=e.nodes.container,e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd"),e},n.renderHiddenContent=function(){var e={};return this.nodes.hiddenContent=e,"textarea"===this.params.hiddenType?e.container=e.input=cm.node("textarea",{class:"display-none"}):e.container=e.input=cm.node("input",{type:"hidden"}),e.container},n.renderContent=function(){var e=this,t={};return e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"input__content"}),e.triggerEvent("onRenderContent"),e.triggerEvent("onRenderContentProcess"),e.triggerEvent("onRenderContentEnd"),t.container},n.setAttributes=function(){var t=this;return a.prototype.setAttributes.apply(t,arguments),t.setHiddenAttributes(),cm.isNode(t.params.node)&&cm.forEach(t.params.node.attributes,function(e){/^data-(?!node|element|config)/.test(e.name)&&t.nodes.container.setAttribute(e.name,e.value)}),t.params.title&&t.nodes.container.setAttribute("title",t.lang(t.params.title)),t.params.adaptive&&cm.addClass(t.nodes.container,"is-adaptive"),cm.isEmpty(t.params.size)||cm.addClass(t.nodes.container,["size",t.params.size].join("-")),cm.isEmpty(t.params.justify)||cm.addClass(t.nodes.container,["pull",t.params.justify].join("-")),cm.addClass(t.nodes.contentContainer,t.params.contentClassName),t},n.setHiddenAttributes=function(){var t=this;t.nodes.hidden.required=t.params.required,!cm.isEmpty(t.params.minLength)&&0<t.params.minLength&&(t.nodes.hidden.minlength=t.params.minLength),t.params.limitMaxLength&&!cm.isEmpty(t.params.maxLength)&&0<t.params.maxLength&&(t.nodes.hidden.maxlength=t.params.maxLength),!cm.isEmpty(t.params.min)&&0<t.params.min&&(t.nodes.hidden.min=t.params.min),!cm.isEmpty(t.params.max)&&0<t.params.max&&(t.nodes.hidden.max=t.params.max),cm.isNode(t.params.node)&&cm.forEach(t.params.node.attributes,function(e){/^data-(?!node|element|config)/.test(e.name)&&t.nodes.hidden.setAttribute(e.name,e.value)}),cm.isEmpty(t.params.name)||t.nodes.hidden.setAttribute("name",t.params.name)},n.validateValue=function(e){return e=this.validateValueHelper(e),e=cm.isEmpty(e)?this.validateValueHelper(this.params.defaultValue):e},n.validateValueHelper=function(e){return this.params.isValueOption&&!cm.isEmpty(e)&&(cm.isObject(e)?(cm.isUndefined(e.value)&&(e.value=e.text),cm.isEmpty(e.text)&&(e.text=e.value)):e={value:e,text:e}),e},n.saveValue=function(e){var t=this;return t.rawValue=t.tempRawValue,t.previousValue=cm.clone(t.value),t.params.isValueOption?(t.value=cm.isEmpty(e)?null:e.value,t.valueText=cm.isEmpty(e)?null:e.text,t.valueOption=e):(t.value=e,t.valueText=e),t.params.setHiddenInput&&t.saveHiddenValue(t.value),t.params.setContentInput&&t.setData(t.valueText),t},n.saveHiddenValue=function(e){cm.isEmpty(e)?this.nodes.hidden.value="":cm.isObject(e)||cm.isArray(e)?this.nodes.hidden.value=cm.stringifyJSON(e):this.nodes.hidden.value=e},n.saveRawValue=function(e){this.tempRawValue=e},n.setData=function(e){},n.selectData=function(e){},n.selectAction=function(e,t){var n=this;return t=!!cm.isUndefined(t)||t,e=n.validateValue(e),n.saveRawValue(e),n.selectData(e),t&&n.triggerEvent("onSelect",e),t&&n.triggerEvent("onInput",e),n},n.setAction=function(e,t){var n=this;return t=!!cm.isUndefined(t)||t,e=n.validateValue(e),n.saveRawValue(e),n.saveValue(e),t&&n.triggerEvent("onSet",n.value),n},n.changeAction=function(e){var t=this;return(e=!!cm.isUndefined(e)||e)&&cm.stringifyJSON(t.value)!==cm.stringifyJSON(t.previousValue)&&t.triggerEvent("onChange",t.value),t}}),cm.define("Com.AbstractFileManager",{extend:"Com.AbstractController",events:["onSelect","onComplete","onGet","onRenderHolderStart","onRenderHolderProcess","onRenderHolderEnd","onRenderContentStart","onRenderContentProcess","onRenderContentEnd"],params:{embedStructure:"replace",controllerEvents:!0,max:0,lazy:!1,fullSize:!1,showStats:!0,statsConstructor:"Com.FileStats",statsParams:{embedStructure:"append",toggleBox:!1,inline:!0}}},function(e){var t=this;t.nodes={},t.components={},t.items=[],t.isMultiple=!1,Com.AbstractController.apply(t,arguments)}),cm.getConstructor("Com.AbstractFileManager",function(e,t,n,a){n.construct=function(){this.completeHandler=this.complete.bind(this),a.prototype.construct.apply(this,arguments)},n.validateParams=function(){return this.isMultiple=!this.params.max||1<this.params.max,this},n.get=function(){return this.triggerEvent("onGet",this.items),this},n.load=function(){return this.isLoaded||this.renderController(),this},n.complete=function(){return this.triggerEvent("onComplete",this.items),this},n.renderView=function(){var e=this;return e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__file-manager"},e.nodes.inner=cm.node("div",{class:"inner"},e.renderHolder(),e.renderContent())),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd"),e},n.renderHolder=function(){var e={};return this.triggerEvent("onRenderHolderStart"),e.container=cm.node("div",{class:"com__file-manager__holder"},e.inner=cm.node("div",{class:"inner"})),this.triggerEvent("onRenderHolderProcess"),this.nodes.holder=e,this.triggerEvent("onRenderHolderEnd"),e.container},n.renderContent=function(){var e={};return this.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"com__file-manager__content"}),this.triggerEvent("onRenderContentProcess"),this.nodes.content=e,this.triggerEvent("onRenderContentEnd"),e.container},n.renderViewModel=function(){var t=this;return t.params.showStats?cm.getConstructor(t.params.statsConstructor,function(e){t.components.stats=new e(cm.merge(t.params.statsParams,{container:t.nodes.content.container}))}):cm.remove(t.nodes.content.container),t.params.lazy||t.renderController(),t},n.renderController=function(){return this},n.setAttributes=function(){return a.prototype.setAttributes.apply(this,arguments),this.params.fullSize&&cm.addClass(this.nodes.container,"is-fullsize"),this},n.processFiles=function(e){var t=this,n=[];return cm.isArray(e)?n=e.map(function(e){return t.convertFile(e)}):cm.isObject(e)&&n.push(t.convertFile(e)),t.params.max?n.length?(e=Math.min(t.params.max,n.length),t.items=n.slice(0,e)):t.items=[]:t.items=n,t.triggerEvent("onSelect",t.items),t},n.convertFile=function(e){return e}}),cm.define("Com.AbstractFileManagerContainer",{extend:"Com.AbstractContainer",events:["onComplete","onGet"],params:{constructor:"Com.AbstractFileManager",constructorParams:{embedStructure:"append"},placeholder:!0,placeholderConstructor:"Com.DialogContainer",placeholderParams:{renderButtons:!0,constructorParams:{width:900}}},strings:{title_single:"Please select file",title_multiple:"Please select files",close:"Cancel",save:"Select"}},function(e){Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("Com.AbstractFileManagerContainer",function(e,t,n){var a=n._inherit;n.construct=function(){var e=this;return e.validateParamsEndHandler=e.validateParamsEnd.bind(e),e.renderControllerProcessHandler=e.renderControllerProcess.bind(e),e.getHandler=e.get.bind(e),e.selectHandler=e.select.bind(e),e.addEvent("onValidateParamsEnd",e.validateParamsEndHandler),e.addEvent("onRenderControllerProcess",e.renderControllerProcessHandler),a.prototype.construct.apply(e,arguments),e},n.get=function(e){e&&cm.preventDefault(e);return this.components.controller&&this.components.controller.get&&this.components.controller.get(),this},n.complete=function(e){e&&cm.preventDefault(e);return this.components.controller&&this.components.controller.complete&&this.components.controller.complete(),this},n.validateParamsEnd=function(){var e=this;e.setLangs({title:!e.params.constructorParams.max||1<e.params.constructorParams.max?e.lang("title_multiple"):e.lang("title_single")})},n.renderControllerEvents=function(){var n=this;return a.prototype.renderControllerEvents.apply(n,arguments),n.components.controller.addEvent("onGet",function(e,t){n.afterGet(t)}),n.components.controller.addEvent("onComplete",function(e,t){n.afterComplete(t)}),n},n.renderPlaceholderButtons=function(){var e=this;return e.components.placeholder.addButton({name:"close",label:e.lang("close"),classes:"button-transparent",callback:e.closeHandler}),e.components.placeholder.addButton({name:"save",label:e.lang("save"),classes:"button-primary",callback:e.completeHandler}),e},n.afterGet=function(e){return this.triggerEvent("onGet",e),this},n.afterComplete=function(e){return this.triggerEvent("onComplete",e),this.close(),this}}),cm.define("Com.AbstractFormField",{extend:"Com.AbstractController",events:["onShow","onHide","onFocus","onBlur","onValidate","onChange","onInput","onSelect","onReset","onRequestStart","onRequestEnd","onRequestSuccess","onRequestError","onRequestAbort","onFieldConstructed"],params:{renderStructure:!0,embedStructureOnRender:!0,removeOnDestruct:!1,controllerEvents:!0,renderStructureField:!0,renderStructureContent:!0,renderError:!0,renderErrorMessage:!0,renderRequiredMessage:!1,form:!1,outputValueType:"auto",inputValueType:"auto",validateValueType:"auto",value:null,values:null,defaultValue:null,dataValue:null,isValueOption:!1,setHiddenValue:!0,minLength:0,maxLength:0,min:0,max:0,multiple:!1,type:!1,label:"",icon:!1,placeholder:"",placeholderAsterisk:!0,autocomplete:null,showPlaceholderAbove:!1,title:"",hint:"",messagePosition:"content",adaptive:!0,visible:!0,disabled:!1,checked:null,renderName:!1,inputClasses:[],options:[],constraints:[],required:!1,requiredAsterisk:!0,validate:!1,constructor:!1,constructorParams:{removeOnDestruct:!1},preload:!1,responseKey:"data",ajax:{type:"json",method:"get"},help:null,helpType:"tooltip",helpAlign:"left",helpConstructor:"Com.HelpBubble",helpParams:{renderStructure:!0,embedStructureOnRender:!0}},strings:{required:"This field is required.",too_short:"Value should be at least %count% characters.",too_long:"Value should be less than %count% characters.",asterisk:{char:"*",title:"Required"}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.AbstractFormField",function(e,t,n,a){n.onConstructStart=function(){var e=this;e.fieldName=null,e.isVisible=null,e.isAjax=!1,e.isProcess=!1,e.isPreloaded=!1,e.isFocus=!1,e.wasFocus=!1,e.nodeTagName=null,e.focusHandler=e.focus.bind(e),e.blurHandler=e.blur.bind(e),e.focusEventHandler=e.focusEvent.bind(e),e.blurEventHandler=e.blurEvent.bind(e),e.inputEventHandler=e.inputEvent.bind(e),e.selectEventHandler=e.selectEvent.bind(e),e.changeEventHandler=e.changeEvent.bind(e),e.resetEventHandler=e.resetEvent.bind(e),e.iconEventHandler=e.iconEvent.bind(e)},n.onAfterRender=function(){return this.params.disabled&&this.disable(),this},n.onConstructEnd=function(){var e=this;e.isAjax&&(e.ajaxHandler=e.callbacks.request(e,cm.clone(e.params.ajax)))},n.onDestruct=function(){var e=this;e.isAjax&&e.ajaxHandler.abort(),e.controller&&cm.isFunction(e.controller.destruct)&&e.controller.destruct()},n.onValidateParams=function(){var e=this;e.validateParamsValue(),e.nodeTagName=e.params.node.tagName.toLowerCase(),e.fieldName=e.params.formName+"["+e.params.name+"]",e.params.required&&e.params.requiredAsterisk&&e.params.placeholderAsterisk&&!cm.isEmpty(e.params.placeholder)&&(e.params.placeholder=[e.params.placeholder,e.msg("asterisk.char")].join(" ")),"auto"===e.params.validateValueType&&(e.params.validateValueType=e.params.outputValueType),cm.isEmpty(e.params.options)||(e.params.options=e.callbacks.convert(e,e.params.options)),e.params.constructorParams=cm.merge(e.validateConstructorParams(),e.params.constructorParams),e.params.helpParams=cm.merge(e.validateHelpParams(),e.params.helpParams),e.components.form=e.params.form,!e.params.preload||cm.isEmpty(e.params.ajax)||cm.isEmpty(e.params.ajax.url)||(e.isAjax=!0)},n.validateParamsValue=function(){var e=this;e.params.value=e.validateParamsValueHelper(e.params.value),e.params.defaultValue=e.validateParamsValueHelper(e.params.defaultValue),e.params.value=cm.isEmpty(e.params.value)?e.params.defaultValue:e.params.value,e.params.dataValue=cm.isEmpty(e.params.dataValue)?e.params.isValueOption?e.params.value:null:e.params.dataValue},n.validateParamsValueHelper=function(e){return this.params.isValueOption&&!cm.isEmpty(e)&&(cm.isObject(e)?(e.value=cm.isEmpty(e.value)?e.text:e.value,e.text=cm.isEmpty(e.text)?e.value:e.text):e={value:e,text:e}),e},n.validateConstructorParams=function(){var t=this,n={};return cm.forEach(["id","title","name","visibleName","renderName","defaultValue","values","options","required","renderRequiredMessage","validate","disabled","checked","minLength","maxLength","min","max","multiple","autocomplete","ajax"],function(e){void 0!==t.params[e]&&(n[e]=t.params[e])}),n.field=t,n.fieldName=t.fieldName,n.value=cm.isEmpty(t.params.dataValue)?t.params.value:t.params.dataValue,n.placeholder=t.params.showPlaceholderAbove?"":t.params.placeholder,n},n.validateHelpParams=function(){var e=this;return{title:e.params.label,content:e.params.help,name:e.params.name,type:e.params.helpType,align:e.params.helpAlign}},n.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.params.renderStructureField&&e.renderFiled(),e.params.renderStructureContent&&(e.nodes.content=e.renderContent(),e.nodes.contentContainer=e.nodes.content.container,e.nodes.contentInput=e.nodes.content.input),e.params.renderStructureField?cm.insertFirst(e.nodes.contentContainer,e.nodes.value):e.params.renderStructureContent?e.nodes.container=e.nodes.contentContainer:(e.nodes.contentContainer=e.nodes.container=e.params.node,e.nodes.contentInput=e.params.node),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd")},n.renderFiled=function(){var e=this;switch(e.nodes.container=cm.node("dl",{class:"pt__field"},e.nodes.label=cm.node("dt"),e.nodes.value=cm.node("dd")),e.params.messagePosition){case"label":e.nodes.messages=e.nodes.label;break;case"content":case"value":e.nodes.messages=e.nodes.value}e.renderFiledLabel(),cm.isEmpty(e.params.hint)||e.renderHint(e.params.hint)},n.renderFiledLabel=function(){var e=this;cm.isEmpty(e.params.label)||(e.nodes.labelText=cm.node("label"),e.params.renderName&&e.nodes.labelText.setAttribute("for",e.fieldName),cm.isNode(e.params.label)?cm.appendChild(e.params.label,e.nodes.labelText):e.nodes.labelText.innerHTML=e.params.label,cm.appendChild(e.nodes.labelText,e.nodes.label)),e.nodes.required=cm.node("span",{class:"required",title:e.msg("asterisk.title")},e.msg("asterisk.char")),e.params.required&&e.params.requiredAsterisk&&cm.appendChild(e.nodes.required,e.nodes.labelText||e.nodes.label)},n.renderContent=function(){var e=this,t={input:e.params.node};return t.container=cm.node("div",{class:"pt__field__content"},t.input),e.params.icon&&(cm.isNode(e.params.icon)?t.icon=e.params.icon:t.icon=cm.node("div",{class:e.params.icon}),cm.addEvent(t.icon,"mousedown",e.iconEventHandler),cm.addEvent(t.icon,"click",e.iconEventHandler),t.field=cm.node("div",{class:"pt__input"},t.input,t.icon),cm.addClass(t.field,e.params.inputClasses),cm.appendChild(t.field,t.container)),e.params.showPlaceholderAbove&&!cm.isEmpty(e.params.placeholder)&&(t.placeholder=cm.node("label",{class:"placeholder",for:e.fieldName},t.placeholderLabel=cm.node("span",{innerHTML:e.params.placeholder})),cm.appendChild(t.placeholder,t.container),cm.addClass(t.container,"is-placeholder-above")),t},n.renderOptions=function(e){var t,n=this;"select"===n.nodeTagName&&(cm.forEach(e,function(e){e.disabled=!cm.isUndefined(e.disabled)&&e.disabled,e.hidden=!cm.isUndefined(e.hidden)&&e.hidden,(t=cm.node("option",{value:e.value,innerHTML:e.text})).hidden=e.hidden,t.disabled=e.disabled,cm.appendChild(t,n.nodes.contentInput)}),cm.setSelect(n.nodes.contentInput,n.params.value))},n.setAttributes=function(){var e=this;a.prototype.setAttributes.apply(e,arguments),e.params.renderStructureContent&&e.setInputAttributes(),e.params.adaptive&&cm.addClass(e.nodes.container,"is-adaptive"),e.params.visible?e.show(!1):e.hide(!1)},n.setInputAttributes=function(){var e,t=this;cm.isEmpty(t.fieldName)||t.nodes.contentInput.setAttribute("id",t.fieldName),cm.isEmpty(t.params.name)||t.nodes.contentInput.setAttribute("name",t.params.name),cm.isEmpty(t.params.value)||"unset"===t.params.inputValueType||(e=t.params.isValueOption?t.params.value.value:cm.isObject(t.params.value)||cm.isArray(t.params.value)?cm.stringifyJSON(t.params.value):t.params.value,"select"===t.nodeTagName?cm.setSelect(t.nodes.contentInput,e):t.nodes.contentInput.setAttribute("value",e)),cm.isEmpty(t.params.dataValue)||"unset"===t.params.inputValueType||(e=cm.isObject(t.params.dataValue)||cm.isArray(t.params.dataValue)?cm.stringifyJSON(t.params.dataValue):t.params.dataValue,t.nodes.contentInput.setAttribute("data-value",e)),cm.isEmpty(t.params.placeholder)||t.params.showPlaceholderAbove||(t.nodes.contentInput.setAttribute("placeholder",t.params.placeholder),cm.isEmpty(t.params.label)&&cm.isEmpty(t.params.title)&&t.nodes.contentInput.setAttribute("aria-label",t.params.placeholder)),cm.isEmpty(t.params.autocomplete)||t.nodes.contentInput.setAttribute("autocomplete",t.params.autocomplete),cm.isEmpty(t.params.title)||t.nodes.contentInput.setAttribute("title",t.params.title),t.params.disabled&&t.nodes.contentInput.setAttribute("disabled","disabled"),t.params.multiple&&t.nodes.contentInput.setAttribute("multiple","multiple")},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),t.params.renderStructureContent&&"unset"!==t.params.inputValueType&&!cm.isEmpty(t.params.options)&&t.renderOptions(t.params.options),t.params.renderStructureField&&!cm.isEmpty(t.params.help)&&cm.getConstructor(t.params.helpConstructor,function(e){t.components.help=new e(cm.merge(t.params.helpParams,{container:t.nodes.label}))}),t.isAjax&&!t.isPreloaded||t.renderController()},n.renderController=function(){var t=this;t.params.constructor&&cm.getConstructor(t.params.constructor,function(e){t.components.controller=new e(cm.merge(t.params.constructorParams,{node:t.nodes.contentInput,form:t.components.form,formField:t})),t.renderControllerEvents(),t.togglePlaceholder()})},n.renderControllerEvents=function(){var e=this;e.components.controller.addEvent("onFocus",e.focusEventHandler),e.components.controller.addEvent("onBlur",e.blurEventHandler),e.components.controller.addEvent("onSelect",e.selectEventHandler),e.components.controller.addEvent("onInput",e.inputEventHandler),e.components.controller.addEvent("onChange",e.changeEventHandler),e.components.controller.addEvent("onReset",e.resetEventHandler)},n.togglePlaceholder=function(){var e=this;e.params.showPlaceholderAbove&&("always"===e.params.showPlaceholderAbove||e.isFocus||!cm.isEmpty(e.getText())?cm.addClass(e.nodes.content.placeholder,"pull-top"):cm.removeClass(e.nodes.content.placeholder,"pull-top"))},n.focusEvent=function(e,t){this.isFocus=!0,this.togglePlaceholder(),this.triggerEvent("onFocus",t)},n.blurEvent=function(e,t){this.isFocus=!1,this.togglePlaceholder(),this.triggerEvent("onBlur",t)},n.inputEvent=function(e,t){this.triggerEvent("onInput",t)},n.selectEvent=function(e,t){this.triggerEvent("onSelect",t)},n.changeEvent=function(e,t){this.togglePlaceholder(),this.triggerEvent("onChange",t)},n.resetEvent=function(e,t){this.togglePlaceholder(),this.triggerEvent("onReset",t)},n.iconEvent=function(e){"mousedown"===e.type&&(this.wasFocus=this.isFocus),"click"!==e.type||this.wasFocus||this.focus(!0)},n.set=function(e,t){return this.components.controller&&cm.isFunction(this.components.controller.set)&&this.components.controller.set(e,t),this},n.get=function(e){var t=this;switch(e=cm.isUndefined(e)?t.params.outputValueType:e){case"raw":return t.getRaw();case"text":return t.getText();case"json":return t.getJSON();case"option":return t.getValueOption();default:return t.components.controller&&cm.isFunction(t.components.controller.get)?t.components.controller.get():null}},n.getRaw=function(){return this.components.controller&&cm.isFunction(this.components.controller.getRaw)?this.components.controller.getRaw():this.get("auto")},n.getText=function(){return this.components.controller&&cm.isFunction(this.components.controller.getText)?this.components.controller.getText():this.get("auto")},n.getJSON=function(){return this.components.controller&&cm.isFunction(this.components.controller.getJSON)?this.components.controller.getJSON():this.get("auto")},n.getValueOption=function(){return this.components.controller&&cm.isFunction(this.components.controller.getValueOption)?this.components.controller.getValueOption():this.get("auto")},n.reset=function(){return this.components.controller&&cm.isFunction(this.components.controller.reset)&&this.components.controller.reset(),this},n.validateValue=function(e){var t=this;if((e=cm.merge({field:t,form:t.components.form,valid:!0,message:null,value:t.get(t.params.validateValueType),required:!1,silent:!1,triggerEvents:!0},e)).required=t.params.required||e.required,cm.isEmpty(e.value))return e.required?(e.valid=!1,t.params.renderRequiredMessage&&(e.message=t.msg("required"))):e.valid=!0,e;if(t.params.minLength&&e.value.length<t.params.minLength)return e.valid=!1,e.message=t.msg("too_short",{"%count%":t.params.minLength}),e;if(t.params.maxLength&&e.value.length>t.params.maxLength)return e.valid=!1,e.message=t.msg("too_long",{"%count%":t.params.maxLength}),e;if(!cm.isEmpty(t.params.constraints)){var n=cm.clone(e),n=t.validateConstraints(n);if(n)return n}return t.components.controller&&cm.isFunction(t.components.controller.validator)?t.components.controller.validator(e):e},n.validate=function(e){var t=this;return(e=cm.merge({required:!1,silent:!1,triggerEvents:!0},e)).validate=t.params.validate,e.required=t.params.required||e.required,!e.required&&!e.validate||((e=t.validateValue(e)).valid||e.silent?t.clearError():t.renderError(e.message),e.triggerEvents&&!e.silent&&t.triggerEvent("onValidate",e),e.valid)},n.addConstraint=function(e){return cm.isFunction(e)&&(this.params.constraints=cm.arrayAdd(this.params.constraints,e)),this},n.removeConstraint=function(e){return cm.isFunction(e)&&(this.params.constraints=cm.arrayRemove(this.params.constraints,e)),this},n.validateConstraints=function(t){var n;return!!this.params.constraints.some(function(e){return!!cm.isFunction(e)&&!(n=e(t)).valid})&&n},n.renderHint=function(e,t){var n=this;return t=cm.merge({className:null},t),n.clearHint(),n.nodes.hints=cm.node("ul",{class:"pt__field__hint"}),cm.isArray(e)?cm.forEach(e,function(e){n.renderHintMessage(e,t)}):n.renderHintMessage(e,t),n.params.renderError&&n.nodes.errors&&cm.inDOM(n.nodes.errors)?cm.insertBefore(n.nodes.hints,n.nodes.errors):cm.appendChild(n.nodes.hints,n.nodes.messages),n},n.renderHintMessage=function(e,t){e=cm.node("li",{innerHTML:e,classes:t.className});cm.appendChild(e,this.nodes.hints)},n.clearHint=function(){return cm.remove(this.nodes.hints),this},n.renderError=function(e,t){var n=this;return t=cm.merge({className:"error"},t),n.clearError(),n.params.renderError&&(cm.addClass(n.nodes.container,"error"),cm.addClass(n.nodes.contentContainer,"error"),n.params.renderErrorMessage)&&!cm.isEmpty(e)&&(n.nodes.errors=cm.node("ul",{class:"pt__field__error pt__field__hint"},e=cm.node("li",{innerHTML:e})),cm.isEmpty(t.className)||cm.addClass(e,t.className),cm.insertLast(n.nodes.errors,n.nodes.messages)),n},n.clearError=function(){return cm.removeClass(this.nodes.container,"error"),cm.removeClass(this.nodes.contentContainer,"error"),cm.remove(this.nodes.errors),this},n.show=function(e){var t=this;return e=!!cm.isUndefined(e)||e,cm.isBoolean(t.isVisible)&&t.isVisible||(t.isVisible=!0,cm.removeClass(t.nodes.container,"is-hidden"),e&&t.triggerEvent("onShow",t.get())),t},n.hide=function(e){var t=this;return e=!!cm.isUndefined(e)||e,cm.isBoolean(t.isVisible)&&!t.isVisible||(t.isVisible=!1,cm.addClass(t.nodes.container,"is-hidden"),e&&t.triggerEvent("onHide",t.get())),t},n.toggleVisibility=function(e,t){return e?this.show(t):this.hide(t),this},n.enable=function(){var e=this;return cm.removeClass(e.nodes.container,"disabled"),cm.removeClass(e.nodes.contentContainer,"disabled"),e.components.controller&&cm.isFunction(e.components.controller.enable)&&e.components.controller.enable(),e},n.disable=function(){var e=this;return cm.addClass(e.nodes.container,"disabled"),cm.addClass(e.nodes.contentContainer,"disabled"),e.components.controller&&cm.isFunction(e.components.controller.disable)&&e.components.controller.disable(),e},n.focus=function(e){return this.components.controller&&cm.isFunction(this.components.controller.focus)&&this.components.controller.focus(e),this},n.blur=function(){return this.components.controller&&cm.isFunction(this.components.controller.blur)&&this.components.controller.blur(),this},n.setRequired=function(){var e=this;return e.params.required=!0,e.params.requiredAsterisk&&cm.appendChild(e.nodes.required,e.nodes.labelText||e.nodes.label),e},n.unsetRequired=function(){return this.params.required=!1,cm.remove(this.nodes.required),this},n.toggleRequired=function(e){return e?this.setRequired():this.unsetRequired(),this},n.getController=function(){return this.components.controller},n.getName=function(){return this.params.name},n.getContainer=function(){return this.nodes.container},n.getContent=function(){return this.nodes.content},n.callbacks.prepare=function(e,t){return t.url=cm.strReplace(t.url,{"%baseUrl%":cm._baseUrl}),t.params=cm.objectReplace(t.params,{"%baseUrl%":cm._baseUrl}),t},n.callbacks.request=function(t,n){return n=t.callbacks.prepare(t,n),cm.ajax(cm.merge(n,{onStart:function(){t.callbacks.start(t,n)},onSuccess:function(e){t.callbacks.response(t,n,e)},onError:function(){t.callbacks.error(t,n)},onAbort:function(){t.callbacks.abort(t,n)},onEnd:function(e){t.callbacks.end(t,n,e)}}))},n.callbacks.start=function(e,t){e.isProcess=!0,e.triggerEvent("onRequestStart")},n.callbacks.end=function(e,t){e.isProcess=!1,e.isPreloaded=!0,e.renderController(),e.triggerEvent("onRequestEnd")},n.callbacks.response=function(e,t,n){cm.isEmpty(n)||(n=e.callbacks.filter(e,t,n)),cm.isEmpty(n)?e.callbacks.error(e,t):e.callbacks.success(e,e.callbacks.convert(e,n))},n.callbacks.filter=function(e,t,n){var a=[],e=cm.objectPath(e.params.responseKey,n);return a=e&&!cm.isEmpty(e)?e:a},n.callbacks.convert=function(t,e){return e.map(function(e){return t.callbacks.convertItem(t,e)})},n.callbacks.convertItem=function(e,t){return cm.isEmpty(t)?null:cm.isObject(t)?(cm.isUndefined(t.value)&&(t.value=t.text),t):{text:t,value:t}},n.callbacks.success=function(e,t){e.params.options=cm.merge(e.params.options,t),e.params.constructorParams.options=(cm.isEmpty(e.params.options)?e.params.constructorParams:e.params).options,e.renderOptions(t),e.triggerEvent("onRequestSuccess",t)},n.callbacks.error=function(e,t){e.triggerEvent("onRequestError")},n.callbacks.abort=function(e,t){e.triggerEvent("onRequestAbort")}}),cm.define("Com.AbstractInputContainer",{extend:"Com.AbstractController",events:["onRenderControllerStart","onRenderControllerProcess","onRenderController","onRenderControllerEnd","onSelect","onChange","onReset"],params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,constructor:"Com.AbstractInput",constructorParams:{}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.AbstractInputContainer",function(e,t,n,a){n.construct=function(){var e=this;e.resetHandler=e.reset.bind(e),e.enableHandler=e.enable.bind(e),e.disableHandler=e.disable.bind(e),a.prototype.construct.apply(e,arguments)},n.onValidateParams=function(){this.components.formField=this.params.formField,this.components.form=this.params.form},n.renderViewModel=function(){return this.renderController(),this},n.renderController=function(){var t,n=this;cm.getConstructor(n.params.constructor,function(e){n.triggerEvent("onRenderControllerStart"),t=n.validateControllerParams(),n.components.controller=new e(t),n.triggerEvent("onRenderControllerProcess",n.components.controller),n.renderControllerEvents(),n.triggerEvent("onRenderController",n.components.controller),n.triggerEvent("onRenderControllerEnd",n.components.controller)})},n.validateControllerParams=function(){return cm.merge(this.params.constructorParams,{node:this.params.node,value:this.params.value,defaultValue:this.params.defaultValue})},n.renderControllerEvents=function(){var n=this;return n.components.controller.addEvent("onSelect",function(e,t){n.triggerEvent("onSelect",t)}),n.components.controller.addEvent("onChange",function(e,t){n.triggerEvent("onChange",t)}),n.components.controller.addEvent("onReset",function(e,t){n.triggerEvent("onReset",t)}),n},n.set=function(e){return this.components.controller&&cm.isFunction(this.components.controller.set)&&this.components.controller.set(e),this},n.get=function(){return this.components.controller&&cm.isFunction(this.components.controller.get)&&this.components.controller.get()},n.getRaw=function(){return this.components.controller&&cm.isFunction(this.components.controller.getRaw)&&this.components.controller.getRaw()||this.get()},n.reset=function(){return this.components.controller&&cm.isFunction(this.components.controller.reset)&&this.components.controller.reset()},n.enable=function(){return this.components.controller&&cm.isFunction(this.components.controller.enable)&&this.components.controller.enable(),this},n.disable=function(){return this.components.controller&&cm.isFunction(this.components.controller.disable)&&this.components.controller.disable(),this}}),cm.define("Com.AbstractRange",{extend:"Com.AbstractInput",params:{renderStructure:!0,embedStructureOnRender:!0,controllerEvents:!0,redrawOnRender:!0,className:"com__range",theme:"theme--arrows",min:0,max:100,value:0,precision:0,range:!1,direction:"horizontal",showCounter:!0,draggableConstructor:"Com.AbstractRangeDrag",draggableParams:{}}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.AbstractRange",function(e,t,n,a){n.onConstructStart=function(){this.components.draggable=[],this.sort="asc"},n.onRedraw=function(){this.setData()},n.onValidateParamsEnd=function(){var e=this;e.sort=e.params.min>e.params.max?"asc":"desc",e.targetDraggable=!e.params.range,e.params.draggableParams.theme=e.params.theme,e.params.draggableParams.direction=e.params.direction,e.params.draggableParams.targetDraggable=e.targetDraggable,e.params.draggableParams.min=e.params.min,e.params.draggableParams.max=e.params.max,e.params.draggableParams.precision=e.params.precision,e.params.draggableParams.showCounter=e.params.showCounter},n.renderViewModel=function(){a.prototype.renderViewModel.apply(this,arguments),this.renderDraggable(),this.params.range&&this.renderDraggable()},n.renderContent=function(){var e=this,t={};switch(e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"com__range__content"},t.range=cm.node("div",{class:"pt__range"},t.inner=cm.node("div",{class:"inner"},t.range=cm.node("div",{class:"range"},t.rangeContent=e.renderRangeContent())))),e.triggerEvent("onRenderContentProcess"),cm.addClass(t.rangeContent,"range-helper"),cm.addClass(t.container,e.params.theme),cm.addClass(t.range,e.params.theme),cm.addClass(t.rangeContent,e.params.theme),e.targetDraggable&&cm.addClass(t.range,"is-draggable"),e.params.direction){case"horizontal":cm.addClass(t.container,"is-horizontal"),cm.addClass(t.range,"is-horizontal"),cm.addClass(t.rangeContent,"is-horizontal");break;case"vertical":cm.addClass(t.container,"is-vertical"),cm.addClass(t.range,"is-vertical"),cm.addClass(t.rangeContent,"is-vertical")}return e.triggerEvent("onRenderContentEnd"),t.container},n.renderRangeContent=function(){var e={};return(this.nodes.rangeContent=e).container=cm.node("div",{class:"range__content"}),e.container},n.renderDraggable=function(){var n=this;cm.getConstructor(n.params.draggableConstructor,function(e){n.components.draggable.push(new e(cm.merge(n.params.draggableParams,{node:n.nodes.content.inner,events:{onStart:function(){n.setEditing()},onStop:function(){n.unsetEditing()},onSelect:function(e,t){n.setValues(),n.selectAction(n.tempRawValue.join("-"),!0)},onSet:function(e,t){n.setValues(),n.set(n.tempRawValue.join("-"),!0)}}})))})},n.setValues=function(){var t=this;t.tempRawValue=[],cm.forEach(t.components.draggable,function(e){t.tempRawValue.push(e.get())}),t.tempRawValue=cm.arraySort(t.tempRawValue,!1,t.sort)},n.validateValue=function(e){var n=this,a=e.toString().split("-");return cm.forEach(a,function(e,t){n.params.max>n.params.min?a[t]=Math.min(Math.max(parseFloat(e),n.params.min),n.params.max):a[t]=Math.max(Math.min(parseFloat(e),n.params.min),n.params.max)}),n.values=cm.arraySort(a,!1,n.sort),a.join("-")},n.saveRawValue=function(e){var t=this;t.tempRawValue=e.toString().split("-"),t.tempRawValue=cm.arrayParseFloat(t.tempRawValue),t.tempRawValue=cm.arraySort(t.tempRawValue,!1,t.sort)},n.setData=function(){var n=this;cm.isEmpty(n.tempRawValue)||cm.forEach(n.components.draggable,function(e,t){e.set(n.tempRawValue[t],!1)})},n.setEditing=function(){return cm.addClass(this.nodes.content.container,"is-editing"),cm.addClass(this.nodes.content.range,"is-editing"),cm.addClass(this.nodes.content.rangeContent,"is-editing"),this},n.unsetEditing=function(){return cm.removeClass(this.nodes.content.container,"is-editing"),cm.removeClass(this.nodes.content.range,"is-editing"),cm.removeClass(this.nodes.content.rangeContent,"is-editing"),this}}),cm.define("Com.AbstractRangeDrag",{extend:"Com.AbstractController",events:["onStart","onStop","onSet","onSelect"],params:{renderStructure:!0,embedStructureOnRender:!0,embedStructure:"append",controllerEvents:!0,direction:"horizontal",showCounter:!0,targetDraggable:!0,draggableConstructor:"Com.Draggable",draggableParams:{}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.AbstractRangeDrag",function(e,t,n,a){n.onValidateParams=function(){this.params.draggableParams.direction=this.params.direction},n.renderView=function(){var e=this;switch(e.nodes.container=cm.node("div",{class:"drag"},e.nodes.content=e.renderDragContent(name)),cm.addClass(e.nodes.content,e.params.theme),e.params.direction){case"horizontal":cm.addClass(e.nodes.content,"is-horizontal");break;case"vertical":cm.addClass(e.nodes.content,"is-vertical")}},n.renderViewModel=function(){var n=this;a.prototype.renderViewModel.apply(n,arguments),cm.getConstructor(n.params.draggableConstructor,function(e){n.components.draggable=new e(cm.merge(n.params.draggableParams,{target:n.params.targetDraggable?n.params.node:null,node:n.nodes.container,limiter:n.params.node,events:{onStart:function(){switch(n.params.direction){case"horizontal":cm.addClass(document.body,"cm__cursor--col-resize");break;case"vertical":cm.addClass(document.body,"cm__cursor--row-resize")}n.showCounter(),n.triggerEvent("onStart")},onStop:function(){switch(n.params.direction){case"horizontal":cm.removeClass(document.body,"cm__cursor--col-resize");break;case"vertical":cm.removeClass(document.body,"cm__cursor--row-resize")}n.hideCounter(),n.triggerEvent("onStop")},onSelect:function(e,t){t=n.getDraggable(t);n.selectAction(t,!0)},onSet:function(e,t){t=n.getDraggable(t);n.set(t,!0)}}}))})},n.renderDragContent=function(){var e=this,t={};return(e.nodes.dragContent=t).container=cm.node("div",{class:"drag__content"}),e.nodes.counter=e.renderCounter(name),e.params.showCounter&&cm.appendChild(e.nodes.counter,t.container),t.container},n.getDraggable=function(e){var t,n,a=this,r=a.components.draggable.getDimensions(),o=a.params.max-a.params.min;switch(a.params.direction){case"horizontal":t=o/r.limiter.absoluteWidth*e.left,n=cm.toFixed(t+a.params.min,a.params.precision,!0);break;case"vertical":t=o/r.limiter.absoluteHeight*e.top,n=cm.toFixed(t+a.params.min,a.params.precision,!0)}return n},n.setDraggable=function(e){var t,n=this,a={top:0,left:0},r=n.components.draggable.getDimensions(),o=e-n.params.min,s=n.params.max-n.params.min;switch(n.params.direction){case"horizontal":t=r.limiter.absoluteWidth,a.left=cm.toFixed(t/s*o,n.params.precision,!0);break;case"vertical":t=r.limiter.absoluteHeight,a.top=cm.toFixed(t/s*o,n.params.precision,!0)}n.components.draggable.setPosition(a,!1)},n.renderCounter=function(){var e={};return(this.nodes.counterContent=e).container=e.inner=cm.node("div",{class:"counter"}),e.container},n.showCounter=function(){return cm.addClass(this.nodes.counter,"is-show"),this},n.hideCounter=function(){return cm.removeClass(this.nodes.counter,"is-show"),this},n.setCounter=function(e){this.nodes.counterContent.inner.innerHTML=e},n.get=function(){var e=this.components.draggable.get();return this.getDraggable(e)},n.selectAction=function(e,t){return t=!!cm.isUndefined(t)||t,this.setCounter(e),t&&this.triggerEvent("onSelect",e),this},n.set=function(e,t){return t=!!cm.isUndefined(t)||t,this.setDraggable(e),this.setCounter(e),t&&this.triggerEvent("onSet",e),this}}),cm.define("Com.Form",{modules:["Params","Events","Langs","DataConfig","DataNodes","Storage","Callbacks","Stack","Structure"],events:["onRenderStart","onRender","onValidate","onRequestError","onRequestSuccess","onProgress","onError","onAbort","onSuccess","onSendStart","onSend","onSendEnd","onSet","onChange","onInput","onClear","onReset","onEnable","onDisable"],params:{node:cm.node("div"),container:null,name:"",renderStructure:!0,embedStructure:"append",removeOnDestruct:!0,renderButtons:!0,renderButtonsSeparator:!0,buttonsClasses:[],buttonsAlign:"right",buttonsAdaptive:!0,renderNames:!1,validate:!1,validateOnChange:!1,validateOnInput:!1,showNotifications:!0,showNotificationsMessages:!0,showSuccessNotification:!1,showValidationNotification:!1,showValidationMessages:!0,notificationsClosable:!0,"Com.Notifications":{},data:{},mergeData:!1,sendable:!0,autoSend:!1,sendOnChange:!1,sendEmptyForm:!0,sendEmptyFields:!1,sendOnlyChangedFields:!1,abortPreviousRequest:!1,responseKey:"data",responseErrorsKey:"errors",responseMessageKey:"message",responseCodeKey:"code",ajax:{type:"json",method:"post",paramsType:"json",url:"",params:""},showLoader:!0,loaderCoverage:"fields",overlayConstructor:"Com.Overlay",overlayParams:{position:"absolute",autoOpen:!1,removeOnClose:!0,lazy:!0}},strings:{form_error:"Form is not filled correctly.",server_error:"An unexpected error has occurred. Please try again later.",success_message:"Form successfully sent"}},function(e){function t(){l.params.buttonsAlign=cm.inArray(["left","center","right","justify"],l.params.buttonsAlign)?l.params.buttonsAlign:"right",l.params.loaderCoverage=cm.inArray(["fields","all"],l.params.loaderCoverage)?l.params.loaderCoverage:"all",l.isAjax=l.params.ajax&&!cm.isEmpty(l.params.ajax.url)&&l.params.sendable}function n(){var t;l.params.renderStructure&&(l.nodes.container=cm.node("div",{class:"com__form"},l.nodes.fieldsContainer=cm.node("div",{class:"com__form__fields"},l.nodes.fields=cm.node("div",{class:"inner"}))),l.nodes.notifications=cm.node("div",{class:"com__form__notifications"}),l.nodes.buttonsSeparator=cm.node("hr"),l.nodes.buttonsContainer=cm.node("div",{class:"com__form__buttons"},l.nodes.buttons=cm.node("div",{class:"pt__buttons"},l.nodes.buttonsHolder=cm.node("div",{class:"inner"}))),cm.addClass(l.nodes.buttons,["pull",l.params.buttonsAlign].join("-")),cm.addClass(l.nodes.buttons,l.params.buttonsClasses),l.params.buttonsAdaptive&&cm.addClass(l.nodes.buttons,"is-adaptive"),l.params.renderButtonsSeparator&&cm.insertFirst(l.nodes.buttonsSeparator,l.nodes.buttonsContainer),l.params.renderButtons&&cm.appendChild(l.nodes.buttonsContainer,l.nodes.container),cm.insertFirst(l.nodes.notifications,l.nodes.container),l.embedStructure(l.nodes.container)),cm.getConstructor("Com.Notifications",function(e,t){l.components.notifications=new e(cm.merge(l.params[t],{closable:l.params.notificationsClosable,container:l.nodes.notifications})),l.components.notifications.addEvent("onAdd",function(){cm.addClass(l.nodes.notifications,"is-show",!0)}),l.components.notifications.addEvent("onRemove",function(){0===l.components.notifications.getLength()&&cm.removeClass(l.nodes.notifications,"is-show",!0)})}),l.params.showLoader&&cm.getConstructor(l.params.overlayConstructor,function(e){t="fields"===l.params.loaderCoverage?l.nodes.fieldsContainer:l.nodes.container,l.components.loader=new e(cm.merge({container:t},l.params.overlayParams))}),l.params.autoSend&&l.send()}function a(t){cm.getConstructor(t.fieldConstructor,function(e){t.fieldController=t.controller=new e(t),t.inputController=t.constructorController=cm.isFunction(t.fieldController.getController)&&t.fieldController.getController(),t.renderEvents&&(t.fieldController.addEvent("onBlur",function(e){m(e,t)}),t.fieldController.addEvent("onChange",function(e){u(e,t)}),t.fieldController.addEvent("onInput",function(e){p(e,t)})),t.originValue=cm.clone(t.fieldController.get()),(l.fields[t.name]=t).fieldController.triggerEvent("onFieldConstructed")})}function r(t){if(t=cm.merge({node:null,name:"",label:"",class:"",classes:[],spinner:!1,spinnerClass:"",spinnerClasses:[],action:"submit",container:l.nodes.buttonsHolder,handler:null},t),!l.buttons[t.name]){switch(cm.isNode(t.node)||(t.classes=cm.merge(["button",t.class],t.classes),t.node=cm.node("button",{name:t.name,classes:t.classes},t.labelNode=cm.node("div",{classes:"label is-show"},t.label))),t.spinner&&(t.spinnerClasses=cm.merge(["icon",t.spinnerClass],t.spinnerClasses),t.spinnerNode=cm.node("div",{classes:t.spinnerClasses}),cm.appendChild(t.spinnerNode,t.node),cm.addClass(t.node,"button-spinner")),t.action){case"submit":t.node.type="submit",cm.addClass(t.node,"button-primary"),cm.click.add(t.node,function(e){cm.preventDefault(e),cm.isFunction(t.handler)?t.handler(l,t,e):l.isProcess?l.abort():l.send()});break;case"reset":t.node.type="reset",cm.addClass(t.node,"button-transparent"),cm.click.add(t.node,function(e){cm.preventDefault(e),cm.isFunction(t.handler)?t.handler(l,t,e):l.isProcess||l.reset()});break;case"clear":cm.addClass(t.node,"button-transparent"),cm.click.add(t.node,function(e){cm.preventDefault(e),cm.isFunction(t.handler)?t.handler(l,t,e):l.isProcess||l.clear()});break;default:cm.click.add(t.node,function(e){cm.preventDefault(e),cm.isFunction(t.handler)&&t.handler(l,t,e)})}l.buttons[t.name]=t,cm.appendChild(t.node,t.container)}}function o(t){cm.forEach(l.buttons,function(e){e.spinner&&(t?(cm.replaceClass(e.labelNode,"is-show","is-hide"),cm.replaceClass(e.spinnerNode,"is-hide","is-show")):(cm.replaceClass(e.labelNode,"is-hide","is-show"),cm.replaceClass(e.spinnerNode,"is-show","is-hide")))})}function s(t){var n;return!!l.constraints.some(function(e){return!!cm.isFunction(e)&&!(n=e(t)).valid})&&n}function i(e,t,n,a){var r=n.controller.get();return cm.isFunction(n.sendCallback)&&(r=n.sendCallback(n,r)),cm.inArray(["send","sendPath"],e)&&l.params.sendOnlyChangedFields&&!n.sendAlways&&(r=cm.getDiffCompare(n.originValue,r)),cm.isUndefined(r)||!l.params.sendEmptyFields&&(l.params.sendEmptyFields,cm.isEmpty(r))||!n.sendEmpty&&(n.sendEmpty,cm.isEmpty(r))||("sendPath"!==e||cm.isEmpty(n.sendPath)?t[a]=r:(e=cm.objectFormPath(n.sendPath,r,""),t=cm.extend(t,e,!0,!1))),t}function c(){var e=l.get("sendPath");d(e),l.clearError(l),l.triggerEvent("onSendStart",e),l.triggerEvent("onSend",e),l.triggerEvent("onSuccess",e),l.triggerEvent("onSendEnd",e)}function d(e){e=cm.isEmpty(e)?l.get("sendPath"):e,l.set(e,{triggerEvents:!1,setFields:!1,setOrigin:!0})}var l=this,m=(l.nodes={},l.components={},l.fields={},l.buttons={},l.constraints=[],l.ajaxHandler=null,l.isAjax=!1,l.isProcess=!1,l.isEnabled=!0,function(e,t){l.isEnabled&&l.params.validate&&l.params.validateOnChange&&(e.params.required||e.params.validate)&&t.fieldController.validate()}),u=function(e,t){l.isEnabled&&l.params.validate&&l.params.validateOnChange&&(e.params.required||e.params.validate)&&t.fieldController.validate(),l.params.sendOnChange&&!e.params.system&&l.send(),l.triggerEvent("onChange")},p=function(e,t){l.isEnabled&&l.params.validate&&l.params.validateOnInput&&(e.params.required||e.params.validate)&&t.fieldController.validate(),l.triggerEvent("onInput")};l.callbacks.prepare=function(e,t){return(t=e.callbacks.beforePrepare(e,t)).url=cm.strReplace(t.url,{"%baseUrl%":cm._baseUrl}),t.params=cm.objectReplace(t.params,{"%baseUrl%":cm._baseUrl}),t.params=cm.merge(t.params,e.get("sendPath",e.params.mergeData)),t=e.callbacks.afterPrepare(e,t)},l.callbacks.filterData=function(e,t){return t},l.callbacks.beforePrepare=function(e,t){return t},l.callbacks.afterPrepare=function(e,t){return t},l.callbacks.request=function(n,a){if(a=n.callbacks.prepare(n,a),n.callbacks.clearError(n),n.params.sendEmptyForm||!cm.isEmpty(a.params))return cm.ajax(cm.merge(a,{onStart:function(){n.callbacks.start(n,a)},onProgress:function(e){n.callbacks.progress(n,a,e)},onSuccess:function(e,t){t=e instanceof ProgressEvent?e:t,n.callbacks.response(n,a,e,t)},onError:function(e,t){t=e instanceof ProgressEvent?e:t,n.callbacks.error(n,a,e,t)},onAbort:function(){n.callbacks.abort(n,a)},onEnd:function(e){n.callbacks.end(n,a,e)}}));c()},l.callbacks.start=function(e,t){e.isProcess=!0,e.sendStart(),e.triggerEvent("onSendStart")},l.callbacks.end=function(e,t){e.isProcess=!1,e.sendEnd(),e.triggerEvent("onSendEnd")},l.callbacks.progress=function(e,t,n){e.sendProgress(n),e.triggerEvent("onProgress",n)},l.callbacks.response=function(e,t,n,a){var r,o;!cm.isEmpty(n)&&(r=cm.reducePath(e.params.responseErrorsKey,n),o=cm.reducePath(e.params.responseKey,n),cm.isEmpty(r))?e.callbacks.success(e,o,n,a):e.callbacks.error(e,t,n,a)},l.callbacks.error=function(e,t,n,a){cm.isEmpty(n)||(r=cm.reducePath(e.params.responseErrorsKey,n),o=cm.reducePath(e.params.responseMessageKey,n),s=cm.reducePath(e.params.responseCodeKey,n)),e.callbacks.renderError(e,r,o);var r,o,s,n={response:n,errors:r,message:o,code:s,target:a instanceof ProgressEvent?a.target:null};e.triggerEvent("onError",n),e.triggerEvent("onRequestError",n)},l.callbacks.success=function(e,t,n,a){var r,o;cm.isEmpty(n)||(r=cm.reducePath(e.params.responseMessageKey,n),o=cm.reducePath(e.params.responseCodeKey,n)),e.params.showNotifications&&e.params.showSuccessNotification&&e.callbacks.renderNotification(e,{label:e.lang("success_message"),type:"success"}),d(t),e.triggerEvent("onSuccess",t),e.triggerEvent("onRequestSuccess",{response:n,data:t,message:r,code:o,target:a instanceof ProgressEvent?a.target:null})},l.callbacks.abort=function(e,t){e.triggerEvent("onAbort")},l.callbacks.clearError=function(e){e.clearNotification(),cm.forEach(e.fields,function(e){e.controller.clearError()})},l.callbacks.renderError=function(e,t,n){var a=!cm.isEmpty(n)&&cm.isString(n),n=a?n:e.lang("form_error"),r=(e.callbacks.clearError(e),{type:"danger"});cm.isArray(t)||cm.isObject(t)?(t=e.callbacks.renderErrorMessages(e,t),r.label=n,e.params.showNotificationsMessages&&(r.messages=t,r.collapsed=!0)):r.label=a?n:e.lang("server_error"),e.params.showNotifications&&e.callbacks.renderNotification(e,r)},l.callbacks.renderErrorMessages=function(n,e){var a,r,o,s,i=[];return e=n.callbacks.filterErrors(n,e),cm.forEach(e,function(e,t){r=e&&e.field?e.field:t,a=n.getField(r),s=n.getFieldLabel(r)||r,cm.isObject(e)?cm.isArray(e.message)?cm.forEach(e.message,function(e){o=n.callbacks.renderErrorMessage(n,a,e,s),i.push(o)}):cm.isEmpty(e.message)||(o=n.callbacks.renderErrorMessage(n,a,e.message,s),i.push(o)):cm.isArray(e)?cm.forEach(e,function(e){o=n.callbacks.renderErrorMessage(n,a,e,s),i.push(o)}):cm.isEmpty(e)||(o=n.callbacks.renderErrorMessage(n,a,e,s),i.push(o))}),i},l.callbacks.filterErrors=function(e,t){return t},l.callbacks.renderErrorMessage=function(e,t,n,a){var r=["errors",n].join("."),o=e.getMsg(r);return n=cm.isEmpty(o)?n:e.msg(r),t&&t.controller.renderError(n),n=cm.isEmpty(a)?n:[a,n].join(": ")},l.callbacks.renderNotification=function(e,t){cm.addClass(e.nodes.notifications,"is-show",!0),e.components.notifications.add(t)},l.destruct=function(){return l._isDestructed||(l._isDestructed=!0,cm.forEach(l.fields,function(e){e.controller.destruct()}),l.removeFromStack(),l.params.removeOnDestruct&&cm.remove(l.nodes.container)),l},l.add=function(e,t){var n;return e=e,t=t,e=Com.FormFields.get(e),t=cm.merge({form:l,formName:l.params.name,system:!1,name:"",dataName:null,dataPath:null,label:"",originValue:null,required:!1,validate:!1,send:!0,sendEmpty:!0,sendAlways:!1,sendPath:null,sendCallback:null,preventReset:!1,options:[],container:l.nodes.fields,render:!0,renderName:null,renderEvents:!0,renderErrorMessage:l.params.showValidationMessages},t),(t=cm.merge(cm.clone(e,!0),t)).fieldConstructor=cm.isEmpty(t.fieldConstructor)?"Com.FormField":t.fieldConstructor,t.renderName=cm.isBoolean(t.renderName)?t.renderName:l.params.renderNames,t.dataPath?(n=cm.reducePath(t.dataPath,l.params.data),t.value=cm.isEmpty(n)?t.value:n):t.value=cm.isEmpty(l.params.data[t.name])?t.value:l.params.data[t.name],t.dataValue=cm.isEmpty(l.params.data[t.dataName])?t.dataValue:l.params.data[t.dataName],t.render&&e&&!l.fields[t.name]&&a(t),l},l.addButton=function(e){return r(e),l},l.addButtons=function(e){return cm.isArray(e)&&cm.forEach(e,function(e){r(e)}),l},l.toggleButtons=function(e){return o(e),l},l.addSeparator=function(e){return e=e,e=cm.merge({node:cm.node("hr"),container:l.nodes.fields,classes:[]},e),cm.addClass(e.node,e.classes),cm.appendChild(e.node,e.container),l},l.addConstraint=function(e){return cm.isFunction(e)&&cm.arrayAdd(l.constraints,e),l},l.removeConstraint=function(e){return cm.isFunction(e)&&cm.arrayRemove(l.constraints,e),l},l.appendChild=function(e,t){return t=cm.isUndefined(t)?"appendChild":t,cm[t](e,l.nodes.fields),l},l.getField=function(e){return l.fields[e]},l.getFields=function(e){var t={};return cm.forEach(e,function(e){t[e]=l.getField(e)}),t},l.getFieldLabel=function(e){e=l.getField(e);if(e)return cm.isEmpty(e.label)?cm.isEmpty(e.placeholder)?void 0:e.placeholder:e.label},l.setFieldParams=function(e,t){var n=l.getField(e);return n&&(n=cm.merge(n,t),l.fields[e]=n),n},l.removeField=function(e){var t;return e=e,(t=l.getField(e))&&(t.fieldController&&cm.isFunction(t.fieldController.remove)&&t.fieldController.remove(),delete l.fields[e]),l},l.get=function(n,e){var a={};return n=cm.inArray(["all","fields","send","sendPath","system"],n)?n:"fields",e=cm.isUndefined(e)?l.params.mergeData:e,cm.forEach(l.fields,function(e,t){switch(n){case"all":a=i("all",a,e,t);break;case"fields":e.system||(a=i("fields",a,e,t));break;case"send":e.send&&!e.system&&(a=i("send",a,e,t));break;case"sendPath":e.send&&!e.system&&(a=i("sendPath",a,e,t));break;case"system":e.system&&(a=i("system",a,e,t))}}),e&&(a=cm.merge(l.params.data,a)),a=l.callbacks.filterData(l,a)},l.getAll=function(){return l.get("all")},l.set=function(n,a){var r;return(a=cm.merge({triggerEvents:!0,setFields:!0,setOrigin:!1,setData:!1},a)).setData&&(l.params.data=n),cm.forEach(l.fields,function(e,t){r=e.dataPath?cm.reducePath(e.dataPath,n):cm.isUndefined(n[e.dataName])?n[t]:n[e.dataName],cm.isUndefined(r)||(a.setOrigin&&l.setFieldParams(t,{originValue:r}),a.setFields&&e.controller.set(r,a.triggerEvents))}),a.triggerEvents&&l.triggerEvent("onSet"),l},l.clear=function(){return cm.forEach(l.fields,function(e){e.controller.destruct()}),l.fields={},cm.clearNode(l.nodes.fields),cm.forEach(l.buttons,function(e){cm.remove(e.node)}),l.buttons={},cm.clearNode(l.nodes.buttonsHolder),l.clearError(),l.triggerEvent("onClear"),l},l.reset=function(){return cm.forEach(l.fields,function(e){e.preventReset||e.controller.reset()}),l.clearError(),l.triggerEvent("onReset"),l},l.enable=function(){return l.isEnabled||(l.isEnabled=!0,cm.forEach(l.fields,function(e){e.controller.enable()}),cm.forEach(l.buttons,function(e){cm.removeClass(e.node,"button-disabled")}),l.triggerEvent("onEnable")),l},l.disable=function(){return l.isEnabled&&(l.isEnabled=!1,cm.forEach(l.fields,function(e){e.controller.disable()}),cm.forEach(l.buttons,function(e){cm.addClass(e.node,"button-disabled")}),l.triggerEvent("onDisable")),l},l.validate=function(e){e=cm.merge({silent:!1,triggerEvents:!0},e),l.clearNotification();n=e,r={form:l,valid:!0,message:null},cm.forEach(l.fields,function(e,t){a=e.controller.getParams(),e.field&&!e.system&&(a.required||a.validate)&&cm.isFunction(e.controller.validate)&&!e.controller.validate(n)&&(r.message=l.lang("form_error"),r.valid=!1)});var n,a,r,t=r=!cm.isEmpty(l.constraints)&&(t=cm.clone(r),t=s(t))?cm.merge(r,t):r;return t.valid||e.silent||l.params.showNotifications&&l.params.showValidationNotification&&l.renderNotification({label:t.message,type:"danger"}),e.triggerEvents&&!e.silent&&l.triggerEvent("onValidate",t),t},l.send=function(){var e;return l.isEnabled&&(l.isProcess&&l.params.abortPreviousRequest&&l.abort(),e={valid:!0},(e=l.params.validate?l.validate():e).valid)&&(l.isAjax?l.ajaxHandler=l.callbacks.request(l,cm.clone(l.params.ajax)):c()),l},l.sendStart=function(){return cm.addClass(l.nodes.container,"is-submitting"),o(!0),l.params.showLoader&&l.showLoader(),l},l.sendProgress=function(e){return l.params.showLoader&&(e.lengthComputable?l.setLoaderProgress(e.total,e.loaded):l.hideLoaderProgress()),l},l.sendEnd=function(){return cm.removeClass(l.nodes.container,"is-submitting"),o(!1),l.params.showLoader&&l.hideLoader(),l},l.sendPlaceholder=function(){return c(),l},l.abort=function(){return l.ajaxHandler&&l.ajaxHandler.abort&&l.ajaxHandler.abort(),l},l.setAction=function(e,t,n){switch(t=cm.inArray(["raw","update","current"],t)?t:"current"){case"raw":l.params.ajax=cm.merge(l._raw.params.ajax,e);break;case"current":l.params.ajax=cm.merge(l.params.ajax,e);break;case"update":l.params.ajax=cm.merge(l._update.params.ajax,e)}return n&&(l._update.params.ajax=cm.clone(l.params.ajax)),l.isAjax=l.params.ajax&&!cm.isEmpty(l.params.ajax.url),l},l.renderNotification=function(e){return l.callbacks.renderNotification(l,e),l},l.clearNotification=function(){return cm.removeClass(l.nodes.notifications,"is-show",!0),l.components.notifications.clear(),l},l.renderError=function(e,t){return l.callbacks.renderError(l,e,t),l},l.clearError=function(){return l.callbacks.clearError(l),l},l.getLoader=function(){return l.components.loader},l.showLoader=function(e){return l.components.loader&&l.components.loader.open(e),l},l.hideLoader=function(e){return l.components.loader&&l.components.loader.close(e),l},l.setLoaderProgress=function(e,t){return l.components.loader&&l.components.loader.setProgress(e,t),l},l.hideLoaderProgress=function(){return l.components.loader&&l.components.loader.hideProgress(),l},l.getName=function(){return l.params.name},l.getContainer=function(){return l.nodes.container},l.getButtonsContainer=function(){return l.nodes.buttonsContainer},l.getNodes=function(e){return l.nodes[e]||l.nodes},l.renderComponent(),l.setParams(e),l.convertEvents(l.params.events),l.getDataNodes(l.params.node),l.getDataConfig(l.params.node),l.callbacksProcess(),l.addToStack(l.params.node),l.triggerEvent("onRenderStart"),t(),n(),l.addToStack(l.nodes.container),l.triggerEvent("onRender")}),cm.define("Com.TabsetHelper",{extend:"Com.AbstractController",events:["onTabChangeStart","onTabChange","onTabChangeEnd","onTabShowStart","onTabShow","onTabShowProcess","onTabShowEnd","onTabHideStart","onTabHide","onTabHideProcess","onTabHideEnd","onTabRemoveStart","onTabRemove","onTabRemoveEnd","onLabelTarget","onUnsetStart","onUnset","onRequestStart","onRequestEnd","onRequestError","onRequestSuccess","onRequestAbort","onContentRenderStart","onContentRender","onContentRenderEnd"],params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,renderTabView:!1,setInitialTab:!1,setInitialTabImmediately:!0,active:null,items:[],processTabs:!0,targetEvent:"click",toggleOnHashChange:!1,showLoader:!0,responseKey:"data",responseHTML:!0,cache:!1,ajax:{type:"json",method:"get",url:"",params:""},overlayConstructor:"Com.Overlay",overlayParams:{position:"absolute",lazy:!0,autoOpen:!1,removeOnClose:!0}},strings:{server_error:"An unexpected error has occurred. Please try again later."}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.TabsetHelper",function(e,t,r,n){r.construct=function(){var e=this;e.nodes={container:cm.node("div"),labels:[],tabs:[],select:cm.node("select")},e.ajaxHandler=null,e.isAjax=!1,e.isProcess=!1,e.targetEvent=null,e.current=!1,e.previous=!1,e.items={},e.itemsList=[],e.hashChangeHandler=e.hashChange.bind(e),n.prototype.construct.apply(e,arguments)},r.validateParams=function(){var e=this;e.triggerEvent("onValidateParamsStart"),cm.isEmpty(e.params.ajax.url)||(e.isAjax=!0),"hover"===e.params.targetEvent?e.targetEvent="mouseover":e.targetEvent="click",e.triggerEvent("onValidateParams"),e.triggerEvent("onValidateParamsProcess"),e.triggerEvent("onValidateParamsEnd")},r.onSetEvents=function(){this.params.toggleOnHashChange&&cm.addEvent(window,"hashchange",this.hashChangeHandler)},r.onUnsetEvents=function(){this.params.toggleOnHashChange&&cm.removeEvent(window,"hashchange",this.hashChangeHandler)},r.onConstructEnd=function(){this.setInitialTab()},r.renderViewModel=function(){var t=this;return n.prototype.renderViewModel.apply(t,arguments),t.params.processTabs&&t.processTabs(t.nodes.tabs,t.nodes.labels),cm.forEach(t.params.items,function(e){t.renderTab(e)}),t.processSelect(t.nodes.select),cm.getConstructor(t.params.overlayConstructor,function(e){t.components.loader=new e(t.params.overlayParams)}),t},r.processTab=function(e,t){var n=cm.merge(this.getNodeDataConfig(e.container),this.getNodeDataConfig(t.container)),n=cm.merge(n,{tab:e,label:t});this.addTab(n)},r.processTabs=function(e,n){var a,r,o=this,e=e.length?e:n,s=[];return cm.forEach(e,function(e,t){a=n[t],r=cm.merge(o.getNodeDataConfig(e.container),o.getNodeDataConfig(a.container)),r=cm.merge(r,{tab:e,label:a}),s.push(r)}),o.addTabs(s),o},r.renderTab=function(e){var t=this;return(e=cm.merge({index:t.itemsList.length,id:"",title:"",titleContent:null,content:null,tab:{container:cm.node("li"),inner:cm.node("div")},label:{container:cm.node("li"),link:cm.node("a")},menu:{container:cm.node("li"),link:cm.node("a")},callback:null,constructor:null,constructorParams:{},constructorEventName:"onLoadEnd",className:"",cache:null,ajax:{},isHidden:!1,isShow:!1,isAjax:!1,isCached:!1},e)).tabName=["tabset",t.params.name,"tab",cm.isEmpty(e.id)?e.index:e.id].join("--"),e.labelName=["tabset",t.params.name,"label",cm.isEmpty(e.id)?e.index:e.id].join("--"),cm.isBoolean(e.cache)||(e.cache=t.params.cache),t.params.renderTabView&&t.renderTabView(e),cm.isEmpty(e.ajax.url)||(e.isAjax=!0),cm.isEmpty(e.className)||(cm.addClass(e.label.container,e.className),cm.addClass(e.menu.container,e.className),cm.addClass(e.tab.container,e.className)),cm.isEmpty(e.id)||t.items[e.id]||(e.isHidden&&(cm.addClass(e.label.container,"hidden"),cm.addClass(e.menu.container,"hidden"),cm.addClass(e.tab.container,"hidden")),t.renderTabTarget(e,e.label.container),t.renderTabTarget(e,e.menu.container),t.itemsList.push(e),t.items[e.id]=e),t},r.renderTabTarget=function(t,e){var n=this;n.targetEvent&&("click"===n.targetEvent?cm.click.add(e,function(e){cm.preventDefault(e),cm.stopPropagation(e),n.tabTarget(t)}):cm.addEvent(e,n.targetEvent,function(e){cm.preventDefault(e),cm.stopPropagation(e),n.tabTarget(t)}))},r.tabTarget=function(e){this.triggerEvent("onLabelTarget",e),this.params.toggleOnHashChange?window.location.hash=e.id:this.setTab(e.id)},r.renderTabView=function(e){},r.removeTab=function(e){var t=this,e=t.items[e];return e&&(t.triggerEvent("onTabRemove",e),e.id===t.current&&t.setByIndex(0),cm.remove(e.tab.container),cm.remove(e.label.container),t.itemsList=cm.arrayRemove(t.itemsList,e),delete t.items[e.id],t.triggerEvent("onTabRemove",e),t.triggerEvent("onTabRemoveEnd",e)),t},r.setTab=function(e,t){var n=this,a=(cm.isBoolean(t)&&(t={isInitial:t}),t=cm.merge({isInitial:!1},t),n.items[e]);return a&&n.current!==e&&(n.isInitial=t.isInitial,n.tabChangeStart(a),n.unsetTab(n.current,{action:"onSetTab"}),n.triggerEvent("onTabShowStart",a),n.previous=n.current,n.current=e,a.isShow=!0,n.triggerEvent("onTabShowProcess",a),!n.previous&&n.params.setInitialTabImmediately&&(cm.addClass(a.tab.container,"is-immediately"),cm.addClass(a.label.container,"is-immediately"),setTimeout(function(){cm.removeClass(a.tab.container,"is-immediately"),cm.removeClass(a.label.container,"is-immediately")},5)),cm.addClass(a.label.container,"active",!0),cm.addClass(a.tab.container,"active",!0),cm.setSelect(n.nodes.select,n.current),n.refreshTab(n.current)),n},r.unsetTab=function(e,t){var n=this,e=(t=cm.merge({action:null},t),n.items[e]);return e&&(n.isProcess&&n.abort(),n.triggerEvent("onTabHideStart",e),e.isShow=!1,n.triggerEvent("onTabHideProcess",e),cm.removeClass(e.label.container,"active"),cm.removeClass(e.tab.container,"active"),n.tabHideEnd(e,t)),n},r.refreshTab=function(e){var t=this,n=t.items[e],a={};n.constructor?n.controller?n.controller.refresh&&n.controller.refresh():cm.getConstructor(n.constructor,function(e){a[n.constructorEventName]=function(){t.tabShowEnd(n,{})},n.controller=new e(cm.merge(n.constructorParams,{container:n.tab.inner,events:a}))}):cm.isFunction(n.callback)?(n.callback(n),t.tabShowEnd(n,{})):!n.isAjax||n.cache&&(n.cache,n.isCached)?t.tabShowEnd(n,{}):t.ajaxHandler=r.callbacks.request(t,{config:cm.merge(t.params.ajax,n.ajax)},n)},r.unsetHead=function(){var e=this.items[this.current];return e&&cm.removeClass(e.label.container,"active"),this},r.getInitialTab=function(){var e,t=this;return cm.isEmpty(t.itemsList)||cm.isEmpty(t.items)?null:t.params.toggleOnHashChange&&(e=window.location.hash.slice(1),t.isValidTab(e))||(e=t.params.active,t.isValidTab(e))?e:t.itemsList[0].id},r.setInitialTab=function(){var e=this,t=e.params.setInitialTab?e.getInitialTab():e.params.active;e.isValidTab(t)&&e.setTab(t,!0)},r.isValidTab=function(e){return!!this.getTab(e)},r.tabChangeStart=function(e){this.triggerEvent("onTabChangeStart",e)},r.tabShowEnd=function(e,t){var n=this;e.id===n.current&&((t=cm.merge({redrawContent:!0,triggerEvents:!0},t)).redrawContent&&n.redrawTabContent(e),t.triggerEvents)&&(n.triggerEvent("onTabShow",e,t),n.triggerEvent("onTabShowEnd",e,t),n.current!==n.previous)&&(n.triggerEvent("onTabChange",e,t),n.triggerEvent("onTabChangeEnd",e,t))},r.tabHideEnd=function(e,t){(t=cm.merge({triggerEvents:!0},t)).triggerEvents&&(this.triggerEvent("onTabHide",e),this.triggerEvent("onTabHideEnd",e))},r.redrawTabContent=function(e){cm.customEvent.trigger(e.tab.container,"redraw",{direction:"child",self:!1})},r.processSelect=function(e){var t=this;cm.addEvent(e,"change",function(){t.setTab(e.value)})},r.hashChange=function(){var e=decodeURIComponent(window.location.hash.slice(1));this.isValidTab(e)&&this.setTab(e)},r.callbacks.prepare=function(e,t,n){return t.config=e.callbacks.beforePrepare(e,t,n),t.config.url=cm.strReplace(t.config.url,{"%tab%":n.id,"%baseUrl%":cm._baseUrl}),t.config.params=cm.objectReplace(t.config.params,{"%tab%":n.id,"%baseUrl%":cm._baseUrl}),t.config=e.callbacks.afterPrepare(e,t,n),t.config},r.callbacks.beforePrepare=function(e,t,n){return t.config},r.callbacks.afterPrepare=function(e,t,n){return t.config},r.callbacks.request=function(t,n,a){return(n=cm.merge({response:null,config:null,data:null},n)).config=t.callbacks.prepare(t,n,a),cm.ajax(cm.merge(n.config,{onStart:function(){r.callbacks.start(t,n,a)},onSuccess:function(e){n.response=e,r.callbacks.response(t,n,a)},onError:function(){r.callbacks.error(t,n,a)},onAbort:function(){r.callbacks.abort(t,n,a)},onEnd:function(){r.callbacks.end(t,n,a)}}))},r.callbacks.start=function(e,t,n){e.isProcess=!0,e.params.showLoader&&e.components.loader.embed(n.tab.container).open(),e.triggerEvent("onRequestStart",n,t)},r.callbacks.end=function(e,t,n){e.isProcess=!1,e.params.showLoader&&e.components.loader.close(),e.triggerEvent("onRequestEnd",n,t)},r.callbacks.filter=function(e,t,n){var a,e=cm.objectSelector(e.params.responseKey,t.response);return a=e&&!cm.isEmpty(e)?e:a},r.callbacks.response=function(e,t,n){cm.isEmpty(t.response)||(t.data=r.callbacks.filter(e,t,n)),cm.isEmpty(t.data)?r.callbacks.error(e,t,n):r.callbacks.success(e,t,n)},r.callbacks.error=function(e,t,n){r.callbacks.renderError(e,t,n),e.triggerEvent("onRequestError",n,t)},r.callbacks.success=function(e,t,n){r.callbacks.render(e,t,n),e.triggerEvent("onRequestSuccess",n,t)},r.callbacks.abort=function(e,t,n){e.triggerEvent("onRequestAbort",n,t)},r.callbacks.render=function(e,t,n){n.data=t.data,n.isCached=!0,e.triggerEvent("onContentRenderStart",n,t),r.callbacks.renderContent(e,t,n),e.triggerEvent("onContentRender",n,t),e.triggerEvent("onContentRenderEnd",n,t),e.tabShowEnd(n,t)},r.callbacks.renderContent=function(e,t,n){e.params.responseHTML&&(e=cm.strToHTML(t.data),cm.clearNode(n.tab.inner),cm.appendNodes(e,n.tab.inner))},r.callbacks.renderError=function(e,t,n){e.params.responseHTML&&(cm.clearNode(n.tab.inner),n.tab.inner.appendChild(cm.node("div",{classes:"cm__empty"},e.lang("server_error"))))},r.set=function(e,t){return this.items[e]&&this.setTab(e,t),this},r.setByIndex=function(e,t){e=this.itemsList[e];return e&&this.setTab(e.id,t),this},r.unset=function(){var e=this;return e.triggerEvent("onUnsetStart"),e.unsetTab(e.current,{action:"onUnset"}),e.params.toggleOnHashChange&&(window.location.hash=""),e.current=null,e.previous=null,e.triggerEvent("onUnset"),e},r.get=function(){return this.current},r.refresh=function(){return cm.isUndefined(this.current)||this.refreshTab(this.current),this},r.addTab=function(e){return this.renderTab(e),this},r.addTabs=function(e){var t=this;return cm.forEach(e,function(e){t.renderTab(e)}),t},r.getTab=function(e){return e&&this.items[e]?this.items[e]:null},r.getTabs=function(){return this.items},r.getCurrentTab=function(){return this.items[this.current]},r.getTabsCount=function(){return this.itemsList.length},r.isTabEmpty=function(e){e=this.getTab(e);return!(e&&e.tab.inner.childNodes.length)},r.abort=function(){return this.ajaxHandler&&this.ajaxHandler.abort&&this.ajaxHandler.abort(),this}}),cm.define("Com.ScrollPagination",{extend:"Com.AbstractController",events:["onRebuild","onStart","onAbort","onError","onEmpty","onPageRender","onPageRenderEnd","onPageShow","onPageHide","onPlaceholderRender","onPlaceholderRenderEnd","onPlaceholderRemove","onPlaceholderRemoveEnd","onEnd","onFinalize","onSetCount","onButtonShow","onButtonHide","onLoaderShow","onLoaderHide"],params:{controllerEvents:!0,renderStructure:!1,embedStructureOnRender:!1,embedStructure:"append",clearOnRebuild:!1,resizeEvent:!0,scrollEvent:!0,scrollNode:window,scrollIndent:"Math.max(%scrollHeight% / (3 / 2), 600)",disabled:!1,data:[],count:null,perPage:0,startPage:1,startPageToken:"",startOffset:0,pageCount:0,useToken:!1,autoSend:!0,showButton:void 0,showLoader:!0,loaderDelay:"cm._config.loadDelay",setDelay:"cm._config.loadDelay",stopOnESC:!0,pageTag:"div",pageAttributes:{class:"com__scroll-pagination__page"},button:{enable:!0,classes:["button","button-primary"]},placeholder:{enable:!1,embedLoader:!0},responseCountKey:"count",responseTokenKey:"token",responseKey:"data",responseErrorsKey:"errors",responseHTML:!1,ajax:{type:"json",method:"get",url:"",params:""}},strings:{load_more:"Load More",server_error:"An unexpected error has occurred. Please try again later."}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.ScrollPagination",function(classConstructor,className,classProto,classInherit){classProto.construct=function(){var e=this;e.nodes={container:cm.node("div"),scroll:null,bar:cm.node("div"),barHolder:cm.node("div"),content:cm.node("div"),pages:cm.node("div"),button:cm.node("div"),loader:cm.node("div")},e.pages=[],e.ajaxHandler=null,e.loaderDelay=null,e.setDelay=null,e.currentAction=null,e.currentPlaceholder=null,e.isAjax=!1,e.isProcess=!1,e.isFinalize=!1,e.isButton=!1,e.isDisabled=!1,e.page=null,e.pageToken=null,e.currentPage=null,e.previousPage=null,e.nextPage=null,e.itemCount=null,e.pageCount=null,e.keyDownEventHandler=e.keyDownEvent.bind(e),e.setHandler=e.set.bind(e),classInherit.prototype.construct.apply(e,arguments)},classProto.validateParams=function(){var e=this;e.triggerEvent("onValidateParamsStart"),e.triggerEvent("onValidateParams"),e.triggerEvent("onValidateParamsProcess"),e.isDisabled=e.params.disabled,e.nodes.scroll&&(e.params.scrollNode=e.nodes.scroll),cm.isUndefined(e.params.showButton)||(e.params.button.enable=e.params.showButton),cm.isEmpty(e.params.ajax.url)?e.params.showLoader=!1:e.isAjax=!0,e.itemCount=e.params.count,e.setPageCount(),e.setToken(e.params.startPage,e.params.startPageToken),e.nextPage=e.params.startPage,e.triggerEvent("onValidateParamsEnd")},classProto.setEventsHandler=function(){classInherit.prototype.setEventsHandler.apply(this,arguments),this.params.stopOnESC&&cm.addEvent(window,"keydown",this.keyDownEventHandler)},classProto.unsetEventsHandler=function(){classInherit.prototype.unsetEventsHandler.apply(this,arguments),this.params.stopOnESC&&cm.removeEvent(window,"keydown",this.keyDownEventHandler)},classProto.onConstructEnd=function(){this.params.autoSend&&this.set()},classProto.onDestructStart=function(){var e;null!=(e=this.components.observer)&&e.disconnect()},classProto.onScrollUpdate=function(){this.checkForRequest()&&this.set()},classProto.renderView=function(){var e=this;e.nodes.container=cm.node("div",{classes:"com__scroll-pagination"},e.nodes.content=cm.node("div",{classes:"com__scroll-pagination__content"},e.nodes.pages=cm.node("div",{classes:"com__scroll-pagination__pages"}))),e.nodes.bar=cm.node("div",{classes:"com__scroll-pagination__bar"},e.nodes.button=cm.node("button",{classes:e.params.button.classes},e.lang("load_more")),e.nodes.loader=cm.node("div",{classes:"button button-clear has-icon has-icon has-icon-small"},cm.node("div",{classes:"icon small loader"}))),e.embedButton(e.nodes.container)},classProto.renderViewModel=function(){var t=this;classInherit.prototype.renderViewModel.apply(t,arguments),t.components.observer=new IntersectionObserver(t.isPagesVisible.bind(t),{root:null,rootMargin:"0px",threshold:t.params.threshold}),t.resetStyles(),cm.click.add(t.nodes.button,function(e){cm.preventDefault(e),t.set()})},classProto.resetStyles=function(){var e=this;e.callbacks.removePlaceholder(e,e.currentPlaceholder),e.currentPlaceholder=null,e.params.button.enable&&"none"!==e.params.button.enable?e.callbacks.showButton(e):e.callbacks.hideButton(e),e.callbacks.hideLoader(e)},classProto.keyDownEvent=function(e){var t=this;cm.handleKey(e,"Escape",function(){t.isDisabled||t.isProcess||t.isFinalize||"none"===t.params.button.enable||t.callbacks.showButton(t)})},classProto.checkForScrollBottom=function(){var e=cm.getScrollTop(this.params.scrollNode),t=cm.getScrollHeight(this.params.scrollNode);return e+cm.getRect(this.params.scrollNode).height>=t},classProto.checkForRequest=function(){var that=this,scrollRect=cm.getRect(that.params.scrollNode),pagesRect=cm.getRect(that.nodes.pages);if(!(that.isDisabled||cm.isProcess||that.isFinalize||that.isButton||that.checkForButton())){var scrollIndent=eval(cm.strReplace(that.params.scrollIndent,{"%scrollHeight%":scrollRect.bottom-scrollRect.top}));if(pagesRect.bottom-scrollRect.bottom<=scrollIndent)return!0}return!1},classProto.checkForButton=function(){return!0===this.params.button.enable||"once"===this.params.button.enable&&this.params.startPage===this.page},classProto.checkForPlaceholder=function(){var e=this;return!0===e.params.placeholder.enable||"auto"===e.params.placeholder.enable&&e.params.startPage!==e.page&&!e.isButton},classProto.callbacks.prepare=function(e,t){return(t=e.callbacks.beforePrepare(e,t)).url=cm.strReplace(t.url,{"%perPage%":e.params.perPage,"%limit%":e.params.perPage,"%page%":e.page,"%offset%":(e.page-1)*e.params.perPage+e.params.startOffset,"%token%":e.pageToken,"%baseUrl%":cm._baseUrl}),t.params=cm.objectReplace(t.params,{"%perPage%":e.params.perPage,"%limit%":e.params.perPage,"%page%":e.page,"%offset%":(e.page-1)*e.params.perPage+e.params.startOffset,"%token%":e.pageToken,"%baseUrl%":cm._baseUrl}),t=e.callbacks.afterPrepare(e,t)},classProto.callbacks.beforePrepare=function(e,t){return t},classProto.callbacks.afterPrepare=function(e,t){return t},classProto.callbacks.request=function(t,n){return n=t.callbacks.prepare(t,n),t.currentAction=n,cm.ajax(cm.merge(n,{onStart:function(){t.callbacks.start(t,n)},onSuccess:function(e){t.callbacks.response(t,n,e)},onError:function(){t.callbacks.error(t,n)},onAbort:function(){t.callbacks.abort(t,n)},onEnd:function(){t.callbacks.end(t)}}))},classProto.callbacks.filter=function(e,t,n){var a=cm.objectPath(e.params.responseErrorsKey,n),r=cm.objectPath(e.params.responseKey,n),o=cm.objectPath(e.params.responseCountKey,n),n=cm.objectPath(e.params.responseTokenKey,n),s=[];return cm.isEmpty(a)&&(cm.isEmpty(r)||(s=cm.isArray(r)&&e.params.perPage?r.slice(0,e.params.perPage):r),cm.isEmpty(o)||e.setCount(o),cm.isEmpty(n)||e.setToken(e.nextPage,n),e.params.useToken)&&cm.isEmpty(n)&&e.callbacks.finalize(e),s},classProto.callbacks.response=function(e,t,n){e.setPage(),n=n&&e.callbacks.filter(e,t,n),cm.isEmpty(n)?(e.triggerEvent("onEmpty"),e.callbacks.finalize(e)):e.callbacks.render(e,n)},classProto.callbacks.error=function(e,t){e.callbacks.finalize(e),e.triggerEvent("onError")},classProto.callbacks.abort=function(e,t){e.triggerEvent("onAbort")},classProto.callbacks.data=function(e,t){var n,a,r;e.callbacks.start(e),e.setPage(),cm.isEmpty(t)?e.callbacks.render(e,t):0===e.params.perPage?(e.callbacks.render(e,t),e.callbacks.finalize(e)):0<e.params.perPage&&(n=t.length,a=(e.page-1)*e.params.perPage,r=e.page*e.params.perPage,n<=a?e.callbacks.finalize(e):(t=t.slice(a,Math.min(r,n)),e.callbacks.render(e,t)),n<=r)&&e.callbacks.finalize(e),e.callbacks.end(e)},classProto.callbacks.renderContainer=function(e,t){return cm.node(e.params.pageTag,e.params.pageAttributes)},classProto.callbacks.render=function(e,t){var n=cm.getScrollTop(e.params.scrollNode),a=e.checkForScrollBottom(),t={page:e.page,token:e.pageToken,pages:e.nodes.pages,container:cm.node(e.params.pageTag),data:t,isEmpty:!1,isVisible:!1,isRendered:!0};t.container=e.callbacks.renderContainer(e,t),e.pages[e.page]=t,e.triggerEvent("onPageRender",t),e.callbacks.renderPage(e,t),e.currentPlaceholder?cm.insertBefore(t.container,e.currentPlaceholder.container):cm.appendChild(t.container,e.nodes.pages),cm.addClass(t.container,"is-loaded",!0),e.components.observer.observe(t.container),a&&cm.setScrollTop(e.params.scrollNode,n),e.triggerEvent("onPageRenderEnd",t)},classProto.callbacks.renderPage=function(e,t){e.params.responseHTML&&(e=cm.strToHTML(t.data),cm.appendNodes(e,t.container))},classProto.callbacks.removePage=function(e,t){t&&t.isRendered&&(e.components.observer.unobserve(t.container),cm.remove(t.container))},classProto.callbacks.renderPlaceholder=function(e,t){var n={};return n.container=e.callbacks.renderContainer(e),cm.addClass(n.container,"is-placeholder"),e.triggerEvent("onPlaceholderRender",n),cm.appendChild(n.container,e.nodes.pages),e.triggerEvent("onPlaceholderRenderEnd",n),n},classProto.callbacks.removePlaceholder=function(e,t){t&&(e.triggerEvent("onPlaceholderRemove",t),cm.remove(t.container),e.triggerEvent("onPlaceholderRemoveEnd",t))},classProto.callbacks.start=function(e,t){e.isProcess=!0,e.currentPlaceholder&&(e.callbacks.removePlaceholder(e,e.currentPlaceholder),e.currentPlaceholder=null),e.checkForPlaceholder()&&(e.currentPlaceholder=e.callbacks.renderPlaceholder(e,t)),e.params.showLoader&&(e.currentPlaceholder&&e.params.placeholder.embedLoader&&cm.appendChild(e.nodes.bar,e.currentPlaceholder.container),e.isButton?e.callbacks.showLoader(e):e.loaderDelay=setTimeout(function(){return e.callbacks.showLoader(e)},e.params.loaderDelay)),e.triggerEvent("onStart")},classProto.callbacks.end=function(e){e.isProcess=!1,e.params.showLoader&&(e.currentPlaceholder&&cm.appendChild(e.nodes.bar,e.nodes.barHolder),e.loaderDelay&&clearTimeout(e.loaderDelay),e.callbacks.hideLoader(e)),e.callbacks.removePlaceholder(e,e.currentPlaceholder),e.currentPlaceholder=null,(0===e.itemCount||0<e.pageCount&&e.pageCount===e.currentPage)&&e.callbacks.finalize(e),e.callbacks.toggleButton(e),e.triggerEvent("onEnd"),e.checkForRequest()&&(e.setDelay=setTimeout(e.setHandler,e.params.setDelay))},classProto.callbacks.finalize=function(e){e.isFinalize||(e.isFinalize=!0,e.callbacks.hideButton(e),e.triggerEvent("onFinalize"))},classProto.callbacks.toggleButton=function(e){!e.isFinalize&&e.checkForButton()?e.callbacks.showButton(e):e.callbacks.hideButton(e)},classProto.callbacks.showButton=function(e){e.isButton=!0,cm.removeClass(e.nodes.button,"is-hidden"),cm.removeClass(e.nodes.bar,"is-hidden"),e.nodes.barHolder!==e.nodes.container&&cm.removeClass(e.nodes.barHolder,"is-hidden"),e.triggerEvent("onButtonShow")},classProto.callbacks.hideButton=function(e){e.isButton=!1,cm.addClass(e.nodes.button,"is-hidden"),cm.addClass(e.nodes.bar,"is-hidden"),e.nodes.barHolder!==e.nodes.container&&cm.addClass(e.nodes.barHolder,"is-hidden"),e.triggerEvent("onButtonHide")},classProto.callbacks.showLoader=function(e){cm.addClass(e.nodes.button,"is-hidden"),cm.removeClass(e.nodes.loader,"is-hidden"),cm.removeClass(e.nodes.bar,"is-hidden"),e.triggerEvent("onLoaderShow")},classProto.callbacks.hideLoader=function(e){cm.addClass(e.nodes.loader,"is-hidden"),e.triggerEvent("onLoaderHide")},classProto.rebuild=classProto.request=function(e){var t=this;return t.isProcess&&t.abort(),t.pages=[],t.page=null,t.pageToken=null,t.currentPage=null,t.previousPage=null,t.nextPage=null,t.itemCount=null,t.pageCount=null,t.isFinalize=!1,cm.isEmpty(e)||t.setParams(e),t.validateParams(),t.resetStyles(),t.params.clearOnRebuild&&t.clear(),t.triggerEvent("onRebuild"),t.set(),t},classProto.clear=function(){var t=this;return cm.forEach(t.pages,function(e){return t.callbacks.removePage(t,e)}),cm.clearNode(t.nodes.pages),t},classProto.set=function(){var e,t=this;return t.setDelay&&clearTimeout(t.setDelay),t.isProcess||t.isFinalize||(t.page=t.nextPage,t.pageToken=t.pages[t.page]?t.pages[t.page].token:"",t.isAjax?(e=cm.clone(t.params.ajax),t.ajaxHandler=t.callbacks.request(t,e)):t.callbacks.data(t,t.params.data)),t},classProto.setToken=function(e,t){return this.pages[e]||(this.pages[e]={}),this.pages[e].token=t,this},classProto.setCount=function(e){var t=this;return cm.isString(e)&&(e=parseInt(e)),cm.isNumber(e)&&e!==t.itemCount&&(t.itemCount=e,t.setPageCount(),(0===t.itemCount||0<t.pageCount&&t.pageCount===t.currentPage)&&t.callbacks.finalize(t),t.triggerEvent("onSetCount",e)),t},classProto.setPageCount=function(){var e=this;return 0===e.params.pageCount&&e.itemCount&&e.params.perPage?e.pageCount=Math.ceil(e.itemCount/e.params.perPage):e.pageCount=e.params.pageCount,e},classProto.setAction=function(e,t,n,a){var r=this;switch(t=cm.inArray(["raw","update","current"],t)?t:"current",n=!cm.isUndefined(n)&&n,a=!!cm.isUndefined(a)||a,t){case"raw":r.params.ajax=cm.merge(r._raw.params.ajax,e);break;case"current":r.params.ajax=cm.merge(r.params.ajax,e);break;case"update":r.params.ajax=cm.merge(r._update.params.ajax,e)}return n&&(r._update.params.ajax=cm.clone(r.params.ajax)),a&&r.rebuild(),r},classProto.getAction=function(){return this.params.ajax},classProto.getCurrentAction=function(){return this.currentAction},classProto.getPages=function(){return this.pages},classProto.setPage=function(){var e=this;return e.previousPage=e.currentPage,e.currentPage=e.nextPage,e.nextPage++,e},classProto.isPagesVisible=function(e){var n=this;cm.forEach(n.pages,function(t){cm.forEach(e,function(e){t.container===e.target&&(e.isIntersecting?(t.isVisible=!0,cm.removeClass(t.container,"is-hidden"),n.triggerEvent("onPageShow",t)):(t.isVisible=!1,cm.addClass(t.container,"is-hidden"),n.triggerEvent("onPageHide",t)))})})},classProto.isEmpty=function(){return!this.pages.find(function(e){return!(null!=e&&e.isEmpty)})},classProto.finalize=function(){return this.callbacks.finalize(this),this},classProto.abort=function(){return this.ajaxHandler&&this.ajaxHandler.abort&&this.ajaxHandler.abort(),this},classProto.disable=function(){return this.isDisabled=!0,this},classProto.enable=function(){return this.isDisabled=!1,this},classProto.embedButton=function(e){this.nodes.barHolder=e,cm.appendChild(this.nodes.bar,e)},classProto.isParent=function(e,t){return cm.isParent(this.nodes.container,e,t)}}),cm.define("Com.Calendar",{modules:["Params","Events","Langs","DataConfig","Stack","Structure"],events:["onRender","onDayOver","onDayOut","onDayClick","onDayRender","onPrevMonthRequest","onNextMonthRequest","onMonthRequest","onMonthRender"],params:{customEvents:!0,node:cm.node("div"),name:"",className:"",startYear:1950,endYear:"current + 10",startMonth:null,endMonth:null,renderMonthOnInit:!0,startWeekDay:0,renderSelects:!0,renderArrows:!1,renderSelectsInBody:!0,changeMonthOnClick:!0,renderMonthOnRequest:!0,dayClasses:[],dayButtonRole:"radio"},strings:{daysAbbr:cm._strings.daysAbbr,days:cm._strings.days,months:cm._strings.months,month:"Month",year:"Year",prev:"Previous month",next:"Next month"}},function(params){var that=this,nodes={selects:{}},selects={},today=new Date,current={year:today.getFullYear(),month:today.getMonth()},previous={},next={},init=(that.isDestructed=null,function(){that.destructHandler=that.destruct.bind(that),that.setParams(params),that.convertEvents(that.params.events),that.getDataConfig(that.params.node),validateParams(),render(),setMiscEvents(),setEvents(),that.params.renderMonthOnInit&&renderView(),that.addToStack(nodes.container),that.triggerEvent("onRender")}),validateParams=function validateParams(){/current/.test(that.params.startYear)&&(that.params.startYear=eval(cm.strReplace(that.params.startYear,{current:(new Date).getFullYear()}))),/current/.test(that.params.endYear)&&(that.params.endYear=eval(cm.strReplace(that.params.endYear,{current:(new Date).getFullYear()})))},render=function(){var t;nodes.container=cm.node("div",{classes:"com__calendar"},cm.node("table",cm.node("thead",nodes.days=cm.node("tr")),nodes.dates=cm.node("tbody"))),cm.addClass(nodes.container,that.params.className),nodes.selects=cm.node("div",{classes:"selects"},nodes.months=cm.node("select",{classes:"select months"}),nodes.years=cm.node("select",{classes:"select years"})),that.params.renderSelects&&cm.insertFirst(nodes.selects,nodes.container),that.params.renderArrows&&(nodes.prev=cm.node("button",{classes:["button-primary","arrow"],title:that.msg("prev"),"aria-label":that.msg("prev")},"<"),cm.click.add(nodes.prev,that.prevMonth.bind(that)),cm.insertFirst(nodes.prev,nodes.selects),nodes.next=cm.node("button",{classes:["button-primary","arrow"],title:that.msg("next"),"aria-label":that.msg("next")},">"),cm.click.add(nodes.next,that.nextMonth.bind(that)),cm.insertLast(nodes.next,nodes.selects)),cm.forEach(7,function(e){t=6<(t=e+that.params.startWeekDay)?Math.abs(6-(t-1)):t,nodes.days.appendChild(cm.node("th",{title:that.msg("days")[t]},that.msg("daysAbbr")[t]))}),that.msg("months").forEach(function(e,t){nodes.months.appendChild(cm.node("option",{value:t},e))});for(var e=that.params.endYear;e>=that.params.startYear;e--)nodes.years.appendChild(cm.node("option",{value:e},e));that.embedStructure(nodes.container)},setMiscEvents=function(){selects.years=new Com.Select({node:nodes.years,title:that.msg("year"),renderInBody:that.params.renderSelectsInBody}).set(current.year).addEvent("onChange",renderView),selects.months=new Com.Select({node:nodes.months,title:that.msg("month"),renderInBody:that.params.renderSelectsInBody}).set(current.month).addEvent("onChange",renderView)},setEvents=function(){that.params.customEvents&&cm.customEvent.add(nodes.container,"destruct",that.destructHandler)},unsetEvents=function(){that.params.customEvents&&cm.customEvent.remove(nodes.container,"destruct",that.destructHandler)},renderView=function(e){var t;e=cm.merge({render:that.params.renderMonthOnRequest,triggerEvents:!0,event:null},e),today=new Date,t=new Date(selects.years.get(),selects.months.get(),1),current=getMonthData(t),(t=new Date(current.year,current.month,1)).setMonth(current.month-1),previous=getMonthData(t),(t=new Date(current.year,current.month,1)).setMonth(current.month+1),next=getMonthData(t),e.triggerEvents&&(that.triggerEvent("onMonthRequest",current),e.event)&&that.triggerEvent(e.event,current),e.render&&(cm.clearNode(nodes.dates),cm.forEach(6,renderRow),e.triggerEvents)&&that.triggerEvent("onMonthRender",current)},renderRow=function(e){var t=current.startWeekDay-that.params.startWeekDay,n=7*(e-1)+1-(0<t?t-7:t),a=nodes.dates.appendChild(cm.node("tr"));cm.forEach(7,function(){renderCell(a,n),n++})},renderCell=function(e,t){var n={row:e,day:t,month:current.month,year:current.year,date:new Date(current.year,current.month,t),nodes:{},isWeekend:!1,isToday:!1};return n.container=n.nodes.container=cm.node("td",{classes:that.params.dayClasses}),t<=0?(cm.addClass(n.container,"out"),n.node=n.nodes.holder=renderDay(previous.dayCount+t),that.params.changeMonthOnClick&&(n.node.title=that.msg("prev"),cm.addEvent(n.node,"click",function(){that.prevMonth()}))):t>current.dayCount?(cm.addClass(n.container,"out"),n.node=n.nodes.holder=renderDay(t-current.dayCount),that.params.changeMonthOnClick&&(n.node.title=that.msg("next"),cm.addEvent(n.node,"click",function(){that.nextMonth()}))):(cm.addClass(n.container,"in"),n.node=n.nodes.holder=renderDay(t),n.node.setAttribute("role",that.params.dayButtonRole),n.node.setAttribute("tabindex",0),n.node.setAttribute("aria-checked",!1),today.getFullYear()===current.year&&today.getMonth()===current.month&&today.getDate()===t&&(n.isToday=!0,cm.addClass(n.container,"today")),cm.addEvent(n.node,"mouseover",function(){that.triggerEvent("onDayOver",n)}),cm.addEvent(n.node,"mouseout",function(){that.triggerEvent("onDayOut",n)}),cm.addEvent(n.node,"click",function(){that.triggerEvent("onDayClick",n)}),current.days[t]=n,that.triggerEvent("onDayRender",n)),/[06]/.test(n.date.getDay())&&(n.isWeekend=!0,cm.addClass(n.container,"weekend")),n.container.appendChild(n.node),n.row.appendChild(n.container),n},renderDay=function(e){return cm.node("div",{classes:"day"},cm.node("div",{classes:"label"},e))},getMonthData=function(e){e={date:e,year:e.getFullYear(),month:e.getMonth(),days:{},startWeekDay:e.getDay()};return e.dayCount=new Date(e.year,e.month+1,0).getDate(),e};that.set=function(e,t,n){return e>=that.params.startYear&&e<=that.params.endYear&&0<=t&&t<=11&&(selects.years.set(e,!1),selects.months.set(t,!1),renderView(n)),that},that.clear=function(e){var t=new Date;return selects.years.set(t.getFullYear(),!1),selects.months.set(t.getMonth(),!1),renderView(e),that},that.getCurrentMonth=function(){return current},that.getFullYear=function(){return current.year},that.getMonth=function(){return current.month},that.getDays=function(){return current.days},that.renderMonth=function(e){return renderView(e),that},that.prevMonth=function(e){return e=cm.merge(e,{event:"onPrevMonthRequest"}),previous.year>=that.params.startYear&&(selects.years.set(previous.year,!1),selects.months.set(previous.month,!1),renderView(e)),that},that.nextMonth=function(e){return e=cm.merge(e,{event:"onNextMonthRequest"}),next.year<=that.params.endYear&&(selects.years.set(next.year,!1),selects.months.set(next.month,!1),renderView(e)),that},that.selectDay=function(e){e&&current.year===e.getFullYear()&&current.month===e.getMonth()&&((e=current.days[e.getDate()]).nodes.holder.setAttribute("aria-checked",!0),cm.addClass(e.nodes.container,"selected"))},that.unSelectDay=function(e){e&&current.year===e.getFullYear()&&current.month===e.getMonth()&&((e=current.days[e.getDate()]).nodes.holder.setAttribute("aria-checked",!1),cm.removeClass(e.nodes.container,"selected"))},that.getNodes=function(e){return nodes[e]||nodes},that.destruct=function(){return this.isDestructed||(this.isDestructed=!0,selects.years.destruct(),selects.months.destruct(),unsetEvents(),this.removeFromStack()),this},init()}),cm.define("Com.CalendarEvents",{modules:["Params","Structure","Stack","DataConfig","Langs"],params:{node:cm.node("div"),container:null,embedStructure:"append",name:"",data:{},format:"cm._config.displayDateFormat",startYear:1950,endYear:(new Date).getFullYear()+10,startWeekDay:0,target:"_blank","Com.Tooltip":{className:"com__calendar-events__tooltip"}},strings:{daysAbbr:["S","M","T","W","T","F","S"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]}},function(e){function t(){r.nodes.container=cm.node("div",{class:"com__calendar-events"}),r.components.calendar=new Com.Calendar({node:r.nodes.container,renderMonthOnInit:!1,startYear:r.params.startYear,endYear:r.params.endYear,startWeekDay:r.params.startWeekDay,langs:r.params.langs}),r.components.tooltip=new Com.Tooltip(r.params["Com.Tooltip"]),r.embedStructure(r.nodes.container)}function n(){r.components.calendar.addEvent("onDayOver",o).addEvent("onMonthRender",a).renderMonth()}var r=this,a=(r.nodes={},r.components={},function(e,n){var t,a;(t=(t=r.params.data[n.year])&&t[n.month+1])&&cm.forEach(t,function(e,t){(a=n.days[t])&&cm.addClass(a.container,"active")})}),o=function(e,t){var n,a={};(n=(n=(n=r.params.data[t.year])&&n[t.month+1])&&n[t.day])&&(a.content=cm.node("div",{class:"pt__listing com__calendar-events__listing"},a.list=cm.node("ul",{class:"list"})),cm.forEach(n,function(e){a.list.appendChild(cm.node("li",cm.node("a",{href:e.url,target:r.params.target},e.title)))}),r.components.tooltip.setTarget(t.node).setTitle(cm.dateFormat(t.date,r.params.format,r.lang())).setContent(a.content).show())};r.addData=function(e){return r.params.data=cm.merge(r.params.data,e),r.components.calendar.renderMonth(),r},r.replaceData=function(e){return r.params.data=e,r.components.calendar.renderMonth(),r},r.setParams(e),r.getDataConfig(r.params.node),t(),n(),r.addToStack(r.nodes.container)}),cm.define("Com.CollapsibleLayout",{modules:["Params","Events","DataConfig","DataNodes","Storage"],events:["onRender","onCollapseLeft","onExpandLeft","onCollapseRight","onExpandRight"],params:{node:cm.node("div"),remember:!1}},function(e){var n=this,t=(n.nodes={leftButton:cm.node("div"),leftContainer:cm.node("div"),rightButton:cm.node("div"),rightContainer:cm.node("div")},n.isLeftCollapsed=!1,n.isRightCollapsed=!1,function(){var e,t;cm.addEvent(n.nodes.leftButton,"click",r),cm.addEvent(n.nodes.rightButton,"click",a),n.isLeftCollapsed=cm.isClass(n.params.node,"is-sidebar-left-collapsed"),n.isRightCollapsed=cm.isClass(n.params.node,"is-sidebar-right-collapsed"),n.params.remember&&(e=n.storageRead("isLeftCollapsed"),t=n.storageRead("isRightCollapsed"),n.isLeftCollapsed=null!==e?e:n.isLeftCollapsed,n.isRightCollapsed=null!==t?t:n.isRightCollapsed),cm.inDOM(n.nodes.leftContainer)&&"none"!=cm.getStyle(n.nodes.leftContainer,"display")||(n.isLeftCollapsed=!0),cm.inDOM(n.nodes.rightContainer)&&"none"!=cm.getStyle(n.nodes.rightContainer,"display")||(n.isRightCollapsed=!0),n.isLeftCollapsed?n.collapseLeft(!0):n.expandLeft(!0),n.isRightCollapsed?n.collapseRight(!0):n.expandRight(!0),n.triggerEvent("onRender")}),a=function(){n.isRightCollapsed?n.expandRight():n.collapseRight()},r=function(){n.isLeftCollapsed?n.expandLeft():n.collapseLeft()};n.collapseLeft=function(e){return n.isLeftCollapsed=!0,e&&cm.addClass(n.params.node,"is-immediately"),cm.replaceClass(n.params.node,"is-sidebar-left-expanded","is-sidebar-left-collapsed",!0),e&&cm.removeClass(n.params.node,"is-immediately"),n.params.remember&&n.storageWrite("isLeftCollapsed",!0),n.triggerEvent("onCollapseLeft"),n},n.expandLeft=function(e){return n.isLeftCollapsed=!1,e&&cm.addClass(n.params.node,"is-immediately"),cm.replaceClass(n.params.node,"is-sidebar-left-collapsed","is-sidebar-left-expanded",!0),setTimeout(function(){e&&cm.removeClass(n.params.node,"is-immediately")},5),n.params.remember&&n.storageWrite("isLeftCollapsed",!1),n.triggerEvent("onExpandLeft"),n},n.collapseRight=function(e){return n.isRightCollapsed=!0,e&&cm.addClass(n.params.node,"is-immediately"),cm.replaceClass(n.params.node,"is-sidebar-right-expanded","is-sidebar-right-collapsed",!0),setTimeout(function(){e&&cm.removeClass(n.params.node,"is-immediately")},5),n.params.remember&&n.storageWrite("isRightCollapsed",!0),n.triggerEvent("onCollapseRight"),n},n.expandRight=function(e){return n.isRightCollapsed=!1,e&&cm.addClass(n.params.node,"is-immediately"),cm.replaceClass(n.params.node,"is-sidebar-right-collapsed","is-sidebar-right-expanded",!0),e&&cm.removeClass(n.params.node,"is-immediately"),n.params.remember&&n.storageWrite("isRightCollapsed",!1),n.triggerEvent("onExpandRight"),n},n.setParams(e),n.convertEvents(n.params.events),n.getDataNodes(n.params.node),n.getDataConfig(n.params.node),t()}),cm.define("Com.Collector",{modules:["Params","Events","DataConfig","Stack"],events:["onRenderStart","onRender","onAdd","onRemove","onConstructStart","onConstruct","onDestructStart","onDestruct"],params:{node:"document.body",name:"",attribute:"data-element",autoInit:!1}},function(e){function t(){m.params.autoInit&&cm.forEach(cm._defineStack,function(t){m.add(t.prototype._name.full,function(e){new t({node:e})},null,t.prototype.params.collectorPriority)})}function c(e,t){return e=(e=a(e,t)).filter(function(e){return!cm.inArray(m.stackNodes[t],e)}),m.stackNodes[t]=m.stackNodes[t].concat(e),e}function d(e,t){var n;return a(e,t).filter(function(e){return(n=cm.inArray(m.stackNodes[t],e))&&m.stackNodes[t].splice(m.stackNodes[t].indexOf(e),1),n})}function l(){m.isChanged&&m.stackList.sort(function(e,t){return e.priority-t.priority}),m.isChanged=!1}var m=this,a=(m.isChanged=!1,m.stackList=[],m.stackNodes={},function(e,t){var n=[];return e.getAttribute(m.params.attribute)===t&&n.push(e),n=n.concat(cm.clone(cm.getByAttr(m.params.attribute,t,e)))});m.add=function(e,t,n,a){return e&&(m.stackNodes[e]||(m.stackNodes[e]=[]),e={name:e,priority:a||0,construct:t,destruct:n},!cm.isUndefined(a)&&cm.isNumber(a)?m.stackList.splice(a,0,e):m.stackList.push(e),m.isChanged=!0,m.triggerEvent("onAdd",e)),m},m.remove=function(t,n,a){return t&&(cm.isUndefined(n)?m.stackList=m.stackList.filter(function(e){return!(e.name===t)}):m.stackList=m.stackList.filter(function(e){return!(e.name===t&&e.construct===n&&e.destruct===a)}),m.isChanged=!0,m.triggerEvent("onRemove",{name:t})),m},m.construct=function(e,t){var n,a,r,o,s,i=Date.now();return e=e||document.body,m.triggerEvent("onConstructStart",{node:e,name:t}),l(),t?(s=c(r=e,o=t),r=m.stackList.filter(function(e){return e.name===o}),cm.forEach(r,function(t){cm.forEach(s,function(e){t.construct&&t.construct(e,t.priority)})})):(n=e,a={},r=m.stackList.slice(0),cm.forEach(m.stackNodes,function(e,t){a[t]=c(n,t)}),cm.forEach(r,function(t){cm.forEach(a[t.name],function(e){t.construct&&t.construct(e,t.priority)})})),m.triggerEvent("onConstruct",{node:e,name:t}),cm.errorLog({type:"common",name:"Com.Collector",message:["Construct time",Date.now()-i,"ms."].join(" ")}),m},m.destruct=function(e,t){var n,a,r,o,s,i,c=Date.now();return m.triggerEvent("onDestructStart",{node:e=e||null,name:t}),l(),t?(r=e,o=t,i=m.stackList.filter(function(e){return e.name===o}),cm.isNode(r)?(s=d(r,o),cm.forEach(i,function(t){cm.forEach(s,function(e){t.destruct&&t.destruct(e,t.priority)})})):cm.isWindow(window)&&(cm.forEach(i,function(t){cm.forEach(m.stackNodes[t.name],function(e){t.destruct&&t.destruct(e,t.priority)})}),m.stackNodes[o]=[])):(n=e,a={},r=m.stackList.slice(0),cm.isNode(n)?(cm.forEach(m.stackNodes,function(e,t){a[t]=d(n,t)}),cm.forEach(r,function(t){cm.forEach(a[t.name],function(e){t.destruct&&t.destruct(e,t.priority)})})):cm.isWindow(window)&&(cm.forEach(r,function(t){cm.forEach(m.stackNodes[t.name],function(e){t.destruct&&t.destruct(e,t.priority)})}),cm.forEach(m.stackNodes,function(e,t){m.stackNodes[t]=[]}))),m.triggerEvent("onDestruct",{node:e,name:t}),cm.errorLog({type:"common",name:"Com.Collector",message:["Destruct time",Date.now()-c,"ms."].join(" ")}),m},m.setParams(e),m.convertEvents(m.params.events),m.getDataConfig(m.params.node),m.addToStack(m.params.node),m.triggerEvent("onRenderStart"),t(),m.addToStack(m.params.node),m.triggerEvent("onRender")}),Com.Elements.Columns={},Com.GetColumns=function(e){return Com.Elements.Columns[e]||null},cm.define("Com.Columns",{modules:["Params","Events","DataConfig","Stack"],required:["Com.Draggable"],events:["onRenderStart","onRender","onAdd","onRemove","onChange","onResize","onEnableEditing","onEnableEditable","onDisableEditing","onDisableEditable"],params:{columns:!1,node:cm.node("div"),container:!1,name:"",renderStructure:!1,minColumnWidth:48,data:[],isEditing:!0,customEvents:!0}},function(e){function t(){cm.isNode(s.params.columns)&&(s.params.node=s.params.columns)}function n(){s.params.renderStructure?d():s.params.node&&c(),s.params.customEvents&&(cm.customEvent.add(i.container,"redraw",function(){s.redraw()}),cm.customEvent.add(i.container,"enableEditable",function(){s.enableEditing()}),cm.customEvent.add(i.container,"disableEditable",function(){s.disableEditing()}))}function a(){s.chassis=[];var e=s.items.length-1;cm.forEach(e,g)}function r(){cm.forEach(s.chassis,function(e){cm.remove(e.container)}),s.chassis=[],a()}var o,s=this,i={},c=(s.isEditing=null,s.pointerType=null,s.items=[],s.chassis=[],function(){var e;i.container=s.params.node,i.inner=cm.getByAttr("data-com__columns","inner",i.container)[0],i.holder=cm.getByAttr("data-com__columns","holder",i.container)[0],e=(e=cm.clone(cm.getByAttr("data-com__columns","column",i.holder)||[])).filter(function(t){var n=!0;return cm.forEach(e,function(e){cm.isParent(e,t)&&(n=!1)}),n}),cm.forEach(e,l)}),d=function(){i.container=cm.node("div",{class:"com__columns"},i.inner=cm.node("div",{class:"inner"},i.holder=cm.node("div",{class:"container"}))),cm.forEach(s.params.data,m),s.params.container&&s.params.container.appendChild(i.container)},l=function(e){e={container:e,inner:cm.getByAttr("data-com__columns","column-inner",e)[0]||cm.node("div"),width:e.style.width};p(e),s.items.push(e)},m=function(e,t){return(e=cm.merge({width:"0%"},e)).container=cm.node("div",{class:"com__column"},e.inner=cm.node("div",{class:"inner"})),p(e),s.items.push(e),i.holder.appendChild(e.container),t&&s.triggerEvent("onAdd",e),e},u=function(){var t=(100/s.items.length).toFixed(2);cm.forEach(s.items,function(e){e.width=[t,"%"].join(""),e.container.style.width=e.width,e.rulerCounter.innerHTML=e.width}),s.triggerEvent("onResize",s.items),s.triggerEvent("onChange",s.items)},p=function(e){e.rulerContainer=cm.node("div",{class:"com__columns__ruler"},e.ruler=cm.node("div",{class:"pt__ruler is-horizontal is-small"},cm.node("div",{class:"line line-top"}),e.rulerCounter=cm.node("div",{class:"counter"},e.width),cm.node("div",{class:"line line-bottom"}))),cm.insertFirst(e.rulerContainer,e.inner)},h=function(){cm.forEach(s.chassis,function(e){f(e)})},g=function(e){var t={index:e};t.container=cm.node("div",{class:"com__columns__chassis"},t.drag=cm.node("div",{class:"pt__drag is-horizontal"},cm.node("div",{class:"line"}),cm.node("div",{class:"drag"},cm.node("div",{class:"icon draggable"})))),f(t),s.chassis.push(t),cm.addEvent(t.container,"touchstart",function(e){v(e,t)}),cm.addEvent(t.container,"mousedown",function(e){v(e,t)}),i.inner.appendChild(t.container)},f=function(e){var t=i.holder.offsetWidth/100,n=e.index,n=((cm.getRealX(s.items[n].container)-cm.getRealX(i.holder)+s.items[n].container.offsetWidth)/t).toFixed(2);e.container.style.left=[n,"%"].join("")},v=function(e,t){if(cm.preventDefault(e),!e.button&&!o)if(s.pointerType=e.type,e.ctrlKey||e.metaKey)C(),u(),h();else{cm.hideSpecialTags();var e=s.chassis.indexOf(t),n=s.items[e],a=s.items[e+1];switch(o={index:e,offset:cm.getRealX(i.holder),ratio:i.holder.offsetWidth/100,chassis:t,left:{column:n,offset:cm.getRealX(n.container)},right:{column:a,offset:cm.getRealX(a.container)+a.container.offsetWidth}},cm.addClass(i.container,"is-active"),cm.addClass(o.chassis.drag,"is-active"),cm.addClass(o.left.column.ruler,"is-active"),cm.addClass(o.right.column.ruler,"is-active"),cm.addClass(document.body,"pt__drag__body--horizontal"),s.pointerType){case"mousedown":cm.addEvent(window,"mousemove",b),cm.addEvent(window,"mouseup",y);break;case"touchstart":cm.addEvent(window,"touchmove",b),cm.addEvent(window,"touchend",y)}}},b=function(e){cm.preventDefault(e);var t=cm.getEventClientPosition(e),e=e.shiftKey?0:2,n=t.left-o.left.offset,a=o.right.offset-t.left;n>s.params.minColumnWidth&&a>s.params.minColumnWidth&&(o.left.column.width=[(n/o.ratio).toFixed(e),"%"].join(""),o.right.column.width=[(a/o.ratio).toFixed(e),"%"].join(""),o.left.column.container.style.width=o.left.column.width,o.right.column.container.style.width=o.right.column.width,o.chassis.container.style.left=[((t.left-o.offset)/o.ratio).toFixed(e),"%"].join(""),o.left.column.rulerCounter.innerHTML=o.left.column.width,o.right.column.rulerCounter.innerHTML=o.right.column.width),s.triggerEvent("onChange",s.items)},y=function(){switch(cm.removeClass(i.container,"is-active"),cm.removeClass(o.chassis.drag,"is-active"),cm.removeClass(o.left.column.ruler,"is-active"),cm.removeClass(o.right.column.ruler,"is-active"),cm.removeClass(document.body,"pt__drag__body--horizontal"),s.pointerType){case"mousedown":cm.removeEvent(window,"mousemove",b),cm.removeEvent(window,"mouseup",y);break;case"touchstart":cm.removeEvent(window,"touchmove",b),cm.removeEvent(window,"touchend",y)}o=null,cm.showSpecialTags(),s.triggerEvent("onResize",s.items)},C=function(){cm.addEvent(window,"contextmenu",w),cm.addEvent(window,"mouseup",E)},E=function(){cm.removeEvent(window,"contextmenu",w),cm.removeEvent(window,"mouseup",E)},w=function(e){cm.preventDefault(e)};s.enableEditing=function(){return cm.isBoolean(s.isEditing)&&s.isEditing||(s.isEditing=!0,cm.addClass(i.container,"is-editing is-editable"),s.redraw(),s.triggerEvent("onEnableEditing"),s.triggerEvent("onEnableEditable")),s},s.disableEditing=function(){return cm.isBoolean(s.isEditing)&&!s.isEditing||(s.isEditing=!1,cm.removeClass(i.container,"is-editing is-editable"),s.triggerEvent("onDisableEditing"),s.triggerEvent("onDisableEditable")),s},s.redraw=function(){return h(),s},s.setColumnsCount=function(e){var t,n,a=s.items.length;if(e&&a!==e){if(a<e)cm.forEach(e-a,function(){m({},!0)});else for(;s.items.length>e;)t=!0,n=void 0,n=s.items.pop(),cm.remove(n.container),t&&s.triggerEvent("onRemove",n);u(),r()}return s},s.get=function(){return s.items},s.setParams(e),t(),s.convertEvents(s.params.events),s.getDataConfig(s.params.node),s.triggerEvent("onRenderStart"),n(),a(),s.params.isEditing&&s.enableEditing(),s.addToStack(i.container),s.triggerEvent("onRender")}),cm.define("Com.ColumnsHelper",{modules:["Params","Events","Langs","DataConfig","DataNodes","Callbacks","Stack"],events:["onRender","onChange","onResize","onDragStart","onDragMove","onDragStop","onEnableEditing","onEnableEditable","onDisableEditing","onDisableEditable"],params:{node:cm.node("div"),name:"",items:[],showDrag:!0,minColumnWidth:48,isEditing:!0,customEvents:!0,ajax:{type:"json",method:"post",url:"",params:""}}},function(e){function t(){cm.isEmpty(r.params.ajax.url)||(r.isAjax=!0)}function n(){o(),cm.addEvent(window,"resize",function(){r.redraw()}),r.params.customEvents&&(cm.customEvent.add(r.params.node,"redraw",function(){r.redraw()}),cm.customEvent.add(r.params.node,"enableEditable",function(){r.enableEditing()}),cm.customEvent.add(r.params.node,"disableEditable",function(){r.disableEditing()})),r.params.isEditing&&r.enableEditing()}function a(e){var t={index:e};t.container=cm.node("div",{class:"com__columns__chassis"},t.inner=cm.node("div",{class:"pt__drag is-horizontal"},cm.node("div",{class:"line"}))),r.params.showDrag?t.inner.appendChild(cm.node("div",{class:"drag"},cm.node("div",{class:"icon draggable"}))):t.inner.appendChild(cm.node("div",{class:"helper"})),s(t),r.chassis.push(t),cm.addEvent(t.container,"touchstart",function(e){i(e,t)}),cm.addEvent(t.container,"mousedown",function(e){i(e,t)}),r.params.node.appendChild(t.container)}var r=this,o=(r.items=[],r.chassis=[],r.current=null,r.pointerType=null,r.isEditing=null,r.isRendered=!1,r.isAjax=!1,r.isProcess=!1,r.ajaxHandler=null,function(){r.isEditing&&!r.isRendered&&(r.items=[],r.chassis=[],cm.forEach(r.params.items,function(e,t){r.items.push({container:e}),t<r.params.items.length-1&&a(t)}),r.isRendered=!0)}),s=function(e){var t=r.params.node.offsetWidth/100,n=e.index,n=((cm.getRealX(r.items[n].container)-cm.getRealX(r.params.node)+r.items[n].container.offsetWidth)/t).toFixed(2);e.container.style.left=[n,"%"].join("")},i=function(e,t){if(cm.preventDefault(e),!e.button&&!r.current){r.pointerType=e.type,r.isProcess&&r.abort(),cm.hideSpecialTags();var e=r.chassis.indexOf(t),n=r.items[e],a=r.items[e+1];switch(r.current={index:e,offset:cm.getRealX(r.params.node),ratio:r.params.node.offsetWidth/100,chassis:t,left:{column:n,offset:cm.getRealX(n.container)},right:{column:a,offset:cm.getRealX(a.container)+a.container.offsetWidth}},cm.addClass(r.params.node,"is-chassis-active"),cm.addClass(r.current.chassis.inner,"is-active"),cm.addClass(document.body,"pt__drag__body--horizontal"),r.pointerType){case"mousedown":cm.addEvent(window,"mousemove",c),cm.addEvent(window,"mouseup",d);break;case"touchstart":cm.addEvent(window,"touchmove",c),cm.addEvent(window,"touchend",d)}return r.triggerEvent("onDragStart",r.current),!0}},c=function(e){cm.preventDefault(e);var e=cm.getEventClientPosition(e),t=e.left-r.current.left.offset,n=r.current.right.offset-e.left;t>r.params.minColumnWidth&&n>r.params.minColumnWidth&&(r.current.left.column.width=[(t/r.current.ratio).toFixed(2),"%"].join(""),r.current.right.column.width=[(n/r.current.ratio).toFixed(2),"%"].join(""),r.current.left.column.container.style.width=r.current.left.column.width,r.current.right.column.container.style.width=r.current.right.column.width,r.current.chassis.container.style.left=[((e.left-r.current.offset)/r.current.ratio).toFixed(2),"%"].join("")),r.triggerEvent("onChange",r.items),r.triggerEvent("onDragMove",r.current)},d=function(){var e;switch(cm.removeClass(r.params.node,"is-chassis-active"),cm.removeClass(r.current.chassis.inner,"is-active"),cm.removeClass(document.body,"pt__drag__body--horizontal"),r.pointerType){case"mousedown":cm.removeEvent(window,"mousemove",c),cm.removeEvent(window,"mouseup",d);break;case"touchstart":cm.removeEvent(window,"touchmove",c),cm.removeEvent(window,"touchend",d)}cm.showSpecialTags(),r.triggerEvent("onResize",r.items),r.triggerEvent("onDragStop",r.current),r.current=null,r.isAjax&&(e=cm.clone(r.params.ajax),r.ajaxHandler=r.callbacks.request(r,e))};r.callbacks.prepare=function(e,t){var n=[];return cm.forEach(e.items,function(e){n.push(e.width)}),t.url=cm.strReplace(t.url,{"%items%":n}),t.params=cm.objectReplace(t.params,{"%items%":n}),t},r.callbacks.request=function(e,t){return t=e.callbacks.prepare(e,t),cm.ajax(cm.merge(t,{onStart:function(){e.callbacks.start(e)},onEnd:function(){e.callbacks.end(e)}}))},r.callbacks.start=function(e){e.isProcess=!0},r.callbacks.end=function(e){e.isProcess=!1},r.enableEditing=function(){return"boolean"==typeof r.isEditing&&r.isEditing||(r.isEditing=!0,o(),r.triggerEvent("onEnableEditing"),r.triggerEvent("onEnableEditable")),r},r.disableEditing=function(){return"boolean"==typeof r.isEditing&&!r.isEditing||(r.isEditing=!1,cm.forEach(r.chassis,function(e){cm.remove(e.container)}),r.items=[],r.chassis=[],r.isRendered=!1,r.triggerEvent("onDisableEditing"),r.triggerEvent("onDisableEditable")),r},r.abort=function(){return r.ajaxHandler&&r.ajaxHandler.abort&&r.ajaxHandler.abort(),r},r.redraw=function(){return r.isEditing&&cm.forEach(r.chassis,function(e){s(e)}),r},r.setParams(e),r.convertEvents(r.params.events),r.getDataNodes(r.params.node),r.getDataConfig(r.params.node),r.callbacksProcess(),t(),n(),r.addToStack(r.params.node),r.triggerEvent("onRender")}),cm.define("Com.Dialog",{modules:["Params","Events","Langs","DataConfig","Stack"],events:["onRenderStart","onRender","onOpenStart","onOpen","onOpenEnd","onCloseStart","onClose","onCloseEnd","onScroll"],params:{container:"document.body",name:"",size:"auto",width:700,height:"auto",minHeight:0,maxHeight:"auto",heightBasis:"dialog",position:"fixed",indentY:24,indentX:24,animate:!1,animateHeight:!1,adaptiveBreakpoint:"tabletDown",adaptivePreset:"maximize",theme:"theme-light",className:"",classes:[],valign:"middle",content:cm.node("div"),contentValign:"top",scroll:!0,showTitle:!0,title:"",titleOverflow:!1,titleReserve:!0,titleAlign:"left",closeButtonOutside:!1,closeButton:!0,closeOnBackground:!0,closeOnDocument:!1,closeOnEsc:!0,buttons:!1,duration:"cm._config.animDuration",autoOpen:!0,appendOnRender:!1,removeOnClose:!0,destructOnRemove:!1,documentScroll:!1,presets:{default:{width:700,height:"auto",minHeight:0,maxHeight:"auto",heightBasis:"dialog",indentY:24,indentX:24,valign:"middle",classes:[]},adaptive:{width:"100%",height:"auto",minHeight:0,maxHeight:"auto",heightBasis:"dialog",indentY:16,indentX:16,valign:"middle",classes:[]},maximize:{width:"100%",height:"100%",minHeight:0,maxHeight:"auto",heightBasis:"dialog",indentX:0,indentY:0,valign:"middle",classes:["is-fullscreen"]}},icons:{closeInside:"icon default linked",closeOutside:"icon default linked",helpInside:"icon help linked",helpOutside:"icon help linked"},showHelp:!1,help:"",helpConstructor:"Com.Tooltip",helpParams:{hold:!0,targetEvent:"click",hideOnReClick:!0,className:"com__dialog__tooltip",animate:"drop-bottom-left",width:"targetWidth -16",top:8,left:8,position:"absolute",duration:"cm._config.animDuration"}},strings:{label:"Dialog",closeTitle:"Close",close:"",helpTitle:"Help",help:""}},function(e){var l,m=this,u={},t=(m.components={},m.isOpen=!1,m.isFocus=!1,m.isRemoved=!1,m.isDestructed=!1,m.isPresetSet=!1,m.isMaximize=!1,m.openInterval=null,m.resizeInterval=null,m.blinkingInterval=null,m.originalPreset={},function(){m.params.duration=cm.getTransitionDurationFromLESS("ComDialog-Duration",m.params.duration)}),n=function(){cm.isEmpty(m.params.openTime)||(m.params.duration=m.params.openTime),m.params.showTitle||(m.params.titleReserve=!1)},a=function(){u.container=cm.node("div",{class:"com__dialog",role:"dialog","aria-modal":"true"},u.bg=cm.node("div",{class:"bg"}),u.window=cm.node("div",{class:"com__dialog__window window"},u.windowInner=cm.node("div",{class:"inner"}))),m.params.appendOnRender&&cm.appendChild(u.container,m.params.container),u.container.style.position=m.params.position,u.window.style.width=m.params.width+"px",cm.addClass(u.container,m.params.className),cm.addClass(u.container,m.params.theme),cm.addClass(u.window,m.params.theme),m.params.animate&&(cm.addClass(u.container,"is-animate"),cm.addClass(u.window,"is-animate")),cm.inArray(["top","center","bottom"],m.params.valign)&&cm.addClass(u.container,["is-valign",m.params.valign].join("-")),m.params.closeButtonOutside&&(u.closeOutside=cm.node("div",{class:m.params.icons.closeOutside,title:m.lang("closeTitle"),role:"button",tabindex:0},m.lang("close")),cm.appendChild(u.closeOutside,u.bg),cm.click.add(u.closeOutside,g)),m.params.closeButton&&(cm.addClass(u.container,"has-close-inside"),cm.addClass(u.window,"has-close-inside"),u.closeInside=cm.node("div",{class:m.params.icons.closeInside,title:m.lang("closeTitle"),role:"button",tabindex:0},m.lang("close")),cm.insertFirst(u.closeInside,u.window),cm.click.add(u.closeInside,g)),m.params.closeOnBackground&&(cm.addClass(u.container,"has-close-background"),cm.addEvent(u.bg,"click",g)),m.params.showHelp&&(u.helpInside=cm.node("div",{class:m.params.icons.helpInside,title:m.lang("helpTitle")},m.lang("help")),cm.appendChild(u.helpInside,u.window)),r(m.params.title),o(m.params.content),s(m.params.buttons),i(m.params.help),cm.addEvent(u.container,"mouseenter",function(e){m.isFocus=!0}),cm.addEvent(u.container,"mouseleave",function(e){m.isFocus=!1}),animFrame(p)},r=function(e){var t;cm.remove(u.title),m.params.showTitle?(cm.removeClass(u.container,"has-no-title"),cm.removeClass(u.window,"has-no-title"),u.title=cm.node("div",{class:"title",role:"heading"}),cm.isEmpty(e)||(cm.isNode(e)?cm.appendChild(e,u.title):cm.appendChild(cm.textNode(e),u.title),m.params.titleOverflow&&cm.addClass(u.title,"cm__text-overflow")),cm.inArray(["left","center","right"],m.params.titleAlign)&&cm.addClass(u.title,["is-align",m.params.titleAlign].join("-")),cm.insertFirst(u.title,u.windowInner)):(t=cm.isNode(e)?e.textContent:e,cm.isEmpty(e)&&(t=m.msg("label")),u.container.setAttribute("aria-label",t),cm.addClass(u.container,"has-no-title"),cm.addClass(u.window,"has-no-title")),cm.toggleClass(u.container,"is-title-reserve",m.params.titleReserve),cm.toggleClass(u.window,"is-title-reserve",m.params.titleReserve)},o=function(e){u.descr||(u.descr=cm.node("div",{class:"descr"},u.scroll=cm.node("div",{class:"scroll com__dialog__scroll"},u.inner=cm.node("div",{class:"inner com__dialog__inner"}))),m.params.scroll||cm.addClass(u.scroll,"is-no-scroll"),cm.inArray(["top","center","bottom"],m.params.contentValign)&&cm.addClass(u.scroll,["is-valign",m.params.contentValign].join("-")),u.title?cm.insertAfter(u.descr,u.title):u.buttons?cm.insertBefore(u.descr,u.buttons):cm.insertLast(u.descr,u.windowInner),cm.addEvent(u.scroll,"scroll",function(e){m.triggerEvent("onScroll",e)})),cm.isNode(e)&&cm.clearNode(u.inner).appendChild(e)},s=function(e){cm.isNode(e)&&(cm.remove(u.buttons),u.buttons=cm.node("div",{class:"buttons"},e),cm.insertLast(u.buttons,u.windowInner))},i=function(e){m.params.showHelp&&(u.help||(u.help=cm.node("div",{class:"com__dialog__help"}),cm.getConstructor(m.params.helpConstructor,function(e){m.components.help=new e(cm.merge(m.params.helpParams,{target:u.helpInside,content:u.help,positionTarget:u.descr,container:u.container,holdTarget:u.container}))})),cm.clearNode(u.help),cm.isNode(e)?cm.appendChild(e,u.help):u.help.innerHTML=e)},c=function(){var e=m.params.presets[m.params.adaptivePreset];cm.isBreakpoint(m.params.adaptiveBreakpoint)&&e?m.setPreset(e):/full|fullscreen/.test(m.params.size)?m.setPreset(m.params.presets.maximize):m.restorePreset()},d=function(){p(),C(),m.resizeInterval=setTimeout(d,m.params.resizeInterval)},p=function(){var e=cm.getNodeOffset(u.container),t=e.inner.height-2*m.params.indentY,e=e.inner.width-2*m.params.indentX,n=u.window.offsetHeight,a=u.window.offsetWidth,r=u.inner.offsetHeight,o=t-(u.title&&u.title.offsetHeight||0)-(u.buttons&&u.buttons.offsetHeight||0)-cm.getIndentY(u.windowInner)-cm.getIndentY(u.descr),s="dialog"===m.params.heightBasis?t-o:0,i=e,c="auto"===m.params.maxHeight?o:/%/.test(m.params.maxHeight)?t/100*parseFloat(m.params.maxHeight)-s:/px/.test(m.params.maxHeight)?parseFloat(m.params.maxHeight)-s:m.params.maxHeight-s,d="auto"===m.params.minHeight?0:/%/.test(m.params.minHeight)?t/100*parseFloat(m.params.minHeight)-s:/px/.test(m.params.minHeight)?parseFloat(m.params.minHeight)-s:m.params.minHeight-s,c="auto"===m.params.height?r<d?d:c<r?c:r:/%/.test(m.params.height)?t/100*parseFloat(m.params.height)-s:/px/.test(m.params.height)?parseFloat(m.params.height)-s:m.params.height-s;c=Math.min(Math.max(c,d,0),o),t=/%/.test(m.params.width)?e/100*parseFloat(m.params.width):/px/.test(m.params.width)?parseFloat(m.params.width):m.params.width,t=Math.min(t,i),u.window.style.margin="".concat(m.params.indentY,"px ").concat(m.params.indentX,"px"),n===c+s&&l===r||((l=r)<=c?cm.removeClass(u.scroll,"is-scroll"):m.params.scroll&&cm.addClass(u.scroll,"is-scroll"),u.scroll.style.height="".concat(c,"px")),a!==t&&(u.window.style.width="".concat(t,"px"))},h=function(e){e={onEnd:function(){}},m.isOpen||(m.isOpen=!0,m.isFocus=!0,m.isRemoved=!1,cm.inDOM(u.container)||m.params.container.appendChild(u.container),u.container.style.display="block",cm.addClass(u.container,"cm__transition-disable",!0),c(),d(),cm.removeClass(u.container,"cm__transition-disable",!0),m.params.documentScroll||cm.bodyScroll.add(u.container),cm.addEvent(window,"click",y),cm.addEvent(window,"keydown",b),cm.addEvent(window,"resize",v),cm.addClass(u.container,"is-open",!0),cm.addClass(u.window,"is-open",!0),m.openInterval&&clearTimeout(m.openInterval),m.openInterval=setTimeout(function(){e.onEnd(),m.params.animateHeight&&cm.addClass(u.scroll,"is-animate"),m.triggerEvent("onOpen"),m.triggerEvent("onOpenEnd")},m.params.duration),m.triggerEvent("onOpenStart"))},g=function(e){e={onEnd:function(){}},m.isOpen&&(m.isOpen=!1,m.isFocus=!1,cm.removeEvent(window,"click",y),cm.removeEvent(window,"keydown",b),cm.removeEvent(window,"resize",v),m.params.animateHeight&&cm.removeClass(u.scroll,"is-animate"),cm.removeClass(u.container,"is-open",!0),cm.removeClass(u.window,"is-open",!0),m.openInterval&&clearTimeout(m.openInterval),m.openInterval=setTimeout(function(){C(),m.params.documentScroll||cm.bodyScroll.remove(u.container),u.container.style.display="none",m.params.removeOnClose&&f(),e.onEnd(),m.triggerEvent("onClose"),m.triggerEvent("onCloseEnd")},m.params.duration),m.triggerEvent("onCloseStart"))},f=function(e){m.isRemoved||(m.isRemoved=!0,(e||m.params.destructOnRemove)&&m.destruct(),cm.remove(u.container))},v=function(e){w(),c()},b=function(e){cm.handleKey(e,"Escape",function(){m.params.closeOnEsc&&m.isFocus&&g()})},y=function(e){m.params.closeOnDocument&&(e=cm.getEventTarget(e),cm.isParent(u.container,e,!0)||g())},C=function(){m.resizeInterval&&clearTimeout(m.resizeInterval)},E=cm.debounce(function(){cm.removeClass(u.container,"cm__transition-disable")},cm._config.animDuration),w=function(){cm.addClass(u.container,"cm__transition-disable"),E()};m.setPreset=function(e){return m.clearPreset(m.params),cm.forEach(e,function(e,t){m.isPresetSet||(m.originalPreset[t]=m.params[t]),m.params[t]=e}),m.applyPreset(m.params),m.isPresetSet=!0,m},m.restorePreset=function(){return m.clearPreset(m.params),cm.forEach(m.originalPreset,function(e,t){m.params[t]=e}),m.applyPreset(m.params),m.isPresetSet=!1,m},m.clearPreset=function(e){cm.removeClass(u.container,e.classes),cm.removeClass(u.window,e.classes),cm.removeClass(u.container,"is-valign-".concat(e.valign))},m.applyPreset=function(e){cm.addClass(u.container,e.classes),cm.addClass(u.window,e.classes),cm.inArray(["top","center","bottom"],e.valign)&&cm.addClass(u.container,"is-valign-".concat(e.valign))},m.set=function(e,t,n){return r(e),o(t),s(n),m},m.setTitle=function(e){return r(e),m},m.setContent=function(e){return o(e),m},m.scrollContentTo=function(e){m.params.scroll&&cm.scrollTo(u.scroll,u.scroll,e)},m.setButtons=function(e){return s(e),m},m.open=function(){return h(),m},m.close=function(){return g(),m},m.setSize=function(t){return cm.forEach(["width","height","minHeight","maxHeight"],function(e){cm.isEmpty(t[e])||(m.params[e]=t[e])}),m},m.setWidth=function(e){return m.params.width=e,m},m.setHeight=function(e){return m.params.height=e,m},m.setMinHeight=function(e){return m.params.minHeight=e,m},m.setMaxHeight=function(e){return m.params.maxHeight=e,m},m.maximize=function(){if(!m.isMaximize)return m.isMaximize=!0,m.setPreset(m.params.presets.maximize),m},m.restore=function(){if(m.isMaximize)return m.isMaximize=!1,m.restorePreset(),m},m.remove=function(e){return m.isOpen?g({onEnd:function(){!e&&m.params.removeOnClose||f(e)}}):f(e),m},m.destruct=function(){return m.isDestructed||(m.isDestructed=!0,cm.customEvent.trigger(u.container,"destruct",{direction:"child",self:!1}),m.removeFromStack(),m.remove(!0)),m},m.isOwnNode=function(e){return cm.isParent(u.window,e,!0)},m.getNodes=function(e){return u[e]||u},t(),m.setParams(e),m.convertEvents(m.params.events),m.getDataConfig(m.params.content),n(),m.triggerEvent("onRenderStart"),a(),m.addToStack(u.container),m.triggerEvent("onRender"),m.params.autoOpen&&h()}),cm.define("Com.DialogContainer",{extend:"Com.AbstractContainer",events:["onScroll"],params:{container:"document.body",destructOnClose:!1,renderTitle:!0,titleAlign:null,renderHelp:!1,renderButtons:!1,renderButtonsPositions:!1,buttonsAdaptive:!0,justifyButtons:"right",constructor:"Com.Dialog",constructorParams:{destructOnRemove:!1,autoOpen:!1}},strings:{close:"Close"}},function(e){this.buttons={},Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("Com.DialogContainer",function(e,t,n,a){n.onConstructStart=function(){this.buttons={}},n.onValidateParams=function(){var e=this;cm.isObject(e.params.content)&&(e.params.constructorParams.title=e.params.content.title||e.params.constructorParams.title,e.params.constructorParams.content=e.params.content.content||e.params.constructorParams.content,e.params.constructorParams.buttons=e.params.content.buttons||e.params.constructorParams.buttons,e.params.constructorParams.help=e.params.content.help||e.params.constructorParams.help),e.params.constructorParams.showTitle=e.params.renderTitle,e.params.constructorParams.showHelp=e.params.renderHelp,e.params.constructorParams.titleAlign=e.params.constructorParams.titleAlign||e.params.titleAlign},n.constructController=function(e){var t=this;return new e(cm.merge(t.params.constructorParams,{opener:t,container:t.params.container,title:t.nodes.title||t.params.constructorParams.title||t.params.title,content:t.nodes.content||t.params.constructorParams.content||t.params.content,buttons:t.nodes.buttons||t.params.constructorParams.buttons||t.params.buttons,help:t.nodes.help||t.params.constructorParams.help||t.params.help}))},n.renderControllerView=function(){return this.params.renderButtons&&this.renderButtonsView(),this},n.renderControllerEvents=function(){var e=this;e.components.controller.addEvent("onOpenStart",e.afterOpenControllerHandler),e.components.controller.addEvent("onOpenEnd",e.afterOpenControllerEndHandler),e.components.controller.addEvent("onCloseStart",e.afterCloseControllerStartHandler),e.components.controller.addEvent("onCloseEnd",e.afterCloseControllerHandler),e.components.controller.addEvent("onScroll",e.afterScroll.bind(e))},n.setTitle=function(e){var t=this;return t.params.constructorParams.title=e,t.components.controller&&cm.isFunction(t.components.controller.setTitle)&&t.components.controller.setTitle(e),t},n.setSize=function(t){var n=this;cm.forEach(["width","height","minHeight","maxHeight"],function(e){cm.isEmpty(t[e])||(n.params.constructorParams[e]=t[e])}),n.components.controller&&cm.isFunction(n.components.controller.setSize)&&n.components.controller.setSize(t)},n.renderButtonsView=function(){var t=this;return t.nodes.buttons=cm.node("div",{class:"pt__buttons"},t.nodes.buttonsHolder=cm.node("div",{class:"inner"})),t.params.buttonsAdaptive&&("reverse"===t.params.buttonsAdaptive?cm.addClass(t.nodes.buttons,"is-adaptive-reverse"):cm.addClass(t.nodes.buttons,"is-adaptive")),t.params.renderButtonsPositions&&(t.nodes.buttonsHolderLeft=cm.node("div",{class:"left"}),t.nodes.buttonsHolderRight=cm.node("div",{class:"right"}),cm.appendChild(t.nodes.buttonsHolderLeft,t.nodes.buttonsHolder),cm.appendChild(t.nodes.buttonsHolderRight,t.nodes.buttonsHolder)),t.setButtonsJustify(t.params.justifyButtons),cm.forEach(t.buttons,function(e){t.renderButton(e)}),t},n.addButton=function(e){return(e=cm.merge({name:"",label:"",classes:["button-primary"],justify:"auto",visible:!0,focus:!1,embed:!1,callback:function(){}},e)).justify=this.params.renderButtonsPositions?e.justify:"auto",cm.isArray(e.classes)||(e.classes=[e.classes]),e.visible||e.classes.push("is-hidden"),e.classes.unshift("button"),e.node||(e.node=cm.node("button",{class:e.classes},e.label)),cm.isFunction(e.callback)&&cm.click.add(e.node,e.callback),this.buttons[e.name]=e,this.embedButton(e),e.focus&&e.node.focus(),e},n.embedButton=function(e){var t=this;switch(e.justify){case"right":t.nodes.buttonsHolderRight&&(e.embed=!0,cm.appendChild(e.node,t.nodes.buttonsHolderRight));break;case"left":t.nodes.buttonsHolderLeft&&(e.embed=!0,cm.appendChild(e.node,t.nodes.buttonsHolderLeft));break;default:t.nodes.buttonsHolder&&(e.embed=!0,cm.appendChild(e.node,t.nodes.buttonsHolder))}return t},n.renderButton=function(e){var t=this;return(e=t.getButton(e.name)?t.getButton(e.name):t.addButton(e)).embed||t.embedButton(e),t},n.getButton=function(e){return this.buttons[e]},n.removeButton=function(e){e=this.getButton(e);return e&&(cm.remove(e.node),delete this.buttons[e.name]),this},n.removeButtons=function(){var n=this;return cm.forEach(n.buttons,function(e,t){return n.removeButton(t)}),n},n.toggleButtonVisibility=function(e,t){e=this.getButton(e);return e&&(e.visible=t,cm.toggleClass(e.node,"is-hidden",!t)),this},n.setButtonsJustify=function(e){var t=this;return cm.removeClass(t.nodes.buttons,["pull",t.params.justifyButtons].join("-")),cm.addClass(t.nodes.buttons,["pull",e].join("-")),t.params.justifyButtons=e,t},n.afterScroll=function(e,t){this.triggerEvent("onScroll",t)}}),cm.define("Com.Draganddrop",{modules:["Params","Events"],events:["onRender","onInit","onDragStart","onDrop","onRemove","onReplace"],params:{container:cm.node("div"),chassisTag:"div",draggableContainer:"document.body",scroll:!0,scrollNode:window,scrollSpeed:1,renderTemporaryAria:!1,useCSSAnimation:!0,useGracefulDegradation:!0,dropDuration:400,moveDuration:200,direction:"both",limit:!1,highlightAreas:!0,highlightChassis:!1,animateRemove:!0,removeNode:!0,classes:{area:null}}},function(e){function L(){v.params.dropDuration=cm.getTransitionDurationFromLESS("PtDnD-DropDuration",v.params.dropDuration),v.params.moveDuration=cm.getTransitionDurationFromLESS("PtDnD-MoveDuration",v.params.moveDuration)}function n(e,t){cm.inArray(c,e)||((e=cm.merge({node:e,styleObject:cm.getStyleObject(e),type:!1,isLocked:!1,isTemporary:!1,isSystem:!1,isRemoveZone:!1,draggableInChildNodes:!0,cloneDraggable:!1,items:[],chassis:[],dimensions:{}},t)).type=e.node.getAttribute("data-block-type"),cm.addClass(e.node,"pt__dnd-area"),cm.addClass(e.node,v.params.classes.area),e.isLocked?cm.addClass(e.node,"is-locked"):cm.addClass(e.node,"is-available"),a(e),c.push(e.node),i.push(e))}function a(t){var e;t.items=[],t.draggableInChildNodes?(e=t.node.childNodes,cm.forEach(e,function(e){e.tagName&&"draggable"==e.getAttribute("data-com-draganddrop")&&t.items.push(w(e,t,{}))})):(e=cm.getByAttr("data-com-draganddrop","draggable",t.node),cm.forEach(e,function(e){t.items.push(w(e,t,{}))}))}function o(t){var e;t.drag=cm.getByAttr("data-com-draganddrop","drag",t.node)[0],t["drag-bottom"]=cm.getByAttr("data-com-draganddrop","drag-bottom",t.node)[0],e=t.drag||t.node,cm.addEvent(e,"touchstart",function(e){r(e,t)}),cm.addEvent(e,"mousedown",function(e){r(e,t)}),t["drag-bottom"]&&cm.addEvent(t["drag-bottom"],"mousedown",function(e){r(e,t)})}function r(e,t){if(cm.preventDefault(e),!e.button&&!m){v.pointerType=e.type,cm.hideSpecialTags();var n,a,e=cm.getEventClientPosition(e),r=e.left,o=e.top;switch(l=cm.getPageSize(),v.triggerEvent("onDragStart",{item:t,node:t.node,from:t.area}),b=i.filter(function(e){return!(t.type!=e.type&&!e.isRemoveZone||cm.isParent(t.node,e.node)||e.isLocked)}),v.params.highlightAreas&&N(),D(t),t.dimensions.offsetX=r-t.dimensions.absoluteX1,t.dimensions.offsetY=o-t.dimensions.absoluteY1,(m=t.area.cloneDraggable?M(t):t).node.style.top=0,m.node.style.left=0,m.node.style.width=[m.dimensions.width,"px"].join(""),cm.setCSSTranslate(m.node,[m.dimensions.absoluteX1,"px"].join(""),[m.dimensions.absoluteY1,"px"].join("")),P(m),v.params.draggableContainer&&"selfParent"!==v.params.draggableContainer&&v.params.draggableContainer.appendChild(m.node),cm.addClass(m.node,"pt__dnd-helper"),cm.addClass(m.node,"is-active",!0),V(),O(),cm.forEach(m.area.items,function(e){r>=e.dimensions.absoluteX1&&r<e.dimensions.absoluteX2&&o>=e.dimensions.absoluteY1&&o<=e.dimensions.absoluteY2&&(a=o-(n=e).dimensions.absoluteY1<n.dimensions.absoluteHeight/2?"top":"bottom")}),!n&&m.area.items.length&&(a=o<m.area.dimensions.y1?(n=m.area.items[0],"top"):(n=m.area.items[m.area.items.length-1],"bottom")),(g=n?n.chassis[a]:m.area.chassis[0])&&(cm.addClass(g.node,"is-active"),v.params.highlightChassis&&cm.addClass(g.node,"is-highlight"),g.node.style.height=[m.dimensions.absoluteHeight,"px"].join("")),h=m.area,u=n,p=a,v.params.limit&&(D(h),h.node.style.minHeight=h.dimensions.height+"px"),cm.addClass(h.node,"is-active"),cm.addClass(document.body,"pt__dnd-body"),v.pointerType){case"mousedown":cm.addEvent(window,"mousemove",S),cm.addEvent(window,"mouseup",k);break;case"touchstart":cm.addEvent(window,"touchmove",S),cm.addEvent(window,"touchend",k)}}}var l,m,u,p,h,g,f,v=this,t={},s={},i=[],c=[],d=[],b=[],y=!1,C=!1,E=!1,w=(v.pointerType=null,function(e,t,n){e=cm.merge({node:e,styleObject:cm.getStyleObject(e),type:!1,chassis:{top:null,bottom:null},dimensions:{offsetX:0,offsetY:0}},n);return e.area=t,e.anim=new cm.Animation(e.node),e.type=e.node.getAttribute("data-block-type"),o(e),d.push(e),e}),S=function(e){cm.preventDefault(e);var t,n,a,r,o,e=cm.getEventClientPosition(e),s=e.left,i=e.top,c=i-m.dimensions.offsetY,d=s-m.dimensions.offsetX;switch(v.params.direction){case"both":t=[d,"px"].join(""),n=[c,"px"].join("");break;case"vertical":t=[m.dimensions.absoluteX1,"px"].join(""),n=(v.params.limit?c<m.area.dimensions.y1?[m.area.dimensions.y1,"px"]:c+m.dimensions.absoluteHeight>m.area.dimensions.y2?[m.area.dimensions.y2-m.dimensions.absoluteHeight,"px"]:[c,"px"]:[c,"px"]).join("");break;case"horizontal":t=[d,"px"].join(""),n=[m.dimensions.absoluteY1,"px"].join("")}cm.setCSSTranslate(m.node,t,n),v.params.scroll&&(i+48>l.winHeight?q(1):q(i-48<0?-1:0)),z(),cm.forEach(b,function(e){s>=e.dimensions.x1&&s<e.dimensions.x2&&i>=e.dimensions.y1&&i<=e.dimensions.y2&&(!a||e.dimensions.width<a.dimensions.width||e.dimensions.height<a.dimensions.height)&&(a=e)}),a?cm.forEach(a.items,function(e){s>=e.dimensions.absoluteX1&&s<e.dimensions.absoluteX2&&i>=e.dimensions.absoluteY1&&i<=e.dimensions.absoluteY2&&(o=i-(r=e).dimensions.absoluteY1<r.dimensions.absoluteHeight/2?"top":"bottom")}):a=h,!r&&a.items.length&&(o=i<a.dimensions.innerY1?(r=a.items[0],"top"):(r=a.items[a.items.length-1],"bottom")),g&&cm.removeClass(g.node,"is-active is-highlight"),u&&r&&u.chassis[p]!=r.chassis[o]?(R(u.chassis[p],0,v.params.moveDuration),g=r.chassis[o]):!u&&r?(R(h.chassis[0],0,v.params.moveDuration),g=r.chassis[o]):u&&!r?(R(u.chassis[p],0,v.params.moveDuration),g=a.chassis[0]):u||r||h==a||(R(h.chassis[0],0,v.params.moveDuration),g=a.chassis[0]),g&&(cm.addClass(g.node,"is-active"),v.params.highlightChassis&&cm.addClass(g.node,"is-highlight"),R(g,m.dimensions.absoluteHeight,v.params.moveDuration)),h&&h!=a&&(cm.removeClass(h.node,"is-active"),f=h),h=a,u=r,p=o,f&&f.isTemporary&&h.isRemoveZone||cm.addClass(h.node,"is-active")},k=function(e){var t;switch(cm.removeClass(document.body,"pt__dnd-body"),v.pointerType){case"mousedown":cm.removeEvent(window,"mousemove",S),cm.removeEvent(window,"mouseup",k);break;case"touchstart":cm.removeEvent(window,"touchmove",S),cm.removeEvent(window,"touchend",k)}D(m),m.node.style.width=[h.dimensions.innerWidth-m.dimensions.margin.left-m.dimensions.margin.right,"px"].join(""),t=m.node.offsetHeight+m.dimensions.margin.top+m.dimensions.margin.bottom,m.node.style.width=[m.dimensions.width,"px"].join(""),u?(t!=u.chassis[p].node.offsetHeight&&R(u.chassis[p],t,v.params.dropDuration),_(m,h,{target:u.node,append:"top"==p?"before":"after",index:h.items.indexOf(u)+("top"==p?0:1),top:["top"==p?u.dimensions.absoluteY1:u.dimensions.absoluteY2,"px"].join(""),onStop:T})):h.isRemoveZone||h.isTemporary?x(m,{onStop:T}):(R(h.chassis[0],t,v.params.dropDuration),_(m,h,{onStop:T})),g&&cm.removeClass(g.node,"is-active is-highlight"),h&&(v.params.limit&&(h.node.style.minHeight=""),cm.removeClass(h.node,"is-active")),v.params.highlightAreas&&N(),cm.showSpecialTags()},M=function(e){var t=e.node.cloneNode(!0),n=v.params.renderTemporaryAria?i[0]:e.area,t=w(t,n,{});return t.dimensions=cm.clone(e.dimensions),n.items.push(t),t},_=function(e,t,n){(n=cm.merge({target:t.node,append:"child",index:0,width:[t.dimensions.innerWidth,"px"].join(""),top:[t.dimensions.innerY1-e.dimensions.margin.top,"px"].join(""),left:[t.dimensions.innerX1-e.dimensions.margin.left,"px"].join(""),onStart:function(){},onStop:function(){}},n)).onStart(),cm.addClass(e.node,"is-drop",!0),e.node.style.width=n.width,cm.setCSSTranslate(e.node,n.left,n.top),setTimeout(function(){switch(n.append){case"child":cm.appendChild(e.node,n.target);break;case"before":cm.insertBefore(e.node,n.target);break;case"after":cm.insertAfter(e.node,n.target);break;case"first":cm.insertFirst(e.node,n.target)}cm.removeClass(e.node,"pt__dnd-helper is-drop is-active",!0),e.node.style.left="auto",e.node.style.top="auto",e.node.style.width="auto",cm.setCSSTranslate(m.node,"auto","auto"),t.items.splice(n.index,0,e),v.triggerEvent("onDrop",{item:e,node:e.node,to:t,from:e.area,index:n.index}),e.area=t,n.onStop()},v.params.dropDuration)},x=function(t,e){function n(){v.params.removeNode&&cm.remove(o),d=d.filter(function(e){return e!=t}),P(t),e.noEvent||v.triggerEvent("onRemove",{item:t,node:t.node,from:t.area}),e.onStop()}var a,r,o;(e=cm.merge({isCurrent:t===m,isInDOM:cm.inDOM(t.node),onStart:function(){},onStop:function(){}},e)).onStart(),e.isInDOM&&v.params.animateRemove?(a=e.isCurrent?(o=t.node,r=t.anim,{left:[-(t.dimensions.absoluteWidth+50),"px"].join(""),opacity:0}):(o=cm.wrap(cm.node("div",{class:"pt__dnd-removable"}),t.node),r=new cm.Animation(o),{height:"0px",opacity:0}),r.go({duration:v.params.dropDuration,anim:"smooth",style:a,onStop:n})):(o=t.node,n())},P=function(t){t.area.items=t.area.items.filter(function(e){return e!=t})},T=function(){j(),f=h=u=m=!1},O=function(){var a;cm.forEach(i,function(n){n.isLocked||(n.items.length||(a=A(),cm.appendChild(a.node,n.node),n.chassis.push(a)),cm.forEach(n.items,function(e,t){0===t&&(a=A(),cm.insertBefore(a.node,e.node),n.chassis.push(a)),a=A(),cm.insertAfter(a.node,e.node),n.chassis.push(a),e.chassis.top=n.chassis[t],e.chassis.bottom=n.chassis[t+1]}))})},A=function(){var e=cm.node(v.params.chassisTag,{class:"pt__dnd-chassis"});return{node:e,anim:new cm.Animation(e),isShow:!1}},j=function(){cm.forEach(i,function(e){cm.forEach(e.chassis,function(e){cm.remove(e.node)}),e.chassis=[]})},R=function(e,t,n){var a;t=[t,"px"].join(""),v.params.useCSSAnimation||C?(!C&&(a=cm.getSupportedStyle("transition-duration"))&&(e.node.style[a]=[n,"ms"].join("")),e.node.style.height=t):e.anim.go({style:{height:t},anim:"smooth",duration:n})},D=function(e){e.dimensions=cm.extend(e.dimensions,cm.getFullRect(e.node,e.styleObject))},I=function(e){cm.forEach(e,D)},V=function(){I(i),cm.forEach(i,function(e){I(e.items)})},B=function(e){e.dimensions.y1=cm.getRealY(e.node),e.dimensions.y2=e.dimensions.y1+e.dimensions.height,e.dimensions.innerY1=e.dimensions.y1+e.dimensions.padding.top,e.dimensions.innerY2=e.dimensions.innerY1+e.dimensions.innerHeight,e.dimensions.absoluteY1=e.dimensions.y1-e.dimensions.margin.top,e.dimensions.absoluteY2=e.dimensions.y2+e.dimensions.margin.bottom},H=function(e){cm.forEach(e,B)},U=function(){var e,t=0;g&&(cm.addClass(g.node,"is-immediately"),t=g.node.offsetHeight,g.node.style.height=0),H(i),cm.forEach(i,function(e){H(e.items)}),g&&t&&(g.node.style.height=[t,"px"].join(""),e=g,setTimeout(function(){cm.removeClass(e.node,"is-immediately")},5))},z=function(){var e=F();e[0].dimensions.y1!=cm.getRealY(e[0].node)&&U()},F=function(){return i.filter(function(e){return!e.isTemporary&&!e.isSystem})},N=function(){b&&(E?(E=!1,cm.forEach(b,function(e){cm.removeClass(e.node,"is-highlight")})):(E=!0,cm.forEach(b,function(e){cm.addClass(e.node,"is-highlight")})))},q=function(e){var t,n={};0==e?(y=!1,s.scroll.stop()):e<0&&!y?(y=!0,t=cm.getScrollTop(v.params.scrollNode)*v.params.scrollSpeed,cm.isWindow(v.params.scrollNode)?n.docScrollTop=0:n.scrollTop=0,s.scroll.go({style:n,duration:t,onStop:function(){y=!1}})):0<e&&!y&&(y=!0,e=cm.getScrollHeight(v.params.scrollNode)-l.winHeight,cm.isWindow(v.params.scrollNode)?n.docScrollTop=e:n.scrollTop=e,t=e*v.params.scrollSpeed,s.scroll.go({style:n,duration:t,onStop:function(){y=!1}}))};v.getArea=function(t){var n;return cm.forEach(i,function(e){e.node===t&&(n=e)}),n},v.registerArea=function(e,t){return cm.isNode(e)&&e.tagName&&n(e,t||{}),v},v.updateArea=function(e){e=v.getArea(e);return e&&a(e),v},v.removeArea=function(t,e){return cm.isNode(t)&&cm.inArray(c,t)&&(c=c.filter(function(e){return e!=t}),i=i.filter(function(e){return e.node!=t})),v},v.getDraggable=function(t){var n;return cm.forEach(d,function(e){e.node===t&&(n=e)}),n},v.getDraggableList=function(){return d},v.registerDraggable=function(e,t,n){var a=[],r=v.getDraggable(e);return r?o(r):cm.inArray(c,t)&&(e.setAttribute("data-com-draganddrop","draggable"),(r=v.getArea(t)).draggableInChildNodes?(t=r.node.childNodes,cm.forEach(t,function(e){e.tagName&&"draggable"==e.getAttribute("data-com-draganddrop")&&a.push(e)})):a=cm.getByAttr("data-com-draganddrop","draggable",r.node),t=a.indexOf(e),e=w(e,r,n||{}),r.items.splice(t,0,e)),v},v.replaceDraggable=function(t,e,n){var a,r,o,s,i,c;return cm.forEach(d,function(e){e.node===t&&(a=e)}),a&&(o=a.area,s=o.items.indexOf(a),i=cm.wrap(cm.node("div",{class:"pt__dnd-removable",style:"height: 0px;"}),e),c=new cm.Animation(i),cm.insertAfter(i,t),x(a,n),c.go({style:{height:[cm.getRealHeight(i,"offset",0),"px"].join(""),opacity:1},duration:300,anim:"simple",onStop:function(){cm.insertAfter(e,i),cm.remove(i),r=w(e,o),o.items.splice(s,0,r),v.triggerEvent("onReplace",{item:r,node:r.node,to:r.to})}})),v},v.removeDraggable=function(t,e){var n;return cm.forEach(d,function(e){e.node===t&&(n=e)}),n&&x(n,e||{}),v},v.getOrderingNodes=function(){var t,n=[],e=F();return cm.forEach(e,function(e){t={area:e.node,items:[]},cm.forEach(e.items,function(e){t.items.push(e.node)}),n.push(t)}),1==e.length?t.items:n},v.getOrderingIDs=function(){var n,t={},e=F();return cm.forEach(e,function(e){n={},cm.forEach(e.items,function(e,t){if(!e.id)throw new Error('Attribute "data-id" not specified on item node.');n[e.id]=t}),t[e.id]=n}),1==e.length?n:t},L(),v.setParams(e),v.convertEvents(v.params.events),v.params.container&&(v.params.useGracefulDegradation&&cm.isMobile()&&(C=!0),s.scroll=new cm.Animation(v.params.scrollNode),v.params.renderTemporaryAria&&(t.temporaryArea=cm.node("div"),n(t.temporaryArea,{isTemporary:!0})),e=cm.getByAttr("data-com-draganddrop","area",v.params.container),cm.forEach(e,function(e){n(e,{})}),v.triggerEvent("onInit",{}),v.triggerEvent("onRender",{}))}),cm.define("Com.Draggable",{modules:["Params","Events","Langs","DataConfig"],events:["onRender","onStart","onMove","onStop","onSet","onSelect"],params:{node:cm.node("div"),target:!1,limiter:!1,minY:!1,direction:"both",alignTarget:!0,alignNode:!1}},function(e){function t(){r.params.target||(r.params.target=r.params.node)}function n(){r.setTarget(r.params.target)}function a(e){if(cm.preventDefault(e),!e.button&&!r.isProcess){r.isProcess=!0,r.pointerType=e.type,cm.hideSpecialTags();e=cm.getEventClientPosition(e);switch(r.startX=e.left,r.startY=e.top,r.getDimensions(),r.nodeStartX=cm.getStyle(r.params.node,"left",!0),r.nodeStartY=cm.getStyle(r.params.node,"top",!0),i(e,"onSelect"),r.pointerType){case"mousedown":cm.addEvent(window,"mousemove",o),cm.addEvent(window,"mouseup",s);break;case"touchstart":cm.addEvent(window,"touchmove",o),cm.addEvent(window,"touchend",s)}r.triggerEvent("onStart")}}var r=this,o=(r.startX=0,r.startY=0,r.nodeStartX=0,r.nodeStartY=0,r.isProcess=!1,r.pointerType=null,r.dimensions={target:{}},r.position=null,function(e){cm.preventDefault(e);e=cm.getEventClientPosition(e);i(e,"onSelect"),r.triggerEvent("onMove")}),s=function(e){cm.preventDefault(e),r.isProcess=!1;e=cm.getEventClientPosition(e);switch(i(e,"onSet"),r.pointerType){case"mousedown":cm.removeEvent(window,"mousemove",o),cm.removeEvent(window,"mouseup",s);break;case"touchstart":cm.removeEvent(window,"touchmove",o),cm.removeEvent(window,"touchend",s)}cm.showSpecialTags(),r.triggerEvent("onStop")},i=function(e,t){e=cm.merge({left:0,top:0},e),r.params.alignTarget&&r.params.node!==r.params.target?(e.left-=r.dimensions.target.absoluteX1,e.top-=r.dimensions.target.absoluteY1):(e.left+=r.nodeStartX-r.startX,e.top+=r.nodeStartY-r.startY),e.left=Math.round(e.left),e.top=Math.round(e.top),e=c(e),r.position=e,r.triggerEvent(t,r.position)},c=function(e){switch(e=cm.merge({left:0,top:0,nodeTop:0,nodeLeft:0},e),r.params.limiter&&(e.top<0?e.top=0:e.top>r.dimensions.limiter.absoluteHeight&&(e.top=r.dimensions.limiter.absoluteHeight),e.left<0?e.left=0:e.left>r.dimensions.limiter.absoluteWidth&&(e.left=r.dimensions.limiter.absoluteWidth)),!isNaN(r.params.minY)&&e.top<r.params.minY&&(e.top=r.params.minY),e.nodeTop=e.top,e.nodeLeft=e.left,r.params.alignNode&&(e.nodeTop-=r.dimensions.node.absoluteHeight/2,e.nodeLeft-=r.dimensions.node.absoluteWidth/2),r.params.direction){case"vertical":r.params.node.style.top=[e.nodeTop,"px"].join("");break;case"horizontal":r.params.node.style.left=[e.nodeLeft,"px"].join("");break;default:r.params.node.style.top=[e.nodeTop,"px"].join(""),r.params.node.style.left=[e.nodeLeft,"px"].join("")}return e};r.setTarget=function(e){r.removeTarget(),r.params.target=e,r.getDimensions(),cm.addEvent(r.params.target,"touchstart",a),cm.addEvent(r.params.target,"mousedown",a)},r.removeTarget=function(){cm.isNode(r.params.target)&&(cm.removeEvent(r.params.target,"touchstart",a),cm.removeEvent(r.params.target,"mousedown",a),r.params.target=null)},r.setNode=function(e){r.params.node===r.params.target&&r.removeTarget(r.params.target),r.params.node=e,r.params.target?r.getDimensions():r.setTarget(r.params.node)},r.getDimensions=function(){return r.dimensions.target=cm.getFullRect(r.params.target),r.dimensions.node=cm.getFullRect(r.params.node),r.dimensions.limiter=cm.getFullRect(r.params.limiter),r.dimensions},r.setPosition=function(e,t){return e=cm.merge({left:0,top:0},e),t=!!cm.isUndefined(t)||t,e=c(e),r.position=e,t&&(r.triggerEvent("onSelect",r.position),r.triggerEvent("onSet",r.position)),r},r.get=function(){return r.position},r.setParams(e),r.convertEvents(r.params.events),r.getDataConfig(r.params.node),t(),n(),r.triggerEvent("onRender")}),cm.define("Com.FileDropzone",{extend:"Com.AbstractController",events:["onEnable","onDisable","onDrop","onSelect"],params:{embedStructure:"append",target:null,rollover:!0,max:0,disabled:!1,_height:128,_duration:"cm._config.animDuration",fileReaderConstructor:"Com.FileReader",fileReaderParams:{readValueType:"base64"}},strings:{drop_single:"drop file here",drop_multiple:"drop files here"}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.FileDropzone",function(e,t,n,a){n.construct=function(){var e=this;e.disabled=!1,e.dragInterval=null,e.isShow=!0,e.isHighlighted=!1,e.dragOverHandler=e.dragOver.bind(e),e.dragDropHandler=e.dragDrop.bind(e),e.showDropzoneHandler=e.showDropzone.bind(e),e.hideDropzoneHandler=e.hideDropzone.bind(e),e.onGetLESSVariablesProcessHandler=e.onGetLESSVariablesProcess.bind(e),e.setEventsProcessHander=e.setEventsProcess.bind(e),e.unsetEventsProcessHander=e.unsetEventsProcess.bind(e),e.addEvent("onGetLESSVariablesProcess",e.onGetLESSVariablesProcessHandler),e.addEvent("onSetEventsProcess",e.setEventsProcessHander),e.addEvent("onUnsetEventsProcess",e.unsetEventsProcessHander),a.prototype.construct.apply(e,arguments)},n.validateParams=function(){a.prototype.validateParams.apply(this,arguments),this.isMultiple=!this.params.max||1<this.params.max,this.setMessages({drop:this.isMultiple?this.lang("drop_multiple"):this.lang("drop_single")})},n.onGetLESSVariablesProcess=function(){this.params.height||(this.params.height=cm.getLESSVariable("ComFileDropzone-Height",this.params._height,!0)),this.params.duration||(this.params.duration=cm.getTransitionDurationFromLESS("ComFileDropzone-Duration",this.params._duration))},n.setEventsProcess=function(){cm.addEvent(window,"dragover",this.dragOverHandler),cm.addEvent(window,"drop",this.dragDropHandler)},n.unsetEventsProcess=function(){cm.removeEvent(window,"dragover",this.dragOverHandler),cm.removeEvent(window,"drop",this.dragDropHandler)},n.renderView=function(){this.triggerEvent("onRenderViewStart"),this.nodes.container=cm.node("div",{class:"com__file-dropzone"},cm.node("div",{class:"inner"},cm.node("div",{class:"title"},cm.node("div",{class:"label"},this.lang("drop")),cm.node("div",{class:"icon cm-i cm-i__circle-arrow-down"})))),this.triggerEvent("onRenderViewProcess"),this.triggerEvent("onRenderViewEnd")},n.renderViewModel=function(){var e=this;e.params.rollover?(cm.addClass(e.nodes.container,"is-hidden"),e.components.animation=new cm.Animation(e.params.container)):(cm.removeClass(e.nodes.container,"is-hidden"),e.params.height&&(e.params.container.style.height=e.params.height+"px")),e.params.disabled&&e.disable()},n.dragOver=function(e){var t=this;t.disabled||(cm.preventDefault(e),t.show(),t.showDropzone(),t.dragInterval&&clearTimeout(t.dragInterval),t.dragInterval=setTimeout(t.hideDropzoneHandler,100),e=cm.getEventTarget(e),cm.isParent(t.nodes.container,e,!0)?cm.addClass(t.nodes.container,"is-highlight"):cm.removeClass(t.nodes.container,"is-highlight"))},n.dragDrop=function(e){var t,n=this;n.disabled||(t=cm.getEventTarget(e),cm.isParent(n.nodes.container,t,!0)&&(cm.stopPropagation(e),cm.preventDefault(e),e.dataTransfer)&&(e.dataTransfer.files&&e.dataTransfer.files.length?n.processFiles(e.dataTransfer.files):cm.fileFromDataTransfer(e,function(e){n.processFiles([e])})),n.dragInterval&&clearTimeout(n.dragInterval),n.hide(),n.hideDropzone())},n.processFiles=function(t){var n=this,a=[],e=n.params.max?Math.min(t.length,n.params.max):t.length;cm.forEach(e,function(e){a.push(t[e]),n.triggerEvent("onDrop",t[e])}),a.length&&n.triggerEvent("onSelect",a)},n.show=function(){this.isShow||(this.isShow=!0,cm.replaceClass(this.nodes.container,"is-hidden","is-show"))},n.hide=function(){this.isShow&&(this.isShow=!1,cm.replaceClass(this.nodes.container,"is-show","is-hidden"))},n.showDropzone=function(){var e,t=this;t.isHighlighted||(t.isHighlighted=!0,cm.addClass(t.nodes.container,"is-highlight"),t.params.rollover&&(cm.addClass(t.params.container,"is-dragging"),cm.addClass(t.params.target,"is-hidden"),cm.removeClass(t.nodes.container,"is-hidden"),e=Math.max(t.params.height,t.params.target.offsetHeight),t.components.animation.go({style:{height:e+"px"},duration:t.params.duration,anim:"smooth"})))},n.hideDropzone=function(){var e,t=this;t.isHighlighted&&(t.isHighlighted=!1,cm.removeClass(t.nodes.container,"is-highlight"),t.params.rollover)&&(cm.removeClass(t.params.container,"is-dragging"),cm.removeClass(t.params.target,"is-hidden"),cm.addClass(t.nodes.container,"is-hidden"),e=t.params.target.offsetHeight,t.components.animation.go({style:{height:e+"px"},duration:t.params.duration,anim:"smooth",onStop:function(){t.params.container.style.height="auto"}}))},n.enable=function(){return this.disabled&&(this.disabled=!1,cm.removeClass(this.nodes.container,"disabled"),this.triggerEvent("onEnable")),this},n.disable=function(){return this.disabled||(this.disabled=!0,cm.addClass(this.nodes.container,"disabled"),this.triggerEvent("onDisable")),this}}),cm.define("Com.FileReader",{modules:["Params","Events","Langs"],events:["onConstruct","onConstructStart","onConstructEnd","onValidateParams","onRenderStart","onRender","onRenderEnd","onReadStart","onReadProcess","onReadSuccess","onReadError","onReadEnd"],params:{file:null,readOnRender:!0,readValueType:"base64",types:{image:/image\/.*/}}},function(e){this.construct(e)}),cm.getConstructor("Com.FileReader",function(e,t,n){n.construct=function(e){var t=this;t.isDestructed=!1,t.nodes={},t.components={},t.triggerEvent("onConstructStart"),t.setParams(e),t.convertEvents(t.params.events),t.render(),t.triggerEvent("onConstruct"),t.triggerEvent("onConstructEnd")},n.render=function(){this.triggerEvent("onRenderStart"),this.params.readOnRender&&this.read(this.params.file),this.triggerEvent("onRender"),this.triggerEvent("onRenderEnd")},n.readAsBase64=function(n,a){var r=this;return r.triggerEvent("onReadStart",n),r.process(n,function(t){r.triggerEvent("onReadProcess",t);var e=new FileReader;cm.addEvent(e,"load",function(e){r.afterSuccess(e.target.result,t,a)}),cm.addEvent(e,"error",function(e){r.afterError(e,t,a)}),e.readAsDataURL(n)}),r},n.readAsBinary=function(n,a){var r=this;return r.triggerEvent("onReadStart",n),r.process(n,function(t){r.triggerEvent("onReadProcess",t);var e=new FileReader;cm.addEvent(e,"load",function(e){r.afterSuccess(e.target.result,t,a)}),cm.addEvent(e,"error",function(e){r.afterError(e,t,a)}),e.readAsBinaryString(n)}),r},n.readAsHEX=function(t,a){var r=this;return r.triggerEvent("onReadStart",t),r.process(t,function(n){r.triggerEvent("onReadProcess",n);var e=new FileReader;cm.addEvent(e,"load",function(e){var t;try{t=cm.bufferToHEX(e.target.result)}catch(e){r.afterError(e,n,a)}finally{r.afterSuccess(t,n,a)}}),cm.addEvent(e,"error",function(e){r.afterError(e,n,a)}),e.readAsArrayBuffer(t)}),r},n.readAsText=function(n,a){var r=this;return r.triggerEvent("onReadStart",n),r.process(n,function(t){r.triggerEvent("onReadProcess",t);var e=new FileReader;cm.addEvent(e,"load",function(e){r.afterSuccess(e.target.result,t,a)}),cm.addEvent(e,"error",function(e){r.afterError(e,t,a)}),e.readAsText(n)}),r},n.afterSuccess=function(e,t,n){return t.value=e,n(t),this.triggerEvent("onReadSuccess",t),this.triggerEvent("onReadEnd",t),t},n.afterError=function(e,t,n){return t.error=e,n&&n(t),this.triggerEvent("onReadError",t),this.triggerEvent("onReadEnd",t),t},n.read=function(e,t){if(t=cm.isFunction(t)?t:function(){},cm.isFileReader&&cm.isFile(e))switch(this.params.readValueType){case"binary":this.readAsBinary(e,t);break;case"hex":this.readAsHEX(e,t);break;case"text":this.readAsText(e,t);break;default:this.readAsBase64(e,t)}return this},n.process=function(e,t){var n=this.validate(e);this.params.types.image.test(n.type)&&!cm.isEmpty(n.url)?cm.onImageLoad(n.url,function(e){n._isLoaded=!0,n.width=e.naturalWidth||0,n.height=e.naturalHeight||0,t(n)},function(){t(n)}):t(n)},n.validate=function(e){var t,n={_type:"file",_isFile:!1,_isLoaded:!1,value:null,error:null,name:"",size:0,url:null,type:null};return cm.isFile(e)?(n._isFile=!0,n.file=e,n.type=e.type,n.name=e.name,n.size=e.size,n.url=window.URL.createObjectURL(e)):cm.isObject(e)?((n=cm.merge(n,e)).name=cm.isEmpty(n.name)?n.value:n.name,n.url=cm.isEmpty(n.url)?n.value:n.url):cm.isEmpty(e)||(t=cm.parseJSON(e),n=cm.isObject(t)?this.validate(t):this.validate({value:e})),n}}),cm.define("Com.FileStats",{extend:"Com.AbstractController",params:{mfu:0,umf:0,quote:0,usage:0},strings:{stats:"Statistics",mfu:"You can upload up to %mfu% files at a time.",umf:"Max file size: %umf%.",quote:"Total storage: %quote%.",usage:"Storage used: %usage%.",quote_unlimited:"Unlimited"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.FileStats",function(e,t,n){n._inherit;n.renderView=function(){var e=this,t={"%mfu%":e.params.mfu,"%umf%":e.params.umf,"%quote%":e.params.quote,"%usage%":e.params.usage};return t["%quote%"]=0===parseFloat(t["%quote%"])?e.lang("quote_unlimited"):t["%quote%"]+" Mb",t["%usage%"]=t["%usage%"]+" Mb",e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__file-stats"},e.nodes.content=cm.node("div",{class:"pt__line-info"},cm.node("div",{class:"icon small info"}),cm.node("div",{class:"item"},e.lang("mfu",t)),cm.node("div",{class:"item"},e.lang("umf",t)),cm.node("div",{class:"item"},e.lang("quote",t)),cm.node("div",{class:"item"},e.lang("usage",t)))),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd"),e}}),Com.FormFields=(()=>{var n={};return{add:function(e,t){n[e]=cm.merge({node:cm.node("div"),fieldConstructor:null,constructor:null,type:e,field:!0,system:!1},t)},get:function(e){return n[e]?cm.clone(n[e],!0):null},list:function(){return n}}})(),cm.define("Com.FormField",{modules:["Params","Events","DataConfig","Stack","Callbacks"],events:["onRender"],params:{node:cm.node("div"),container:cm.node("div"),form:!1,name:"",value:null,dataValue:null,type:!1,label:"",help:null,placeholder:"",visible:!0,options:[],className:"",constructor:!1,constructorParams:{},helpConstructor:"Com.HelpBubble",helpParams:{renderStructure:!0}}},function(e){function t(){a.params.constructor&&cm.getConstructor(a.params.constructor,function(e){a.params.constructor=e}),a.params.constructorParams.node=a.params.node,a.params.constructorParams.name=a.params.name,a.params.constructorParams.options=a.params.options,a.params.constructorParams.value=a.params.dataValue||a.params.value,a.params.helpParams.content=a.params.help,a.params.helpParams.name=a.params.name,a.form=a.params.form}function n(){a.nodes=a.callbacks.render(a)||{},a.params.container.appendChild(a.nodes.container),a.callbacks.construct(a)}var a=this;a.nodes={},a.components={},a.form=null,a.controller=null,a.value=null;a.callbacks.construct=function(e){e.controller=e.callbacks.controller(e,e.params.constructorParams)},a.callbacks.controller=function(e,t){if(e.params.constructor)return new e.params.constructor(t)},a.callbacks.render=function(t){var n={};return n.container=cm.node("dl",{class:"pt__field is-adaptive"},n.label=cm.node("dt",cm.node("label",t.params.label)),n.value=cm.node("dd",t.params.node)),t.params.visible||cm.addClass(n.container,"is-hidden"),cm.addClass(n.container,t.params.className),cm.isEmpty(t.params.name)||t.params.node.setAttribute("name",t.params.name),cm.isEmpty(t.params.value)||t.params.node.setAttribute("value",t.params.value),cm.isEmpty(t.params.dataValue)||t.params.node.setAttribute("data-value",JSON.stringify(t.params.dataValue)),cm.isEmpty(t.params.placeholder)||t.params.node.setAttribute("placeholder",t.params.placeholder),cm.isEmpty(t.params.help)||cm.getConstructor(t.params.helpConstructor,function(e){t.components.help=new e(cm.merge(t.params.helpParams,{container:n.label}))}),n},a.callbacks.clearError=function(e){cm.removeClass(e.nodes.container,"error"),cm.remove(e.nodes.errors)},a.callbacks.renderError=function(e,t){e.callbacks.clearError(e),cm.addClass(e.nodes.container,"error"),e.nodes.errors=cm.node("ul",{class:"pt__field__error pt__field__hint"},cm.node("li",{class:"error"},t)),cm.appendChild(e.nodes.errors,e.nodes.value)},a.callbacks.set=function(e,t){return e.controller&&cm.isFunction(e.controller.set)&&e.controller.set(t),t},a.callbacks.get=function(e){return e.controller&&cm.isFunction(e.controller.get)?e.controller.get():null},a.callbacks.reset=function(e){e.controller&&cm.isFunction(e.controller.reset)&&e.controller.reset()},a.callbacks.destruct=function(e){e.controller&&cm.isFunction(e.controller.destruct)&&e.controller.destruct()},a.set=function(e){return a.value=a.callbacks.set(a,e),a},a.get=function(){return a.value=a.callbacks.get(a),a.value},a.reset=function(){return a.callbacks.reset(a),a},a.destruct=function(){return a.callbacks.destruct(a),a.removeFromStack(),a},a.renderError=function(e,t){return a.callbacks.renderError(a,e,t),a},a.clearError=function(){return a.callbacks.clearError(a),a},a.setParams(e),a.convertEvents(a.params.events),a.getDataConfig(a.params.node),a.callbacksProcess(),t(),n(),a.addToStack(a.params.node),a.triggerEvent("onRender")}),Com.FormFields.add("empty",{field:!1,fieldConstructor:"Com.AbstractFormField"}),Com.FormFields.add("buttons",{node:cm.node("div",{class:"pt__buttons pull-right"}),field:!1,system:!0,callbacks:{render:function(e){var t={};return t.container=e.params.node,t.inner=cm.node("div",{class:"inner"}),cm.appendChild(t.inner,t.container),t},controller:function(t){var n,a={};return cm.forEach(t.params.options,function(e){switch(n=cm.node("button",e.text),e.value){case"submit":n.type="submit",cm.addClass(n,"button-primary"),cm.addEvent(n,"click",function(e){cm.preventDefault(e),t.form.send()});break;case"reset":n.type="reset",cm.addClass(n,"button-secondary"),cm.addEvent(n,"click",function(e){cm.preventDefault(e),t.form.reset()});break;case"clear":cm.addClass(n,"button-secondary"),cm.addEvent(n,"click",function(e){cm.preventDefault(e),t.form.clear()})}a[e.value]=n,t.params.node.appendChild(n)}),a}}}),cm.define("Com.FormStepsLoader",{modules:["Params","Events","Langs","DataConfig","DataNodes","Callbacks","Stack"],events:["onRenderStart","onRender","onError","onAbort","onSuccess","onSendStart","onSendEnd","onProcessEnd"],params:{node:cm.node("div"),name:"",animateDuration:"cm._config.animDuration",showLoader:!0,loaderDelay:"cm._config.loadDelay",responseKey:"data",responseHTML:!0,ajax:{type:"json",method:"POST",url:"",params:{request:"%request%",response:"%response%"}},"Com.Overlay":{position:"absolute",autoOpen:!1,removeOnClose:!0}},strings:{server_error:"An unexpected error has occurred. Please try again later."}},function(e){var n=this,t=(n.nodes={container:cm.node("div"),request:{container:cm.node("div"),inner:cm.node("div")},buttons:{send:cm.node("div")},response:{container:cm.node("div"),inner:cm.node("div")}},n.components={},n.animations={},n.ajaxHandler=null,n.isProcess=!1,n.isRendering=!1,n.loaderDelay=null,function(){n.params["Com.Overlay"].container=n.nodes.container}),a=function(){cm.getConstructor("Com.Overlay",function(e,t){n.components.loader=new e(n.params[t])}),n.animations.response=new cm.Animation(n.nodes.response.container),cm.addEvent(n.nodes.buttons.send,"click",n.send)};n.callbacks.prepare=function(e,t){return(t=e.callbacks.beforePrepare(e,t)).url=cm.strReplace(t.url,{"%baseUrl%":cm._baseUrl}),t.params=cm.objectReplace(t.params,{"%baseUrl%":cm._baseUrl,"%request%":cm.getFDO(e.nodes.request.inner),"%response%":cm.getFDO(e.nodes.response.inner)}),t=e.callbacks.afterPrepare(e,t)},n.callbacks.beforePrepare=function(e,t){return t},n.callbacks.afterPrepare=function(e,t){return t},n.callbacks.request=function(t,n){return n=t.callbacks.prepare(t,n),cm.ajax(cm.merge(n,{onStart:function(){t.callbacks.start(t)},onSuccess:function(e){t.callbacks.response(t,n,e)},onError:function(){t.callbacks.error(t,n)},onAbort:function(){t.callbacks.abort(t,n)},onEnd:function(){t.callbacks.end(t)}}))},n.callbacks.filter=function(e,t,n){var a,e=cm.objectSelector(e.params.responseKey,n);return a=e&&!cm.isEmpty(e)?e:a},n.callbacks.start=function(e,t){e.isProcess=!0,e.params.showLoader&&(e.loaderDelay=setTimeout(function(){e.components.loader&&!e.components.loader.isOpen&&e.components.loader.open()},e.params.loaderDelay)),e.triggerEvent("onSendStart")},n.callbacks.end=function(e,t){e.isProcess=!1,e.params.showLoader&&(e.loaderDelay&&clearTimeout(e.loaderDelay),e.components.loader)&&e.components.loader.isOpen&&e.components.loader.close(),e.triggerEvent("onSendEnd"),e.triggerEvent("onProcessEnd",e.nodes.response.inner)},n.callbacks.response=function(e,t,n){cm.isEmpty(n)||(n=e.callbacks.filter(e,t,n)),cm.isEmpty(n)?e.callbacks.error(e,t):e.callbacks.success(e,n)},n.callbacks.error=function(e,t){e.callbacks.renderError(e,t),e.triggerEvent("onError")},n.callbacks.success=function(e,t){e.callbacks.render(e,t),e.triggerEvent("onSuccess",t)},n.callbacks.abort=function(e,t){e.triggerEvent("onAbort")},n.callbacks.renderTemporary=function(e){return cm.node("div",{class:"form__temporary"})},n.callbacks.render=function(e,t){var n,a;if(e.params.responseHTML){if(e.isRendering=!0,a=e.callbacks.renderTemporary(e),n=cm.strToHTML(t),!cm.isEmpty(n))if(cm.isNode(n))a.appendChild(n);else for(;n.length;)cm.isNode(n[0])?a.appendChild(n[0]):cm.remove(n[0]);e.callbacks.append(e,a)}},n.callbacks.renderError=function(e,t){var n;e.params.responseHTML&&(e.isRendering=!0,(n=e.callbacks.renderTemporary(e)).appendChild(cm.node("div",{class:"cm__empty"},e.lang("server_error"))),e.callbacks.append(e,n))},n.callbacks.append=function(t,e){var n;t.nodes.response.temporary||(t.nodes.response.temporary=t.callbacks.renderTemporary(t),cm.forEach(t.nodes.response.inner.childNodes,function(e){cm.appendChild(e,t.nodes.response.temporary)}),cm.appendChild(t.nodes.response.temporary,t.nodes.response.inner)),cm.removeClass(t.nodes.response.temporary,"is-show",!0),cm.appendChild(e,t.nodes.response.inner),cm.addClass(e,"is-show",!0),cm.removeClass(t.nodes.response.container,"is-loaded",!0),cm.addClass(t.nodes.response.container,"is-show",!0),n=e.offsetHeight,t.animations.response.go({style:{height:[n,"px"].join("")},duration:t.params.animateDuration,anim:"smooth",onStop:function(){t.nodes.response.container.style.height="",cm.remove(t.nodes.response.temporary),cm.addClass(t.nodes.response.container,"is-loaded",!0),t.nodes.response.temporary=e,t.isRendering=!1}})},n.send=function(){return n.isProcess&&n.abort(),n.isProcess||n.isRendering||(n.ajaxHandler=n.callbacks.request(n,cm.clone(n.params.ajax))),n},n.abort=function(){return n.ajaxHandler&&n.ajaxHandler.abort&&n.ajaxHandler.abort(),n},n.setParams(e),n.convertEvents(n.params.events),n.getDataNodes(n.params.node),n.getDataConfig(n.params.node),n.callbacksProcess(),t(),n.addToStack(n.params.node),n.triggerEvent("onRenderStart"),a(),n.triggerEvent("onRender")}),cm.define("Com.Gallery",{modules:["Params","Events","Langs","DataConfig","DataNodes"],events:["onRenderStart","onRender","onSet","onChange","onPrev","onNext","onItemLoad","onItemSet"],params:{container:cm.node("div"),node:cm.node("div"),data:[],active:null,duration:500,showCaption:!0,autoplay:!0,navigation:{enable:!0,count:0,cycle:!0,showTitles:!1},icons:{prev:"icon default prev",next:"icon default next",zoom:"icon cm-i default zoom"},itemConstructor:"Com.GalleryItem",itemParams:{},zoom:!0,zoomConstructor:"Com.Zoom",zoomParams:{autoOpen:!1,removeOnClose:!0,documentScroll:!0},overlay:!0,overlayConstructor:"Com.Overlay",overlayParams:{theme:"gallery",position:"absolute",showSpinner:!0,showContent:!0,autoOpen:!1,removeOnClose:!0,lazy:!0}},strings:{next:"Next",prev:"Previous",zoom:"Zoom"}},function(e){function t(){i.nodes.container=cm.node("div",{classes:"com__gallery"},i.nodes.holder=cm.node("div",{classes:"holder"}),i.nodes.bar=cm.node("div",{classes:["com__gallery-controls","is-full"]},cm.node("div",{classes:"inner"},i.nodes.prev=cm.node("div",{classes:["bar-arrow","prev","is-hidden"],role:"button",tabindex:0,"aria-label":i.msg("prev"),"aria-hidden":"true"},cm.node("div",{classes:i.params.icons.prev})),i.nodes.next=cm.node("div",{classes:["bar-arrow","next","is-hidden"],role:"button",tabindex:0,"aria-label":i.msg("next"),"aria-hidden":"true"},cm.node("div",{classes:i.params.icons.next})),i.nodes.zoom=cm.node("div",{classes:["bar-zoom","is-hidden"],role:"button",tabindex:0,"aria-label":i.msg("zoom"),"aria-hidden":"true"},cm.node("div",{classes:i.params.icons.zoom}))))),i.params.navigation.showTitles&&(i.nodes.prev.title=i.msg("prev"),i.nodes.next.title=i.msg("next"),i.nodes.zoom.title=i.msg("zoom")),cm.click.add(i.nodes.prev,function(e){cm.preventDefault(e),i.prev()}),cm.click.add(i.nodes.next,function(e){cm.preventDefault(e),i.next()}),i.params.zoom&&cm.getConstructor(i.params.zoomConstructor,function(e){i.components.zoom=new e(i.params.zoomParams),cm.click.add(i.nodes.zoom,function(e){cm.preventDefault(e),i.zoom()}),cm.removeClass(i.nodes.zoom,"is-hidden"),i.nodes.zoom.setAttribute("aria-hidden","false")}),i.params.overlay&&cm.getConstructor(i.params.overlayConstructor,function(e){i.components.overlay=new e(cm.merge(i.params.overlayParams,{container:i.nodes.container}))}),i.params.container.appendChild(i.nodes.container)}function n(t){(t=cm.merge(i.params.itemParams,t)).index=cm.isNumber(t.index)?t.index:i.items.length,cm.getConstructor(i.params.itemConstructor,function(e){i.items[t.index]=new e(cm.merge(t,{showCaption:i.params.showCaption,events:{onClick:function(e){a(e.getParams("index"))},onLoad:function(e){c(e)},onError:function(e){c(e)}}}))})}function a(e){var t;i.isProcess||(i.isProcess=!0,t=i.currentItem,e=i.items[e],i.temporaryItem=e,i.triggerEvent("onSet",{current:e.getParams(),previous:t?t.getParams():null}),e!==t?(i.triggerEvent("onChange",{current:e.getParams(),previous:t?t.getParams():null}),("image"===e.getParams("type")?r:"video"===e.getParams("type")?o:s)(e)):(i.isProcess=!1,e.appendTo(i.nodes.holder)))}function r(e){cm.replaceClass(i.nodes.bar,"is-partial","is-full"),e.isLoaded()?c(e):i.setLoader(e)}function o(e){cm.replaceClass(i.nodes.bar,"is-full","is-partial"),e.isLoaded()?c(e):i.setLoader(e)}function s(e){cm.replaceClass(i.nodes.bar,"is-full","is-partial"),e.appendTo(i.nodes.holder),i.setLoader(e)}var i=this,c=(i.components={},i.currentItem=null,i.previousItem=null,i.temporaryItem=null,i.isProcess=!1,i.items=[],i.nodes={items:[]},function(e){i.temporaryItem=null,i.previousItem=i.currentItem,i.currentItem=e,i.triggerEvent("onItemLoad",i.currentItem.getParams()),i.previousItem&&(i.previousItem.setZIndex(1),i.currentItem.setZIndex(2)),cm.inArray(["image","video"],i.currentItem.getParams("type"))&&i.currentItem.appendTo(i.nodes.holder),"video"===i.currentItem.getParams("type")&&i.currentItem.play(),i.setArrows(),i.removeLoader(),i.currentItem.getAnimation().go({style:{opacity:1},anim:"smooth",duration:i.params.duration,onStop:function(){i.isProcess&&(i.previousItem&&(i.previousItem.setOpacity(0),i.previousItem.remove()),i.triggerEvent("onItemSet",i.currentItem.getParams()),i.isProcess=!1)}})});i.set=function(e){return cm.isNumber(e)&&i.items[e]&&a(e),i},i.next=function(){var e,t;if(!i.isProcess)return t=(e=i.currentItem||i.temporaryItem).getParams("index"),i.triggerEvent("onNext",{current:e.getParams(),index:t}),i.params.navigation.enable&&(i.params.navigation.cycle?a(t===i.items.length-1?0:t+1):t<i.items.length-1&&a(t+1)),i},i.prev=function(){var e,t;if(!i.isProcess)return t=(e=i.currentItem||i.temporaryItem).getParams("index"),i.triggerEvent("onPrev",{current:e.getParams(),index:t}),i.params.navigation.enable&&(i.params.navigation.cycle?a(0===t?i.items.length-1:t-1):0<t&&a(t-1)),i},i.zoom=function(){return i.components.zoom&&i.components.zoom.set(i.currentItem.getParams("src")).open(),i},i.getIndex=function(){return i.currentItem.getParams("index")},i.getLength=function(){return i.items.length},i.setCount=function(e){return i.params.navigation.count=e,i.setArrows(),i},i.getCount=function(){return Math.max(i.getLength(),i.params.navigation.count)},i.setArrows=function(){var e=i.currentItem.getParams("index"),t=i.getCount(),n=i.params.navigation.cycle||t<2?1<t:0<e,n=(i.nodes.prev.disabled=!n,i.nodes.prev.setAttribute("aria-hidden",!n),cm.toggleClass(i.nodes.prev,"is-hidden",!n),i.params.navigation.cycle||t<2?1<t:e<t-1);return i.nodes.next.disabled=!n,i.nodes.next.setAttribute("aria-hidden",!n),cm.toggleClass(i.nodes.next,"is-hidden",!n),i},i.setLoader=function(e){return i.params.overlay&&i.components.overlay.open(),e&&e.load(),i},i.removeLoader=function(e){return i.params.overlay&&i.components.overlay.close(),e&&e.abort(),i},i.toggleLoader=function(e){return e?i.setLoader():i.removeLoader(),i},i.stop=function(){return i.isProcess=!1,i.temporaryItem&&(i.temporaryItem.destruct(),i.temporaryItem.remove()),i.removeLoader(i.temporaryItem),i},i.clear=function(){return i.stop(),i.currentItem&&(i.currentItem.destruct(),i.currentItem.remove()),i.currentItem=null,i.previousItem=null,i.temporaryItem=null,i.items=[],i},i.add=function(e){return e=cm.merge({index:null,page:null,link:cm.node("a"),src:"",title:"",data:{}},e),n(e),i},i.collect=function(e,n){return cm.isNode(e)&&(n=cm.merge({fromIndex:i.items.length,fromPage:0},n),e=cm.getNodes(e),cm.isEmpty(e.items)||cm.forEach(e.items,function(e,t){e.index=n.fromIndex+t,e.page=n.fromPage,i.collectItem(e)})),i},i.collectItem=function(e){return cm.isNode(e.container)&&(e=cm.merge(i.getNodeDataConfig(e.container),e)),cm.isEmpty(e.link)&&(e.link=cm.node("a")),cm.isEmpty(e.src)&&(e.src=e.link.getAttribute("href")||""),cm.isEmpty(e.title)&&(e.title=e.link.getAttribute("title")||""),i.hasItemCollected(e)||n(e),i},i.hasItemCollected=function(t){return i.items.some(function(e){return e.getParams("link")===t.link})},i.setParams(e),i.convertEvents(i.params.events),i.getDataNodes(i.params.node,i.params.nodesDataMarker,!1),i.getDataConfig(i.params.node),i.triggerEvent("onRenderStart"),t(),cm.forEach(i.nodes.items,i.collectItem),cm.forEach(i.params.data,n),i.set(i.params.active),i.triggerEvent("onRender")}),cm.define("Com.GalleryItem",{extend:"Com.AbstractController",events:["onClick","onLoad","onError","onAbort"],params:{renderStructure:!0,embedStructureOnRender:!1,controllerEvents:!0,removeOnDestruct:!1,index:null,type:null,src:null,srcset:[],sizes:[],title:null,info:null,mime:null,link:null,showCaption:!1,position:"is-centered",adaptive:!1,adaptiveFrom:cm._config.screenTabletPortrait,adaptivePosition:"is-contain",extensions:{image:cm._config.fileExtensions.image,video:cm._config.fileExtensions.video},types:{image:cm._config.fileTypes.image,video:cm._config.fileTypes.video}}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.GalleryItem",function(e,t,n,a){n.onConstructStart=function(){this.hasLoaded=!1,this.hasProcess=!1,this.loadSuccessEventHanlder=this.loadSuccessEvent.bind(this),this.loadErrorEventHanlder=this.loadErrorEvent.bind(this)},n.onValidateParams=function(){var e=this;cm.isEmpty(e.params.sizes)||(e.params.size=e.params.sizes.map(function(e){return e.join(" ")}).join(", ")),cm.isEmpty(e.params.srcset)||(e.params.srcset=e.params.srcset.map(function(e){return e.join(" ")}).join(", "));try{e.params.url=new URL(e.params.src)}catch(e){}e.isImage()?e.params.type="image":e.isVideo()?e.params.type="video":e.params.type="iframe"},n.onRedraw=function(){this.params.adaptive&&(cm._pageSize.winWidth>this.params.adaptiveFrom?cm.replaceClass(this.nodes.container,this.params.adaptivePosition,this.params.position):cm.replaceClass(this.nodes.container,this.params.position,this.params.adaptivePosition))},n.renderView=function(){var e=this;cm.isNode(e.params.link)?e.nodes.link=e.params.link:e.nodes.link=cm.node("a"),e.nodes.container=cm.node("div",{classes:"pt__image"},e.nodes.inner=cm.node("div",{classes:"inner"})),cm.addClass(e.nodes.container,e.params.position),"image"===e.params.type?e.nodes.content=cm.node("img",{classes:"descr",alt:e.params.title,title:e.params.title}):"video"===e.params.type?(e.nodes.content=cm.node("video",{classes:"descr",preload:"none",playsinline:!0}),e.nodes.content.playsinline=!0,e.nodes.content.playsInline=!0,e.nodes.content.autoplay=!0,e.nodes.content.controls=!0):e.nodes.content=cm.node("iframe",{classes:"descr",allowfullscreen:!0}),cm.appendChild(e.nodes.content,e.nodes.inner),e.params.showCaption&&"image"===e.params.type&&!cm.isEmpty(e.params.title)&&(e.nodes.caption=cm.node("div",{classes:"title"},cm.node("div",{classes:"inner"},e.params.title)),cm.appendChild(e.nodes.caption,e.nodes.inner))},n.renderViewModel=function(){a.prototype.renderViewModel.apply(this,arguments),cm.addEvent(this.nodes.link,"click",this.linkClickEvent.bind(this),!0,!0),this.components.animation=new cm.Animation(this.nodes.container)},n.linkClickEvent=function(e){cm.preventDefault(e),this.triggerEvent("onClick")},n.loadSuccessEvent=function(){if(!this.hasProcess)return this;this.hasProcess=!1,this.hasLoaded=!0,this.triggerEvent("onLoad")},n.loadErrorEvent=function(){if(!this.hasProcess)return this;this.hasProcess=!1,this.hasLoaded=!1,this.triggerEvent("onError")},n.isImage=function(){var e=this,t=new RegExp("\\.("+e.params.extensions.image+")$","gi");return e.params.src&&t.test(e.params.src)||e.params.url&&t.test(e.params.url.pathname)||e.params.src&&/^data:image/gi.test(e.params.src)||e.params.mime&&e.params.types.image.test(e.params.mime)||"image"===e.params.type},n.isVideo=function(){var e=this,t=new RegExp("\\.("+e.params.extensions.video+")$","gi");return e.params.src&&t.test(e.params.src)||e.params.url&&t.test(e.params.url.pathname)||e.params.src&&/^data:video/gi.test(e.params.src)||e.params.mime&&e.params.types.video.test(e.params.mime)||"video"===e.params.type},n.loadVideo=function(){cm.addEvent(this.nodes.content,"loadedmetadata",this.loadSuccessEventHanlder),cm.addEvent(this.nodes.content,"error",this.loadErrorEventHanlder),this.nodes.content.videoSource=cm.node("source",{src:this.params.src}),cm.appendChild(this.nodes.content.videoSource,this.nodes.content)},n.loadMedia=function(){var e=this;cm.addEvent(e.nodes.content,"load",e.loadSuccessEventHanlder),cm.addEvent(e.nodes.content,"error",e.loadErrorEventHanlder),cm.isEmpty(e.params.sizes)||(e.nodes.content.sizes=e.params.sizes),cm.isEmpty(e.params.srcset)||(e.nodes.content.srcset=e.params.srcset),e.nodes.content.src=e.params.src},n.load=function(){var e=this;return e.hasProcess||(e.hasProcess=!0,e.hasLoaded&&cm.inArray(["image","video"],e.params.type)?e.loadSuccessEvent():"video"===e.params.type?e.loadVideo():e.loadMedia()),e},n.abort=function(){return this.hasProcess&&(this.hasProcess=!1,cm.removeEvent(this.nodes.content,"load",this.loadSuccessEventHanlder),cm.removeEvent(this.nodes.content,"error",this.loadErrorEventHanlder),this.triggerEvent("onAbort")),this},n.play=function(){return this.hasProcess||"video"===this.params.type&&this.hasLoaded&&this.nodes.content.play(),this},n.remove=function(){return cm.remove(this.nodes.container),this},n.appendTo=function(e,t){return t=cm.isUndefined(t)?"insertLast":t,cm.isNode(e)&&(cm[t](this.nodes.container,e),this.redraw()),this},n.isLoaded=function(){return this.hasLoaded},n.getContainer=function(){return this.nodes.container},n.getAnimation=function(){return this.components.animation},n.setZIndex=function(e){return this.nodes.container.style.zIndex=e,this},n.setOpacity=function(e){return this.nodes.container.style.opacity=e,this}}),cm.define("Com.GalleryLayout",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onChange"],params:{node:cm.node("div"),barDirection:"horizontal",hasBar:!0,"Com.Gallery":{},"Com.Scroll":{step:25,time:25}}},function(e){var r=this,o={},t=[],n=(r.nodes={inner:cm.node("div"),"preview-inner":cm.node("div"),"bar-inner":cm.node("div"),"bar-items":[]},function(){o.scroll=new Com.Scroll(cm.merge(r.params["Com.Scroll"],{nodes:r.nodes.ComScroll})),o.gallery=new Com.Gallery(cm.merge(r.params["Com.Gallery"],{container:r.nodes["preview-inner"],data:t})).addEvent("onChange",s).set(0)}),a=function(){cm.forEach(r.nodes["bar-items"],function(e){e.title=e.link&&e.link.getAttribute("title")||"",e.src=e.link&&e.link.getAttribute("href")||"",t.push(e)})},s=function(e,t){var n,a=t.current;r.params.hasBar&&(t.previous&&cm.removeClass(t.previous.container,"active"),cm.addClass(a.container,"active"),"vertical"==r.params.barDirection?(n=a.container.offsetTop-r.nodes.inner.offsetHeight/2+a.container.offsetHeight/2,o.scroll.scrollY(n)):(n=a.container.offsetLeft-r.nodes.inner.offsetWidth/2+a.container.offsetWidth/2,o.scroll.scrollX(n))),r.triggerEvent("onChange",t)};r.setParams(e),r.convertEvents(r.params.events),r.getDataNodes(r.params.node,r.params.nodesDataMarker,!1),r.getDataConfig(r.params.node),r.triggerEvent("onRenderStart"),a(),n(),r.addToStack(r.params.node),r.triggerEvent("onRender")}),cm.define("Com.GalleryPopup",{extend:"Com.AbstractController",events:["onOpen","onOpenEnd","onClose","onChange","onPrev","onNext","onLoad"],params:{controllerEvents:!0,renderStructure:!0,embedStructure:"append",embedStructureOnRender:!1,removeOnDestruct:!1,size:"fullscreen",aspectRatio:"auto",theme:"theme-black",data:[],active:null,showCounter:!0,showTitle:!0,showZoom:!0,autoPlay:!1,navigation:{},openOnSelfClick:!1,placeholderConstructor:"Com.Dialog",placeholderParams:{width:700,scroll:!1,autoOpen:!1,titleOverflow:!0,closeOnBackground:!0,className:"com__gallery-popup"},galleryConstructor:"Com.Gallery",galleryParams:{showCaption:!1},overlayParams:{},galleryItemParams:{}}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.GalleryPopup",function(e,t,n,a){n.onConstructStart=function(){var e=this;e.views={},e.currentItem=null,e.openHandler=e.open.bind(e),e.closeHandler=e.close.bind(e),e.nextHandler=e.next.bind(e),e.prevHandler=e.prev.bind(e),e.keyPressEventHandler=e.keyPressEvent.bind(e)},n.onConstructEnd=function(){this.addToStack(this.params.node)},n.onValidateParams=function(){var e=this;e.params.galleryParams.zoom=e.params.showZoom,e.params.galleryParams.autoplay=e.params.autoPlay,e.params.galleryParams.navigation=e.params.navigation,e.params.galleryParams.overlayParams=e.params.overlayParams,e.params.galleryParams.itemParams=e.params.galleryItemParams,e.params.placeholderParams.theme=e.params.theme,e.params.placeholderParams.size=e.params.size},n.onDestruct=function(){this.components.dialog&&cm.isFunction(this.components.dialog.destruct)&&this.components.dialog.destruct(),this.components.gallery&&cm.isFunction(this.components.gallery.destruct)&&this.components.gallery.destruct()},n.renderView=function(){this.nodes.container=cm.node("div",{classes:"com__gallery-preview"},this.nodes.inner=cm.node("div",{classes:"inner"})),"auto"!==this.params.aspectRatio&&cm.addClass(this.nodes.container,["cm__aspect",this.params.aspectRatio].join("-"))},n.renderViewModel=function(){var n=this;a.prototype.renderViewModel.apply(n,arguments),cm.getConstructor(n.params.placeholderConstructor,function(e){n.components.dialog=new e(cm.merge(n.params.placeholderParams,{content:n.nodes.container,events:{onOpen:function(){cm.addEvent(window,"keydown",n.keyPressEventHandler),n.triggerEvent("onOpen")},onClose:function(){n.components.gallery.stop(),cm.removeEvent(window,"keydown",n.keyPressEventHandler),n.triggerEvent("onClose")}}}))}),cm.getConstructor(n.params.galleryConstructor,function(e){n.components.gallery=new e(cm.merge(n.params.galleryParams,{node:n.params.node,container:n.nodes.inner,data:n.params.data,active:n.params.active,events:{onChange:function(e,t){n.changeEvent(t.current,t.previous)},onSet:function(){n.components.dialog.open()},onPrev:function(e,t){n.triggerEvent("onPrev",t)},onNext:function(e,t){n.triggerEvent("onNext",t)},onItemLoad:function(e,t){n.loadEvent(t)}}}))}),n.params.openOnSelfClick&&cm.click.add(n.params.node,n.openHandler)},n.changeEvent=function(e){this.currentItem=e,this.views.info=this.renderInfoView(this.currentItem),this.triggerEvent("onChange",this.currentItem)},n.loadEvent=function(e){this.triggerEvent("onLoad",e)},n.keyPressEvent=function(e){var t=this;cm.handleKey(e,"ArrowLeft",function(){t.components.dialog.isFocus&&t.prev()}),cm.handleKey(e,"ArrowRight",function(){t.components.dialog.isFocus&&t.next()})},n.renderInfoView=function(e){e={data:e,nodes:{}};return e.nodes.container=cm.node("div",{classes:"com__gallery-popup__title"}),this.params.showCounter&&(e.counter=[e.data.index+1,this.components.gallery.getCount()].join("/"),e.nodes.counter=cm.node("span",{classes:"counter"},e.counter),cm.appendChild(e.nodes.counter,e.nodes.container)),this.params.showTitle&&(e.nodes.title=cm.node("span",{classes:"title"},e.data.title),this.params.showCounter&&(e.nodes.sepaartor=cm.node("span",{classes:"separator"}),cm.appendChild(e.nodes.sepaartor,e.nodes.container)),cm.appendChild(e.nodes.title,e.nodes.container)),(this.params.showCounter||this.params.showTitle)&&this.components.dialog.setTitle(e.nodes.container),e},n.open=function(){return this.set(this.params.active||0),this},n.close=function(){return this.components.dialog.close(),this},n.set=function(e){return this.components.gallery.set(e),this},n.next=function(){return this.components.gallery.next(),this},n.prev=function(){return this.components.gallery.prev(),this},n.add=function(e){return this.components.gallery.add(e),this},n.getIndex=function(){return this.components.gallery.getIndex()},n.getLength=function(){return this.components.gallery.getLength()},n.setCount=function(e){return this.components.gallery.setCount(e),this},n.getCount=function(){return this.components.gallery.getCount()},n.toggleLoader=function(e){return this.components.gallery.toggleLoader(e),this},n.collect=function(e,t){return this.components.gallery.collect(e,t),this},n.collectItem=function(e){return this.components.gallery.collectItem(e),this},n.clear=function(){return this.components.gallery.clear(),this},n.getGallery=function(){return this.components.gallery}}),cm.define("Com.GalleryPopupContainer",{extend:"Com.AbstractContainer",params:{constructor:"Com.GalleryPopup",destructOnClose:!1,data:{},constructorParams:{}}},function(){Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("Com.GalleryPopupContainer",function(e,t,n,a){n.constructController=function(e){return new e(cm.merge(this.params.constructorParams,{data:cm.isArray(this.params.data)?this.params.data:[this.params.data]}))},n.set=function(e){return this.params.data=e,this.components.controller&&(this.components.controller.clear(),this.components.controller.add(e),this.components.controller.set(0)),this}}),cm.define("Com.GalleryScrollPagination",{extend:"Com.ScrollPagination",params:{renderStructure:!0,embedStructureOnRender:!0,pageTag:"ul",gridClass:null,columns:4,indent:"12px",adaptive:!0}},function(e){Com.ScrollPagination.apply(this,arguments)}),cm.getConstructor("Com.GalleryScrollPagination",function(e,t,n,a){n.setAttributes=function(){var e=this;a.prototype.setAttributes.apply(e,arguments),cm.addClass(e.nodes.pages,"pt__grid"),cm.addClass(e.nodes.pages,["col",e.params.columns].join("-")),cm.addClass(e.nodes.pages,["indent",e.params.indent].join("-")),cm.addClass(e.nodes.pages,e.params.gridClass),e.params.adaptive?cm.addClass(e.nodes.pages,"is-adaptive"):cm.addClass(e.nodes.pages,"is-not-adaptive")}}),cm.define("Com.Geocoder",{extend:"Com.AbstractController",events:["onLoad"],params:{controllerEvents:!0,renderStructure:!1,embedStructureOnRender:!1,apiKey:"",apiLink:"https://maps.googleapis.com/maps/api/js?key=%key%"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Geocoder",function(e,t,n,a){n.onConstructStart=function(){this.loadScriptEndHanlder=this.loadScriptEnd.bind(this)},n.onValidateParams=function(){this.apiLink=cm.strReplace(this.params.apiLink,{"%key%":this.params.apiKey})},n.renderViewModel=function(){a.prototype.renderViewModel.apply(this,arguments),cm.loadScript({path:"google.maps",src:this.apiLink,callback:this.loadScriptEndHanlder})},n.loadScriptEnd=function(e){this.components.geocoder=new e.Geocoder,this.triggerEvent("onLoad")},n.get=function(e,t,n){var a=this,r=arguments;return a.components.geocoder?a.process.apply(a,r):cm.loadScript({path:"google.maps",src:a.apiLink,callback:function(){a.process.apply(a,r)}})},n.process=function(e,n,a){return this.components.geocoder.geocode(e,function(e,t){"OK"===t?cm.isFunction(n)&&n(e,t):cm.isFunction(a)&&a(t)})}}),cm.define("Com.Geolocation",{extend:"Com.AbstractController",events:["onComplete","onRequest","onSuccess","onError"],params:{controllerEvents:!0,renderStructure:!1,embedStructureOnRender:!1,useDefault:!0,default:{},autoRequest:!0,apiKey:"",apiLink:"https://maps.googleapis.com/maps/api/js?key=%key%",geocoder:{enable:!1,constructor:"Com.Geocoder",constructorParams:{}},options:{enableHighAccuracy:!1,maximumAge:3e4,timeout:27e3}}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Geolocation",function(e,t,n,a){n.onValidateParams=function(){this.params.geocoder.constructorParams.apiLink=this.params.apiLink,this.params.geocoder.constructorParams.apiKey=this.params.apiKey},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),t.params.geocoder.enable&&cm.getConstructor(t.params.geocoder.constructor,function(e){t.components.geocoder=new e(t.params.geocoder.constructorParams)}),t.params.autoRequest&&t.request()},n.request=function(){var t=this;t.triggerEvent("onRequest"),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){e={lat:e.coords.latitude,lng:e.coords.longitude};t.process(e,"success")},function(){t.process(t.params.default,"error")},t.params.options):t.process(t.params.default,"error")},n.process=function(e,t){this.params.geocoder.enable&&(this.params.useDefault||"success"===t)?this.requestGeocoder(e):(this.triggerEvent("onComplete",e,null,t),"success"===t?this.triggerEvent("onSuccess",e):this.triggerEvent("onError",e))},n.requestGeocoder=function(t){var n=this;n.components.geocoder.get({location:t},function(e){n.triggerEvent("onComplete",t,e,"success"),n.triggerEvent("onSuccess",t,e)},function(){n.triggerEvent("onComplete",t,null,"error"),n.triggerEvent("onError",t)})}}),cm.define("Com.Glossary",{modules:["Params","Events","DataConfig","DataNodes"],require:["Com.Tooltip"],events:["onRender"],params:{node:cm.node("div"),showTitle:!0,"Com.Tooltip":{className:"com__glossary__tooltip",targetEvent:"hover"}}},function(e){var t=this,n=(t.components={},t.nodes={container:cm.node("div"),title:cm.node("div"),content:cm.node("div")},function(){t.components.tooltip=new Com.Tooltip(cm.merge(t.params["Com.Tooltip"],{target:t.nodes.container,content:t.nodes.content,title:t.params.showTitle?t.nodes.title.cloneNode(!0):""})),t.triggerEvent("onRender",{})});t.setParams(e),t.convertEvents(t.params.events),t.getDataNodes(t.params.node),t.getDataConfig(t.params.node),n()}),cm.define("Com.Gridlist",{modules:["Params","Events","Langs","Structure","DataConfig","Callbacks","Stack"],events:["onSort","onCheckAll","onUnCheckAll","onCheck","onUnCheck","onRender","onRenderStart","onRenderEnd","onLoadStart","onLoadSuccess","onLoadError","onLoadEnd","onDataFilterEnd","onPageRenderStart","onPageRenderEnd","onRenderTitleItem","onRenderFilterItem","onEmpty","onColumnsChange","onColumnsResize"],params:{node:cm.node("div"),container:null,embedStructure:"append",customEvents:!0,destructOnRemove:!1,name:"",uniqueKey:"id",data:[],cols:[],actions:[],actionsGroups:[],sort:!0,sortBy:"id",orderBy:"ASC",groupBy:!1,adaptive:!1,showCounter:!1,showBulkActions:!0,showTitle:!1,textOverflow:!1,className:"",dateFormat:"cm._config.dateTimeFormat",visibleDateFormat:"cm._config.dateTimeFormat",renderEmptyMessage:!0,renderEmptyTable:!1,renderFilter:!1,divideTableHeader:!1,hideTableHeader:!1,pagination:!0,perPage:25,pageCount:0,responseKey:"data",responseCodeKey:"code",responseErrorsKey:"errors",responseMessageKey:"message",responseCountKey:"count",showLoader:!0,ajax:{enable:!0,type:"json",method:"get",url:"",params:""},columns:{editable:!1,local:!1,ajax:{type:"json",method:"post",url:"",params:""}},statuses:["active","success","danger","warning"],icons:{arrow:{desc:"icon arrow desc",asc:"icon arrow asc"}},autoSend:!0,paginationConstructor:"Com.Pagination",paginationParams:{renderStructure:!0,embedStructureOnRender:!0,animateSwitch:!0,animatePrevious:!0},"Com.GridlistHelper":{customEvents:!1},"Com.Toolbar":{embedStructure:"append"},actionsMenu:{constructor:"Com.Menu",constructorParams:{renderStructure:!0,embedStructureOnRender:!0,modifiers:["link","gridlist"],tooltip:{enable:!0,constructorParams:{left:"-(selfWidth-targetWidth)"}}}},linksMenu:{constructor:"Com.Menu",constructorParams:{renderStructure:!1,embedStructureOnRender:!1,modifiers:[],tooltip:{enable:!1}}}},strings:{counter:"Count: %count%",check_all:"Check all",uncheck_all:"Uncheck all",empty:"No items",actions:"Actions"}},function(e){function t(){var e;l.sortBy=l.params.sortBy,l.orderBy=l.params.orderBy,l.params.groupBy=cm.isEmpty(l.params.childBy)?l.params.groupBy:l.params.childsBy,(e=l.params).data||(e.data=[]),!cm.isEmpty(l.params.ajax.url)&&l.params.ajax.enable?(l.isAjax=!0,cm.forEach(["autoSend","showLoader","responseKey","responseCodeKey","responseCountKey","responseMessageKey","responseErrorsKey","ajax"],function(e){void 0!==l.params[e]&&(l.params.paginationParams[e]=l.params[e])}),l.params.pagination=!0):l.params.paginationParams.count=l.params.data.length,l.params.paginationParams.perPage=l.params.perPage,l.params.paginationParams.pageCount=l.params.pageCount,l.params["Com.GridlistHelper"].columns=l.params.columns}function n(){l.nodes.container=cm.node("div",{classes:"com__gridlist"}),cm.addClass(l.nodes.container,l.params.className),l.params.adaptive&&cm.addClass(l.nodes.container,"is-adaptive"),l.embedStructure(l.nodes.container),l.params.showBulkActions&&l.params.actions.length&&p(),m(),l.params.customEvents&&cm.customEvent.add(l.params.node,"redraw",function(){return l.redraw()})}function a(){l.isActionsDisabled&&(l.isActionsDisabled=!1,cm.forEach(l.actions,function(e){e.permanent||l.components.toolbar&&l.components.toolbar.enableButton(e.name,e.group)}))}function r(){l.isActionsDisabled||(l.isActionsDisabled=!0,cm.forEach(l.actions,function(e){e.permanent||l.components.toolbar&&l.components.toolbar.disableButton(e.name,e.group)}))}function o(e,t){t=cm.isEmpty(t)?l.msg("empty"):t,s(e),l.params.renderEmptyMessage&&(l.nodes.empty=cm.node("div",{classes:"cm__empty"},t),cm.appendChild(l.nodes.empty,e)),l.triggerEvent("onEmpty",{container:e,empty:l.nodes.empty,errors:t})}function s(e){l.nodes.empty&&cm.isParent(e,l.nodes.empty)&&cm.remove(l.nodes.empty)}function i(){l.params.columns.editable&&cm.getConstructor("Com.GridlistHelper",function(e,t){l.components.helper=new e(cm.merge(l.params[t],{node:l.nodes.table,events:{onColumnsChange:function(e,t){l.triggerEvent("onColumnsChange",t)},onColumnsResize:function(e,n){cm.forEach(l.params.cols,function(e,t){n[t]&&n[t].width&&(e.width=n[t].width)}),l.triggerEvent("onColumnsResize",l.params.cols)}}}))})}function c(e,t,n){e.nodes.placeholder={},e.access&&(e.nodes.placeholder.container=cm.node("th",e.nodes.placeholder.inner=cm.node("div",{classes:"inner"})),/%|px|auto/.test(e.width)?e.nodes.placeholder.container.style.width=e.width:e.nodes.placeholder.container.style.width=parseFloat(e.width)+"px",cm.appendChild(e.nodes.placeholder.container,n))}function d(){cm.customEvent.trigger(l.nodes.table,"destruct",{direction:"child",self:!1}),l.unCheckAll(),l.rows=[],l.checked=[]}var l=this,m=(l.nodes={},l.components={},l.rows=[],l.checked=[],l.actions=[],l.isDestructed=!1,l.isAjax=!1,l.isCheckedAll=!1,l.sortBy=null,l.orderBy="ASC",l.isActionsDisabled=!0,function(){l.params.divideTableHeader&&y(l.nodes.container),l.isAjax?v():u(l.params.data)}),u=function(e){!cm.isEmpty(e)&&cm.isArray(e)&&(l.params.data=l.callbacks.filter(l,e),l.params.paginationParams.count=l.params.data.length,l.triggerEvent("onDataFilterEnd",l.params.data)),cm.isEmpty(l.params.data)?o(l.nodes.container):(s(l.nodes.container),l.params.sort&&I(),l.params.showCounter&&b(l.params.data.length),l.params.pagination?v():C(1,l.params.data,l.nodes.container))},p=function(){var n={};n.container=cm.node("div",{classes:"pt__gridlist__toolbar"}),cm.getConstructor("Com.Toolbar",function(e,t){l.components.toolbar=new e(cm.merge(l.params[t],{container:n.container})),h()}),cm.forEach(l.params.actions,f),cm.appendChild(n.container,l.nodes.container),l.nodes.bulk=n},h=function(){cm.isEmpty(l.params.actionsGroups)?g({name:"bulk",position:"left"}):cm.forEach(l.params.actionsGroups,g)},g=function(e){e=cm.merge({name:"",position:"left"},e);l.components.toolbar.addGroup(e)},f=function(e){e=cm.merge({group:"bulk",name:"",label:"",title:"",disabled:!0,permanent:!1,type:"primary",attr:{},preventDefault:!0,constructor:!1,constructorParams:{},callback:function(){}},e);cm.isEmpty(e.name)&&(e.name=e.label),e.permanent&&(e.disabled=!1),l.components.toolbar.addButton(e),l.actions.push(e)},v=function(){cm.getConstructor(l.params.paginationConstructor,function(e){l.components.pagination=new e(cm.merge(l.params.paginationParams,{container:l.nodes.container,callbacks:{afterPrepare:function(e,t){return l.callbacks.paginationAfterPrepare(l,e,t)}},events:{onStart:function(e){l.triggerEvent("onLoadStart")},onPageRenderError:function(e,t){l.triggerEvent("onLoadError",{page:t}),l.triggerEvent("onLoadEnd",{page:t})},onPageRender:function(e,t){l.callbacks.renderPage(l,t)},onPageRenderEnd:function(e,t){l.redraw(),l.triggerEvent("onLoadSuccess",{page:t}),l.triggerEvent("onLoadEnd",{page:t})},onSetCount:function(e,t){l.params.showCounter&&b(t)}}}))})},b=function(e){l.nodes.counter||(l.nodes.counter=cm.node("div",{classes:"pt__gridlist__counter"}),cm.insertFirst(l.nodes.counter,l.nodes.container)),l.nodes.counter.innerHTML=cm.strReplace(l.msg("counter"),{"%count%":e})},y=function(e){var n={};(l.nodes.header=n).container=cm.node("div",{classes:"pt__gridlist pt__gridlist--header"},n.table=cm.node("table",n.head=cm.node("thead",n.title=cm.node("tr")))),l.params.adaptive&&cm.addClass(n.container,"is-adaptive"),cm.forEach(l.params.cols,function(e,t){E(e,t,n.title)}),l.params.renderFilter&&(n.filter=cm.node("tr"),cm.forEach(l.params.cols,function(e,t){S(e,t,n.filter)}),cm.appendChild(n.filter,n.head)),cm.appendChild(n.container,e)},C=function(n,e,t){l.triggerEvent("onRenderStart",{container:t,page:n,data:e}),d(),l.nodes.table&&cm.isParent(t,l.nodes.table)&&cm.remove(l.nodes.table),l.nodes.table=cm.node("div",{classes:"pt__gridlist"},l.nodes.tableInner=cm.node("table",l.nodes.head=cm.node("thead",l.nodes.title=cm.node("tr")),l.nodes.content=cm.node("tbody"))),l.params.adaptive&&cm.addClass(l.nodes.table,"is-adaptive"),l.params.divideTableHeader?(cm.forEach(l.params.cols,function(e,t){c(e,0,l.nodes.title)}),cm.addClass(l.nodes.head,"is-hidden")):(cm.forEach(l.params.cols,function(e,t){E(e,t,l.nodes.title)}),l.params.renderFilter&&(l.nodes.filter=cm.node("tr",{classes:"pt__gridlist__row-filter"}),cm.forEach(l.params.cols,function(e,t){S(e,t,l.nodes.filter)}),cm.appendChild(l.nodes.filter,l.nodes.head)),l.params.hideTableHeader&&cm.addClass(l.nodes.head,"is-hidden")),cm.forEach(e,function(e,t){k(l.rows,e,t+(n-1))}),cm.appendChild(l.nodes.table,t),i(),l.triggerEvent("onRenderEnd",{container:t,page:n,data:e,rows:l.rows})},E=function(e,t,n){(e=l.params.cols[t]=cm.merge({_component:null,width:"auto",access:!0,type:"text",key:"",title:"",sort:l.params.sort,sortKey:"",filterKey:null,classes:[],class:"",target:"_blank",rel:null,tagName:"td",wrap:!1,textOverflow:null,showTitle:null,titleKey:"",titleText:"",altText:"",urlKey:!1,links:[],linksParams:{align:"left"},actions:[],actionsParams:{align:"right"},preventDefault:!0,onClick:!1,onRender:!1},e)).nodes={},e.showTitle=(cm.isBoolean(e.showTitle)?e:l.params).showTitle,e.textOverflow=(cm.isBoolean(e.textOverflow)?e:l.params).textOverflow,e.access&&(e.nodes.container=cm.node("th",{classes:e.classes},e.nodes.inner=cm.node("div",{classes:"inner"})),cm.isEmpty(e.width)||(/%|px|auto/.test(e.width)?e.nodes.container.style.width=e.width:e.nodes.container.style.width=parseFloat(e.width)+"px"),cm.appendChild(e.nodes.container,n),"checkbox"===e.type?(cm.addClass(e.nodes.container,"control"),e.nodes.inner.appendChild(e.nodes.checkbox=cm.node("input",{type:"checkbox",title:l.msg("check_all")})),e.nodes.checkbox.checked=l.isCheckedAll,cm.addEvent(e.nodes.checkbox,"click",function(){l.isCheckedAll?l.unCheckAll():l.checkAll()}),l.nodes.checkbox=e.nodes.checkbox):e.nodes.inner.appendChild(cm.node("span",e.title)),e.sort&&!/icon|empty|actions|links|checkbox/.test(e.type)&&(w(e,t),cm.addEvent(e.nodes.inner,"click",function(){l.sortBy=cm.isEmpty(e.sortKey)?e.key:e.sortKey,l.orderBy="ASC"===l.orderBy?"DESC":"ASC",l.isAjax||I(),l.params.divideTableHeader&&cm.forEach(l.params.cols,w),l.params.pagination?l.components.pagination.rebuild():C(1,l.params.data,l.nodes.container)})),l.triggerEvent("onRenderTitleItem",{nodes:e.nodes,item:e,i:t}))},w=function(e,t){e.access&&!/icon|empty|actions|links|checkbox/.test(e.type)&&(cm.removeClass(e.nodes.container,"sort"),e.sort)&&(cm.addClass(e.nodes.container,"sort"),cm.remove(e.nodes.sort),e.sortKey!==l.sortBy&&e.key!==l.sortBy||(e.nodes.sort=cm.node("div",{classes:l.params.icons.arrow[l.orderBy.toLowerCase()]}),cm.appendChild(e.nodes.sort,e.nodes.inner)))},S=function(e,t,n){e.nodes.filter={},e.access&&(e.nodes.filter.container=cm.node("td",e.nodes.filter.inner=cm.node("div",{classes:"inner"})),cm.appendChild(e.nodes.filter.container,n),l.triggerEvent("onRenderFilterItem",{nodes:e.nodes.filter,item:e,i:t}))},k=function(e,t,n){var a={i:n,index:t[l.params.uniqueKey],data:t,children:[],childrenData:[],isChecked:!1,isParent:!1,isFirstLevel:!0,status:t._status||!1,classes:[],nodes:{cols:[]},cells:[]};a.isFirstLevel=l.rows===e,l.params.groupBy&&(a.childrenData=a.data[l.params.groupBy],a.isParent=!cm.isEmpty(a.childrenData)),a.classes.push(a.isFirstLevel?"is-first-level":"is-child-level"),l.nodes.content.appendChild(a.nodes.container=cm.node("tr",{classes:a.classes})),cm.forEach(l.params.cols,function(e){a.cells.push(_(e,a))}),l.params.groupBy&&cm.forEach(a.childrenData,function(e,t){k(a.children,e,t)}),e.push(a)},_=function(t,n){var a={nodes:{}};if(t.access){switch(a.data=cm.objectPath(t.key,n.data),a.text=cm.isEmpty(a.data)?"":a.data,a.titleData=cm.objectPath(t.titleKey,n.data),a.title=cm.isEmpty(t.titleText)?cm.isEmpty(a.titleData)?a.text:a.titleData:t.titleText,cm.isString(t.classes)&&(t.classes=[t.classes]),n.nodes.container.appendChild(a.nodes.container=cm.node(t.tagName,{classes:t.classes})),t.wrap||t.textOverflow?(a.nodes.inner=cm.node("div",{classes:"inner"}),a.nodes.container.appendChild(a.nodes.inner),t.textOverflow&&cm.addClass(a.nodes.inner,"is-nowrap")):a.nodes.inner=a.nodes.container,t.type){case"number":P(t,n,a);break;case"date":T(t,n,a);break;case"icon":A(t,n,a);break;case"url":R(t,n,a);break;case"checkbox":L(t,n,a);break;case"links":M(t,n,a);break;case"actions":O(t,n,a);break;case"empty":break;default:x(t,n,a)}n.status&&N(n,n.status),t.showTitle&&(a.nodes.node?a.nodes.node.title=a.title:a.nodes.inner.title=a.title),cm.isFunction(t.onClick)&&cm.addEvent(a.nodes.node||a.nodes.inner,"click",function(e){t.preventDefault&&cm.preventDefault(e),t.onClick(l,{nodes:a.nodes,col:t,row:n,cell:a})}),cm.isFunction(t.onRender)&&t.onRender(l,{nodes:a.nodes,col:t,row:n,cell:a}),a.nodes.inner.hasChildNodes()||cm.addClass(a.nodes.container,"is-empty")}return a},x=function(e,t,n){cm.isNode(n.text)?cm.appendChild(n.text,n.nodes.inner):n.nodes.inner.innerHTML=n.text},P=function(e,t,n){n.nodes.inner.innerHTML=cm.splitNumber(n.text)},T=function(e,t,n){l.params.dateFormat!==l.params.visibleDateFormat?n.nodes.inner.innerHTML=cm.parseFormatDateTime(n.text,l.params.dateFormat,l.params.visibleDateFormat):n.nodes.inner.innerHTML=n.text},A=function(e,t,n){n.text=cm.decode(n.text),n.href=e.urlKey&&t.data[e.urlKey]?cm.decode(t.data[e.urlKey]):n.text,n.label=cm.isEmpty(e.altText)?n.text:e.altText,cm.isEmpty(n.href)?n.nodes.node=cm.node("div",{classes:e.class,title:n.label}):n.nodes.node=cm.node("a",{classes:e.class,title:n.label,target:e.target,rel:e.rel,href:n.href}),cm.addClass(n.nodes.node,"icon linked inline"),n.nodes.inner.appendChild(n.nodes.node)},R=function(e,t,n){n.text=cm.decode(n.text),n.href=e.urlKey&&t.data[e.urlKey]?cm.decode(t.data[e.urlKey]):n.text,n.label=cm.isEmpty(e.altText)?n.text:e.altText,cm.isEmpty(n.href)||(n.nodes.node=cm.node("a",{target:e.target,rel:e.rel,href:n.href},n.label),n.nodes.inner.appendChild(n.nodes.node))},L=function(e,t,n){cm.addClass(n.nodes.container,"control"),n.nodes.node=cm.node("input",{type:"checkbox"}),n.nodes.inner.appendChild(n.nodes.node),t.nodes.checkbox=n.nodes.node,t.data._checked&&H(t,!1),cm.addEvent(n.nodes.node,"click",function(){(t.isChecked?F:H)(t,!0)})},M=function(t,n,a){a.classes=["pt__links",["pull",t.linksParams.align].join("-"),t.class],a.nodes.node=cm.node("div",{classes:a.classes},a.nodes.itemsList=a.nodes.linksList=cm.node("ul")),cm.getConstructor(l.params.linksMenu.constructor,function(e){a.links=D(t,n,a,"links"),a.controller=new e(cm.merge(l.params.linksMenu.constructorParams,{items:a.links,nodes:{container:a.nodes.node,holder:a.nodes.itemsList}})),0<a.controller.getItems().length&&cm.appendChild(a.nodes.node,a.nodes.inner)})},O=function(t,n,a){a.classes=["pt__links",["pull",t.actionsParams.align].join("-"),t.class],a.nodes.node=cm.node("div",{classes:a.classes}),cm.getConstructor(l.params.actionsMenu.constructor,function(e){a.actions=D(t,n,a,"actions"),a.controller=new e(cm.merge(l.params.actionsMenu.constructorParams,{container:a.nodes.node,items:a.actions,events:{onShow:function(){cm.addClass(n.nodes.container,"highlight")},onHide:function(){cm.removeClass(n.nodes.container,"highlight")}}})),0<a.controller.getItems().length&&cm.appendChild(a.nodes.node,a.nodes.inner)})},D=function(n,a,r,e){var o=[];return cm.forEach(n[e],function(e,t){(e=j(n,a,r,e))&&o.push(e)}),o},j=function(e,t,n,a){a=cm.merge({name:"",label:"",icon:null,access:!0,status:null,classes:[],attr:{},preventDefault:e.preventDefault,data:t.data,dataKey:"data",dataPath:null,constructor:!1,constructorParams:{},callback:null,callbackParams:{}},a);var e=!cm.isArray(n.data)||cm.isEmpty(a.name),r=cm.isArray(n.data)&&cm.inArray(n.data,a.name);if(a.access&&(e||r))return cm.forEach(t.data,function(e,t){a.attr=cm.replaceDeep(a.attr,new RegExp([cm.strWrap(t,"%"),cm.strWrap(t,"%25")].join("|"),"g"),e)}),e={rowItem:t,cellItem:n},a.constructor?a.constructorParams=cm.merge(a.constructorParams,e):a.callbackParams=cm.merge(a.callbackParams,e),a},I=function(){var n,a,r,o,s,i;cm.forEach(l.params.cols,function(e){e.key===l.sortBy&&(n=e)}),l.params.data.sort(function(e,t){switch(a=e[l.sortBy],r=t[l.sortBy],n.type){case"html":return o=cm.getTextNodesStr(cm.strToHTML(a)),s=cm.getTextNodesStr(cm.strToHTML(r)),i=o<s?-1:s<o?1:0,"ASC"===l.orderBy?i:-1*i;case"date":return o=cm.parseDate(a,l.params.dateFormat),s=cm.parseDate(r,l.params.dateFormat),"ASC"===l.orderBy?o-s:s-o;case"number":return i=a-r,"ASC"===l.orderBy?i:-1*i;default:return o=a?a.toLowerCase():"",s=r?r.toLowerCase():"",i=o<s?-1:s<o?1:0,"ASC"===l.orderBy?i:-1*i}}),l.triggerEvent("onSort",{sortBy:l.sortBy,orderBy:l.orderBy})},H=function(e,t){e.isChecked||(e.nodes.checkbox&&(e.nodes.checkbox.checked=!0),e.isChecked=!0,e.data._checked=!0,e.status&&cm.removeClass(e.nodes.container,e.status),cm.addClass(e.nodes.container,"active"),l.checked.push(e),(l.checked.length?a:r)(),t&&l.triggerEvent("onCheck",e))},F=function(e,t){e.isChecked&&(e.nodes.checkbox&&(e.nodes.checkbox.checked=!1),e.isChecked=!1,e.data._checked=!1,cm.removeClass(e.nodes.container,"active"),e.status&&cm.addClass(e.nodes.container,e.status),cm.arrayRemove(l.checked,e),(l.checked.length?a:r)(),t)&&l.triggerEvent("onUnCheck",e)},N=function(e,t){e.status=t,e.data._status=t,cm.removeClass(e.nodes.container,l.params.statuses.join(" ")),e.isChecked?cm.addClass(e.nodes.container,"active"):cm.inArray(l.params.statuses,t)&&cm.addClass(e.nodes.container,t)};l.callbacks.paginationAfterPrepare=function(e,t,n){return n.url=cm.strReplace(n.url,{"%sortBy%":e.sortBy,"%orderBy%":e.orderBy,"%orderByLower%":e.orderBy.toLowerCase()}),n.params=cm.objectReplace(n.params,{"%sortBy%":e.sortBy,"%orderBy%":e.orderBy,"%orderByLower%":e.orderBy.toLowerCase()}),n},l.callbacks.filter=function(e,t){return t},l.callbacks.renderPage=function(e,t){e.triggerEvent("onPageRenderStart",{page:t}),e.isAjax||(t.data=e.getStaticPageData(t.page)),!cm.isEmpty(t.data)&&cm.isArray(t.data)&&(t.data=e.callbacks.filter(e,t.data)),e.triggerEvent("onDataFilterEnd",t.data),e.renderPageTable(t),e.triggerEvent("onPageRenderEnd",{page:t})},l.renderPageTable=function(e){cm.isEmpty(e.data)?(l.params.renderEmptyTable&&C(e.page,e.data,e.container),o(e.container,e.message)):C(e.page,e.data,e.container)},l.rebuild=function(){return l.components.pagination&&l.components.pagination.rebuild(),l},l.redraw=function(){return l.components.helper&&l.components.helper.redraw(),l},l.setData=function(e){return u(e),l},l.setAction=function(e,t,n){return l.components.pagination&&l.components.pagination.setAction(e,t,n),l},l.getAction=function(){return l.components.pagination&&l.components.pagination.getAction()||{}},l.getCurrentAction=function(){return l.components.pagination&&l.components.pagination.getCurrentAction()||{}},l.abort=function(){return l.components.pagination&&l.components.pagination.abort(),l},l.getRows=function(){return l.rows},l.check=function(t){return cm.forEach(l.rows,function(e){e.index==t&&H(e,!0)}),l},l.unCheck=function(t){return cm.forEach(l.rows,function(e){e.index==t&&F(e,!0)}),l},l.checkAll=function(){return l.nodes.checkbox&&(l.nodes.checkbox.checked=!0),cm.forEach(l.rows,function(e){H(e)}),l.isCheckedAll||(l.isCheckedAll=!0,l.triggerEvent("onCheckAll")),l},l.unCheckAll=function(){return l.nodes.checkbox&&(l.nodes.checkbox.checked=!1),cm.forEach(l.rows,function(e){F(e)}),l.isCheckedAll&&(l.isCheckedAll=!1,l.triggerEvent("onUnCheckAll")),l},l.getChecked=function(){return l.checked},l.getCheckedData=function(){var t=[];return cm.forEach(l.checked,function(e){t.push(e.data)}),t},l.getCheckedIndexes=function(){var t=[];return cm.forEach(l.checked,function(e){t.push(e.data[l.params.uniqueKey])}),t},l.getStaticPageData=function(e){var t=l.params.perPage*(e-1),e=Math.min(l.params.perPage*e,l.params.data.length);return l.params.data.slice(t,e)},l.setRowStatus=function(t,n){return cm.forEach(l.rows,function(e){e.index==t&&N(e,n)}),l},l.clearRowStatus=function(t){return cm.forEach(l.rows,function(e){e.index==t&&((e=e).status=null,e.data._status=null,cm.removeClass(e.nodes.container,l.params.statuses.join(" ")))}),l},l.getRowsByStatus=function(t){var n=[];return cm.forEach(l.rows,function(e){e.status==t&&n.push(e)}),n},l.getToolbar=function(){return l.components.toolbar},l.destruct=function(){return l.isDestructed||(l.isDestructed=!0,l.removeFromStack(),cm.remove(l.nodes.container)),l},l.remove=function(){return l.params.destructOnRemove&&l.destruct(),cm.remove(l.nodes.container),l},l.setParams(e),l.convertEvents(l.params.events),l.getDataConfig(l.params.node),l.callbacksProcess(),t(),n(),l.addToStack(l.nodes.container),l.triggerEvent("onRender")}),cm.define("Com.GridlistFilter",{extend:"Com.AbstractController",events:["onRenderContentStart","onRenderContent","onRenderContentProcess","onRenderContentEnd"],params:{controllerEvents:!0,renderStructure:!0,renderStructureContent:!0,embedStructureOnRender:!0,embedStructure:"append",controller:null,minLength:0,delay:"cm._config.requestDelay",action:{}},strings:{placeholder:"Type query..."}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.GridlistFilter",function(e,t,n){var a=n._inherit;n.construct=function(){return this.requestDelay=null,this.inputEventHandler=this.inputEvent.bind(this),a.prototype.construct.apply(this,arguments),this},n.renderView=function(){var e=this;return e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__gridlist__filter"}),cm.appendChild(e.nodes.contentContainer,e.nodes.container),e.params.renderStructureContent&&(e.nodes.contentContainer=e.renderContent(),cm.appendChild(e.nodes.contentContainer,e.nodes.container)),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd"),e},n.renderViewModel=function(){return a.prototype.renderViewModel.apply(this,arguments),this.params.controller&&(this.components.controller=this.params.controller),this},n.renderContent=function(){var e={};return this.nodes.content=e,this.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"pt__input"},e.input=cm.node("input",{type:"search",autocomplete:"off",placeholder:this.lang("placeholder")}),e.icon=cm.node("div",{class:"icon icon svg__search"})),this.triggerEvent("onRenderContent"),this.triggerEvent("onRenderContentProcess"),cm.addEvent(e.input,"input",this.inputEventHandler),this.triggerEvent("onRenderContentEnd"),e.container},n.inputEvent=function(){var e=this,t=e.nodes.content.input.value,n=cm.clone(e.params.action);e.requestDelay&&clearTimeout(e.requestDelay),e.components.controller&&e.components.controller.abort(),t.length>=e.params.minLength&&(e.requestDelay=setTimeout(function(){e.callbacks.request(e,{config:n,query:t})},e.params.delay))},n.callbacks.prepare=function(e,t){return t.config=e.callbacks.beforePrepare(e,t),t.config=cm.objectReplace(t.config,{"%query%":t.query}),t.config=e.callbacks.afterPrepare(e,t),t.config},n.callbacks.beforePrepare=function(e,t){return t.config},n.callbacks.afterPrepare=function(e,t){return t.config},n.callbacks.request=function(e,t){(t=cm.merge({response:null,data:null,config:null,query:""},t)).config=e.callbacks.prepare(e,t),e.components.controller&&e.components.controller.setAction({params:t.config})},n.reset=function(){return this.nodes.content.input.value="",this.inputEvent(),this}}),cm.define("Com.GridlistHelper",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRender","onColumnsChange","onColumnsResize","onEnableEditing","onEnableEditable","onDisableEditing","onDisableEditable"],params:{node:cm.node("div"),name:"",isEditing:!0,customEvents:!0,columns:{isEditing:!1,customEvents:!1,showDrag:!1,ajax:{type:"json",method:"post",url:"",params:""}}}},function(e){var n=this,t=(n.nodes={container:cm.node("div"),thead:cm.node("thead"),items:[]},n.components={},n.isEditing=null,function(){n.nodes.container=n.params.node}),a=function(){n.nodes.thead=n.nodes.container.getElementsByTagName("thead")[0]||n.nodes.thead,n.nodes.items=n.nodes.thead.getElementsByTagName("th"),cm.getConstructor("Com.ColumnsHelper",function(e){n.components.columns=new e(cm.merge(n.params.columns,{node:n.nodes.container,items:n.nodes.items,events:{onDragStart:function(){cm.addClass(n.nodes.container,"is-active")},onDragStop:function(){cm.removeClass(n.nodes.container,"is-active")},onChange:function(e,t){n.triggerEvent("onColumnsChange",t)},onResize:function(e,t){n.triggerEvent("onColumnsResize",t)}}}))}),n.params.customEvents&&(cm.customEvent.add(n.params.node,"redraw",function(){n.redraw()}),cm.customEvent.add(n.params.node,"enableEditable",function(){n.enableEditing()}),cm.customEvent.add(n.params.node,"disableEditable",function(){n.disableEditing()})),n.params.isEditing&&n.enableEditing()};n.enableEditing=function(){return"boolean"==typeof n.isEditing&&n.isEditing||(n.isEditing=!0,cm.addClass(n.params.node,"is-editing is-editable"),n.components.columns&&n.components.columns.enableEditing(),n.triggerEvent("onEnableEditing"),n.triggerEvent("onEnableEditable")),n},n.disableEditing=function(){return"boolean"==typeof n.isEditing&&!n.isEditing||(n.isEditing=!1,cm.removeClass(n.params.node,"is-editing is-editable"),n.components.columns&&n.components.columns.disableEditing(),n.triggerEvent("onDisableEditing"),n.triggerEvent("onDisableEditable")),n},n.redraw=function(){return n.components.columns&&n.components.columns.redraw(),n},n.setParams(e),n.convertEvents(n.params.events),n.getDataNodes(n.params.node),n.getDataConfig(n.params.node),t(),a(),n.addToStack(n.nodes.container),n.triggerEvent("onRender")}),cm.define("Com.HelpBubble",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,target:null,title:null,titleAlign:"left",content:null,type:"tooltip",showIcon:!0,showLabel:!1,tooltipConstructor:"Com.Tooltip",tooltipParams:{hold:!0,targetEvent:["click","hover"],className:"com__help-bubble__tooltip"},containerConstructor:"Com.DialogContainer",containerParams:{renderTitle:!0,destructOnClose:!0}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.HelpBubble",function(e,t,n,a){n.onValidateParams=function(){switch(this.params.align){case"left":this.params.tooltipParams.left=0;break;case"right":this.params.tooltipParams.left="targetWidth - selfWidth"}},n.onDestruct=function(){this.components.container&&cm.isFunction(this.components.container.destruct)&&this.components.container.destruct(),this.components.tooltip&&cm.isFunction(this.components.tooltip.destruct)&&this.components.tooltip.destruct()},n.renderView=function(){var e=this;e.nodes.container=cm.node("span",{class:"com__help-bubble"},e.nodes.button=cm.node("a",{class:"com__help-bubble__title"}),e.nodes.content=cm.node("span",{class:"com__help-bubble__content"})),cm.addClass(e.nodes.container,["pull",e.params.align].join("-")),e.params.showIcon&&(e.nodes.icon=cm.node("span",{class:"icon default linked"}),cm.appendChild(e.nodes.icon,e.nodes.button)),e.params.showLabel&&(e.nodes.label=cm.node("span",{class:"label"},e.params.title),cm.appendChild(e.nodes.label,e.nodes.button))},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),cm.isEmpty(t.params.content)||t.set(t.params.content),"container"===t.params.type?cm.getConstructor(t.params.containerConstructor,function(e){t.components.container=new e(cm.merge(t.params.containerParams,{node:t.nodes.button,title:t.params.title,titleAlign:t.params.titleAlign,content:t.nodes.content}))}):cm.getConstructor(t.params.tooltipConstructor,function(e){t.components.tooltip=new e(t.params.tooltipParams),t.components.tooltip.setTarget(t.nodes.button).setContent(t.nodes.content)})},n.set=function(e){return cm.isNode(this.nodes.content)||(this.nodes.content=cm.node("div")),cm.clearNode(this.nodes.content),cm.isString(e)||cm.isNumber(e)?this.nodes.content.innerHTML=e:cm.appendNodes(e,this.nodes.content),this}}),cm.define("Com.ImageBox",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,customEvents:!0,animated:!1,effect:"none",zoom:!1,scrollNode:window,galleryPopup:{constructor:"Com.GalleryPopup",constructorParams:{showCounter:!1}}}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.ImageBox",function(e,t,n,a){n.onConstructStart=function(){this.nodes={item:{},buttons:{preview:cm.node("div")}},this.dimensions={},this.pageDimensions={},this.isProcessed=!1,this.animProcessHandler=this.animProcess.bind(this)},n.onRedraw=function(){this.params.animated&&(this.animRestore(),this.animProcess())},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),t.params.animated&&(cm.addClass(t.params.node,"cm-animate"),cm.addClass(t.params.node,["pre",t.params.effect].join("-")),cm.addEvent(t.params.scrollNode,"scroll",t.animProcessHandler),t.animProcess()),t.params.zoom&&(cm.getConstructor(t.params.galleryPopup.constructor,function(e){t.components.popup=new e(t.params.galleryPopup.constructorParams)}),t.components.popup.collectItem(t.nodes.item),cm.addEvent(t.nodes.buttons.preview,"click",t.components.popup.openHandler)),cm.customEvent.add(t.params.node,"redraw",function(){t.redraw()})},n.getDimensions=function(){this.dimensions=cm.getRect(this.params.node)},n.getPageDimensions=function(){this.pageDimensions=cm.getPageSize()},n.animProcess=function(){var e=this;e.isProcessed||(e.getDimensions(),e.getPageDimensions(),e.dimensions.height<e.pageDimensions.winHeight?0<=e.dimensions.top&&e.dimensions.bottom<=e.pageDimensions.winHeight&&e.animSet():(e.dimensions.top<0&&e.dimensions.bottom>=e.pageDimensions.winHeight/2||e.dimensions.bottom>e.pageDimensions.winHeight&&e.dimensions.top<=e.pageDimensions.winHeight/2)&&e.animSet())},n.animSet=function(){this.isProcessed=!0,cm.addClass(this.params.node,"animate__animated"),cm.addClass(this.params.node,["animate",this.params.effect].join("__"))},n.animRestore=function(){this.isProcessed=!1,cm.removeClass(this.params.node,"animate__animated"),cm.removeClass(this.params.node,["animate",this.params.effect].join("__"))}}),cm.define("Com.ImagePreviewContainer",{extend:"Com.AbstractContainer",params:{constructor:"Com.GalleryPopup",params:{showCounter:!1,showTitle:!0},placeholder:!1,types:{video:cm._config.fileTypes.video,embed:cm._config.fileTypes.embed}}},function(){this.item={},Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("Com.ImagePreviewContainer",function(e,t,n,a){n.onRenderControllerProcess=function(){return this.setController(),this},n.set=function(e){return this.clear(),this.setData(e),this.setController(),this},n.clear=function(){return this.components.controller&&this.components.controller.clear(),this},n.setData=function(e){return this.item={type:"image",src:e.url,mime:e.mime||e.type,title:e.name},cm.isEmpty(this.item.mime)||!this.params.types.embed.test(this.item.mime)&&!this.params.types.video.test(this.item.mime)||(this.item.type="iframe"),this},n.setController=function(){return this.components.controller&&this.components.controller.add(this.item),this}}),cm.define("Com.Menu",{extend:"Com.AbstractController",events:["onShow","onHide"],params:{controllerEvents:!0,renderStructure:!1,embedStructureOnRender:!1,embedStructure:"append",modifiers:["link"],items:[],item:{preventDefault:!0},icon:{icon:"cm-i__chevron-down",classes:["cm-i","xx-small"]},tooltip:{enable:!0,constructor:"Com.Tooltip",constructorParams:{className:"com__menu-tooltip",theme:null,hold:!0,delay:0,ariaRole:"menu",top:"targetHeight",left:0,adaptiveFrom:null,adaptiveTop:null,adaptiveLeft:null,minWidth:"targetWidth",targetEvent:"click",preventDefault:!0,stopPropagation:!0,hideOnReClick:!0,hideOnOut:!0}}},strings:{label:"Actions"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Menu",function(e,t,n,a){n.construct=function(){this.nodes={holder:cm.node("div"),button:cm.node("div"),target:cm.node("div")},this.items=[],this.currentIndex=null,this.previousIndex=null,a.prototype.construct.apply(this,arguments)},n.setAttributes=function(){var t=this;a.prototype.setAttributes.apply(t,arguments),cm.forEach(t.params.modifiers,function(e){cm.addClass(t.nodes.container,"com__menu--".concat(e))})},n.renderView=function(){this.nodes.container=cm.node("div",{classes:"com__menu",title:this.msg("label")},cm.node("div",{classes:"label"},this.msg("label")),this.nodes.icon=this.renderIconView(),this.nodes.target=cm.node("div",{classes:["pt__menu","pt__menu--tooltip"]},this.nodes.holder=cm.node("ul",{classes:"pt__menu-dropdown"}))),this.nodes.button=this.nodes.container},n.renderIconView=function(){var e=cm.extend(this.params.icon.classes,[this.params.icon.icon]);return cm.node("div",{classes:e})},n.renderViewModel=function(){a.prototype.renderViewModel.apply(this,arguments),this.renderItems(this.params.items),this.params.tooltip.enable&&this.renderTooltip()},n.renderTooltip=function(){var t=this;cm.getConstructor(t.params.tooltip.constructor,function(e){t.components.tooltip=new e(cm.merge(t.params.tooltip.constructorParams,{target:t.nodes.container||t.nodes.button,content:t.nodes.target,events:{onShowStart:function(){return t.afterShow()},onHideStart:function(){return t.afterHide()}}}))}),t.nodes.button.setAttribute("role","button"),t.nodes.button.setAttribute("tabindex","0"),t.nodes.button.setAttribute("aria-haspopup","true"),t.nodes.button.setAttribute("aria-controls","menu"),t.nodes.button.setAttribute("aria-expanded","false"),cm.addEvent(t.nodes.button,"focus",t.afterFocus.bind(t)),cm.addEvent(t.nodes.button,"blur",t.afterBlur.bind(t)),cm.addEvent(t.nodes.button,"keydown",t.afterKeyPress.bind(t))},n.afterFocus=function(){cm.addClass(this.nodes.button,"highlight"),cm.addClass(this.nodes.icon,"highlight")},n.afterBlur=function(){cm.removeClass(this.nodes.button,"highlight"),cm.removeClass(this.nodes.icon,"highlight"),this.components.tooltip.isOwnEventTarget()||this.hide()},n.afterShow=function(){cm.addClass(this.nodes.button,"active"),cm.addClass(this.nodes.icon,"active"),this.nodes.button.setAttribute("aria-expanded","true"),this.nodes.button.focus();var e=this.components.tooltip.getLastTargetEvent();"keypress"===(null==e?void 0:e.type)&&this.selectItem(this.findFirstIndex()),this.triggerEvent("onShow")},n.afterHide=function(){cm.removeClass(this.nodes.button,"active"),cm.removeClass(this.nodes.icon,"active"),this.nodes.button.setAttribute("aria-expanded","false"),this.nodes.button.focus(),this.unselectItem(this.currentIndex),this.triggerEvent("onHide")},n.afterKeyPress=function(e){var t,n=this;n.components.tooltip.isShow&&n.items.filter(function(e){return!e.params.hidden}).length&&(t={ArrowUp:function(){return n.selectItem(n.findPreviousIndex(n.currentIndex))},ArrowDown:function(){return n.selectItem(n.findNextIndex(n.currentIndex))},Home:function(){return n.selectItem(n.findFirstIndex())},End:function(){return n.selectItem(n.findLastIndex())},Space:function(){return n.triggerItemAction(n.currentIndex)},Enter:function(){return n.triggerItemAction(n.currentIndex)}})[e.code]&&(e.preventDefault(),t[e.code]())},n.findFirstIndex=function(){return this.items.findIndex(function(e){return!e.params.hidden})},n.findLastIndex=function(){return this.items.findLastIndex(function(e){return!e.params.hidden})},n.findPreviousIndex=function(e){if(!cm.isNumber(e))return this.findLastIndex();for(var t=(e-1+this.items.length)%this.items.length;this.getItem(t).params.hidden;)t=(t-1+this.items.length)%this.items.length;return t},n.findNextIndex=function(e){if(!cm.isNumber(e))return this.findFirstIndex();for(var t=(e+1)%this.items.length;this.getItem(t).params.hidden;)t=(t+1)%this.items.length;return t},n.reArrangeItems=function(){var t=this;cm.forEach(t.items,function(e){e.params.hidden?cm.remove(e.nodes.container):cm.appendChild(e.nodes.container,t.nodes.holder)})},n.renderItems=function(e){var t=this;cm.forEach(e,function(e){return t.renderItem(e)})},n.renderItem=function(e){var t=this,n=cm.merge({name:"",label:"",icon:null,access:!0,status:null,hidden:!1,classes:[],attr:{},data:null,dataKey:"data",dataPath:null,preventDefault:!0,constructor:!1,constructorParams:{},callback:null,callbackParams:{},afterRender:null},t.params.item),a={nodes:{},params:cm.merge(n,e)};a.params.access&&(a.params.attr.classes=cm.merge(a.params.classes,a.params.attr.classes),a.nodes.container=cm.node("li",a.nodes.link=cm.node("a",a.params.attr,a.params.label)),cm.isNode(a.params.icon)&&(a.nodes.icon=a.params.icon.cloneNode(!0),cm.insertFirst(a.nodes.icon,a.nodes.link),cm.addClass(a.nodes.container,"has-icon")),cm.isEmpty(a.params.status)||cm.addClass(a.nodes.container,a.params.status),(a.params.constructor||cm.isFunction(a.params.callback))&&(a.nodes.link.setAttribute("role","button"),a.nodes.link.setAttribute("tabindex",0)),t.params.tooltip.enable&&(cm.addEvent(a.nodes.link,"mouseenter",function(){return t.selectItem(a)}),cm.addEvent(a.nodes.link,"mouseleave",function(){return t.unselectItem(a)})),a.params.constructor?t.renderItemController(a):t.renderItemAction(a),cm.isFunction(a.params.afterRender)&&a.params.afterRender(a),a.params.hidden?cm.addClass(a.nodes.container,"is-hidden"):cm.appendChild(a.nodes.container,t.nodes.holder),t.items.push(a))},n.renderItemController=function(n){var a=this;cm.getConstructor(n.params.constructor,function(e){var t=cm.merge(n.params.constructorParams,_defineProperty(_defineProperty({node:n.nodes.link,actionItem:n},n.params.dataKey,cm.reducePath(n.params.dataPath,n.params.data)),"events",{onRenderControllerEnd:function(){return a.hide(!1)}}));n.controller=new e(t)})},n.renderItemAction=function(n){var a=this;cm.click.add(n.nodes.link,function(e){var t;n.params.preventDefault&&cm.preventDefault(e),cm.isFunction(n.params.callback)&&(t=cm.merge(n.params.callbackParams,_defineProperty({node:n.nodes.link,actionItem:n},n.params.dataKey,cm.reducePath(n.params.dataPath,n.params.data))),n.params.callback(e,t)),a.hide(!1)})},n.triggerItemAction=function(e){(e=this.getItem(e))&&cm.triggerEvent(e.nodes.link,"click")},n.selectItem=function(e){(e=this.getItem(e))&&(this.unselectItem(this.currentIndex),this.currentIndex=cm.arrayIndex(this.items,e),cm.addClass(e.nodes.link,"highlight"))},n.unselectItem=function(e){(e=this.getItem(e))&&(cm.arrayIndex(this.items,e)===this.currentIndex&&(this.previousIndex=this.currentIndex,this.currentIndex=null),cm.removeClass(e.nodes.link,"highlight"))},n.toggleItemVisibility=function(e,t){(e=this.getItem(e))&&(e.params.hidden=!t,cm.toggleClass(e.nodes.container,"is-hidden",!t),this.reArrangeItems())},n.show=function(){var e;return null!=(e=this.components.tooltip)&&e.show(),this},n.hide=function(){var e;return null!=(e=this.components.tooltip)&&e.hide(),this},n.addItem=function(e){return this.renderItem(e),this},n.getItem=function(t){return cm.isNumber(t)?this.items[t]:cm.isString(t)?this.items.find(function(e){return e.params.name===t}):cm.isObject(t)?t:null},n.getItems=function(){return this.items},n.getContainer=function(){return this.nodes.container},n.getNodes=function(e){return this.nodes[e]||this.nodes}}),cm.define("Com.MultiField",{extend:"Com.AbstractController",events:["onItemAdd","onItemAddEnd","onItemRemove","onItemRemoveEnd","onItemShow","onItemShowEnd","onItemHide","onItemHideEnd","onItemProcess","onItemProcessEnd","onItemSort","onItemIndexChange"],params:{renderStructure:!1,embedStructure:"append",embedStructureOnRender:!1,mode:"create",sortable:!0,showControls:!0,showList:!0,renderItems:0,max:0,template:null,templateAttributeReplace:!1,templateAttribute:"name",duration:"cm._config.animDurationShort",theme:"",icons:{drag:"icon drag linked",add:"icon add linked",remove:"icon remove linked"},"Com.Sortable":{process:!1}},strings:{add:"Add",remove:"Remove"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.MultiField",function(e,t,n,r){n.construct=function(){this.nodes={container:cm.node("div"),content:cm.node("div"),toolbar:{container:cm.node("div"),add:cm.node("div"),buttons:[]},items:[]},this.components={},this.items=[],this.buttons=[],this.isToolbarVisible=!0,r.prototype.construct.apply(this,arguments)},n.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__multifield"}),e.nodes.content=cm.node("div",{class:"com__multifield__content"}),e.params.showList&&cm.appendChild(e.nodes.content,e.nodes.container),e.params.showControls&&(e.nodes.toolbarContainer=e.renderToolbarView(),cm.appendChild(e.nodes.toolbarContainer,e.nodes.container)),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd")},n.renderToolbarView=function(){var t=this,e={};return e.container=cm.node("div",{class:"com__multifield__toolbar"},e.content=cm.node("div",{class:"com__multifield__item"},e.add=cm.node("div",{class:t.params.icons.add,title:t.lang("add")}))),"create"===t.params.mode?cm.addEvent(e.add,"click",function(e){cm.preventDefault(e),t.renderItem()}):cm.remove(t.nodes.toolbar.add),(t.nodes.toolbarView=e).container},n.renderViewModel=function(){var e,a=this;r.prototype.renderViewModel.apply(a,arguments),a.params.sortable&&cm.getConstructor("Com.Sortable",function(e,t){a.components.sortable=new e(a.params[t]),a.components.sortable.addEvent("onSort",function(e,t){var n=a.items.find(function(e){return e.container===t.node});n&&a.sortItem(n,t.index)}),a.components.sortable.addGroup(a.nodes.content)}),a.params.renderStructure||a.processCollectedView(),"create"===a.params.mode&&(e=Math.max(a.params.renderItems-a.items.length,0),cm.forEach(e,function(e){a.renderItem()}))},n.processCollectedView=function(){var t=this;t.nodes.toolbarContainer=t.nodes.toolbar.container,"create"===t.params.mode?cm.addEvent(t.nodes.toolbar.add,"click",function(e){cm.preventDefault(e),t.renderItem()}):(cm.remove(t.nodes.toolbar.add),cm.forEach(t.nodes.toolbar.buttons,function(e){t.processButtons(e)})),cm.forEach(t.nodes.items,function(e){t.processItem(e)})},n.setAttributes=function(){r.prototype.setAttributes.apply(this,arguments),cm.addClass(this.nodes.container,this.params.theme)},n.processButtons=function(t){var n=this;t=cm.merge({id:null,visible:null},t),t=cm.merge(t,n.getNodeDataConfig(t.container)),cm.addEvent(t.container,"click",function(e){cm.preventDefault(e);e=n.getItemById(t.id);e&&!e.visible&&n.showItem(e)}),n.buttons.push(t)},n.toggleToolbarVisibility=function(e){var t,n=this;n.params.showControls&&((t=n.getButtonById(e.id))&&!e.visible&&n.showButton(t),"create"===n.params.mode?0<n.params.max&&n.items.length===n.params.max?n.hideToolbar():n.showToolbar():n.isAllItemsVisible()?n.hideToolbar():n.showToolbar(),t)&&e.visible&&n.hideButton(t)},n.showButton=function(e){e.visible=!0,cm.removeClass(e.container,"is-hidden")},n.hideButton=function(e){e.visible=!1,cm.addClass(e.container,"is-hidden")},n.showToolbar=function(){var e=this;return e.isToolbarVisible||(e.isToolbarVisible=!0,e.nodes.toolbarContainer.style.overflow="hidden",cm.transition(e.nodes.toolbarContainer,{properties:{height:e.nodes.toolbarContainer.scrollHeight+"px",opacity:1},duration:e.params.duration,easing:cm._config.motionSmooth,clear:!0,onStop:function(){e.nodes.toolbarContainer.style.overflow=""}})),e},n.hideToolbar=function(){return this.isToolbarVisible&&(this.isToolbarVisible=!1,this.nodes.toolbarContainer.style.overflow="hidden",cm.transition(this.nodes.toolbarContainer,{properties:{height:"0px",opacity:0},duration:this.params.duration,easing:cm._config.motionSmooth})),this},n.renderItem=function(e,t){var n=this;(0===n.params.max||n.items.length<n.params.max)&&(e=cm.merge({id:null,showControls:null,sortable:null,visible:null},e),t=cm.merge({triggerEvents:!0,immediately:!1,callback:function(){}},t),cm.isBoolean(e.showControls)||(e.showControls=n.params.showControls),cm.isBoolean(e.sortable)||(e.sortable=n.params.sortable),e.container=cm.node("div",{class:"com__multifield__item","data-node":"items:[]:container"},e.content=e.field=cm.node("div",{class:"field","data-node":"field"})),n.renderItemTemplate(n.params.template,e),n.params.showControls&&e.showControls&&(e.remove=cm.node("div",{class:n.params.icons.remove,title:n.lang("remove"),"data-node":"remove"}),cm.appendChild(e.remove,e.container)),n.params.sortable&&e.sortable&&(e.drag=cm.node("div",{class:n.params.icons.drag,"data-node":"drag"}),n.params.showControls?cm.insertFirst(e.drag,e.container):cm.appendChild(e.drag,e.container)),cm.appendChild(e.container,n.nodes.content),t.triggerEvents&&n.triggerEvent("onItemAdd",e),n.processItem(e,{triggerEvents:t.triggerEvents,immediately:t.immediately,callback:function(e){t.triggerEvents&&n.triggerEvent("onItemAddEnd",e),t.callback(e)}}))},n.processItem=function(t,e){var n=this;t=cm.merge({id:null,fieldForEnable:null,showControls:null,sortable:null,visible:null},t),e=cm.merge({triggerEvents:!0,immediately:!1,callback:function(){}},e),t=cm.merge(t,n.getNodeDataConfig(t.container)),cm.isBoolean(t.showControls)||(t.showControls=n.params.showControls),cm.isBoolean(t.sortable)||(t.sortable=n.params.sortable),cm.isBoolean(t.visible)||(t["field-hidden-visible"]&&!cm.isEmpty(t["field-hidden-visible"].value)?t.visible="1"===t["field-hidden-visible"].value:t.visible=!0),n.params.showControls&&t.showControls?cm.addEvent(t.remove,"click",function(e){cm.preventDefault(e),"create"===n.params.mode?n.deleteItem(t):n.hideItem(t)}):cm.remove(t.remove),n.params.sortable&&t.sortable?n.components.sortable.addItem(t.container,n.nodes.content):cm.remove(t.drag),n.items.push(t),n.resetIndexes(),e.triggerEvents&&n.triggerEvent("onItemProcess",t),t.visible?n.showItem(t,{triggerEvents:!0,immediately:e.immediately,callback:function(){e.triggerEvents&&n.triggerEvent("onItemProcessEnd",t),e.callback(t)}}):n.hideItem(t,{triggerEvents:!0,immediately:e.immediately,callback:function(){e.triggerEvents&&n.triggerEvent("onItemProcessEnd",t),e.callback(t)}})},n.deleteItem=function(e,t){var n=this;t=cm.merge({triggerEvents:!0,immediately:!1,callback:function(){}},t),n.params.sortable&&e.sortable&&n.components.sortable.removeItem(e.container),n.items=cm.arrayRemove(n.items,e),n.resetIndexes(),t.triggerEvents&&n.triggerEvent("onItemRemove",e),n.hideItem(e,{triggerEvents:t.triggerEvents,immediately:t.immediately,callback:function(){cm.remove(e.container),t.triggerEvents&&n.triggerEvent("onItemRemoveEnd",e),t.callback(e)}})},n.hideItem=function(e,t){var n=this;t=cm.merge({triggerEvents:!0,immediately:!1,callback:function(){}},t),e.visible=!1,e["field-hidden-visible"]&&(e["field-hidden-visible"].value=0),t.triggerEvents&&n.triggerEvent("onItemHide",e),n.hideItemVisibility(e,{triggerEvents:t.triggerEvents,immediately:t.immediately,callback:function(){t.triggerEvents&&n.triggerEvent("onItemHideEnd",e),t.callback(e)}}),n.toggleToolbarVisibility(e)},n.hideItemVisibility=function(e,t){t=cm.merge({callback:function(){},immediately:!1,triggerEvents:!0},t),e.container.style.overflow="hidden",e.container.style.height=e.container.scrollHeight+"px",cm.transition(e.container,{immediately:t.immediately,properties:{height:"0px",opacity:0},duration:this.params.duration,easing:cm._config.motionSmooth,onStop:function(){t.callback(e)}})},n.showItem=function(e,t){var n=this;t=cm.merge({triggerEvents:!0,immediately:!1,callback:function(){}},t),e.visible=!0,e["field-hidden-visible"]&&(e["field-hidden-visible"].value=1),t.triggerEvents&&n.triggerEvent("onItemShow",e),n.showItemVisibility(e,{triggerEvents:t.triggerEvents,immediately:t.immediately,callback:function(){t.triggerEvents&&n.triggerEvent("onItemShowEnd",e),t.callback(e)}}),n.toggleToolbarVisibility(e)},n.showItemVisibility=function(e,t){t=cm.merge({triggerEvents:!0,immediately:!1,callback:function(){}},t),e.container.style.overflow="hidden",e.container.style.height="0px",cm.transition(e.container,{immediately:t.immediately,properties:{height:e.container.scrollHeight+"px",opacity:1},duration:this.params.duration,easing:cm._config.motionSmooth,clear:!0,onStop:function(){t.callback(e)}})},n.sortItem=function(e,t){this.items.splice(this.items.indexOf(e),1),this.items.splice(t,0,e),this.resetIndexes(),this.triggerEvent("onItemSort",e)},n.resetIndexes=function(){var n=this;cm.forEach(n.items,function(e,t){e.index!==t&&(e.previousIndex=e.index,e.index=t,n.params.templateAttributeReplace&&cm.processDataAttributes(e.field,n.params.templateAttribute,{"%index%":t}),e["field-hidden-index"]&&(e["field-hidden-index"].value=t),n.triggerEvent("onItemIndexChange",e))})},n.setTemplate=function(e){return this.params.template=e,this},n.renderItemTemplate=function(e,t){cm.isEmpty(e)||(e=cm.isString(e)?cm.strToHTML(e):cm.clone(e,!0),cm.appendNodes(e,t.field))},n.clear=function(e){for(;this.items.length;)this.deleteItem(this.items[0],e);return this},n.addItem=function(e,t){return this.renderItem(e,t),this},n.removeItem=function(e,t){return cm.isNumber(e)&&this.items[e]?this.deleteItem(this.items[e],t):cm.inArray(this.items,e)&&this.deleteItem(e,t),this},n.removeItemById=function(e,t){e=this.getItemById(e);return e&&this.deleteItem(e,t),this},n.getItem=function(e){return this.items[e]||null},n.getItemById=function(t){if(!cm.isEmpty(t))return this.items.find(function(e){return e.id===t})},n.getItems=function(){return this.items},n.getButtonById=function(t){if(!cm.isEmpty(t))return this.buttons.find(function(e){return e.id===t})},n.getButtons=function(){return this.buttons},n.isAllItemsVisible=function(){var e=this.items.filter(function(e){return e.visible});return this.items.length===e.length}}),cm.define("Com.Notifications",{extend:"Com.AbstractController",events:["onAdd","onRemove","onClear"],params:{renderStructure:!0,embedStructureOnRender:!0,embedStructure:"append",iconClasses:["icon","small","linked"],closable:!0,items:[],"Com.ToggleBox":{toggleTitle:!1,className:null,duration:"cm._config.animDuration"}},strings:{close:"Close",more:"Read more"}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Notifications",function(e,t,n,a){n.construct=function(){this.items=[],a.prototype.construct.apply(this,arguments)},n.renderView=function(){this.nodes.container=cm.node("div",{classes:"com__notifications is-hidden"},this.nodes.list=cm.node("ul")),cm.forEach(this.params.items,this.add.bind(this))},n.clear=function(){for(;this.items.length;)this.remove(this.items[0]);return this.triggerEvent("onClear"),this},n.add=function(t){var n=this;return(t=cm.merge({label:"",type:"warning",messages:[],collapsed:!0,closable:n.params.closable,nodes:{}},t)).nodes.container=cm.node("li",{classes:t.type},t.nodes.descr=cm.node("div",{classes:"descr"}),t.nodes.messages=cm.node("div",{classes:"messages"},t.nodes.messagesList=cm.node("ul"))),t.closable&&(t.iconClasses=cm.clone(n.params.iconClasses),t.iconClasses.push(["svg__close",t.type].join("-")),t.nodes.close=cm.node("div",{classes:t.iconClasses,title:n.lang("close"),role:"button",tabindex:0}),cm.insertFirst(t.nodes.close,t.nodes.container),cm.click.add(t.nodes.close,function(){n.remove(t)})),cm.isNode(t.label)||cm.isTextNode(t.label)||(t.label=cm.node("div",{innerHTML:t.label})),cm.appendChild(t.label,t.nodes.descr),cm.isEmpty(t.messages)||(t.nodes.button=cm.node("a",{classes:"more"},n.lang("more")),cm.insertFirst(t.nodes.button,t.nodes.descr),cm.forEach(t.messages,function(e){cm.appendChild(cm.node("li",e),t.nodes.messagesList)}),cm.getConstructor("Com.ToggleBox",function(e){t.controller=new e(cm.merge(n.params["Com.ToggleBox"],{nodes:{container:t.nodes.container,button:t.nodes.button,target:t.nodes.messages}}))})),cm.appendChild(t.nodes.container,n.nodes.list),cm.removeClass(n.nodes.container,"is-hidden"),n.items.push(t),n.triggerEvent("onAdd",t),n},n.remove=function(e){return cm.remove(e.nodes.container),cm.arrayRemove(this.items,e),0===this.items.length&&cm.addClass(this.nodes.container,"is-hidden"),this.triggerEvent("onRemove",e),this},n.getLength=function(){return this.items.length}}),cm.define("Com.OldBrowserAlert",{modules:["Params","Events","Langs","Storage","Stack"],events:["onRender"],params:{name:"default",remember:!0,versions:{IE:10,FF:31,Chrome:40,Safari:6,Opera:26}},strings:{title:"Thank you for visiting our site!",descr:"It seems that you are using an outdated browser <b>(%browser% %version%)</b>. As a result, we cannot provide you with the best user experience while visiting our site. Please upgrade your <b>%browser%</b> to version <b>%minimum_version%</b> or above, or use another standards based browser such as Firefox, Chrome or Safari, by clicking on the icons below.",continue:"Skip for now"}},function(e){var n=this,a=Com.UA.get(),t=(n.nodes={},n.components={},function(){cm.forEach(n.params.versions,function(e,t){Com.UA.is(t)&&Com.UA.isVersion()<e&&(n.params.langs.descr=n.lang("descr",{"%browser%":a.full_name,"%version%":a.full_version,"%minimum_version%":e}),n.params.remember&&(n.params.remember,n.storageRead("isShow"))||r())})}),r=function(){n.nodes.container=cm.node("div",{class:"com__oldbrowser-alert"},cm.node("div",{class:"b-descr"},cm.node("p",{innerHTML:n.lang("descr")})),cm.node("ul",{class:"b-browsers"},cm.node("li",cm.node("a",{class:"icon linked chrome",title:"Google Chrome",href:"http://www.google.com/chrome/",target:"_blank"})),cm.node("li",cm.node("a",{class:"icon linked firefox",title:"Mozilla Firefox",href:"http://www.mozilla.com/",target:"_blank"})),cm.node("li",cm.node("a",{class:"icon linked safari",title:"Apple Safari",href:"http://www.apple.com/safari/",target:"_blank"})),cm.node("li",cm.node("a",{class:"icon linked msie",title:"Microsoft Internet Explorer",href:"http://ie.microsoft.com/",target:"_blank"}))),cm.node("div",{class:"form"},cm.node("div",{class:"btn-wrap pull-center"},n.nodes.button=cm.node("input",{type:"button",value:n.lang("continue")})))),cm.getConstructor("Com.Dialog",function(e){n.components.dialog=new e({title:n.lang("title"),content:n.nodes.container,autoOpen:!1,width:500,events:{onClose:function(){n.params.remember&&n.storageWrite("isShow",!0)}}}),cm.addEvent(n.nodes.button,"click",n.components.dialog.close),n.components.dialog.open()})};n.setParams(e),n.convertEvents(n.params.events),n.addToStack(),t(),n.triggerEvent("onRender")}),cm.define("Com.Overlay",{modules:["Params","Events","Langs","Stack"],events:["onRender","onOpenStart","onOpen","onOpenEnd","onCloseStart","onClose","onCloseEnd"],params:{name:"",container:"document.body",appendMode:"appendChild",theme:"default",className:"",position:"fixed",lazy:!1,delay:"cm._config.lazyDelay",content:null,showSpinner:!0,spinnerSize:"default",showContent:!0,showProgress:!1,autoOpen:!0,autoClose:!1,removeOnClose:!0,destructOnRemove:!1,transition:"ease",duration:"cm._config.animDurationLong"}},function(e){function t(){i.params.duration=cm.getTransitionDurationFromLESS("PtOverlay-Duration",i.params.duration)}function n(){i.params.position=cm.inArray(["static","relative","absolute","fixed"],i.params.position)?i.params.position:"fixed"}function a(){i.nodes.container=cm.node("div",{class:"com__overlay pt__overlay","aria-busy":"false","aria-live":"assertive"},i.nodes.spinner=cm.node("div",{class:["overlay__spinner",["size",i.params.spinnerSize].join("--")]}),i.nodes.content=cm.node("div",{class:"overlay__content"}),i.nodes.progress=cm.node("progress",{class:"overlay__progress",value:0,min:0,max:100})),cm.addClass(i.nodes.container,i.params.className),cm.addClass(i.nodes.container,["transition",i.params.transition].join("-")),i.nodes.container.style.position=i.params.position,cm.isEmpty(i.params.content)||i.setContent(i.params.content),i.params.showSpinner&&i.showSpinner(),i.params.showContent&&i.showContent(),i.setTheme(i.params.theme)}function r(){i.triggerEvent("onOpen").triggerEvent("onOpenEnd")}function o(){i.triggerEvent("onClose").triggerEvent("onCloseEnd"),i.params.removeOnClose&&i.remove()}function s(e,t){i.isOpen=!0,t=cm.isFunction(t)?t:function(){},e&&cm.addClass(i.nodes.container,"is-immediately"),cm.inDOM(i.nodes.container)||cm[i.params.appendMode](i.nodes.container,i.params.container),i.triggerEvent("onOpenStart"),i.nodes.container.ariaBusy="true",cm.addClass(i.nodes.container,"is-open",!0),i.openInterval&&clearTimeout(i.openInterval),i.openInterval=e?setTimeout(function(){cm.removeClass(i.nodes.container,"is-immediately"),r(),t()},5):setTimeout(function(){r(),t()},i.params.duration+5)}var i=this;i.nodes={},i.currentTheme=null,i.isDestructed=!1,i.isOpen=!1,i.isShowSpinner=!1,i.isShowContent=!1,i.openInterval=null,i.delayInterval=null;i.open=function(e,t){return i.isOpen||(i.params.lazy&&!e?(i.delayInterval&&clearTimeout(i.delayInterval),i.delayInterval=setTimeout(function(){s(e,t)},i.params.delay)):s(e,t)),i},i.close=function(e,t){var n;return i.openInterval&&clearTimeout(i.openInterval),i.delayInterval&&clearTimeout(i.delayInterval),i.isOpen&&(e=e,n=t,i.isOpen=!1,n=cm.isFunction(n)?n:function(){},e&&cm.addClass(i.nodes.container,"is-immediately"),i.triggerEvent("onCloseStart"),i.nodes.container.ariaBusy="false",cm.removeClass(i.nodes.container,"is-open"),i.openInterval&&clearTimeout(i.openInterval),i.openInterval=e?setTimeout(function(){cm.removeClass(i.nodes.container,"is-immediately"),o(),n()},5):setTimeout(function(){o(),n()},i.params.duration+5)),i},i.toggle=function(e){return e?i.open():i.close(),i},i.remove=function(){return i.isOpen?i.close(function(){i.params.removeOnClose||i.remove()}):(i.params.destructOnRemove&&i.destruct(),cm.remove(i.nodes.container)),i},i.setTheme=function(e){return i.currentTheme&&cm.removeClass(i.nodes.container,["theme",i.currentTheme].join("-")),e&&cm.addClass(i.nodes.container,["theme",e].join("-")),i.currentTheme=e,i},i.showSpinner=function(){return i.isShowSpinner=!0,cm.addClass(i.nodes.spinner,"is-show"),i},i.hideSpinner=function(){return i.isShowSpinner=!1,cm.removeClass(i.nodes.spinner,"is-show"),i},i.setContent=function(e){return cm.isEmpty(e)?cm.clearNode(i.nodes.content):(cm.isNode(e)||(e=e.toString(),e=cm.node("div",{class:"inner",innerHTML:e})),cm.appendChild(e,i.nodes.content)),i},i.showContent=function(){return i.isShowContent=!0,cm.addClass(i.nodes.content,"is-show"),i},i.hideContent=function(){return i.isShowContent=!1,cm.removeClass(i.nodes.content,"is-show"),i},i.showProgress=function(){return cm.addClass(i.nodes.progress,"is-show"),i},i.hideProgress=function(){return cm.removeClass(i.nodes.progress,"is-show"),i},i.setProgress=function(e,t){return i.nodes.progress.max=e,i.nodes.progress.value=t,i.params.showProgress&&i.showProgress(),i},i.embed=function(e,t){return t=cm.isUndefined(t)?i.params.appendMode:t,cm.isNode(e)&&(i.params.container=e,i.params.appendMode=t,cm.inDOM(i.nodes.container))&&cm[i.params.appendMode](i.nodes.container,i.params.container),i},i.destruct=function(){return i.isDestructed||(i.isDestructed=!0,i.removeFromStack(),cm.remove(i.nodes.container)),i},i.bindControllerEvents=function(){cm.forEach(i._raw.events,function(e){i[e]||(i[e]=function(){}),i[e+"Handler"]||(i[e+"Handler"]=i[e].bind(i)),i.addEvent(e,i[e+"Handler"])})},i.getNodes=function(e){return i.nodes[e]||i.nodes},i.openHandler=i.open.bind(i),i.closeHandler=i.close.bind(i),i.toggleHandler=i.toggle.bind(i),i.params.controllerEvents&&i.bindControllerEvents(),t(),i.setParams(e),i.convertEvents(i.params.events),n(),a(),i.addToStack(i.nodes.container),i.triggerEvent("onRender"),i.params.autoOpen&&i.open()}),cm.define("Com.Pagination",{extend:"Com.AbstractController",events:["onRebuild","onStart","onAbort","onError","onPageRender","onPageRenderEnd","onPageRenderError","onPageSwitched","onPageReady","onEnd","onSetCount"],params:{controllerEvents:!0,renderStructure:!1,embedStructureOnRender:!1,embedStructure:"append",scrollNode:window,data:[],count:0,perPage:0,startPage:1,startPageToken:"",pageCount:0,autoSend:!0,showLoader:!0,loaderDelay:"cm._config.loadDelay",barPosition:"bottom",barAlign:"left",barCountLR:1,barCountM:1,switchManually:!1,animateSwitch:!1,animateDuration:"cm._config.animDuration",animatePrevious:!1,pageTag:"div",pageAttributes:{class:"com__pagination__page"},responseCountKey:"count",responseKey:"data",responseCodeKey:"code",responseErrorsKey:"errors",responseMessageKey:"message",responseHTML:!1,cache:!0,ajax:{type:"json",method:"get",url:"",params:""},overlayConstructor:"Com.Overlay",overlayParams:{lazy:!0,position:"absolute",autoOpen:!1,removeOnClose:!0}},strings:{bar:{title:"Pagination navigation",prev:"Previous",next:"Next"},server_error:"An unexpected error has occurred. Please try again later."}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Pagination",function(e,t,n,a){n.construct=function(){var e=this;e.nodes={container:cm.node("div"),content:cm.node("div"),pages:cm.node("div"),bar:[]},e.components={},e.animations={},e.pages={},e.ajaxHandler=null,e.currentAction=null,e.isAjax=!1,e.isProcess=!1,e.isRendering=!1,e.page=null,e.pageToken=null,e.currentPage=null,e.previousPage=null,e.pageCount=0,e.nextHanlder=e.next.bind(e),e.prevHanlder=e.prev.bind(e),a.prototype.construct.apply(e,arguments)},n.onConstructEnd=function(){this.params.autoSend&&this.set(this.params.startPage)},n.getLESSVariables=function(){this.params.animateDuration=cm.getTransitionDurationFromLESS("ComPagination-Duration",this.params.animateDuration)},n.validateParams=function(){var e=this;e.triggerEvent("onValidateParamsStart"),e.triggerEvent("onValidateParams"),e.triggerEvent("onValidateParamsProcess"),cm.isEmpty(e.params.ajax.url)?(cm.isEmpty(e.params.data)||(e.params.count=e.params.data.length),e.params.showLoader=!1):e.isAjax=!0,0===e.params.pageCount&&e.params.count&&e.params.perPage?e.pageCount=Math.ceil(e.params.count/e.params.perPage):e.pageCount=e.params.pageCount,e.setToken(e.params.startPage,e.params.startPageToken),e.triggerEvent("onValidateParamsEnd")},n.renderView=function(){var e=this;e.nodes.container=cm.node("div",{class:"com__pagination"},e.nodes.content=cm.node("div",{class:"com__pagination__content"},e.nodes.pages=cm.node("div",{class:"com__pagination__pages"}))),/top|both/.test(e.params.barPosition)&&e.nodes.bar.push(e.callbacks.renderBar(e,{align:e.params.barAlign,position:"top"})),/bottom|both/.test(e.params.barPosition)&&e.nodes.bar.push(e.callbacks.renderBar(e,{align:e.params.barAlign,position:"bottom"}))},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),t.resetStyles(),cm.getConstructor(t.params.overlayConstructor,function(e){t.components.loader=new e(cm.merge(t.params.overlayParams,{container:t.nodes.content}))}),t.params.animateSwitch&&cm.addClass(t.nodes.container,"is-animated"),t.animations.content=new cm.Animation(t.nodes.content)},n.resetStyles=function(){cm.clearNode(this.nodes.pages)},n.callbacks.prepare=function(e,t){return(t=e.callbacks.beforePrepare(e,t)).url=cm.strReplace(t.url,{"%perPage%":e.params.perPage,"%limit%":e.params.perPage,"%page%":e.page,"%offset%":(e.page-1)*e.params.perPage,"%token%":e.pageToken,"%baseUrl%":cm._baseUrl}),t.params=cm.objectReplace(t.params,{"%perPage%":e.params.perPage,"%limit%":e.params.perPage,"%page%":e.page,"%offset%":(e.page-1)*e.params.perPage,"%token%":e.pageToken,"%baseUrl%":cm._baseUrl}),t=e.callbacks.afterPrepare(e,t)},n.callbacks.beforePrepare=function(e,t){return t},n.callbacks.afterPrepare=function(e,t){return t},n.callbacks.request=function(t,n){return n=t.callbacks.prepare(t,n),t.currentAction=n,cm.ajax(cm.merge(n,{onStart:function(){t.callbacks.start(t)},onSuccess:function(e){t.callbacks.response(t,n,e)},onError:function(e){t.callbacks.error(t,n,e)},onAbort:function(){t.callbacks.abort(t,n)},onEnd:function(){t.callbacks.end(t)}}))},n.callbacks.filter=function(e,t,n){var a=[],r=cm.reducePath(e.params.responseErrorsKey,n),o=cm.reducePath(e.params.responseKey,n),n=cm.reducePath(e.params.responseCountKey,n);return cm.isEmpty(r)&&(cm.isEmpty(o)||(a=o),cm.isEmpty(n)||e.setCount(n)),a},n.callbacks.response=function(e,t,n,a,r,o){e.setPage(),n=n&&e.callbacks.filter(e,t,n),e.callbacks.render(e,n,a,r,o)},n.callbacks.error=function(e,t,n){var a,r,o;cm.isEmpty(n)||(a=cm.reducePath(e.params.responseCodeKey,n),r=cm.reducePath(e.params.responseErrorsKey,n),o=cm.reducePath(e.params.responseMessageKey,n)),e.triggerEvent("onError",{response:n,code:a,errors:r,message:o}),e.callbacks.response(e,t,null,r,o,a)},n.callbacks.abort=function(e,t){e.triggerEvent("onAbort")},n.callbacks.data=function(e,t){var n,a,r;e.callbacks.start(e),e.setPage(),cm.isEmpty(t)||0===e.params.perPage?e.callbacks.render(e,t):0<e.params.perPage&&(n=t.length,a=(e.page-1)*e.params.perPage,r=e.page*e.params.perPage,a<n)&&(t=t.slice(a,Math.min(r,n)),e.callbacks.render(e,t)),e.callbacks.end(e)},n.callbacks.cached=function(e,t){e.callbacks.start(e),e.setPage(),e.callbacks.append(e,t),e.params.switchManually||e.callbacks.switchPage(e,t),e.callbacks.end(e)},n.callbacks.renderContainer=function(e,t){return cm.node(e.params.pageTag,e.params.pageAttributes)},n.callbacks.render=function(e,t,n,a,r){e.isRendering=!0;r={page:e.page,token:e.pageToken,pages:e.nodes.pages,container:cm.node(e.params.pageTag),data:t,code:r,errors:n,message:a,total:e.getCount(),isVisible:!0,isRendered:!0,isError:!t};cm.isEmpty(r.message)&&(r.message=r.errors),r.container=e.callbacks.renderContainer(e,r),e.pages[e.page]=r,e.triggerEvent("onPageRender",r),r.data?e.callbacks.renderPage(e,r):e.callbacks.renderError(e,r),e.callbacks.append(e,r),e.triggerEvent("onPageRenderEnd",r),e.params.switchManually||e.callbacks.switchPage(e,r)},n.callbacks.renderPage=function(e,t){e.params.responseHTML&&(e=cm.strToHTML(t.data),cm.appendNodes(e,t.container))},n.callbacks.renderError=function(e,t){e.params.responseHTML&&t.container.appendChild(cm.node("div",{class:"cm__empty"},e.lang("server_error"))),e.triggerEvent("onPageRenderError",t)},n.callbacks.append=function(e,t){cm.appendChild(t.container,e.nodes.pages),cm.addClass(t.container,"is-visible",!0),e.triggerEvent("onPageReady",t)},n.callbacks.switchPage=function(e,t){var n=cm.getRect(e.nodes.content),a=cm.getRect(t.container);e.previousPage&&e.callbacks.hidePage(e,e.pages[e.previousPage]),e.params.animateSwitch?(e.nodes.content.style.overflow="hidden",e.nodes.content.style.height=[n.height,"px"].join(""),e.animations.content.go({style:{height:[a.height,"px"].join("")},duration:e.params.animateDuration,anim:"smooth",onStop:function(){e.nodes.content.style.overflow="visible",e.nodes.content.style.height="auto",e.isRendering=!1,e.triggerEvent("onPageSwitched",t)}})):(e.isRendering=!1,e.triggerEvent("onPageSwitched",t))},n.callbacks.hidePage=function(e,t){t.isVisible=!1,e.params.animateSwitch?e.params.animatePrevious?(cm.removeClass(t.container,"is-visible"),setTimeout(function(){cm.remove(t.container)},e.params.animateDuration)):setTimeout(function(){cm.remove(t.container),cm.removeClass(t.container,"is-visible")},e.params.animateDuration):(cm.remove(t.container),cm.removeClass(t.container,"is-visible"))},n.callbacks.renderBar=function(e,t){t=cm.merge({align:"left",position:"bottom"},t);var n={};switch(n.container=cm.node("div",{class:"com__pagination__bar","aria-label":e.msg("bar.title")},n.items=cm.node("ul")),cm.addClass(n.container,["pull",t.align].join("-")),t.position){case"top":cm.insertFirst(n.container,e.nodes.container);break;case"bottom":cm.insertLast(n.container,e.nodes.container)}return n},n.callbacks.rebuildBars=function(t){cm.forEach(t.nodes.bar,function(e){t.callbacks.rebuildBar(t,e)})},n.callbacks.rebuildBar=function(e,t){cm.clearNode(t.items),e.pageCount<2?cm.addClass(t.container,"is-hidden"):(cm.removeClass(t.container,"is-hidden"),e.callbacks.renderBarItems(e,t))},n.callbacks.renderBarItems=function(t,n){var a=!1;t.callbacks.renderBarArrow(t,n,{text:"<",title:t.msg("bar.prev"),className:"prev",callback:t.prevHanlder}),cm.forEach(t.pageCount,function(e){++e===t.page?(t.callbacks.renderBarItem(t,n,{page:e,isActive:!0}),a=!0):e<=t.params.barCountLR||t.page&&e>=t.page-t.params.barCountM&&e<=t.page+t.params.barCountM||e>t.pageCount-t.params.barCountLR?(a=!0,t.callbacks.renderBarItem(t,n,{page:e,isActive:!1})):a&&(a=!1,t.callbacks.renderBarPoints(t,n,{}))}),t.callbacks.renderBarArrow(t,n,{text:">",title:t.msg("bar.next"),className:"next",callback:t.nextHanlder})},n.callbacks.renderBarArrow=function(e,t,n){(n=cm.merge({text:"",title:"",className:"",callback:function(){}},n)).container=cm.node("li",{class:n.className},n.link=cm.node("a",{role:"button",tabindex:"0",title:n.title},n.text)),cm.click.add(n.link,function(e){cm.preventDefault(e),n.callback()}),t.items.appendChild(n.container)},n.callbacks.renderBarPoints=function(e,t,n){(n=cm.merge({text:"...",className:"points"},n)).container=cm.node("li",{class:n.className,"aria-hidden":"true"},n.text),t.items.appendChild(n.container)},n.callbacks.renderBarItem=function(t,e,n){(n=cm.merge({page:null,isActive:!1},n)).container=cm.node("li",n.link=cm.node("a",{role:"button",tabindex:"0"},n.page)),n.isActive&&(n.link.setAttribute("aria-current","page"),cm.addClass(n.container,"active")),cm.click.add(n.link,function(e){cm.preventDefault(e),t.set(n.page)}),e.items.appendChild(n.container)},n.callbacks.start=function(e){e.isProcess=!0,e.params.showLoader&&e.components.loader&&e.components.loader.open(),cm.addClass(e.nodes.container,"is-loading"),e.triggerEvent("onStart")},n.callbacks.end=function(e){e.isProcess=!1,e.params.showLoader&&e.components.loader&&e.components.loader.close(),cm.removeClass(e.nodes.container,"is-loading"),e.triggerEvent("onEnd")},n.rebuild=function(e){var t=this;return t.isProcess&&t.abort(),t.pages={},t.page=null,t.pageToken=null,t.currentPage=null,t.previousPage=null,t.pageCount=0,cm.isEmpty(e)||t.setParams(e),t.validateParams(),t.resetStyles(),t.triggerEvent("onRebuild"),t.set(t.params.startPage),t},n.set=function(e){var t=this;return t.isProcess&&t.abort(),t.pageCount&&!(e<=t.pageCount)||t.isProcess||t.isRendering||(t.page=e,t.pageToken=t.pages[t.page]?t.pages[t.page].token:"",t.callbacks.rebuildBars(t),t.currentPage&&e===t.currentPage)||(t.params.cache&&t.pages[t.page]&&t.pages[t.page].isRendered?t.callbacks.cached(t,t.pages[t.page]):t.isAjax?(e=cm.clone(t.params.ajax),t.ajaxHandler=t.callbacks.request(t,e)):t.callbacks.data(t,t.params.data)),t},n.next=function(){return this.set(this.pageCount===this.currentPage?1:this.currentPage+1),this},n.prev=function(){return this.set(this.currentPage-1||this.pageCount),this},n.setToken=function(e,t){return this.pages[e]||(this.pages[e]={}),this.pages[e].token=t,this},n.setCount=function(e){var t=this;return cm.isUndefined(e)||(e=parseInt(e.toString())),cm.isNumber(e)&&e!==t.params.count&&(t.params.count=e,0===t.params.pageCount&&t.params.count&&t.params.perPage?t.pageCount=Math.ceil(t.params.count/t.params.perPage):t.pageCount=t.params.pageCount,t.callbacks.rebuildBars(t),t.triggerEvent("onSetCount",e)),t},n.getCount=function(){return this.params.count},n.setAction=function(e,t,n){var a=this;switch(t=cm.inArray(["raw","update","current"],t)?t:"current"){case"raw":a.params.ajax=cm.merge(a._raw.params.ajax,e);break;case"current":a.params.ajax=cm.merge(a.params.ajax,e);break;case"update":a.params.ajax=cm.merge(a._update.params.ajax,e)}return n&&(a._update.params.ajax=cm.clone(a.params.ajax)),a.rebuild(),a},n.getAction=function(){return this.params.ajax},n.getCurrentAction=function(){return this.currentAction},n.setPage=function(){return this.previousPage=this.currentPage,this.currentPage=this.page,this},n.abort=function(){return this.ajaxHandler&&this.ajaxHandler.abort&&this.ajaxHandler.abort(),this},n.isOwnNode=n.isParent=function(e,t){return cm.isParent(this.nodes.container,e,t)}}),cm.define("Com.Palette",{modules:["Params","Events","Langs","Structure","DataConfig","Stack"],require:["tinycolor"],events:["onRenderStart","onRender","onDraw","onSet","onSelect","onChange"],params:{node:cm.node("div"),container:null,name:"",embedStructure:"replace",value:"transparent",defaultValue:"rgb(255, 255, 255)",setOnInit:!0,"Com.TintRange":{direction:"vertical",theme:"theme--arrows",setHiddenInput:!1},"Com.OpacityRange":{direction:"vertical",theme:"theme--arrows",setHiddenInput:!1}},strings:{new:"new",previous:"previous",select:"Select",hue:"Hue",opacity:"Opacity",hex:"HEX"}},function(e){function t(){o.nodes.container=cm.node("div",{class:"com__palette"},o.nodes.inner=cm.node("div",{class:"inner"},cm.node("div",{class:"b-palette"},o.nodes.paletteZone=cm.node("div",{class:"inner"},o.nodes.paletteDrag=cm.node("div",{class:"drag"}),o.nodes.paletteCanvas=cm.node("canvas",{width:"100%",height:"100%"}))),cm.node("div",{class:"b-range",title:o.lang("hue")},o.nodes.tintZone=cm.node("div",{class:"inner"})),cm.node("div",{class:"b-range b-opacity",title:o.lang("opacity")},o.nodes.opacityZone=cm.node("div",{class:"inner"})),cm.node("div",{class:"b-stuff"},cm.node("div",{class:"inner"},cm.node("div",{class:"b-preview-color"},cm.node("div",{class:"b-title"},o.lang("new")),cm.node("div",{class:"b-colors"},o.nodes.previewNew=cm.node("div",{class:"b-color"}),o.nodes.previewPrev=cm.node("div",{class:"b-color"})),cm.node("div",{class:"b-title"},o.lang("previous"))),cm.node("div",{class:"b-bottom"},cm.node("div",{class:"b-preview-inputs"},o.nodes.inputHEX=cm.node("input",{type:"text",title:o.lang("hex")})),cm.node("div",{class:"b-buttons"},o.nodes.buttonSelect=cm.node("div",{class:"button button-primary is-wide"},o.lang("select")))))))),r=o.nodes.paletteCanvas.getContext("2d"),cm.addEvent(o.nodes.inputHEX,"input",i),cm.addEvent(o.nodes.inputHEX,"keypress",c),cm.addEvent(o.nodes.buttonSelect,"click",d),o.embedStructure(o.nodes.container)}function n(){o.components.paletteDrag=new Com.Draggable({target:o.nodes.paletteZone,node:o.nodes.paletteDrag,limiter:o.nodes.paletteZone,events:{onSelect:function(e,t){e=e.getDimensions();o.value.v=cm.toFixed((100-100/e.limiter.absoluteHeight*t.top)/100,2),o.value.s=cm.toFixed(100/e.limiter.absoluteWidth*t.left/100,2),0===o.value.a&&(o.value.a=1),m(),s()}}}),cm.getConstructor("Com.TintRange",function(e,t){o.components.tint=new e(cm.merge(o.params[t],{container:o.nodes.tintZone})),o.components.tint.addEvent("onSelect",function(e,t){o.value.h=t,0===o.value.a&&(o.value.a=1),m(),s(),v()})}),cm.getConstructor("Com.OpacityRange",function(e,t){o.components.opacity=new e(cm.merge(o.params[t],{container:o.nodes.opacityZone})),o.components.opacity.addEvent("onSelect",function(e,t){o.value.a=cm.toFixed(t/100,2),m()})})}function a(){var e=tinycolor(cm.clone(o.previousValue));o.nodes.previewPrev.style.backgroundColor=e.toHslString()}var r,o=this,s=(o.nodes={},o.components={},o.value=null,o.previousValue=null,function(){var e=o.get(),t=cm.toFixed(100*o.value.a,0);o.components.opacity.setColor(e),o.components.opacity.set(t,!1),o.components.opacity.redraw()}),i=function(){var e=o.nodes.inputHEX.value,e=cm.removeSpaces(e),e=(/^#/.test(e)?"":"#")+e;e=cm.reduceText(e,7,!1),o.nodes.inputHEX.value=e,l(e,!0,{setInput:!1})},c=function(e){13==(e=cm.getEvent(e)).keyCode&&(e=o.nodes.inputHEX.value,l(e,!0),d())},d=function(){u(),o.triggerEvent("onSelect",o.value),f()},l=function(e,t,n){cm.isEmpty(e)?e=o.params.defaultValue:"transparent"==e&&(e={h:360,s:0,v:1,a:0}),o.value=tinycolor(e).toHsv(),o.redraw(!0,n),t&&o.triggerEvent("onSet",o.value)},m=function(){h(),g(),p(),o.triggerEvent("onSet",o.value)},u=function(){o.value?o.previousValue=cm.clone(o.value):cm.isEmpty(o.params.value)?o.previousValue=tinycolor(o.params.defaultValue).toHsv():o.previousValue=tinycolor(o.params.value).toHsv(),a()},p=function(){tinycolor(cm.clone(o.value)).isDark()?cm.replaceClass(o.nodes.paletteDrag,"is-light","is-dark"):cm.replaceClass(o.nodes.paletteDrag,"is-dark","is-light")},h=function(){var e=tinycolor(cm.clone(o.value));o.nodes.previewNew.style.backgroundColor=e.toHslString()},g=function(){var e=tinycolor(cm.clone(o.value));o.nodes.inputHEX.value=e.toHexString()},f=function(){JSON.stringify(o.value)===JSON.stringify(o.previousValue)&&o.triggerEvent("onChange",o.value)},v=function(){var e;r.rect(0,0,100,100),r.fillStyle="hsl("+o.value.h+", 100%, 50%)",r.fill(),e=r.createLinearGradient(0,0,100,0),(r.fillStyle=e).addColorStop(0,"rgba(255, 255, 255, 1)"),e.addColorStop(1,"rgba(255, 255, 255, 0)"),r.fillRect(0,0,100,100),e=r.createLinearGradient(0,0,0,100),(r.fillStyle=e).addColorStop(0,"rgba(0, 0, 0, 0)"),e.addColorStop(1,"rgba(0, 0, 0, 1)"),r.fillRect(0,0,100,100)};o.set=function(e,t,n){return t=!!cm.isUndefined(t)||t,n=cm.isUndefined(t)?{}:n,l(e,t,n),u(),o},o.get=function(e){var t=tinycolor(cm.clone(o.value));switch(e){case"rgb":t=t.toRgbString();break;case"hsl":t=t.toHslString();break;case"hsv":case"hsb":t=t.toHsvString();break;default:t=t.toHexString()}return t},o.getRaw=function(e){var t=tinycolor(cm.clone(o.value));return t="hsl"===e?t.toHsl():t},o.redraw=function(e,t){var n;return e=!!cm.isUndefined(e)||e,t=cm.isUndefined(e)?{}:t,t=cm.merge({setInput:!0},t),s(),n=cm.toFixed(o.value.h,0),o.components.tint.set(n,!1),o.components.tint.redraw(),n={left:(n=o.components.paletteDrag.getDimensions()).limiter.absoluteWidth/100*(100*o.value.s),top:n.limiter.absoluteHeight-n.limiter.absoluteHeight/100*(100*o.value.v)},o.components.paletteDrag.setPosition(n,!1),h(),p(),v(),t.setInput&&g(),e&&o.triggerEvent("onDraw"),o},o.isLight=function(){return tinycolor(cm.clone(o.value)).isLight()},o.isDark=function(){return tinycolor(cm.clone(o.value)).isDark()},o.setParams(e),o.convertEvents(o.params.events),o.getDataConfig(o.params.node),o.addToStack(o.params.node),o.triggerEvent("onRenderStart"),t(),n(),o.addToStack(o.nodes.container),o.triggerEvent("onRender"),o.params.setOnInit&&o.set(o.params.value,!1)}),cm.define("Com.Request",{modules:["Params","Events","Langs","Stack","Structure"],events:["onRenderStart","onRender","onStart","onEnd","onError","onAbort","onSuccess","onContentRenderStart","onContentRender","onContentRenderEnd"],params:{node:cm.node("div"),container:null,name:"",embedStructure:"append",wrapContent:!0,swapContentOnError:!0,renderContentOnSuccess:!0,className:"",autoSend:!1,promise:!1,successOnEmptyData:!1,responseKey:"data",responseErrorsKey:"errors",responseMessageKey:"message",responseCodeKey:"code",responseHTML:!0,responseHTMLKey:"data",responseStatusKey:"data.success",responseContainer:null,showLoader:!0,ajax:{type:"json",method:"get",variables:{},variablesMap:{},url:"",params:""},animateDuration:"cm._config.animDuration",overlayContainer:"document.body",overlayConstructor:"Com.Overlay",overlayParams:{lazy:!0,autoOpen:!1,removeOnClose:!0,showSpinner:!0,showContent:!1,position:"absolute",theme:"light"}},strings:{server_error:"An unexpected error has occurred. Please try again later."}},function(e){var t=this;t.nodes={},t.animations={},t.components={},t.requestData={},t.responseData={},t.previousResponseData={},t.isProcess=!1,t.isError=!1,t.isRendering=!1,t.construct(e)}),cm.getConstructor("Com.Request",function(e,t,n){n.construct=function(e){var t=this;return t.destructHandler=t.destruct.bind(t),t.requestHandler=t.request.bind(t),t.sendHandler=t.send.bind(t),t.setParams(e),t.convertEvents(t.params.events),t.validateParams(),t.addToStack(t.params.node),t.triggerEvent("onRenderStart"),t.render(),t.addToStack(t.nodes.container),t.triggerEvent("onRender"),t.params.autoSend&&t.send(),t},n.validateParams=function(){cm.isUndefined(this.params.showOverlay)||(this.params.showLoader=this.params.showOverlay)},n.destruct=function(){return this.isDestructed||(this.isDestructed=!0,this.components.overlay&&this.components.overlay.destruct(),this.removeFromStack()),this},n.send=function(){if(this.isProcess&&this.abort(),!this.isProcess&&!this.isRendering){if(this.params.promise)return new Promise(this.requestHandler);this.request()}return this},n.get=function(){return this.responseData},n.render=function(){var t=this;return cm.isEmpty(t.params.responseHTMLKey)&&(t.params.responseHTMLKey=t.params.responseKey),t.renderView(),t.params.wrapContent&&cm.isNode(t.params.container)&&cm.appendNodes(t.params.container.childNodes,t.nodes.inner),t.setAttributes(),t.params.responseHTML?t.params.overlayParams.container=t.params.overlayParams.container||t.params.overlayContainer||t.nodes.container||document.body:t.params.overlayParams.container=t.params.overlayParams.container||t.params.overlayContainer||document.body,t.params.showLoader&&cm.getConstructor(t.params.overlayConstructor,function(e){t.components.overlay=new e(t.params.overlayParams)}),t.embedStructure(t.nodes.container),t},n.renderView=function(){return this.nodes.container=cm.node("div",{class:"com__request"},this.nodes.inner=cm.node("div",{class:"inner"})),this},n.setAttributes=function(){return cm.addClass(this.nodes.container,this.params.className),this.animations.container=new cm.Animation(this.nodes.container),this},n.setAction=function(e,t,n){switch(t=cm.inArray(["raw","update","current"],t)?t:"current"){case"raw":this.params.ajax=cm.merge(this._raw.params.ajax,e);break;case"current":this.params.ajax=cm.merge(this.params.ajax,e);break;case"update":this.params.ajax=cm.merge(this._update.params.ajax,e)}return n&&(this._update.params.ajax=cm.clone(this.params.ajax)),this},n.setVariables=function(e,t,n){switch(t=cm.inArray(["raw","update","current"],t)?t:"current"){case"raw":this.params.ajax.variables=cm.merge(this._raw.params.ajax.variables,e);break;case"current":this.params.ajax.variables=cm.merge(this.params.ajax.variables,e);break;case"update":this.params.ajax.variables=cm.merge(this._update.params.ajax.variables,e)}return n&&(this._update.params.ajax.variables=cm.clone(this.params.ajax.variables)),this},n.request=function(n,a){var r=this;return r.prepare(),r.components.ajax=cm.ajax(cm.merge(r.requestData,{onStart:function(){r.start()},onSuccess:function(e,t){t=e instanceof ProgressEvent?e:t,r.response("success",e,t,n)},onError:function(e,t){t=e instanceof ProgressEvent?e:t,r.response("error",e,t,a)},onAbort:function(){r.aborted()},onEnd:function(){r.end()}})),r},n.prepare=function(){var e=this;return e.isError=!1,e.requestData=cm.clone(e.params.ajax),e.requestData.url=cm.strReplace(e.requestData.url,e.params.variables),e.requestData.params=cm.objectReplace(e.requestData.params,e.params.variables),e.previousResponseData=cm.clone(e.responseData),e.responseData={request:e.requestData},e},n.abort=function(){return this.components.ajax&&this.components.ajax.abort&&this.components.ajax.abort(),this},n.start=function(){return this.isProcess=!0,this.params.showLoader&&this.components.overlay&&this.components.overlay.open(),this.triggerEvent("onStart"),this},n.end=function(){return this.isProcess=!1,this.params.showLoader&&this.components.overlay&&this.components.overlay.close(),this.triggerEvent("onEnd"),this},n.filter=function(){var e=this;cm.isEmpty(e.responseData.response)||(e.responseData.errors=cm.reducePath(e.params.responseErrorsKey,e.responseData.response),e.responseData.message=cm.reducePath(e.params.responseMessageKey,e.responseData.response),e.responseData.code=cm.reducePath(e.params.responseCodeKey,e.responseData.response),e.responseData.status=cm.reducePath(e.params.responseStatusKey,e.responseData.response),e.responseData.data=cm.reducePath(e.params.responseKey,e.responseData.response),e.responseData.html=cm.reducePath(e.params.responseHTMLKey,e.responseData.response)),cm.isEmpty(e.responseData.status)&&(e.responseData.status=!1),cm.isEmpty(e.responseData.data)&&(e.responseData.data=[]),e.responseData.filtered=e.responseData.data},n.response=function(e,t,n,a){var r=this;return n instanceof ProgressEvent&&(r.responseData.target=n.target),r.responseData.response=t,r.responseData.callback=a,r.filter(),"success"!==e||!r.params.successOnEmptyData&&cm.isEmpty(r.responseData.data)&&!r.responseData.status?r.error():r.success(),r},n.error=function(){return this.isError=!0,this.responseData.isError=!0,this.renderError(),this.triggerEvent("onError",this.responseData),cm.isFunction(this.responseData.callback)&&this.responseData.callback(this.responseData),this},n.success=function(){var e=this;return e.isError=!1,e.responseData.isError=!1,e.responseData.status&&(e.responseData.status,!e.params.renderContentOnSuccess)||e.renderResponse(),e.triggerEvent("onSuccess",e.responseData),cm.isFunction(e.responseData.callback)&&e.responseData.callback(e.responseData),e},n.aborted=function(){return this.triggerEvent("onAbort"),this},n.renderTemporary=function(e){var t=cm.node("div",{class:"com__request__temporary"});return e&&cm.addClass(t,"is-show"),t},n.renderResponse=function(){var e;return this.params.responseHTML&&(e=cm.strToHTML(this.responseData.html),this.renderContent(e)),this},n.renderContent=function(e){var t,n=this;return cm.isNode(n.params.responseContainer)?(n.triggerEvent("onContentRenderStart",e),cm.clearNode(n.params.responseContainer),cm.appendNodes(e,n.params.responseContainer),n.triggerEvent("onContentRender",e),n.triggerEvent("onContentRenderEnd",e)):cm.isNode(n.params.container)?(t=n.renderTemporary(!1),cm.appendNodes(e,t),n.appendResponse(t)):(n.triggerEvent("onContentRenderStart",e),n.triggerEvent("onContentRender",e),n.triggerEvent("onContentRenderEnd",e)),n},n.renderError=function(){var e,t,n=this;return n.params.responseHTML&&(t=cm.node("div",{class:"cm__empty"},n.lang("server_error")),cm.isNode(n.params.responseContainer)?(n.triggerEvent("onContentRenderStart",t),n.params.swapContentOnError?(cm.clearNode(n.params.responseContainer),cm.appendChild(t,n.params.responseContainer)):(cm.remove(n.nodes.error),n.nodes.error=t,cm.insertFirst(n.nodes.error,n.params.responseContainer)),n.triggerEvent("onContentRender",t),n.triggerEvent("onContentRenderEnd",t)):cm.isNode(n.params.container)?(e=n.renderTemporary(),cm.appendChild(t,e),n.params.swapContentOnError?n.appendResponse(e):n.appendError(e)):(n.triggerEvent("onContentRenderStart",t),n.triggerEvent("onContentRender",t),n.triggerEvent("onContentRenderEnd",t))),n},n.appendError=function(e){var t=this;return t.isRendering=!0,t.triggerEvent("onContentRenderStart",e),cm.remove(t.nodes.error),t.nodes.error=e,cm.addClass(t.nodes.error,"is-show"),t.nodes.temporary?cm.insertFirst(t.nodes.error,t.nodes.temporary):cm.insertFirst(t.nodes.error,t.nodes.inner),cm.addClass(t.nodes.container,"is-show is-loaded",!0),t.isRendering=!1,t.triggerEvent("onContentRender",e),t.triggerEvent("onContentRenderEnd",e),t},n.appendResponse=function(e){var t,n=this;return n.isRendering=!0,n.triggerEvent("onContentRenderStart",e),n.nodes.temporary||(n.nodes.temporary=n.renderTemporary(!1),cm.appendNodes(n.nodes.inner.childNodes,n.nodes.temporary),cm.appendChild(n.nodes.temporary,n.nodes.inner),cm.customEvent.trigger(n.nodes.temporary,"destruct",{direction:"child",self:!1})),cm.removeClass(n.nodes.temporary,"is-show",!0),cm.appendChild(e,n.nodes.inner),cm.addClass(e,"is-show",!0),cm.removeClass(n.nodes.container,"is-loaded",!0),cm.addClass(n.nodes.container,"is-show",!0),n.triggerEvent("onContentRender",n.nodes.temporary),t=e.offsetHeight,n.animations.container.go({style:{height:[t,"px"].join("")},duration:n.params.animateDuration,anim:"smooth",onStop:function(){cm.remove(n.nodes.temporary),n.nodes.temporary=e,n.nodes.container.style.height="",cm.addClass(n.nodes.container,"is-loaded",!0),n.isRendering=!1,n.triggerEvent("onContentRenderEnd",n.nodes.temporary)}}),n}}),cm.define("Com.Router",{extend:"Com.AbstractController",events:["onChangeStart","onChange","onChangeEnd"],params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,customEvents:!0,route:null,addLeadPoint:!0,catchRouteErrors:!1,summonRouteOnError:!1},strings:{errors:{constructor_error:'An error has occurred in the route "{route}" constructor "{constructor}".',constructor_not_found:'Route "{route}" constructor "{constructor}" is not defined.'}}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Router",function(e,t,n,a){n.construct=function(){var e=this;e.routes={},e.routesBinds={},e.dataStorage={},e.current=null,e.previous=null,e.windowClickEventHandler=e.windowClickEvent.bind(e),e.popstateEventHandler=e.popstateEvent.bind(e),e.hashchangeEventHandler=e.hashchangeEvent.bind(e),a.prototype.construct.apply(e,arguments)},n.onSetEvents=function(){cm.addEvent(window,"click",this.windowClickEventHandler),cm.addEvent(window,"popstate",this.popstateEventHandler),cm.addEvent(window,"hashchange",this.hashchangeEventHandler)},n.onUnsetEvents=function(){cm.removeEvent(window,"click",this.windowClickEventHandler),cm.removeEvent(window,"popstate",this.popstateEventHandler),cm.removeEvent(window,"hashchange",this.hashchangeEventHandler)},n.windowClickEvent=function(e){var t;e.button||e.metaKey||e.ctrlKey||(t=cm.getEventTarget(e),t=this.getTargetLink(t),cm.isTagName(t,"a")&&(cm.preventDefault(e),this.processLink(t)))},n.getTargetLink=function(e){return!!cm.isElementNode(e)&&("a"===e.tagName.toLowerCase()&&"_blank"!==e.target&&-1!==this.prepareUrl(e.href).indexOf(this.prepareBaseUrl())||(e=this.getTargetLink(e.parentNode),!!cm.isElementNode(e)))&&e},n.popstateEvent=function(e){e=e.state;e&&this.processRoute(e)},n.hashchangeEvent=function(e){var t=this,n=cm.isEmpty(window.location.hash)?null:window.location.hash.slice(1);t.current.hash=n,t.current.href=cm.isEmpty(n)?t.current.location:[t.current.location,t.current.hash].join("#"),t.current.state=cm.clone(t.current.state),t.current.state.hash=n,t.current.state.href=t.current.href,window.history.replaceState(t.current.state,"",t.current.state.href)},n.processLink=function(e){var t=e.getAttribute("href"),e=e.dataset.preventDefault;cm.isEmpty(t)||"true"===e||(e=this.prepareRoute(t),this.pushRoute(e))},n.pushRoute=function(e,t){(e={route:(e=cm.isEmpty(e)?this.current.route:e).route,hash:e.hash,parameters:e.parameters,location:this.prepareHref(e.route,e.parameters),match:[],params:cm.merge({processRoute:!0,pushState:!0,replaceState:!1},t)}).href=cm.isEmpty(e.hash)?e.location:[e.location,e.hash].join("#");try{e.parameters=Object.fromEntries(new URLSearchParams(e.parameters))}catch(e){}e.data=this.getStorageData(e.route,e,e.params.data),cm.setBodyScrollTop(0),e.params.replaceState?window.history.replaceState(e,"",e.location):e.params.pushState&&window.history.pushState(e,"",e.location),e.params.processRoute&&this.processRoute(e),cm.isEmpty(e.hash)||(window.location.hash=e.hash)},n.processRoute=function(e){var t,n=cm.clone(e);this.destructRoute(this.current),t=this.getStateMatchedRoute(n),cm.isEmpty(t)&&(t={hasAccess:!0,route:"error",item:this.get("error")}),(n=cm.merge(t.item,n)).state=e,t.match&&(n.captures=this.mapCaptures(n.map,t.match)),cm.isEmpty(t.redirect)?this.constructRoute(n):cm.isArray(t.redirect)?this.redirect.apply(this,t.redirect):this.redirect(t.redirect,null,{urlParams:n.urlParams,captures:n.captures,data:n.data})},n.getStateMatchedRoute=function(a){var r,o=this;return cm.forEach(o.routes,function(e,t){var n=a.route.match(e.regexp);n&&(e=cm.clone(e),a.match.push(e),(t={roure:t,item:e,match:n,redirect:o.getRouteRedirect(e),access:o.checkRouteAccess(e)}).redirect||t.access)&&(r=t)}),r},n.destructRoute=function(e){return(this.previous=e)&&(e.constructor?e.controller&&e.controller.destruct&&e.controller.destruct():(e.onDestruct(e),e.callback(e))),this},n.constructRoute=function(e){var n,a=this;return a.triggerEvent("onChangeStart",e),a.current=e,cm.isEmpty(e.constructor)||(cm.isObject(e.constructor)?cm.forEach(e.constructor,function(e,t){a.checkRoleAccess(t)&&(n=e)}):n=e.constructor),n?a.constructRouteController(e,n):(e.onConstruct(e),e.callback(e)),a.triggerEvent("onChange",e),a.triggerEvent("onChangeEnd",e),a},n.constructRouteController=function(t,e){var n,a,r,o,s=this;s.params.catchRouteErrors?(r={"{route}":t.route,"{constructor}":e},o=cm.getConstructor(e,function(e){try{t.controller=new e(cm.merge(t.constructorParams,{container:s.params.container,route:t})),t.controller.triggerEvent("onConstructComplete")}catch(e){n=e,a=s.msg("errors.constructor_error",r)}}),cm.isEmpty(o)&&(a=s.msg("errors.constructor_not_found",r)),cm.isEmpty(a)||(cm.errorLog({type:"error",name:"Com.Router",message:a}),console.error(n),s.params.summonRouteOnError&&s.summon("error",null,{data:{code:1404,message:a,error:n}}))):cm.getConstructor(e,function(e){t.controller=new e(cm.merge(t.constructorParams,{container:s.params.container,route:t})),t.controller.triggerEvent("onConstructComplete")})},n.getRouteRedirect=function(e){var n,a=this;return cm.isEmpty(e.redirectTo)||(cm.isObject(e.redirectTo)?cm.forEach(e.redirectTo,function(e,t){a.checkRoleAccess(t)&&(n=e)}):n=e.redirectTo),n=cm.isFunction(n)?n(e):n},n.prepareUrl=function(e){return e=e.replace(new RegExp("^(http|https):"),"").replace(new RegExp("^//www\\."),"//")},n.prepareBaseUrl=function(e){var t=new RegExp("^www.").test(window.location.host),n=this.prepareUrl(cm._baseUrl);return n=e&&t?n.replace(new RegExp("^//"),"//www."):n},n.prepareRoute=function(e){var t=this.prepareBaseUrl(),t=(e=this.prepareUrl(e).replace(new RegExp("^"+t),"").replace(new RegExp("^\\."),""),(e=/^(\/|\.\/)/.test(e)?e:"/"+e).split("#")),e=t[0].split("?");return{route:e[0],parameters:e[1],hash:t[1]}},n.prepareHref=function(e,t){var n=this.prepareBaseUrl(!0),n=(e=e.replace(new RegExp("^\\."),""),window.location.protocol+n+e);return n=cm.isEmpty(t)?n:[n,t].join("?")},n.prepareExternalHref=function(e,t,n){return e=this.fillCaptures(e,n),e=cm.isEmpty(t)?e:[e,t].join("#")},n.getMap=function(e){for(var t,n=/({(\w+)})/g,a={},r=0;t=n.exec(e);)r++,t[2]&&(a[r]=t[2]);return a},n.mapCaptures=function(e,n){var a={};return cm.forEach(e,function(e,t){a[e]=n[t]}),a},n.fillCaptures=function(e,t){return cm.fillVariables(e,t)},n.checkRouteAccess=function(e){return!!e&&this.checkRoleAccess(e.access)},n.checkRoleAccess=function(e){return!0},n.getStorageData=function(e,t,n){var a={};return t&&(a=cm.merge(a,t.data)),this.dataStorage[e]&&(a=cm.merge(a,this.dataStorage[e]),this.dataStorage={}),a=cm.merge(a,n)},n.embed=function(e){this.params.container=e},n.add=function(t,e){var n=this,e=cm.merge({type:"internal",route:t,originRoute:t,name:null,access:"all",pattern:"([^\\/]+?)",regexp:null,map:[],captures:{},href:null,redirectTo:null,data:{},urlParams:{},constructor:!1,constructorParams:{},callback:function(){},onConstruct:function(){},onDestruct:function(){}},e);return e.regexp=new RegExp("^"+t.replace(/({\w+})/g,e.pattern)+"$"),e.map=n.getMap(t),cm.isString(e.name)?n.routesBinds[e.name]=t:cm.isArray(e.name)&&cm.forEach(e.name,function(e){n.routesBinds[e]=t}),n.routes[t]=e,n},n.get=function(e){return this.routesBinds[e]&&(e=this.routesBinds[e]),this.routes[e]},n.getURL=function(e,t,n,a){if(!cm.isEmpty(e)){var r=this.get(e);if(r){if("external"===r.type)return e=r.href,this.prepareExternalHref(e,t,n);e=r.route}return e=this.fillCaptures(e,n),this.dataStorage[e]=a,/^(\/|\.\/)/.test(e)||(e="/"+e),this.params.addLeadPoint&&!/^\./.test(e)&&(e="."+e),e=cm.isEmpty(t)?e:[e,t].join("#")}},n.getFullURL=function(e,t,n,a){return this.prepareHref(this.getURL(e,t,n,a))},n.getRedirect=function(e){var t,e=this.get(e);return t=e?this.getRouteRedirect(e):t},n.getCurrent=function(){return this.current},n.getPrevious=function(){return this.previous},n.checkAccess=function(e){e=this.get(e);return this.checkRouteAccess(e)},n.set=function(e,t,n){n=cm.merge({urlParams:null,captures:null,assignLocation:!1,replaceLocation:!1},n);var a=this.get(e),a=(a&&"external"===a.type&&(n.assignLocation=!0),cm.isEmpty(n.urlParams)?n.captures:n.urlParams),e=this.getURL(e,t,a);return this.setURL(e,t,n),this},n.setURL=function(e,t,n){return(n=cm.merge({assignLocation:!1,replaceLocation:!1},n)).replaceLocation?window.history.replaceState(this.current.state,"",e):n.assignLocation?window.location.assign(e):(e=this.prepareRoute(e),this.pushRoute(e,n)),this},n.summon=function(e,t,n){return n=cm.merge({data:{}},n),this.routesBinds[e]&&(e=this.routesBinds[e]),this.routes[e]&&(e=this.routes[e],(e=cm.clone(e)).params=cm.merge(e.params,n),e.data=this.getStorageData(e.route,e,n.data),this.destructRoute(this.current),this.constructRoute(e)),this},n.redirect=function(e,t,n){return n=cm.merge(n,{pushState:!1,replaceState:!0}),this.set(e,t,n),this},n.remove=function(e){var t,n=this;return n.routesBinds[e]&&(e=n.routesBinds[e]),n.routes[e]&&(t=n.routes[e],cm.isString(t.name)?delete n.routesBinds[t.name]:cm.isArray(t.name)&&cm.forEach(t.name,function(e){delete n.routesBinds[e]}),delete n.routes[e]),n},n.start=function(e,t,n){return e=cm.isUndefined(e)?this.params.route:e,n=cm.merge({pushState:!1,replaceState:!0},n),cm.isEmpty(e)?this.setURL(window.location.href,t,n):this.set(e,t,n),this}}),cm.define("Com.Scroll",{extend:"Com.AbstractController",events:["onScroll","onScrollStart","onScrollEnd"],params:{controllerEvents:!0,renderStructure:!1,embedStructureOnRender:!1,step:15,time:50,duration:300}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Scroll",function(e,t,n,a){n.construct=function(){this.nodes={left:cm.node("div"),right:cm.node("div"),up:cm.node("div"),down:cm.node("div"),scroll:cm.node("div")},a.prototype.construct.apply(this,arguments)},n.renderViewModel=function(){var e=this;a.prototype.renderViewModel.apply(e,arguments),e.components.animation=new cm.Animation(e.nodes.scroll),e.nodes.scroll.scrollTop=0,e.nodes.scroll.scrollLeft=0,cm.addEvent(e.nodes.up,"mousedown",e.startMoveUp.bind(e)),cm.addEvent(e.nodes.up,"mouseup",e.endAnimation.bind(e)),cm.addEvent(e.nodes.up,"mouseout",e.endAnimation.bind(e)),cm.addEvent(e.nodes.down,"mousedown",e.startMoveDown.bind(e)),cm.addEvent(e.nodes.down,"mouseup",e.endAnimation.bind(e)),cm.addEvent(e.nodes.down,"mouseout",e.endAnimation.bind(e)),cm.addEvent(e.nodes.left,"mousedown",e.startMoveLeft.bind(e)),cm.addEvent(e.nodes.left,"mouseup",e.endAnimation.bind(e)),cm.addEvent(e.nodes.left,"mouseout",e.endAnimation.bind(e)),cm.addEvent(e.nodes.right,"mousedown",e.startMoveRight.bind(e)),cm.addEvent(e.nodes.right,"mouseup",e.endAnimation.bind(e)),cm.addEvent(e.nodes.right,"mouseout",e.endAnimation.bind(e))},n.startMoveUp=function(){this.endAnimation(),this.animationInterval=setInterval(this.moveUp.bind(this),this.params.time),this.moveUp()},n.startMoveDown=function(){this.endAnimation(),this.animationInterval=setInterval(this.moveDown.bind(this),this.params.time),this.moveDown()},n.startMoveLeft=function(){this.endAnimation(),this.animationInterval=setInterval(this.moveLeft.bind(this),this.params.time),this.moveLeft()},n.startMoveRight=function(){this.endAnimation(),this.animationInterval=setInterval(this.moveRight.bind(this),this.params.time),this.moveRight()},n.endAnimation=function(){this.animationInterval&&clearInterval(this.animationInterval)},n.moveUp=function(){var e=Math.max(this.nodes.scroll.scrollTop-this.params.step,0);this.components.animation.go({style:{scrollTop:e},duration:this.params.time,anim:"simple"})},n.moveDown=function(){var e=Math.min(this.nodes.scroll.scrollTop+this.params.step,this.nodes.scroll.scrollHeight-this.nodes.scroll.offsetHeight);this.components.animation.go({style:{scrollTop:e},duration:this.params.time,anim:"simple"})},n.moveLeft=function(){var e=Math.max(this.nodes.scroll.scrollLeft-this.params.step,0);this.components.animation.go({style:{scrollLeft:e},duration:this.params.time,anim:"simple"})},n.moveRight=function(){var e=Math.min(this.nodes.scroll.scrollLeft+this.params.step,this.nodes.scroll.scrollWidth-this.nodes.scroll.offsetWidth);this.components.animation.go({style:{scrollLeft:e},duration:this.params.time,anim:"simple"})},n.scrollY=function(e){e=Math.max(Math.min(e,this.nodes.scroll.scrollHeight-this.nodes.scroll.offsetHeight),0);return this.components.animation.go({style:{scrollTop:e},duration:this.params.duration,anim:"smooth"}),this},n.scrollX=function(e){e=Math.max(Math.min(e,this.nodes.scroll.scrollWidth-this.nodes.scroll.offsetWidth),0);return this.components.animation.go({style:{scrollLeft:e},duration:this.params.duration,anim:"smooth"}),this}}),cm.define("Com.Slider",{modules:["Params","Langs","Events","DataConfig","DataNodes","Structure","Stack"],events:["onRender","onChangeStart","onChange","onPause","onStart","onEnableEditing","onEnableEditable","onDisableEditing","onDisableEditable"],params:{node:cm.node("div"),name:"",container:!1,className:null,customEvents:!0,renderStructure:!1,isEditing:!1,time:500,delay:4e3,effect:"fade",transition:"smooth",height:"auto",minHeight:48,items:[],slideshow:!0,cycle:!0,direction:"forward",pauseOnHover:!0,pauseOnScroll:!0,setInitial:!0,setOnClick:!1,fadePrevious:!1,controlsType:"partial",controlsClasses:[],buttons:!0,numericButtons:!1,arrows:!0,hasBar:!1,barDirection:"horizontal",scroller:{constructor:"Com.Scroll",constructorParams:{step:25,time:25}}},strings:{prev:"Previous",next:"Next"}},function(e){function t(){p(),_()}function n(){_()}var a,r,o=this,s={},i=(o.nodes={container:cm.node("div"),inner:cm.node("div"),slides:cm.node("div"),slidesInner:cm.node("ul"),next:cm.node("div"),prev:cm.node("div"),buttonsBar:cm.node("div"),buttons:cm.node("ul"),items:[],"layout-inner":cm.node("div"),"bar-inner":cm.node("div"),"bar-items":[]},o.anim={},o.items=[],o.itemsLength=0,o.effect=null,o.direction="next",o.current=null,o.previous=null,o.paused=!1,o.pausedOutside=!1,o.isProcess=!1,o.isEditing=null,o.isDestructed=null,function(){o.params.time=cm.getTransitionDurationFromLESS("ComSlider-Duration",o.params.time)}),c=function(){cm.isNode(o.params.node)&&(o.params.name=o.params.node.getAttribute("name")||o.params.name,o.isEditing=cm.hasClass(o.params.node,"is-editing")),o.params.effect=Com.SliderEffects[o.params.effect]?o.params.effect:"fade",o.params.transition=cm.inArray(["smooth","simple","acceleration","inhibition"],o.params.transition)?o.params.transition:"smooth",o.params.direction=cm.inArray(["forward","backward","random"],o.params.direction)?o.params.direction:"forward",!0===o.params.setInitial&&"random"===o.params.direction&&(o.params.setInitial="random"),(!o.params.delay||o.params.delay<=0)&&(o.params.slideshow=!1),o.params.height=cm.inArray(["auto","max","slide"],o.params.height)?o.params.height:"auto",o.params.minHeight&&isNaN(o.params.minHeight)&&(r=x(o.params.minHeight),o.params.minHeight=parseFloat(o.params.minHeight))},d=function(){o.params.renderStructure?l():cm.isNode(o.nodes.container)||(o.nodes.container=o.params.node),cm.addClass(o.nodes.container,o.params.className),cm.forEach(o.nodes.items,f),cm.forEach(o.params.items,f),cm.inArray(["full","partial","small"],o.params.controlsType)&&cm.addClass(o.nodes.controls,["is",o.params.controlsType].join("-")),cm.addClass(o.nodes.controls,o.params.controlsClasses),o.params.arrows&&(cm.click.add(o.nodes.next,function(e){cm.preventDefault(e),o.next()}),cm.click.add(o.nodes.prev,function(e){cm.preventDefault(e),o.prev()})),C(o.params.arrows),o.params.buttons&&cm.forEach(o.items,b),(!o.params.buttons||o.itemsLength<2)&&(cm.addClass(o.nodes.buttonsBar,"is-hidden"),o.nodes.buttonsBar.setAttribute("aria-hidden",!0)),o.nodes.inner.style.transition=[o.params.time,"ms"].join(""),/max|slide/.test(o.params.height)&&cm.addClass(o.nodes.container,"is-adaptive-content"),o.params.slideshow&&o.params.pauseOnHover&&(cm.addEvent(o.nodes.container,"mouseover",function(e){e=cm.getEvent(e);e=cm.getObjToEvent(e);cm.isParent(o.nodes.container,e,!0)||S()}),cm.addEvent(o.nodes.container,"mouseout",function(e){e=cm.getEvent(e);e=cm.getObjToEvent(e);cm.isParent(o.nodes.container,e,!0)||w()})),_(),o.anim.slides=new cm.Animation(o.nodes.slides),o.anim.slidesInner=new cm.Animation(o.nodes.slidesInner)},l=function(){o.nodes.container=cm.node("div",{classes:"com__slider"},o.nodes.inner=cm.node("div",{classes:"inner"},o.nodes.size=cm.node("div",{classes:"size"}),o.nodes.slides=cm.node("div",{classes:"slides"},o.nodes.slidesInner=cm.node("ul")),o.nodes.controls=cm.node("div",{classes:"com__gallery-controls"},cm.node("div",{classes:"inner"},o.nodes.prev=cm.node("div",{classes:"bar-arrow prev",title:o.msg("prev"),role:"button",tabindex:0},cm.node("div",{classes:"icon default prev"})),o.nodes.next=cm.node("div",{classes:"bar-arrow next",title:o.msg("next"),role:"button",tabindex:0},cm.node("div",{classes:"icon default next"})),o.nodes.buttonsBar=cm.node("div",{classes:"bar-buttons"},o.nodes.buttons=cm.node("ul")))))),o.embedStructure(o.nodes.container)},m=function(){cm.addEvent(window,"resize",o.redrawHandler),cm.addEvent(window,"scroll",o.scrollHandler),o.params.customEvents&&(cm.customEvent.add(o.nodes.container,"redraw",o.redrawHandler),cm.customEvent.add(o.nodes.container,"enableEditable",o.enableEditingHandler),cm.customEvent.add(o.nodes.container,"disableEditable",o.disableEditingHandler),cm.customEvent.add(o.nodes.container,"destruct",o.destructHandler))},u=function(){o.params.hasBar&&(o.nodes.ComScroll=cm.getNodes(o.params.node).ComScroll,cm.getConstructor(o.params.scroller.constructor,function(e){s.scroll=new e(cm.merge(o.params.scroller.constructorParams,{nodes:o.nodes.ComScroll}))}))},p=function(){switch(o.params.height){case"max":h();break;case"slide":g()}},h=function(){var t=0;cm.forEach(o.items,function(e){t=Math.max(t,cm.getRealHeight(e.nodes.container,"offsetRelative")),e.nodes.inner&&(t=Math.max(t,cm.getRealHeight(e.nodes.inner,"offsetRelative")))}),(t="%"===r?Math.max(t,o.nodes.inner.offsetWidth/100*o.params.minHeight):Math.max(t,o.params.minHeight))!==o.nodes.inner.offsetHeight&&(o.nodes.inner.style.height=[t,"px"].join(""))},g=function(){var e,t=0;null!==o.current&&(e=o.items[o.current],t=Math.max(t,cm.getRealHeight(e.nodes.container,"offsetRelative")),e.nodes.inner)&&(t=Math.max(t,cm.getRealHeight(e.nodes.inner,"offsetRelative"))),(t="%"===r?Math.max(t,o.nodes.inner.offsetWidth/100*o.params.minHeight):Math.max(t,o.params.minHeight))!==o.nodes.inner.offsetHeight&&(o.nodes.inner.style.height=[t,"px"].join(""))},f=function(e){e={index:o.items.length,nodes:e},cm.isEmpty(e.image)&&(e.image=cm.getData(e.nodes.container,"image")),o.params.hasBar&&(e.bar=o.nodes["bar-items"][e.index],e.bar.title=e.bar.link&&e.bar.link.getAttribute("title")||"",e.bar.src=e.bar.link&&e.bar.link.getAttribute("href")||""),v(e)},v=function(t){t=cm.merge({isImageSet:!0,index:o.items.length,image:null,nodes:{container:cm.node("li"),inner:null}},t),cm.isEmpty(t.image)||(t.isImageSet=!1),t.nodes.container.setAttribute("aria-hidden",!0),cm.addClass(t.nodes.container,"is-ready"),o.params.hasBar&&cm.click.add(t.bar.link,function(e){cm.preventDefault(e),y(t.index)}),t.anim=new cm.Animation(t.nodes.container),o.params.setOnClick&&cm.click.add(t.nodes.container,function(e){cm.preventDefault(e),y(t.index)}),!o.params.renderStructure&&cm.hasParentNode(t.nodes.container)||cm.appendChild(t.nodes.container,o.nodes.slidesInner),o.items.push(t),o.itemsLength=o.items.length},b=function(t){o.nodes.buttons.appendChild(t.nodes.button=cm.node("li")),o.params.numericButtons&&(t.nodes.button.innerHTML=t.index+1),cm.click.add(t.nodes.button,function(e){cm.preventDefault(e),o.direction=t.index<=o.current?"next":"prev",y(t.index)})},y=function(e){var t,n;o.isProcess||(o.isProcess=!0,o.params.slideshow&&k(),t=o.items[e],n=o.items[o.current],o.previous=o.current,o.current=e,o.triggerEvent("onChangeStart",{current:t,previous:n}),n&&o.params.buttons&&cm.removeClass(n.nodes.button,"active"),t.isImageSet||cm.isEmpty(t.image)||(t.isImageSet=!0,t.nodes.container.style.backgroundImage='url("'+t.image+'")'),o.params.buttons&&cm.addClass(t.nodes.button,"active"),o.params.arrows&&C(),o.params.hasBar&&E(t,n),Com.SliderEffects[o.effect](o,t,n,function(){o.isProcess=!1,o.triggerEvent("onChange",{current:t,previous:n}),cm.customEvent.trigger(t.nodes.container,"redraw",{direction:"child",self:!1})}),p())},C=function(e){var t=!1!==e&&(o.params.cycle||o.itemsLength<2?1<o.itemsLength:0<o.current),t=(o.nodes.prev.disabled=!t,o.nodes.prev.setAttribute("aria-hidden",!t),cm.toggleClass(o.nodes.prev,"is-hidden",!t),!1!==e&&(o.params.cycle||o.itemsLength<2?1<o.itemsLength:o.current<o.itemsLength-1));o.nodes.next.disabled=!t,o.nodes.next.setAttribute("aria-hidden",!t),cm.toggleClass(o.nodes.next,"is-hidden",!t)},E=function(e,t){t&&cm.removeClass(t.bar.container,"active"),cm.addClass(e.bar.container,"active"),"vertical"===o.params.barDirection?(t=e.bar.container.offsetTop-o.nodes["layout-inner"].offsetHeight/2+e.bar.container.offsetHeight/2,s.scroll.scrollY(t)):(t=e.bar.container.offsetLeft-o.nodes["layout-inner"].offsetWidth/2+e.bar.container.offsetWidth/2,s.scroll.scrollX(t))},w=function(){o.paused&&!o.pausedOutside&&(o.paused=!1,a=setTimeout(function(){switch(o.params.direction){case"random":y(o.getRandomIndex());break;case"backward":o.prev();break;case"forward":o.next()}},o.params.delay),o.triggerEvent("onStart"))},S=function(){o.paused||(o.paused=!0,a&&clearTimeout(a),o.triggerEvent("onPause"))},k=function(){o.paused||o.pausedOutside||(S(),w())},_=function(){var e;o.params.slideshow&&o.params.pauseOnScroll&&(e=cm.getRect(o.nodes.container),(cm.inRange(0,cm._pageSize.winHeight,e.top,e.bottom)?w:S)())},x=function(e){e=e.match(/\d+(\D*)/);return e?e[1]:""};o.enableEditing=function(){return"boolean"==typeof o.isEditing&&o.isEditing||(o.isEditing=!0,cm.addClass(o.nodes.container,"is-editing is-editable"),o.enableEditMode(),o.triggerEvent("onEnableEditing"),o.triggerEvent("onEnableEditable")),o},o.disableEditing=function(){return"boolean"==typeof o.isEditing&&!o.isEditing||(o.isEditing=!1,cm.removeClass(o.nodes.container,"is-editing is-editable"),o.disableEditMode(),o.triggerEvent("onDisableEditing"),o.triggerEvent("onDisableEditable")),o},o.destruct=function(){return this.isDestructed||(this.isDestructed=!0,cm.removeEvent(window,"resize",o.redrawHandler),cm.removeEvent(window,"scroll",o.scrollHandler),o.params.customEvents&&(cm.customEvent.remove(o.nodes.container,"redraw",o.redrawHandler),cm.customEvent.remove(o.nodes.container,"enableEditable",o.enableEditingHandler),cm.customEvent.remove(o.nodes.container,"disableEditable",o.disableEditingHandler),cm.customEvent.remove(o.nodes.container,"destruct",o.destructHandler)),this.removeFromStack()),this},o.redraw=function(){return animFrame(t),o},o.scroll=function(){return animFrame(n),o},o.set=function(e){return o.items[e]&&y(e),o},o.setInitial=function(e){return e=cm.isNumber(e)?o.items[e]?e:0:cm.isString(e)&&"random"===e?o.getRandomIndex():0,o.set(e),o},o.get=function(e){return o.items[e]||null},o.getRandomIndex=function(){if(o.items.length<=1)return 0;for(var e=0;(e=cm.rand(0,o.items.length-1))===o.current;);return e},o.next=function(){o.direction="next";var e=o.current+1===o.items.length?0:o.current+1;return y(e),o},o.prev=function(){o.direction="prev";var e=0===o.current?o.items.length-1:o.current-1;return y(e),o},o.pause=function(){return o.pausedOutside=!0,S(),o},o.start=function(){return o.pausedOutside=!1,w(),o},o.enableEditMode=function(){o.pause(),cm.addClass(o.nodes.container,"is-editable"),o.setEffect("edit")},o.disableEditMode=function(){o.start(),cm.removeClass(o.nodes.container,"is-editable"),o.restoreEffect()},o.setEffect=function(e){return o.current=null,o.previous=null,cm.removeClass(o.nodes.slides,["effect",o.effect].join("-")),o.nodes.slidesInner.scrollLeft=0,cm.forEach(o.items,function(e){e.nodes.container.style.display="",e.nodes.container.style.opacity="",e.nodes.container.style.left="",e.nodes.container.style.zIndex=""}),o.effect=Com.SliderEffects[e]?e:"fade",cm.addClass(o.nodes.slides,["effect",o.effect].join("-")),o.isEditing?o.setInitial(0):!1!==o.params.setInitial&&o.setInitial(o.params.setInitial),p(),o},o.restoreEffect=function(){return o.setEffect(o.params.effect),o},o.redrawHandler=o.redraw.bind(o),o.scrollHandler=o.scroll.bind(o),o.destructHandler=o.destruct.bind(o),o.enableEditingHandler=o.enableEditing.bind(o),o.disableEditingHandler=o.disableEditing.bind(o),i(),o.setParams(e),o.convertEvents(o.params.events),o.getDataNodes(o.params.node),o.getDataConfig(o.params.node),c(),d(),u(),m(),o.setEffect(o.params.effect),o.addToStack(o.nodes.container),o.params.isEditing&&o.enableEditing(),o.triggerEvent("onRender")}),Com.SliderEffects={},Com.SliderEffects.none=function(e,t,n,a){n&&t!==n&&(n.nodes.container.setAttribute("aria-hidden",!0),n.nodes.container.style.display="none",n.nodes.container.style.zIndex=1),t.nodes.container.setAttribute("aria-hidden",!1),t.nodes.container.style.zIndex=2,t.nodes.container.style.display="block",a()},Com.SliderEffects.edit=function(e,t,n,a){n&&t!==n&&(n.nodes.container.setAttribute("aria-hidden",!0),n.nodes.container.style.display="none",n.nodes.container.style.zIndex=1),t.nodes.container.setAttribute("aria-hidden",!1),t.nodes.container.style.zIndex=2,t.nodes.container.style.display="block",a()},Com.SliderEffects.fade=function(e,t,n,a){function r(e){e.nodes.container.style.display="none",e.nodes.container.style.zIndex=1,e.nodes.container.style.opacity=0,e.nodes.container.setAttribute("aria-hidden",!0)}function o(e){e.nodes.container.style.zIndex=2,e.nodes.container.style.opacity=1,e.nodes.container.style.display="block",e.nodes.container.setAttribute("aria-hidden",!1)}n&&t!==n?(n&&(n.nodes.container.setAttribute("aria-hidden",!0),n.nodes.container.style.zIndex=1,e.params.fadePrevious?n.anim.go({style:{opacity:0},duration:e.params.time,anim:e.params.transition,onStop:function(){return r(n)}}):setTimeout(function(){return r(n)},e.params.time)),o(t),t.nodes.container.style.opacity=0,t.anim.go({style:{opacity:1},duration:e.params.time,anim:e.params.transition,onStop:a})):(o(t),a())},Com.SliderEffects["fade-out"]=function(e,t,n,a){function r(e){e.nodes.container.style.zIndex=2,e.nodes.container.style.opacity=1,e.nodes.container.style.display="block",e.nodes.container.setAttribute("aria-hidden",!1)}n&&t!==n?(n&&(n.nodes.container.setAttribute("aria-hidden",!0),n.nodes.container.style.zIndex=1,n.anim.go({style:{opacity:0},duration:e.params.time,anim:e.params.transition,onStop:function(){var e;(e=n).nodes.container.style.display="none",e.nodes.container.style.zIndex=1,e.nodes.container.style.opacity=0,e.nodes.container.setAttribute("aria-hidden",!0)}})),r(t),t.nodes.container.style.opacity=0,t.anim.go({style:{opacity:1},duration:e.params.time,anim:e.params.transition,onStop:a})):(r(t),a())},Com.SliderEffects.push=function(e,t,n,a){n&&t!==n&&n.nodes.container.setAttribute("aria-hidden",!0),t.nodes.container.setAttribute("aria-hidden",!1),e.anim.slidesInner.go({style:{scrollLeft:t.nodes.container.offsetLeft},duration:e.params.time,anim:e.params.transition,onStop:a})},Com.SliderEffects.pull=function(e,t,n,a){function r(e){e.nodes.container.style.zIndex=2,e.nodes.container.style.left=0,e.nodes.container.style.display="block",e.nodes.container.setAttribute("aria-hidden",!1)}n&&t!==n?(n&&(n.nodes.container.setAttribute("aria-hidden",!0),n.nodes.container.style.zIndex=1,n.anim.go({style:{left:"next"===e.direction?"-100%":"100%"},duration:e.params.time,anim:e.params.transition,onStop:function(){var e;(e=n).nodes.container.style.zIndex=1,e.nodes.container.style.left="100%",e.nodes.container.style.display="none",e.nodes.container.setAttribute("aria-hidden",!0)}})),r(t),"next"===e.direction?t.nodes.container.style.left="100%":"prev"===e.direction&&(t.nodes.container.style.left="-100%"),t.anim.go({style:{left:"0%"},duration:e.params.time,anim:e.params.transition,onStop:a})):(r(t),a())},Com.SliderEffects["pull-overlap"]=function(e,t,n,a){function r(e){e.nodes.container.style.zIndex=2,e.nodes.container.style.left=0,e.nodes.container.style.display="block",e.nodes.container.setAttribute("aria-hidden",!1)}n&&t!==n?(n&&(n.nodes.container.setAttribute("aria-hidden",!0),n.nodes.container.style.zIndex=1,setTimeout(function(){var e;(e=n).nodes.container.style.zIndex=1,e.nodes.container.style.left="100%",e.nodes.container.style.display="none",e.nodes.container.setAttribute("aria-hidden",!0)},e.params.time)),r(t),"next"===e.direction?t.nodes.container.style.left="100%":"prev"===e.direction&&(t.nodes.container.style.left="-100%"),t.anim.go({style:{left:"0%"},duration:e.params.time,anim:e.params.transition,onStop:a})):(r(t),a())},Com.SliderEffects["pull-parallax"]=function(e,t,n,a){function r(e){e.nodes.container.style.zIndex=2,e.nodes.container.style.left=0,e.nodes.container.style.display="block",e.nodes.container.setAttribute("aria-hidden",!1)}n&&t!==n?(n&&(n.nodes.container.setAttribute("aria-hidden",!0),n.nodes.container.style.zIndex=1,n.anim.go({style:{left:"next"===e.direction?"-50%":"50%"},duration:e.params.time,anim:e.params.transition,onStop:function(){var e;(e=n).nodes.container.style.zIndex=1,e.nodes.container.style.left="100%",e.nodes.container.style.display="none",e.nodes.container.setAttribute("aria-hidden",!0)}})),r(t),"next"===e.direction?t.nodes.container.style.left="100%":"prev"===e.direction&&(t.nodes.container.style.left="-100%"),t.anim.go({style:{left:"0%"},duration:e.params.time,anim:e.params.transition,onStop:a})):(r(t),a())},Com.SliderEffects["pull-parallax-css"]=function(e,t,n,a){function r(e){e.nodes.container.style.zIndex=2,cm.setCSSTranslate(e.nodes.container,"0%",0,0),e.nodes.container.style.display="block",e.nodes.container.setAttribute("aria-hidden",!1)}n&&t!==n?(n&&(n.nodes.container.setAttribute("aria-hidden",!0),n.nodes.container.style.zIndex=1,cm.transition(n.nodes.container,{properties:{transform:"translateX("+("next"===e.direction?"-50%":"50%")+")"},duration:e.params.time,delayOut:30,onStop:function(){var e;(e=n).nodes.container.style.zIndex=1,cm.setCSSTranslate(e.nodes.container,"100%",0,0),e.nodes.container.style.display="none",e.nodes.container.setAttribute("aria-hidden",!0)}})),r(t),"next"===e.direction?cm.setCSSTranslate(t.nodes.container,"100%",0,0):"prev"===e.direction&&cm.setCSSTranslate(t.nodes.container,"-100%",0,0),cm.transition(t.nodes.container,{properties:{transform:"translateX(0%)"},duration:e.params.time,delayOut:30,onStop:a})):(r(t),a())},Com.SliderEffects.custom=function(t,e,n,a){function r(e){cm.addClass(e.nodes.container,"active",!0),cm.removeClass(e.nodes.container,"show",!0),cm.removeClass(e.nodes.container,t.direction,!0),e.nodes.container.setAttribute("aria-hidden",!1)}n&&e!==n?(n&&(n.nodes.container.setAttribute("aria-hidden",!0),cm.addClass(n.nodes.container,"hide",!0),cm.addClass(n.nodes.container,t.direction,!0)),n&&(cm.addClass(e.nodes.container,"show"),cm.addClass(e.nodes.container,t.direction)),r(e),setTimeout(function(){n&&(cm.removeClass(n.nodes.container,t.direction),cm.removeClass(n.nodes.container,"active hide")),a()},t.params.time)):(r(e),a())},cm.define("Com.Sortable",{modules:["Params","Events","DataConfig","DataNodes"],events:["onRender","onRemove","onStart","onSort"],params:{node:cm.node("div"),process:!0,"Com.Draganddrop":{draggableContainer:"selfParent",direction:"vertical",limit:!0,scroll:!1,animateRemove:!1,removeNode:!1}}},function(e){function t(){a.components.dd=new Com.Draganddrop(a.params["Com.Draganddrop"]).addEvent("onDragStart",n).addEvent("onRemove",r).addEvent("onDrop",o),a.params.process&&cm.forEach(a.nodes.groups,s),a.triggerEvent("onRender")}var a=this,n=(a.components={},a.nodes={groups:[]},function(e,t){a.triggerEvent("onStart",t)}),r=function(e,t){a.triggerEvent("onRemove",t)},o=function(e,t){a.triggerEvent("onSort",t)},s=function(t){t.container&&(a.addGroup(t.container),t.items)&&cm.forEach(t.items,function(e){i(e,t)})},i=function(e,t){a.addItem(e.container,t.container),e.groups&&cm.forEach(e.groups,s)};a.addGroup=function(e){return a.components.dd.registerArea(e),a},a.removeGroup=function(e){return a.components.dd.removeArea(e),a},a.addItem=function(e,t){var n=cm.getNodes(e);return n.items[0].drag&&n.items[0].drag.setAttribute("data-com-draganddrop","drag"),a.components.dd.registerDraggable(e,t),a},a.removeItem=function(e){return a.components.dd.removeDraggable(e),a},a.setParams(e),a.convertEvents(a.params.events),a.getDataNodes(a.params.node),a.getDataConfig(a.params.node),t()}),cm.define("Com.Spacer",{modules:["Params","Events","DataConfig","Stack"],required:["Com.Draggable"],events:["onRender","onChange","onResize","onEnableEditing","onEnableEditable","onDisableEditing","onDisableEditable"],params:{node:cm.node("div"),name:"",height:0,minHeight:0,isEditing:!0,customEvents:!0,"Com.Draggable":{direction:"vertical"}}},function(e){function t(){cm.isNode(s.params.node)&&(s.params.name=s.params.node.getAttribute("name")||s.params.name),s.params["Com.Draggable"].minY=s.params.minHeight}function n(){s.nodes.dragContainer=cm.node("div",{class:"com__spacer__chassis"},s.nodes.drag=cm.node("div",{class:"pt__drag is-vertical"},cm.node("div",{class:"line"}),cm.node("div",{class:"drag"},cm.node("div",{class:"icon draggable"})))),s.nodes.rulerContainer=cm.node("div",{class:"com__spacer__ruler"},s.nodes.ruler=cm.node("div",{class:"pt__ruler is-vertical is-small"},cm.node("div",{class:"line line-top"}),s.nodes.rulerCounter=cm.node("div",{class:"counter"}),cm.node("div",{class:"line line-bottom"}))),s.params.node.appendChild(s.nodes.dragContainer),s.params.node.appendChild(s.nodes.rulerContainer),cm.addEvent(window,"resize",function(){s.redraw()}),s.params.customEvents&&(cm.customEvent.add(s.params.node,"redraw",function(){s.redraw()}),cm.customEvent.add(s.params.node,"enableEditable",function(){s.enableEditing()}),cm.customEvent.add(s.params.node,"disableEditable",function(){s.disableEditing()}))}function a(){s.components.draggable=new Com.Draggable(cm.merge(s.params["Com.Draggable"],{node:s.nodes.dragContainer,events:{onStart:i,onSelect:function(e,t){s.value=t.top,c()},onStop:d}}))}function r(e,t){s.value=Math.max(e,s.params.minHeight),o(),l(),t&&(s.triggerEvent("onChange",{height:s.value}),s.triggerEvent("onResize",{height:s.value}))}function o(){s.params.node.style.height=[s.value,"px"].join(""),s.nodes.dragContainer.style.top=[s.params.node.offsetHeight,"px"].join("")}var s=this,i=(s.isEditing=null,s.components={},s.nodes={},s.value=0,function(){cm.addClass(document.body,"pt__drag__body--vertical"),cm.addClass(s.params.node,"is-active"),cm.addClass(s.nodes.drag,"is-active"),cm.addClass(s.nodes.ruler,"is-active")}),c=function(){s.params.node.style.height=[s.value,"px"].join(""),l(),s.triggerEvent("onChange",{height:s.value})},d=function(){cm.removeClass(document.body,"pt__drag__body--vertical"),cm.removeClass(s.params.node,"is-active"),cm.removeClass(s.nodes.drag,"is-active"),cm.removeClass(s.nodes.ruler,"is-active"),s.triggerEvent("onResize",{height:s.value})},l=function(){s.nodes.rulerCounter.innerHTML=[s.value," px"].join("")};s.enableEditing=function(){return"boolean"==typeof s.isEditing&&s.isEditing||(s.isEditing=!0,cm.addClass(s.params.node,"is-editing is-editable"),s.redraw(),s.triggerEvent("onEnableEditing"),s.triggerEvent("onEnableEditable")),s},s.disableEditing=function(){return"boolean"==typeof s.isEditing&&!s.isEditing||(s.isEditing=!1,cm.removeClass(s.params.node,"is-editing is-editable"),s.triggerEvent("onDisableEditing"),s.triggerEvent("onDisableEditable")),s},s.redraw=function(){return o(),s},s.set=function(e,t){return t=void 0===t||t,isNaN(e)||r(e,t),s},s.get=function(){return s.value},s.setParams(e),s.convertEvents(s.params.events),s.getDataConfig(s.params.node),t(),n(),a(),r(parseFloat(s.params.height),!1),s.params.isEditing&&s.enableEditing(),s.addToStack(s.params.node),s.triggerEvent("onRender")}),Com.Elements.Tabset={},Com.GetTabset=function(e){return Com.Elements.Tabset[e]||null},cm.define("Com.Tabset",{modules:["Params","Events","DataConfig","DataNodes","Stack","Structure"],events:["onRender","onTabShowStart","onTabShow","onTabHideStart","onTabHide"],params:{node:cm.node("div"),container:null,name:"",embedStructure:"replace",toggleOnHashChange:!0,renderOnInit:!0,removeOnDestruct:!0,customEvents:!0,setInitialTab:!0,setInitialTabImmediately:!0,unsetOnReClick:!1,active:null,className:"",adaptive:!0,tabsAlign:"left",tabsPosition:"top",tabsFlexible:!1,tabsWidth:256,showTabs:!0,showTabsTitle:!0,animateSwitch:!0,calculateMaxHeight:!1,animateDuration:"cm._config.animDuration",tabs:[],icons:{menu:"icon default linked"}}},function(e){function t(){u.params.animateDuration=cm.getTransitionDurationFromLESS("ComTabset-Duration",u.params.animateDuration),u.params.tabsWidth=cm.getLESSVariable("ComTabset-Column-Width",u.params.tabsWidth,!0)}function n(){cm.inArray(["top","right","bottom","left"],u.params.tabsPosition)||(u.params.tabsPosition="top"),cm.inArray(["left","center","right","justify"],u.params.tabsAlign)||(u.params.tabsAlign="left"),cm.isNumber(u.params.tabsWidth)&&(u.params.tabsWidth=[u.params.tabsWidth,"px"].join(""))}function a(){u.params.toggleOnHashChange&&cm.addEvent(window,"hashchange",l),i()}function r(){u.nodes.container=cm.node("div",{class:"com__tabset"},u.nodes.content=cm.node("div",{class:"com__tabset__content"},u.nodes.contentUL=cm.node("ul"))),u.nodes.headerTitle=cm.node("div",{class:"com__tabset__head-title"},u.nodes.headerTitleText=cm.node("div",{class:"com__tabset__head-text"}),u.nodes.headerMenu=cm.node("div",{class:"com__tabset__head-menu pt__menu is-manual is-hide"},u.nodes.headerMenuButton=cm.node("div",{class:u.params.icons.menu}),u.nodes.headerMenuUL=cm.node("ul",{class:"pt__menu-dropdown"}))),u.nodes.headerTabs=cm.node("div",{class:"com__tabset__head-tabs"},u.nodes.headerUL=cm.node("ul")),u.params.adaptive&&cm.addClass(u.nodes.container,"is-adaptive"),u.params.animateSwitch&&cm.addClass(u.nodes.content,"is-animated"),cm.addEvent(u.nodes.headerMenuButton,"click",f),/left|right/.test(u.params.tabsPosition)&&(u.nodes.headerTabs.style.width=u.params.tabsWidth,u.nodes.content.style.width=["calc(100% - ",u.params.tabsWidth,")"].join("")),u.params.showTabs&&(cm.insertBefore(u.nodes.headerTitle,u.nodes.content),/bottom|right/.test(u.params.tabsPosition)?cm.insertAfter(u.nodes.headerTabs,u.nodes.content):cm.insertBefore(u.nodes.headerTabs,u.nodes.content)),cm.forEach(u.nodes.tabs,function(e){p(cm.merge({content:e.container},u.getNodeDataConfig(e.container)))}),cm.forEach(u.params.tabs,function(e){p(e)}),cm.addClass(u.nodes.container,["is-tabs",u.params.tabsPosition].join("-")),/top|bottom/.test(u.params.tabsPosition)&&cm.addClass(u.nodes.container,["is-tabs-pull",u.params.tabsAlign].join("-")),u.params.tabsFlexible&&cm.addClass(u.nodes.container,"is-tabs-flexible"),cm.isEmpty(u.params.className)||cm.addClass(u.nodes.container,u.params.className),u.params.node.id&&(u.nodes.container.id=u.params.node.id),u.embedStructure(u.nodes.container),cm.addEvent(window,"resize",S),cm.addEvent(window,"click",k),u.addToStack(u.nodes.container),u.params.customEvents&&cm.customEvent.add(u.nodes.container,"destruct",u.destruct),u.triggerEvent("onRender")}function o(t,e){var n={};return n.container=cm.node("li",n.a=cm.node("a",n.title=cm.node("div",{class:"title"},t.title))),e&&(cm.isNode(t.image)?n.image=t.image:cm.isEmpty(t.image)||(n.image=cm.node("div",{class:"image"},cm.node("img",{src:t.image,alt:""}))),n.image&&cm.insertFirst(n.image,n.a),u.params.showTabsTitle)&&n.a.setAttribute("title",cm.cutHTML(t.title)),cm.addEvent(n.a,"click",function(e){e=cm.getEvent(e),cm.preventDefault(e),u.params.unsetOnReClick&&u.active===t.id?u.unset():u.params.toggleOnHashChange?window.location.hash=t.id:h(t.id),b()}),n}function s(e){e.id===u.active&&u.tabsListing[0]&&h(u.tabsListing[0]),cm.remove(e.tab.container),cm.remove(e.menu.container),cm.remove(e.content),u.tabsListing=cm.arrayRemove(u.tabsListing,e),delete u.tabs[e.id]}function i(){var e=u.params.setInitialTab?C():u.params.active;E(e)&&h(e)}function c(e){e.content.style.display="block",cm.addClass(e.tab.container,"active"),cm.addClass(e.menu.container,"active"),cm.addClass(e.content,"active",!0),u.nodes.headerTitleText.innerHTML=e.title,(u.isInitial||!u.params.animateSwitch||u.params.calculateMaxHeight?(u.params.calculateMaxHeight&&w(),u.previous&&(u.tabs[u.previous].content.style.display="none"),g):y)()}function d(e){(e=u.tabs[e])&&(e.onHideStart(u,e),u.triggerEvent("onTabHideStart",e),e.isHide=!0,cm.removeClass(e.tab.container,"active"),cm.removeClass(e.menu.container,"active"),cm.removeClass(e.content,"active"),e.onHide(u,e),u.triggerEvent("onTabHide",e))}function l(){var e=window.location.hash.slice(1);E(e)&&h(e)}function m(e){if(e&&u.tabs[e])return u.tabs[e]}var u=this,p=(u.nodes={tabs:[]},u.anim={},u.tabs={},u.tabsListing=[],u.active=!1,u.previous=!1,u.isInitial=null,u.isProcess=!1,u.isDestructed=!1,u.isMenuShown=!1,function(e){u.tabs[e.id]&&s(u.tabs[e.id]),e=cm.merge({id:"",title:"",content:cm.node("li"),image:null,isHide:!0,constructor:!1,constructorParams:{},onShowStart:function(e,t){},onShow:function(e,t){},onHideStart:function(e,t){},onHide:function(e,t){}},e),cm.isEmpty(e.image)||cm.isNode(e.image)||(e.image=cm.strReplace(e.image,{"%baseUrl%":cm._baseUrl})),e.tab=o(e,!0),e.menu=o(e,!1),cm.removeClass(e.content,"active"),u.nodes.headerUL.appendChild(e.tab.container),u.nodes.headerMenuUL.appendChild(e.menu.container),u.nodes.contentUL.appendChild(e.content),u.tabsListing.push(e),u.tabs[e.id]=e}),h=function(e){var t=u.tabs[e];t&&e!==u.active&&!u.isProcess&&(u.isProcess=!0,d(u.active),u.previous=u.active,u.active=e,cm.isBoolean(u.isInitial)?u.isInitial=!1:u.isInitial=!u.previous&&u.params.setInitialTabImmediately&&u.params.setInitialTab,t.isHide=!1,t.onShowStart(u,t),u.triggerEvent("onTabShowStart",t),t.constructor&&(t.controller?t.controller.refresh&&t.controller.refresh():cm.getConstructor(t.constructor,function(e){t.controller=new e(cm.merge(t.constructorParams,{container:t.content}))})),c(t))},g=function(){var e=u.tabs[u.active];e?(e.onShow(u,e),u.triggerEvent("onTabShow",e),u.isProcess=!1,cm.customEvent.trigger(e.content,"redraw",{direction:"child",self:!1})):u.isProcess=!1},f=function(){(u.isMenuShown?b:v)()},v=function(){u.isMenuShown=!0,cm.replaceClass(u.nodes.headerMenu,"is-hide","is-show")},b=function(){u.isMenuShown=!1,cm.replaceClass(u.nodes.headerMenu,"is-show","is-hide")},y=function(){var e=0,t=0;u.previous&&(e=cm.getRealHeight(u.tabs[u.previous].content,"offsetRelative")),u.active&&(t=cm.getRealHeight(u.tabs[u.active].content,"offsetRelative")),u.nodes.contentUL.style.overflow="hidden",u.nodes.contentUL.style.height=[e,"px"].join(""),cm.onSchedule(function(){u.nodes.contentUL.style.height=[t,"px"].join(""),setTimeout(function(){u.previous&&(u.tabs[u.previous].content.style.display="none"),u.nodes.contentUL.style.overflow="visible",u.nodes.contentUL.style.height="auto",g()},u.params.animateDuration)})},C=function(){var e;return cm.isEmpty(u.tabsListing)||cm.isEmpty(u.tabs)?null:u.params.toggleOnHashChange&&(e=window.location.hash.slice(1),E(e))||(e=u.params.active,E(e))?e:u.tabsListing[0].id},E=function(e){return!!m(e)},w=function(){var t=0;cm.forEach(u.tabs,function(e){t=Math.max(t,cm.getRealHeight(e.content,"offsetRelative"))}),t!==u.nodes.contentUL.offsetHeight&&(u.nodes.contentUL.style.minHeight=[t,"px"].join(""),cm.forEach(u.tabs,function(e){e.content.style.minHeight=[t,"px"].join("")}))},S=function(){u.params.calculateMaxHeight&&w()},k=function(e){e=cm.getEventTarget(e);cm.isParent(u.nodes.headerMenu,e,!0)||b()};u.render=function(){return a(),u},u.reset=function(){return i(),u},u.destruct=function(){return u.isDestructed||(u.isDestructed=!0,cm.customEvent.trigger(u.nodes.container,"destruct",{direction:"child",self:!1}),u.params.customEvents&&cm.customEvent.remove(u.nodes.container,"destruct",u.destruct),u.params.removeOnDestruct&&u.remove(),u.removeFromStack()),u},u.set=function(e){return E(e)&&h(e),u},u.setByIndex=function(e){return(e=u.tabsListing[e])&&h(e.id),u},u.unset=function(){return u.previous=u.active,u.active=null,d(u.previous),y(),u.previous=null,u.active=null,u.params.toggleOnHashChange&&(window.location.hash=""),u},u.reset=function(){return i(),u},u.get=m,u.getTabs=function(){return u.tabs},u.getActiveTab=function(){return u.tabs[u.active]},u.addTab=function(e){return e&&e.id&&p(e),u},u.addTabs=function(e){return(cm.isArray(e)||cm.isObject(e))&&cm.forEach(e,u.addTab),u},u.removeTab=function(e){return e&&u.tabs[e]&&s(u.tabs[e]),u},u.setEvents=function(e){return e&&(u.tabs=cm.merge(u.tabs,e)),u},u.remove=function(){return cm.removeEvent(window,"hashchange",l),cm.removeEvent(window,"resize",S),cm.removeEvent(window,"click",k),cm.remove(u.nodes.container),u},u.getNodes=function(e){return u.nodes[e]||u.nodes},t(),u.setParams(e),u.convertEvents(u.params.events),u.getDataNodes(u.params.node,u.params.nodesDataMarker,!1),u.getDataConfig(u.params.node),n(),r(),u.params.renderOnInit&&a()}),cm.define("Com.Tabset2",{extend:"Com.TabsetHelper",params:{controllerEvents:!0,renderStructure:!0,embedStructureOnRender:!0,embedStructure:"replace",removeOnDestruct:!0,toggleOnHashChange:!0,targetEvent:"click",documentNode:window,items:[],active:null,setInitialTab:!0,setInitialTabImmediately:!0,hidePreviousTab:["onTabShowEnd","onUnset"],processTabs:!1,showMenu:!0,renderTabView:!0,tabsHolderTagName:"ul",tabsAlign:"left",tabsPosition:"top",tabsFlexible:!1,tabsWidth:256,showTabs:!0,showTabsTitle:!0,setTabsHash:!1,showContent:!0,switchManually:!1,animateSwitch:!0,animateHeight:!0,animateDuration:"cm._config.animateDuration",calculateMaxHeight:!1,showLoader:!0,responseKey:"data",responseHTML:!0,cache:!1,ajax:{type:"json",method:"get",url:"",params:""},adaptive:!0,className:"",icons:{menu:"icon default linked"},overlayConstructor:"Com.Overlay",overlayParams:{position:"absolute",lazy:!0,autoOpen:!1,removeOnClose:!0}}},function(e){Com.TabsetHelper.apply(this,arguments)}),cm.getConstructor("Com.Tabset2",function(e,t,n,o){n.onConstructStart=function(){this.isMenuShown=!1,this.toggleMenuHandler=this.toggleMenu.bind(this),this.windowClickHandler=this.windowClick.bind(this)},n.onGetLESSVariablesProcess=function(){this.params.animateDuration=cm.getTransitionDurationFromLESS("ComTabset-Duration",this.params.animateDuration),this.params.tabsWidth=cm.getLESSVariable("ComTabset-Column-Width",this.params.tabsWidth,!0)},n.onValidateParams=function(){cm.isNode(this.params.node)&&this.collectTabs()},n.onSetEvents=function(){o.prototype.onSetEvents.apply(this,arguments),cm.addEvent(this.params.documentNode,"click",this.windowClickHandler)},n.onUnsetEvents=function(){o.prototype.onUnsetEvents.apply(this,arguments),cm.removeEvent(this.params.documentNode,"click",this.windowClickHandler)},n.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.renderViewStructure(),e.triggerEvent("onRenderViewProcess"),e.params.adaptive&&cm.addClass(e.nodes.container,"is-adaptive"),/left|right/.test(e.params.tabsPosition)&&(e.nodes.headerTabs.style.width=e.params.tabsWidth,e.nodes.content.style.width=["calc(100% - ",e.params.tabsWidth,")"].join("")),cm.addClass(e.nodes.container,["is-tabs",e.params.tabsPosition].join("-")),/top|bottom/.test(e.params.tabsPosition)&&cm.addClass(e.nodes.container,["is-tabs-pull",e.params.tabsAlign].join("-")),e.params.tabsFlexible&&cm.addClass(e.nodes.container,"is-tabs-flexible"),e.params.animateSwitch&&cm.addClass(e.nodes.content,["is-animated","is-animated2"]),e.params.showContent&&cm.appendChild(e.nodes.content,e.nodes.inner),e.params.showTabs&&(e.params.showContent?(e.params.showMenu&&cm.insertBefore(e.nodes.headerTitle,e.nodes.content),/bottom|right/.test(e.params.tabsPosition)?cm.insertAfter(e.nodes.headerTabs,e.nodes.content):cm.insertBefore(e.nodes.headerTabs,e.nodes.content)):(e.params.showMenu&&cm.appendChild(e.nodes.headerTitle,e.nodes.inner),cm.appendChild(e.nodes.headerTabs,e.nodes.inner))),e.triggerEvent("onRenderViewEnd")},n.renderViewStructure=function(){var e=this;e.nodes.container=e.nodes.inner=cm.node("div",{classes:"com__tabset"}),e.nodes.content=cm.node("div",{classes:"com__tabset__content"},e.nodes.contentUL=cm.node("ul",{classes:"inner"})),e.nodes.headerTitle=cm.node("div",{classes:"com__tabset__head-title"},e.nodes.headerTitleText=cm.node("div",{classes:"com__tabset__head-text"}),e.nodes.headerMenu=cm.node("div",{classes:"com__tabset__head-menu pt__menu is-manual is-hide"},e.nodes.headerMenuButton=cm.node("div",{classes:e.params.icons.menu}),e.nodes.headerMenuUL=cm.node("ul",{classes:"pt__menu-dropdown",role:"tablist"}))),e.nodes.headerTabs=cm.node("div",{classes:"com__tabset__head-tabs"},e.nodes.headerUL=cm.node(e.params.tabsHolderTagName,{classes:"inner",role:"tablist"}))},n.renderViewModel=function(){o.prototype.renderViewModel.apply(this,arguments),cm.addEvent(this.nodes.headerMenuButton,"click",this.toggleMenuHandler)},n.collectTabs=function(){var t=this;cm.forEach(t.nodes.tabs,function(e){cm.isNode(e.container)&&(cm.removeClass(e.content,"active"),t.params.items.push(cm.merge({content:e.container},t.getNodeDataConfig(e.container))))})},n.renderTabView=function(e){e.label=this.renderTabLink(e,"label"),e.menu=this.renderTabLink(e,"menu"),e.tab=this.renderTabContent(e),this.setTabLinkAttributes(e,e.label),this.setTabLinkAttributes(e,e.menu),this.setTabContentAttributes(e,e.tab),cm.appendChild(e.label.container,this.nodes.headerUL),cm.appendChild(e.menu.container,this.nodes.headerMenuUL),cm.appendChild(e.tab.container,this.nodes.contentUL)},n.renderTabContent=function(e){var t={};return t.container=cm.node("li",t.inner=cm.node("div",{classes:"com__tabset__panel"},e.content)),t},n.setTabContentAttributes=function(e,t){t.container.setAttribute("id",e.tabName),t.container.setAttribute("role","tabpanel"),t.container.setAttribute("tabindex","0"),t.container.setAttribute("aria-labelledby",e.labelName),t.container.setAttribute("hidden",!1)},n.renderTabLink=function(e,t){var n={};return n.container=cm.node("li",n.link=cm.node("a",n.title=cm.node("div",{classes:"title"}))),cm.isNode(e.title)?(e.title=cm.clone(e.title,!0),cm.appendChild(e.title,n.title)):n.title.innerHTML=e.title,"label"===t&&(cm.isNode(e.image)?n.image=e.image:cm.isEmpty(e.image)||(n.image=cm.node("div",{classes:"image"},cm.node("img",{src:e.image,alt:""}))),n.image)&&cm.insertFirst(n.image,n.link),n},n.setTabLinkAttributes=function(e,t){var n;t.container.setAttribute("id",e.labelName),t.container.setAttribute("role","tab"),t.container.setAttribute("tabindex","0"),t.container.setAttribute("aria-controls",e.tabName),t.container.setAttribute("aria-selected","false"),this.params.showTabsTitle&&(t.container.title=cm.cutHTML(e.title)),t.link&&(t.link.setAttribute("role","presentation"),t.link.setAttribute("tabindex","-1"),this.params.setTabsHash)&&((n=new URL(window.location)).hash=e.id,t.link.href=n.href,t.link.setAttribute("data-prevent-default","true"))},n.toggleMenu=function(){this.isMenuShown?this.hideMenu():this.showMenu()},n.showMenu=function(){this.isMenuShown||(this.isMenuShown=!0,cm.replaceClass(this.nodes.headerMenu,"is-hide","is-show"))},n.hideMenu=function(){this.isMenuShown&&(this.isMenuShown=!1,cm.replaceClass(this.nodes.headerMenu,"is-show","is-hide"))},n.onLabelTarget=function(e,t){e.hideMenu()},n.tabChangeStart=function(e){var t=this.current,t=this.items[t];clearTimeout(e.switchInt),t&&(this.params.animateSwitch&&(this.nodes.contentUL.style.overflow="clip",this.params.animateHeight)&&(this.nodes.contentUL.style.height=t.tab.inner.offsetHeight+"px"),t.menu.container.setAttribute("aria-selected","false"),t.label.container.setAttribute("aria-selected","false")),this.nodes.headerTitleText.innerHTML=e.title,e.menu.container.setAttribute("aria-selected","true"),e.label.container.setAttribute("aria-selected","true"),e.tab.container.hidden=!1,e.tab.container.style.display="block",o.prototype.tabChangeStart.apply(this,arguments)},n.tabShowEnd=function(e,t){var n,a,r=this;e.id===r.current&&(t=cm.merge({redrawContent:!0,triggerEvents:!0},t),n=r.previous,(a=r.items[n])&&a.id!==e.id?r.params.animateSwitch?(r.redrawTabContent(e),r.params.animateHeight&&(r.nodes.contentUL.style.height=e.tab.inner.offsetHeight+"px"),a.switchInt=setTimeout(function(){r.tabHideEnd(a,{action:"onTabShowEnd"}),r.nodes.contentUL.style.overflow="",r.nodes.contentUL.style.height="",t.redrawContent=!1,o.prototype.tabShowEnd.call(r,e,t)},r.params.animateDuration)):(r.tabHideEnd(a,{action:"onTabShowEnd"}),o.prototype.tabShowEnd.call(r,e,t)):o.prototype.tabShowEnd.call(r,e,t))},n.tabHideEnd=function(e,t){!0!==this.params.hidePreviousTab&&!cm.inArray(this.params.hidePreviousTab,t.action)||(e.tab.container.hidden=!0,e.tab.container.style.display="none",o.prototype.tabHideEnd.apply(this,arguments))},n.windowClick=function(e){e=cm.getEventTarget(e);cm.isParent(this.nodes.headerMenu,e,!0)||this.hideMenu()},n.reset=function(){return this.setInitialTab(),this}}),cm.define("Com.Timer",{modules:["Params","Events"],events:["onRender","onStart","onTick","onEnd"],params:{count:0}},function(e){function t(){s.left=s.params.count,s.start()}function o(){var e={};return e.d_total=Math.floor(s.left/1e3/60/60/24),e.h_total=Math.floor(s.left/1e3/60/60),e.m_total=Math.floor(s.left/1e3/60),e.s_total=Math.floor(s.left/1e3),e.d=Math.floor(e.d_total),e.h=Math.floor(e.h_total-24*e.d),e.m=Math.floor(e.m_total-24*e.d*60-60*e.h),e.s=Math.floor(e.s_total-24*e.d*60*60-60*e.h*60-60*e.m),e}var s=this;s.left=0,s.pass=0,s.isProcess=!1;s.start=function(){var t,n=o(),a=s.left,r=Date.now();return s.isProcess=!0,s.triggerEvent("onStart",n),function e(){s.isProcess&&(t=Date.now(),s.left=Math.max(a-(t-r),0),s.pass=s.params.count-s.left,n=o(),s.triggerEvent("onTick",n),0===s.left?(s.stop(),s.triggerEvent("onEnd",n)):animFrame(e))}(),s},s.stop=function(){return s.isProcess=!1,s},s.setParams(e),s.convertEvents(s.params.events),t(),s.triggerEvent("onRender")}),cm.define("Com.ToggleBox",{modules:["Params","Events","Langs","Structure","DataConfig","DataNodes","Storage","Stack"],events:["onRender","onShowStart","onShow","onHideStart","onHide"],params:{node:cm.node("div"),name:"",renderStructure:!1,embedStructure:"replace",duration:"cm._config.animDurationLong",remember:!1,toggleTitle:!1,container:!1,title:!1,content:!1,className:"has-title-bg is-base is-hide",eventNode:"title"},strings:{show:"Show",hide:"Hide"}},function(e){function t(){a.isProcess=!1,a.nodes.target.style.opacity=1,a.nodes.target.style.height="auto",a.nodes.target.style.overflow="visible",cm.customEvent.trigger(a.nodes.target,"redraw",{direction:"child",self:!1}),a.triggerEvent("onShow")}function n(){a.isProcess=!1,a.nodes.target.style.opacity=0,a.nodes.target.style.height=0,a.nodes.target.style.display="none",a.triggerEvent("onHide")}var a=this,r=(a.nodes={container:cm.node("div"),button:cm.node("div"),target:cm.node("div"),title:cm.node("div")},a.animations={},a.isCollapsed=!1,a.isProcess=!1,function(){!a.params.renderStructure||a.params.title||(a.params.title="",a.params.toggleTitle=!0)}),o=function(){var e;a.params.renderStructure&&(a.nodes.container=cm.node("dl",{classes:"com__togglebox"},a.nodes.titleContainer=cm.node("dt",a.nodes.button=cm.node("span",{classes:"icon default linked"}),a.nodes.title=cm.node("span",{classes:"title"})),a.nodes.target=cm.node("dd",a.nodes.content=cm.node("div",{classes:"inner"}))),"button"===a.params.eventNode&&cm.addClass(a.nodes.container,"has-hover-icon"),cm.addClass(a.nodes.container,a.params.className),a.setTitle(a.params.title),a.embedStructure(a.nodes.container),a.params.content?a.setContent(a.params.content):a.setContent(a.params.node)),a.nodes.toggle="title"===a.params.eventNode&&a.nodes.titleContainer?a.nodes.titleContainer:a.nodes.button,cm.click.add(a.nodes.toggle,a.toggle),a.nodes.container.setAttribute("role","group"),a.nodes.toggle.setAttribute("tabindex","0"),a.nodes.toggle.setAttribute("role","button"),a.isCollapsed=cm.isClass(a.nodes.container,"is-hide")||!cm.isClass(a.nodes.container,"is-show"),a.params.remember&&(e=a.storageRead("isCollapsed"),a.isCollapsed=null!==e?e:a.isCollapsed),a.animations.target=new cm.Animation(a.nodes.target),a.isCollapsed?a.collapse(!0):a.expand(!0)};a.setTitle=function(e){return cm.clearNode(a.nodes.title),cm.isString(e)||cm.isNumber(e)?a.nodes.title.innerHTML=e:cm.appendNodes(e,a.nodes.title),a},a.setContent=function(e){var t=a.nodes.content||a.nodes.target;return cm.clearNode(t),cm.isString(e)||cm.isNumber(e)?t.innerHTML=e:cm.appendNodes(e,t),a},a.toggle=function(){a.isCollapsed?a.expand():a.collapse()},a.expand=function(e){(e||a.isCollapsed&&!a.isProcess)&&(a.isCollapsed=!1,a.isProcess="show",a.triggerEvent("onShowStart"),a.params.remember&&a.storageWrite("isCollapsed",!1),a.params.toggleTitle&&a.setTitle(a.lang("hide")),a.nodes.toggle.setAttribute("aria-expanded",!0),a.nodes.target.setAttribute("aria-hidden",!1),cm.replaceClass(a.nodes.container,"is-hide","is-show"),e?t():(a.nodes.target.style.height="auto",a.nodes.target.style.display="block",cm.customEvent.trigger(a.nodes.target,"redraw",{direction:"child",self:!1}),a.nodes.target.style.height=0,a.nodes.target.style.overflow="hidden",a.nodes.target.style.opacity||(a.nodes.target.style.opacity=0),a.animations.target.go({style:{height:[cm.getRealHeight(a.nodes.target,"offset","current"),"px"].join(""),opacity:1},anim:"smooth",duration:a.params.duration,onStop:t})))},a.collapse=function(e){!e&&(a.isCollapsed||a.isProcess)||(a.isCollapsed=!0,a.isProcess="hide",a.triggerEvent("onHideStart"),a.params.remember&&a.storageWrite("isCollapsed",!0),a.params.toggleTitle&&a.setTitle(a.lang("show")),a.nodes.toggle.setAttribute("aria-expanded",!1),a.nodes.target.setAttribute("aria-hidden",!0),cm.replaceClass(a.nodes.container,"is-show","is-hide"),a.nodes.target.style.overflow="hidden",a.nodes.target.style.opacity||(a.nodes.target.style.opacity=1),e?n():a.animations.target.go({style:{height:"0px",opacity:0},anim:"smooth",duration:a.params.duration,onStop:n}))},a.setParams(e),a.convertEvents(a.params.events),a.getDataNodes(a.params.node),a.getDataConfig(a.params.node),r(),o(),a.addToStack(a.nodes.container),a.triggerEvent("onRender")}),cm.define("Com.Toolbar",{modules:["Params","Events","Langs","Structure","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onProcessEnd"],params:{node:cm.node("div"),container:null,name:"",embedStructure:"append",adaptive:!0,flex:!1,className:null,positions:["left","right"]}},function(e){function t(){r.nodes.container=cm.node("div",{class:"com__toolbar is-hidden"},r.nodes.toolbar=cm.node("div",{class:"pt__toolbar"},r.nodes.inner=cm.node("div",{class:"inner"}))),cm.forEach(r.params.positions,function(e){r.nodes[e]=cm.node("div",{class:e}),cm.appendChild(r.nodes[e],r.nodes.inner)}),r.params.adaptive?cm.addClass(r.nodes.toolbar,"is-adaptive"):cm.addClass(r.nodes.toolbar,"is-not-adaptive"),r.params.flex&&cm.addClass(r.nodes.toolbar,"is-flex"),r.params.className&&cm.addClass(r.nodes.toolbar,r.params.className),r.embedStructure(r.nodes.container)}var r=this;r.nodes={},r.groups={},r.items=[],r.isHidden=!0;r.clear=function(){return cm.forEach(r.groups,function(e){r.removeGroup(e)}),r.triggerEvent("onProcessEnd"),r},r.addGroup=function(e){return e=cm.merge({name:"",position:"left",hidden:!1,container:cm.node("ul",{class:"group"}),node:null,adaptive:!0,flex:!1,justify:null,title:null,items:{}},e),r.groups[e.name]||(e.node||(e.node=e.container),e.adaptive&&cm.addClass(e.container,"is-adaptive"),e.flex&&cm.addClass(e.container,"is-flex"),e.hidden&&cm.addClass(e.container,"is-hidden"),e.justify&&cm.addClass(e.container,["pull",e.justify].join("-")),cm.isEmpty(e.title)||e.container.setAttribute("aria-label",e.title),/left|center|right/.test(e.position)?cm.appendChild(e.container,r.nodes[e.position]):"justify"===e.position&&cm.appendChild(e.container,r.nodes.inner),r.groups[e.name]=e),r.triggerEvent("onProcessEnd"),r},r.removeGroup=function(e){e=cm.isObject(e)?e:r.getGroup(e);return e&&(cm.remove(e.container),delete r.groups[e.name]),r.triggerEvent("onProcessEnd"),r},r.getGroup=function(e){return r.groups[e]},r.showGroup=function(e){e=r.getGroup(e);return e&&(e.hidden=!1,cm.removeClass(e.container,"is-hidden")),r},r.hideGroup=function(e){e=r.getGroup(e);return e&&(e.hidden=!0,cm.addClass(e.container,"is-hidden")),r},r.isGroupEmpty=function(e){e=r.getGroup(e);return!e||0===cm.getLength(e.items)},r.toggleGroupVisibility=function(e){return r.isGroupEmpty(e)?r.hideGroup(e):r.showGroup(e),r},r.addField=function(t){var e;return t=cm.merge({name:"",hidden:!1,container:cm.node("li"),node:null,size:null,classes:[],group:null,constructor:!1,constructorParams:{}},t),(e=r.groups[t.group])&&!e.items[t.name]&&(t.size&&cm.addClass(t.container,t.size),t.classes&&cm.addClass(t.container,t.classes),t.hidden&&cm.addClass(t.container,"is-hidden"),t.constructor&&cm.getConstructor(t.constructor,function(e){t.controller=new e(cm.merge(t.constructorParams,{container:t.container}))}),cm.isNode(t.node)&&cm.appendChild(t.node,t.container),cm.appendChild(t.container,e.node),e.items[t.name]=t,r.items=cm.arrayAdd(r.items,t),r.toggleVisibility()),r.triggerEvent("onProcessEnd"),r},r.showField=function(e,t){e=r.getField(e,t);return e&&(e.hidden=!1,cm.removeClass(e.container,"is-hidden")),r},r.hideField=function(e,t){e=r.getField(e,t);return e&&(e.hidden=!0,cm.addClass(e.container,"is-hidden")),r},r.addButton=function(t){var e;return t=cm.merge({container:cm.node("li"),node:null,type:"primary",name:"",label:"",title:"",group:"",access:!0,disabled:!1,hidden:!1,tagName:"a",className:"",attr:{},preventDefault:!0,constructor:!1,constructorParams:{},callback:function(){}},t),e=r.groups[t.group],cm.isEmpty(t.name)&&(t.name=t.label),t.access&&e&&!e.items[t.name]&&(cm.isNode(t.node)||(t.node=cm.node(t.tagName,t.attr),cm.addClass(t.node,"button"),cm.addClass(t.node,["button",t.type].join("-")),cm.addClass(t.node,t.className),t.node.innerHTML=t.label,t.node.setAttribute("title",t.title),t.node.setAttribute("aria-label",t.title)),t.disabled&&cm.addClass(t.node,"button-disabled"),t.hidden&&cm.addClass(t.container,"is-hidden"),t.constructor?cm.getConstructor(t.constructor,function(e){t.controller=new e(cm.merge(t.constructorParams,{node:t.node}))}):cm.click.add(t.node,function(e){t.preventDefault&&cm.preventDefault(e),t.disabled||t.callback(e,t)}),cm.appendChild(t.node,t.container),cm.appendChild(t.container,e.node),e.items[t.name]=t,r.items=cm.arrayAdd(r.items,t),r.toggleVisibility()),r.triggerEvent("onProcessEnd"),r},r.enableButton=function(e,t){e=r.getButton(e,t);return e&&(e.disabled=!1,cm.removeClass(e.node,"button-disabled")),r},r.disableButton=function(e,t){e=r.getButton(e,t);return e&&(e.disabled=!0,cm.addClass(e.node,"button-disabled")),r},r.showButton=function(e,t){e=r.getButton(e,t);return e&&(e.hidden=!1,cm.removeClass(e.container,"is-hidden")),r},r.hideButton=function(e,t){e=r.getButton(e,t);return e&&(e.hidden=!0,cm.addClass(e.container,"is-hidden")),r},r.addLabel=function(e){var t;return e=cm.merge({container:cm.node("li",{class:"label"}),node:null,name:"",label:"",size:null,hidden:!1,group:null},e),(t=r.groups[e.group])&&!t.items[e.name]&&(e.node=cm.node("div",{innerHTML:e.label}),e.size&&cm.addClass(e.container,e.size),e.hidden&&cm.addClass(e.container,"is-hidden"),cm.isNode(e.node)&&cm.appendChild(e.node,e.container),cm.appendChild(e.container,t.node),t.items[e.name]=e,r.items=cm.arrayAdd(r.items,e),r.toggleVisibility()),r.triggerEvent("onProcessEnd"),r},r.getField=r.getButton=r.getLabel=function(e,t){var n,t=r.groups[t];return n=t?t.items[e]:n},r.removeField=r.removeButton=r.removeLabel=function(e,t){var n,a;return cm.isObject(e)?a=r.groups[(n=e).group]:(a=r.groups[t])&&(n=a.items[e]),n&&(cm.remove(n.container),delete a.items[n.name],r.items=cm.arrayRemove(r.items,n),r.toggleVisibility()),r.triggerEvent("onProcessEnd"),r},r.isEmpty=function(){return 0===r.items.length},r.hide=function(){return r.isHidden||(r.isHidden=!0,cm.addClass(r.nodes.container,"is-hidden")),r},r.show=function(){return r.isHidden&&(r.isHidden=!1,cm.removeClass(r.nodes.container,"is-hidden")),r},r.toggleVisibility=function(){return r.isEmpty()?r.hide():r.show(),r},r.getNodes=function(e){return r.nodes[e]||r.nodes},r.setParams(e),r.convertEvents(r.params.events),r.getDataNodes(r.params.node),r.getDataConfig(r.params.node),r.addToStack(r.params.node),r.triggerEvent("onRenderStart"),t(),r.addToStack(r.nodes.container),r.triggerEvent("onRender")}),cm.define("Com.Tooltip",{modules:["Params","Events","Langs","Stack"],events:["onValidateParams","onRender","onShowStart","onShow","onShowEnd","onHideStart","onHide","onHideEnd"],params:{customEvents:!0,controllerEvents:!1,name:"",target:cm.node("div"),setTargetEvent:!0,setWindowEvent:!0,targetEvent:"hover",hideOnReClick:!1,hideOnSelfClick:!1,hideOnOut:!0,autoHide:!1,autoHideDelay:"cm._config.autoHideDelay",hold:!1,holdTarget:!1,preventDefault:!1,stopPropagation:!1,preventClickEvent:!1,positionTarget:!1,top:0,left:0,width:"auto",height:"auto",minWidth:0,adaptiveFrom:null,adaptiveTop:null,adaptiveLeft:null,adaptiveWidth:null,adaptiveHeight:null,scroll:"auto",duration:"cm._config.animDurationShort",delay:0,resizeInterval:5,disabled:!1,position:"absolute",className:"",theme:"theme-default",animate:!1,arrow:!1,adaptive:!0,adaptiveX:!0,adaptiveY:!0,ariaRole:"tooltip",title:"",titleTag:"h3",content:cm.node("div"),container:"document.body"}},function(params){var that=this,init=(that.nodes={},that.container=null,that.animation=null,that.delayInterval=null,that.resizeInterval=null,that.autoHideInterval=null,that.lastWindowEvent=null,that.lastTargetEvent=null,that.isDestructed=!1,that.isHideProcess=!1,that.isShowProcess=!1,that.isShow=!1,that.isWindowEventSet=!1,that.disabled=!1,function(){that.windowEventHandler=windowEvent.bind(that),that.targetEventHandler=targetEvent.bind(that),that.destructHandler=that.destruct.bind(that),that.params.controllerEvents&&bindControllerEvents(),that.setParams(params),that.convertEvents(that.params.events),validateParams(),render(),that.addToStack(that.nodes.container),setMiscEvents(),setHoldTarget(),setTargetEvent(),that.triggerEvent("onRender")}),bindControllerEvents=function(){cm.forEach(that._raw.events,function(e){that[e]||(that[e]=function(){}),that["".concat(e,"Handler")]||(that["".concat(e,"Handler")]=that[e].bind(that)),that.addEvent(e,that["".concat(e,"Handler")])})},validateParams=function(){that.setContainer(that.params.container||that.params.holdTarget||that.params.target),cm.isArray(that.params.targetEvent)||(that.params.targetEvent=[that.params.targetEvent]),that.params.adaptive||(that.params.adaptiveX=!1,that.params.adaptiveY=!1),that.params.position=cm.inArray(["absolute","fixed"],that.params.position)?that.params.position:"absolute",that.triggerEvent("onValidateParams")},render=function(){that.nodes.container=cm.node("div",{class:"com__tooltip",role:that.params.ariaRole},that.nodes.inner=cm.node("div",{class:"inner"},that.nodes.content=cm.node("div",{class:"scroll"}))),cm.isString(that.params.scroll)&&cm.addClass(that.nodes.content,["is",that.params.scroll].join("-")),that.nodes.container.style.position=that.params.position,cm.isEmpty(that.params.theme)||cm.addClass(that.nodes.container,that.params.theme),cm.isEmpty(that.params.animate)||cm.addClass(that.nodes.container,["animate",that.params.animate].join("--")),cm.isEmpty(that.params.arrow)||cm.addClass(that.nodes.container,["arrow",that.params.arrow].join("--")),cm.isEmpty(that.params.className)||cm.addClass(that.nodes.container,that.params.className),renderTitle(that.params.title),renderContent(that.params.content),that.params.disabled?that.disable():that.enable()},renderTitle=function(e){cm.remove(that.nodes.title),cm.isEmpty(e)||(that.nodes.title=cm.node("div",{class:"title"},cm.node(that.params.titleTag,e)),cm.insertFirst(that.nodes.title,that.nodes.inner))},renderContent=function(e){cm.clearNode(that.nodes.content),e&&that.nodes.content.appendChild(e)},setMiscEvents=function(){that.animation=new cm.Animation(that.nodes.container),that.params.hideOnSelfClick&&cm.addEvent(that.nodes.container,"click",function(){return that.hide()}),that.params.customEvents&&cm.customEvent.add(that.getStackNode(),"destruct",that.destructHandler)},setHoldTarget=function(){var e;that.isShow||(that.nodes.container.style.display="none",that.params.hold?(e=that.params.holdTarget||that.params.target,cm.appendChild(that.nodes.container,e)):cm.remove(that.nodes.container))},targetEvent=function(e){that.lastTargetEvent=e,that.params.preventDefault&&cm.preventDefault(e),that.params.stopPropagation&&cm.stopPropagation(e),cm.inArray(that.params.targetEvent,"click")&&that.params.preventClickEvent&&cm.preventDefault(e),(that.isShow&&cm.inArray(that.params.targetEvent,"click")&&that.params.hideOnReClick?hide:show)()},setTargetEvent=function(){that.params.setTargetEvent&&(cm.inArray(that.params.targetEvent,"hover")&&cm.addEvent(that.params.target,"mouseenter",that.targetEventHandler),cm.inArray(that.params.targetEvent,"click"))&&cm.click.add(that.params.target,that.targetEventHandler,!0)},removeTargetEvent=function(){that.params.setTargetEvent&&(cm.inArray(that.params.targetEvent,"hover")&&cm.removeEvent(that.params.target,"mouseenter",that.targetEventHandler),cm.inArray(that.params.targetEvent,"click"))&&cm.click.remove(that.params.target,that.targetEventHandler,!0)},windowEvent=function(e){that.lastWindowEvent=e;e=cm.getEventTarget(e);cm.isParent(that.nodes.container,e,!0)||cm.isParent(that.params.target,e,!0)?show(!0):hide(!1)},setWindowEvent=function(){that.params.hideOnOut&&!that.isWindowEventSet&&(that.isWindowEventSet=!0,that.lastWindowEvent=null,that.params.setWindowEvent)&&(cm.inArray(that.params.targetEvent,"hover")&&cm.addEvent(window,"mousemove",that.windowEventHandler),cm.inArray(that.params.targetEvent,"click"))&&cm.addEvent(window,"pointerdown",that.windowEventHandler)},removeWindowEvent=function(){that.params.hideOnOut&&that.isWindowEventSet&&(that.isWindowEventSet=!1,that.lastWindowEvent=null,that.params.setWindowEvent)&&(cm.inArray(that.params.targetEvent,"hover")&&cm.removeEvent(window,"mousemove",that.windowEventHandler),cm.inArray(that.params.targetEvent,"click"))&&cm.removeEvent(window,"pointerdown",that.windowEventHandler)},show=function(e){that.disabled||((that.isShow||that.isShowProcess)&&!that.isHideProcess||(that.isShowProcess=!0,setWindowEvent(),clearDelayInterval(),clearAutoHideInterval(),e?showHandler(e):that.params.delay&&!that.isHideProcess?that.delayInterval=setTimeout(showHandler,that.params.delay):showHandler()),that.isShow&&!that.isShowProcess&&autoHideHandler())},showHandler=function(e){that.container.appendChild(that.nodes.container),that.nodes.container.style.display="block",_resizeHelper2(),that.triggerEvent("onShowStart"),cm.replaceClass(that.nodes.container,"id-hide","is-show",!0),e||!that.params.duration?showHandlerEnd():(that.animation.stop(),that.animation.go({style:{opacity:1},duration:that.params.duration,anim:"smooth",onStop:showHandlerEnd}))},showHandlerEnd=function(){that.nodes.container.style.opacity=1,that.isShow=!0,that.isShowProcess=!1,that.isHideProcess=!1,autoHideHandler(),that.triggerEvent("onShow"),that.triggerEvent("onShowEnd")},hide=function(e){that.disabled||!that.isShow&&!that.isShowProcess||that.isHideProcess||(that.isHideProcess=!0,clearDelayInterval(),clearAutoHideInterval(),e?hideHandler(e):that.params.delay&&!that.isShowProcess?that.delayInterval=setTimeout(hideHandler,that.params.delay):hideHandler(!1))},hideHandler=function(e){that.triggerEvent("onHideStart"),cm.replaceClass(that.nodes.container,"is-show","id-hide",!0),e||!that.params.duration?hideHandlerEnd():that.animation.go({style:{opacity:0},duration:that.params.duration,anim:"smooth",onStop:hideHandlerEnd})},hideHandlerEnd=function(){that.isShow=!1,that.isShowProcess=!1,that.isHideProcess=!1,clearResizeInterval(),removeWindowEvent(),setHoldTarget(),that.triggerEvent("onHide"),that.triggerEvent("onHideEnd")},autoHideHandler=function(){that.params.autoHide&&(clearAutoHideInterval(),that.autoHideInterval=setTimeout(hide,that.params.autoHideDelay))},_resizeHelper2=function(){resize(),clearResizeInterval(),that.resizeInterval=setTimeout(_resizeHelper2,that.params.resizeInterval)},resize=function resize(){var target=that.params.positionTarget||that.params.target,targetWidth=target.offsetWidth,targetHeight=target.offsetHeight,selfHeight=that.nodes.container.offsetHeight,selfWidth=that.nodes.container.offsetWidth,pageSize=cm.getPageSize(),screenWidth=pageSize.winWidth,screenHeight=pageSize.winHeight,scrollTop=cm.getScrollTop(window),scrollLeft=cm.getScrollLeft(window),paramsTop=that.params.top,paramsLeft=that.params.left,paramsWidth=that.params.width,paramsHeight=that.params.height;!cm.isEmpty(that.params.adaptiveFrom)&&that.params.adaptiveFrom>=screenWidth&&(paramsTop=cm.isEmpty(that.params.adaptiveTop)?paramsTop:that.params.adaptiveTop,paramsLeft=cm.isEmpty(that.params.adaptiveLeft)?paramsLeft:that.params.adaptiveLeft,paramsWidth=cm.isEmpty(that.params.adaptiveWidth)?paramsWidth:that.params.adaptiveWidth,paramsHeight=cm.isEmpty(that.params.adaptiveHeight)?paramsHeight:that.params.adaptiveHeight),!function(){var width=0,height=0,minWidth=0;"auto"!==that.params.minWidth&&(minWidth=eval(that.params.minWidth.toString().replace("targetWidth",targetWidth).replace("screenWidth",screenWidth).replace("selfWidth",selfWidth)),minWidth=Math.min(screenWidth,minWidth),that.nodes.container.style.minWidth=[minWidth,"px"].join("")),"auto"!==paramsWidth&&(width=eval(paramsWidth.toString().replace("targetWidth",targetWidth).replace("screenWidth",screenWidth).replace("selfWidth",selfWidth)),width=Math.max(minWidth,width),width=Math.min(screenWidth,width),width!==selfWidth)&&(that.nodes.container.style.width=[width,"px"].join("")),"auto"!==paramsHeight&&(height=eval(paramsHeight.toString().replace("targetHeight",targetHeight).replace("screenHeight",screenHeight).replace("selfHeight",selfHeight)),height=Math.min(screenHeight,height),that.nodes.content.style.maxHeight=[height,"px"].join("")),selfWidth=that.nodes.container.offsetWidth,selfHeight=that.nodes.container.offsetHeight}(),!function(){var top=cm.getRealY(target),topAdd=eval(paramsTop.toString().replace("targetHeight",targetHeight).replace("screenHeight",screenHeight).replace("selfHeight",selfHeight)),left=cm.getRealX(target),leftAdd=eval(paramsLeft.toString().replace("targetWidth",targetWidth).replace("screenWidth",screenWidth).replace("selfWidth",selfWidth)),positionTop,positionLeft,positionTop=that.params.adaptiveY?Math.max(Math.min(screenHeight<top+topAdd+selfHeight?top-topAdd-selfHeight+targetHeight:top+topAdd,screenHeight-selfHeight),0):top+topAdd,positionLeft=that.params.adaptiveX?Math.max(Math.min(screenWidth<left+leftAdd+selfWidth?left-leftAdd-selfWidth+targetWidth:left+leftAdd,screenWidth-selfWidth),0):left+leftAdd;"absolute"===that.params.position&&(that.container===document.body?(positionTop+=scrollTop,positionLeft+=scrollLeft):(positionTop-=cm.getRealY(that.container),positionLeft-=cm.getRealX(that.container))),positionTop=Math.round(positionTop),positionLeft=Math.round(positionLeft),positionTop!==that.nodes.container.offsetTop&&(that.nodes.container.style.top=[positionTop,"px"].join("")),positionLeft!==that.nodes.container.offsetLeft&&(that.nodes.container.style.left=[positionLeft,"px"].join(""))}()},clearResizeInterval=function(){that.resizeInterval&&clearTimeout(that.resizeInterval),that.resizeInterval=null},clearDelayInterval=function(){that.delayInterval&&clearTimeout(that.delayInterval),that.delayInterval=null},clearAutoHideInterval=function(){that.autoHideInterval&&clearTimeout(that.autoHideInterval),that.autoHideInterval=null};that.setTitle=function(e){return renderTitle(e),that},that.setContent=function(e){return renderContent(e),that},that.setTarget=function(e){return removeTargetEvent(),that.params.target=e||cm.node("div"),that.params.container||that.setContainer(that.params.holdTarget||that.params.target),setHoldTarget(),setTargetEvent(),that},that.setContainer=function(e){return cm.isNode(e)&&(that.container=e),that},that.getLastTargetEvent=function(){return this.lastTargetEvent},that.show=function(e){return show(e),that},that.hide=function(e){return hide(e),that},that.disable=function(){return that.disabled=!0,that},that.enable=function(){return that.disabled=!1,that},that.focus=function(){return that.nodes.container.focus(),that},that.scrollToNode=function(e){return cm.isNode(e)&&cm.isParent(that.nodes.content,e)&&(that.nodes.content.scrollTop=e.offsetTop-that.nodes.content.offsetTop),that},that.isOwnNode=function(e){return cm.isParent(that.nodes.container,e,!0)},that.isOwnEventTarget=function(){var e;if(that.lastWindowEvent)return e=cm.getEventTarget(that.lastWindowEvent),cm.isParent(that.nodes.container,e,!0)},that.remove=function(){return hide(!0),removeTargetEvent(),that},that.destruct=function(){return that.isDestructed||(that.isDestructed=!0,cm.customEvent.trigger(that.getStackNode(),"destruct",{direction:"child",self:!1}),cm.customEvent.remove(that.getStackNode(),"destruct",that.destructHandler),that.removeFromStack(),that.remove()),that},that.getNodes=function(e){return that.nodes[e]||that.nodes},init()}),Com.UA={hash:{ie:"MSIE",edge:"Edge",opera:"Opera",ff:"Firefox",firefox:"Firefox",webkit:"AppleWebKit",safari:"Safari",chrome:"Chrome",steam:"Steam"},fullname:{Edge:"Microsoft Edge",MSIE:"Microsoft Internet Explorer",Firefox:"Mozilla Firefox",Chrome:"Google Chrome",Safari:"Apple Safari",Opera:"Opera","Opera Mini":"Opera Mini","Opera Mobile":"Opera Mobile","IE Mobile":"Internet Explorer Mobile",Steam:"Valve Steam Game Overlay"},os:{Windows:{"NT 5.0":"2000","NT 5.1":"XP","NT 5.2":"Server 2003","NT 6.0":"Vista","NT 6.1":"7","NT 6.2":"8","NT 6.3":"8.1","NT 10.0":"10"},"Mac OSX":{"10.0":"Cheetah",10.1:"Puma",10.2:"Jaguar",10.3:"Panther",10.4:"Tiger",10.5:"Leopard",10.6:"Snow Leopard",10.7:"Lion",10.8:"Mountain Lion",10.9:"Mavericks","10.10":"Yosemite",10.11:"El Capitan"}},str:navigator.userAgent,get:function(e){var t,n={};return-1<(e=e||this.str).indexOf("IEMobile")?(n.browser="IE Mobile",n.hash="ie-mobile",n.engine="Trident",n.type="mobile",n.full_version=e.replace(/^(?:.+)(?:IEMobile)(?:[\s\/]{0,})([0-9\.]{1,})(?:.+)$/,"$1"),t=n.full_version.toString().split("."),n.version=t[0]+(t[1]?"."+t[1].slice(0,1):""),n.short_version=t[0]):-1<e.indexOf("MSIE")||-1<e.indexOf("Trident")?(n.browser="MSIE",n.hash="ie",n.engine="Trident",-1<e.indexOf("MSIE")?n.full_version=e.replace(/^(?:.+)(?:MSIE)(?:[\s\/]{0,})([0-9\.]{1,})(?:.+)$/,"$1"):n.full_version=e.replace(/^(?:.+)(?:rv:)(?:[\s\/]{0,})([0-9\.]{1,})(?:.+)$/,"$1"),t=n.full_version.toString().split("."),n.version=t[0]+(t[1]?"."+t[1].slice(0,1):""),n.short_version=t[0]):-1<e.indexOf("Opera Mobi")?(n.browser="Opera Mobile",n.hash="opera-mobile",n.engine="Presto",n.type="mobile",n.version=n.full_version=-1<e.indexOf("Version")?e.replace(/^(?:.+)(?:Version\/)([0-9\.]{1,})$/,"$1"):"",n.short_version=n.version.split(".")[0]):-1<e.indexOf("Opera Mini")?(n.browser="Opera Mini",n.hash="opera-mini",n.engine="Presto",n.type="mobile",n.full_version=e.replace(/^(?:.+)(?:Opera Mini\/)([0-9\.]{0,})(?:.+)$/,"$1"),t=n.full_version.toString().split("."),n.version=t[0]+(t[1]?"."+t[1].slice(0,1):""),n.short_version=t[0]):-1<e.indexOf("Opera")?(n.browser="Opera",n.hash="opera",n.engine="Presto",n.version=n.full_version=-1<e.indexOf("Version")?e.replace(/^(?:.+)(?:Version\/)([0-9\.]{0,})(?:.{0,})$/,"$1"):e.replace(/^(?:Opera\/)([0-9\.]{1,})\s(?:.+)$/,"$1"),n.short_version=n.version.split(".")[0]):-1<e.indexOf("OPR")?(n.browser="Opera",n.hash="opera",n.engine="Blink",n.full_version=e.replace(/^(?:.+)(?:OPR\/)([0-9\.]{1,})(?:.+)$/,"$1"),t=n.full_version.toString().split("."),n.version=t[0]+(t[1]?"."+t[1]:""),n.short_version=t[0]):-1<e.indexOf("Fennec")?(n.browser="Fennec",n.hash="fennec",n.engine="Gecko",n.type="mobile",n.full_version=e.replace(/^(?:.+)(?:Fennec)(?:[\/]{0,})([0-9\.]{0,})(?:.{0,})$/,"$1"),t=n.full_version.toString().split("."),n.version=t[0]+(t[1]?"."+t[1]:""),n.short_version=t[0]):-1<e.indexOf("Firefox")?(n.browser="Firefox",n.hash="firefox",n.engine="Gecko",n.full_version=e.replace(/^(?:.+)(?:Firefox)(?:[\/]{0,})([0-9\.]{0,})(?:.{0,})$/,"$1"),t=n.full_version.toString().split("."),n.version=t[0]+(t[1]?"."+t[1]:""),n.short_version=t[0]):-1<e.indexOf("Edge")?(n.browser="Edge",n.hash="edge",n.engine="EdgeHTML",n.full_version=e.replace(/^(?:.+)(?:Edge)(?:[\/]{0,})([0-9\.]{0,})(?:.{0,})$/,"$1"),t=n.full_version.toString().split("."),n.version=t[0]+(t[1]?"."+t[1]:""),n.short_version=t[0]):-1<e.indexOf("Valve Steam GameOverlay")?(n.browser="Steam",n.hash="steam",n.engine="Blink",n.full_version=e.replace(/^(?:.+)(?:Chrome\/)([0-9\.]{1,})(?:.+)$/,"$1"),t=n.full_version.toString().split("."),n.version=t[0]+(t[1]?"."+t[1]:""),n.short_version=t[0]):-1<e.indexOf("Chrome")?(n.browser="Chrome",n.hash="chrome",n.engine="Blink",n.full_version=e.replace(/^(?:.+)(?:Chrome\/)([0-9\.]{1,})(?:.+)$/,"$1"),t=n.full_version.toString().split("."),n.version=t[0]+(t[1]?"."+t[1]:""),n.short_version=t[0]):-1<e.indexOf("Safari")?(n.browser="Safari",n.hash="safari",n.engine="AppleWebKit",n.full_version=-1<e.indexOf("Version")?e.replace(/^(?:.+)(?:Version\/)([0-9\.]{1,})(?:.+)$/,"$1"):"2",t=n.full_version.toString().split("."),n.version=t[0]+(t[1]?"."+t[1]:""),n.short_version=t[0]):n.version=n.browser="unknown",n.full_name=this.fullname[n.browser]||"unknown",n.browser_name=n.full_name+(0<n.version.length&&"unknown"!=n.version?" "+n.version:""),n.engine||(-1<e.indexOf("AppleWebKit")?n.engine="AppleWebKit":-1<e.indexOf("Trident")?n.engine="Trident":-1<e.indexOf("Gecko")?n.engine="Gecko":n.engine="unknown"),-1<e.indexOf("Windows Phone")?(n.os="Windows Phone",n.os_type="mobile",n.os_version=e.replace(/^(?:.+)(?:Windows Phone)(?:[\s]{0,1})([a-zA-Z\s0-9\.]{0,})(?:.+)$/,"$1")):-1<e.indexOf("Windows Phone OS")?(n.os="Windows Phone OS",n.os_type="mobile",n.os_version=e.replace(/^(?:.+)(?:Windows Phone OS)(?:[\s]{0,1})([a-zA-Z\s0-9\.]{0,})(?:.+)$/,"$1")):-1<e.indexOf("Windows CE")?(n.os="Windows Mobile",n.os_type="mobile",n.os_version=""):-1<e.indexOf("Windows")?(n.os="Windows",n.os_version=e.replace(/^(?:.+)(?:Windows)(?:[\s]{0,1})([a-zA-Z\s0-9\.]{0,})(?:.+)$/,"$1")):-1<e.indexOf("Android")?(n.os="Android",n.os_type="mobile",n.os_version=e.replace(/^(?:.+)(?:Android)(?:[\s]{0,})([0-9\.]{0,})(?:.+)$/,"$1")):-1<e.indexOf("Linux")?(n.os="Linux",n.os_version=e.replace(/^(?:.+)(?:Linux)(?:[\s]{0,1})([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1")):-1<e.indexOf("iPhone")?(n.device="iPhone",n.device_name="Apple iPhone",n.os="iOS",n.os_type="mobile",n.os_version=e.replace(/^(?:.+)(?:CPU[ iPhone]{0,} OS )([a-zA-Z0-9\._]{0,})(?:.+)$/,"$1").replace(/_/gi,".")):-1<e.indexOf("iPad")?(n.device="iPad",n.device_name="Apple iPad",n.os="iOS",n.os_type="mobile",n.os_version=e.replace(/^(?:.+)(?:CPU[ iPhone]{0,} OS )([a-zA-Z0-9\._]{0,})(?:.+)$/,"$1").replace(/_/gi,".")):-1<e.indexOf("iPod")?(n.device="iPod",n.device_name="Apple iPod",n.os="iOS",n.os_type="mobile",n.os_version=e.replace(/^(?:.+)(?:CPU[ iPhone]{0,} OS )([a-zA-Z0-9\._]{0,})(?:.+)$/,"$1").replace(/_/gi,".")):-1<e.indexOf("Macintosh")?null!=(t=navigator.xr)&&t.isSessionSupported("immersive-vr")?(n.device="Vision Pro",n.device_name="Apple Vision Pro",n.os="iOS",n.os_type="mobile",n.os_version=e.replace(/^(?:.+)(?:Version\/)([0-9\.]{1,})(?:.+)$/,"$1").replace(/_/gi,".")):-1<e.indexOf("Mac OS X")?(n.os="Mac OSX",n.os_version=e.replace(/^(?:.+)(?:Mac OS X)(?:[\s]{0,1})([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1").replace(/_/gi,".")):(n.os="Mac OS",n.os_version="Classic"):-1<e.indexOf("BlackBerry")?(n.os="BlackBerry",n.os_type="mobile",n.os_version=e.replace(/^(?:.{0,})(?:BlackBerry)(?:[\s]{0,})([0-9\.]{0,})(?:.+)$/,"$1")):-1<e.indexOf("FreeBSD")?(n.os="FreeBSD",n.os_version=e.replace(/^(?:.+)(?:FreeBSD )([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1")):-1<e.indexOf("NetBSD")?(n.os="NetBSD",n.os_version=e.replace(/^(?:.+)(?:NetBSD )([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1")):-1<e.indexOf("OpenBSD")?(n.os="OpenBSD",n.os_version=e.replace(/^(?:.+)(?:OpenBSD )([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1")):-1<e.indexOf("SunOS")?(n.os="SunOS",n.os_version=e.replace(/^(?:.+)(?:SunOS )([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1")):n.os=n.os_version="unknown",n.os_name||("unknown"!=n.os?(t=this.os[n.os],n.os_name=n.os+(0<n.os_version.length&&"unknown"!=n.os_version?" "+(t&&t[n.os_version]?t[n.os_version]:n.os_version):"")):n.os_name="unknown"),n},setBrowserClass:function(){var e=Com.UA.get(),t=[];e.browser&&t.push(e.browser.toLowerCase()),e.os&&t.push(e.os.toLowerCase()),e.os_device&&t.push(e.os_device.toLowerCase()),cm.addClass(cm.getDocumentHtml(),t)},setEngineClass:function(){cm.errorLog({type:"error",name:"Com.UA.setEngineClass",message:"Deprecated!"})},is:function(e){var t=e.replace(/[^0-9\.\,]/g,""),e=this.hash[e.replace(/[0-9\.\,\s]/g,"").toLowerCase()],n=this.get();return!(e!=n.browser||t&&0<t.length&&parseFloat(t)!=parseFloat(n.version))},isVersion:function(){var e=this.get();return parseFloat(e.version)},isMobile:function(){return"mobile"==this.get().os_type}},function(e){return cm.log('Warning. Method "is()" is deprecated. Please use "Com.UA.is()"'),Com.UA.is(e)}),isVersion=function(){return cm.log('Warning. Method "isVersion()" is deprecated. Please use "Com.UA.isVersion()"'),Com.UA.isVersion()};cm.define("Com.Zoom",{modules:["Params","Events","DataConfig","Stack"],events:["onRender","onOpenStart","onOpen","onClose","onCloseStart"],params:{node:cm.node("div"),container:"document.body",name:"",src:"",duration:"cm._config.animDuration",autoOpen:!0,removeOnClose:!0,documentScroll:!1}},function(e){function t(){d.nodes.container=cm.node("div",{class:"com__zoom"},d.nodes.inner=cm.node("div",{class:"inner"})),cm.addEvent(d.nodes.container,"click",d.close)}function n(e){27==(e=cm.getEvent(e)).keyCode&&d.close()}function a(){l(),m()}function r(){m()}var o,s,i,c,d=this,l=(d.isOpen=!1,d.isLoad=!1,d.nodes={},function(){o=cm.getRect(d.nodes.image),s=cm.getRect(d.nodes.inner),i=(o.width-s.width)/s.width,c=(o.height-s.height)/s.height}),m=function(){var e,t;d.isLoad&&(e=-cm._clientPosition.left*i,t=-cm._clientPosition.top*c,cm.setCSSTranslate(d.nodes.image,[e,"px"].join(""),[t,"px"].join("")))};d.set=function(e){return d.isLoad=!1,d.params.src=e,d},d.open=function(){return d.isOpen||(d.isOpen=!0,cm.addEvent(window,"mousemove",r),cm.addEvent(window,"resize",a),cm.addEvent(window,"keydown",n),d.params.documentScroll||cm.addClass(cm.getDocumentHtml(),"cm__scroll--none"),d.nodes.container.style.display="block",cm.inDOM(d.nodes.container)||d.params.container.appendChild(d.nodes.container),d.nodes.image=cm.node("img"),cm.addEvent(d.nodes.image,"load",function(){d.isLoad=!0,l(),m()}),d.nodes.image.src=d.params.src,d.nodes.inner.appendChild(d.nodes.image),cm.transition(d.nodes.container,{properties:{opacity:1},duration:d.params.duration,easing:"ease-in-out",onStop:function(){d.triggerEvent("onOpen")}}),d.triggerEvent("onOpenStart")),d},d.close=function(){return d.isOpen&&(d.isOpen=!1,cm.removeEvent(window,"mousemove",r),cm.removeEvent(window,"resize",a),cm.removeEvent(window,"keydown",n),d.params.documentScroll||cm.removeClass(cm.getDocumentHtml(),"cm__scroll--none"),cm.transition(d.nodes.container,{properties:{opacity:0},duration:d.params.duration,easing:"ease-in-out",onStop:function(){d.nodes.container.style.display="none",d.params.removeOnClose&&cm.remove(d.nodes.container),cm.remove(d.nodes.image),d.triggerEvent("onClose")}}),d.triggerEvent("onCloseStart")),d},d.setParams(e),d.convertEvents(d.params.events),d.getDataConfig(d.params.node),t(),d.addToStack(d.nodes.container),d.triggerEvent("onRender"),d.params.autoOpen&&d.open()}),cm.define("Com.MultipleInput",{extend:"Com.AbstractController",events:["onSet","onSelect","onChange","onClear","onDisable","onEnable","onItemAddStart","onItemAddProcess","onItemAddEnd","onItemAdd","onItemRemoveStart","onItemRemoveProcess","onItemRemoveEnd","onItemRemove","onItemSortStart","onItemSortProcess","onItemSortEnd"],params:{embedStructure:"replace",className:"com__multiple-input",value:[],defaultValue:[],max:0,sortable:!1,showControls:!0,showToolbar:!1,showList:!0,focusInput:!1,duration:"cm._config.animDurationShort",inputConstructor:"Com.AbstractInput",inputParams:{},multiFieldConstructor:"Com.MultiField",multiFieldParams:{embedStructure:"first",renderStructure:!0,embedStructureOnRender:!0,template:!1,templateAttributeReplace:!1}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.MultipleInput",function(e,t,n,a){n.construct=function(e){var t=this;t.nodes={},t.components={},t.items=[],t.isToolbarVisible=!0,t.setHandler=t.set.bind(t),t.getHandler=t.get.bind(t),t.clearHandler=t.clear.bind(t),t.enableHandler=t.enable.bind(t),t.disableHandler=t.disable.bind(t),t.addItemHandler=t.addItem.bind(t),t.removeItemHandler=t.removeItem.bind(t),t.constructProcessHandler=t.constructProcess.bind(t),t.addEvent("onConstructProcess",t.constructProcessHandler),a.prototype.construct.apply(t,arguments)},n.constructProcess=function(){var t=this;cm.forEach(t.nodes.inputs,function(e){t.addItem({input:e.input},{triggerEvents:!1,immediately:!0})}),cm.isArray(t.params.value)&&cm.forEach(t.params.value,function(e){t.addItem({value:e},{triggerEvents:!1,immediately:!0})})},n.validateParams=function(){a.prototype.validateParams.apply(this,arguments),this.params.multiFieldParams.max=this.params.max,this.params.multiFieldParams.sortable=this.params.sortable,this.params.multiFieldParams.showControls=this.params.showControls,this.params.multiFieldParams.showList=this.params.showList},n.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__multiple-input"},e.nodes.inner=cm.node("div",{class:"inner"},e.nodes.holder=cm.node("div",{class:"com__multiple-input__holder"}))),e.params.showToolbar&&(e.nodes.toolbarContainer=e.renderToolbarView(),cm.appendChild(e.nodes.toolbarContainer,e.nodes.holder)),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd")},n.renderToolbarView=function(){var e={};return e.container=cm.node("div",{class:"com__multiple-input__toolbar"}),(this.nodes.toolbar=e).container},n.renderViewModel=function(){a.prototype.renderViewModel.apply(this,arguments),this.renderMultiField()},n.renderMultiField=function(){var t=this;return cm.getConstructor(t.params.multiFieldConstructor,function(e){t.components.multiField=new e(cm.merge(t.params.multiFieldParams,{container:t.nodes.holder})),t.renderMultiFieldEvents()}),t},n.renderMultiFieldEvents=function(){var a=this;return a.components.multiField.addEvent("onItemAdd",function(e,t){a.addItemProcess({},t,{triggerEvents:!0})}),a.components.multiField.addEvent("onItemRemove",function(e,t){var n=t.index,n=a.items[n];a.removeItemProcess(n,t,{triggerEvents:!0})}),a.components.multiField.addEvent("onItemSort",function(e,t){var n=t.previousIndex,n=a.items[n];a.sortItemProcess(n,t,{triggerEvents:!0})}),a},n.renderInputView=function(e){return e.input=cm.node("input",{type:"text"}),e.input},n.addItem=function(t,n){var a=this;return n=cm.merge({triggerEvents:!0,immediately:!1},n),(!a.params.max||a.items.length<a.params.max)&&a.components.multiField.addItem({},{triggerEvents:!1,immediately:n.immediately,callback:function(e){a.addItemProcess(t,e,n)}}),null},n.addItemProcess=function(t,e,n){var a=this;n=cm.merge({triggerEvents:!0,immediately:!1},n),(t=cm.merge({input:null,container:null,name:a.params.name,value:"",constructor:a.params.inputConstructor,nodes:{}},t)).field=e,t.container=t.field.content,a.items.push(t),a.triggerEvent("onItemAddStart",t),t.input||(t.input=a.renderInputView(t)),cm.appendChild(t.input,t.container),cm.getConstructor(t.constructor,function(e){t.controller=new e(cm.merge(a.params.inputParams,{node:t.input,name:t.name,value:t.value})),a.triggerEvent("onItemAddProcess",t),a.params.focusInput&&t.controller.focus&&t.controller.focus(),n.triggerEvents&&(a.triggerEvent("onSelect"),a.triggerEvent("onSet"),a.triggerEvent("onChange"))}),a.toggleToolbarVisibility(),a.triggerEvent("onItemAddEnd",t),a.triggerEvent("onItemAdd",t)},n.removeItem=function(t,n){var a=this;return n=cm.merge({triggerEvents:!0,immediately:!1},n),a.components.multiField.removeItem(t.field,{triggerEvents:!1,immediately:n.immediately,callback:function(e){a.removeItemProcess(t,e,n)}}),a},n.removeItemProcess=function(e,t,n){var a=this;n=cm.merge({triggerEvents:!0,immediately:!1},n),a.triggerEvent("onItemRemoveStart",e),a.items=cm.arrayRemove(a.items,e),a.triggerEvent("onItemRemoveProcess",e),e.controller&&e.controller.destruct(),a.triggerEvent("onItemRemoveEnd",e),a.triggerEvent("onItemRemove",e),a.toggleToolbarVisibility(),n.triggerEvents&&(a.triggerEvent("onSelect"),a.triggerEvent("onSet"),a.triggerEvent("onChange"))},n.sortItemProcess=function(e,t,n){t=t.index;n=cm.merge({triggerEvents:!0,immediately:!1},n),this.triggerEvent("onItemSortStart",e),this.triggerEvent("onItemSortProcess",e),this.items.splice(this.items.indexOf(e),1),this.items.splice(t,0,e),n.triggerEvents&&this.triggerEvent("onItemSortEnd",e)},n.toggleToolbarVisibility=function(){return this.params.showToolbar&&(0<this.params.max&&this.items.length===this.params.max?this.hideToolbar():this.showToolbar()),this},n.showToolbar=function(){var e,t=this;return t.isToolbarVisible||(t.isToolbarVisible=!0,t.nodes.toolbarContainer.style.height="",e=t.nodes.toolbarContainer.offsetHeight,t.nodes.toolbarContainer.style.height="0px",t.nodes.toolbarContainer.style.overflow="hidden",cm.transition(t.nodes.toolbarContainer,{properties:{height:e+"px",opacity:1},duration:t.params.duration,easing:"ease-in-out",clear:!0,onStop:function(){t.nodes.toolbarContainer.style.overflow="",t.nodes.toolbarContainer.style.height=""}})),t},n.hideToolbar=function(){return this.isToolbarVisible&&(this.isToolbarVisible=!1,this.nodes.toolbarContainer.style.overflow="hidden",cm.transition(this.nodes.toolbarContainer,{properties:{height:"0px",opacity:0},duration:this.params.duration,easing:"ease-in-out"})),this},n.set=function(e,t){var n=this;for(t=!!cm.isUndefined(t)||t;n.items.length;)n.removeItem(n.items[0],{triggerEvents:!1,immediately:!0});return cm.forEach(e,function(e){n.addItem({value:e},{triggerEvents:!1,immediately:!0})}),t&&(n.triggerEvent("onSelect"),n.triggerEvent("onSet"),n.triggerEvent("onChange")),n},n.get=function(){var t,n=[];return cm.forEach(this.items,function(e){t=e.controller&&e.controller.get?e.controller.get():null,cm.isEmpty(t)||n.push(t)}),n},n.clear=function(e){return(e=!!cm.isUndefined(e)||e)&&this.triggerEvent("onClear"),this.set(this.params.defaultValue,e),this},n.enable=function(){return this.disabled||(this.disabled=!1,cm.removeClass(this.nodes.container,"disabled"),cm.removeClass(this.nodes.content,"disabled"),this.triggerEvent("onEnable")),this},n.disable=function(){return this.disabled&&(this.disabled=!0,cm.addClass(this.nodes.container,"disabled"),cm.addClass(this.nodes.content,"disabled"),this.triggerEvent("onDisable")),this}}),cm.define("Com.BoxTools",{extend:"Com.AbstractInput",params:{controllerEvents:!0,className:"com__box-tools",maxlength:5,units:"px",allowNegative:!1,allowFloat:!1,inputs:[{name:"top",icon:"icon svg__indent-top small linked",iconPosition:"insideRight"},{name:"right",icon:"icon svg__indent-right small linked",iconPosition:"insideRight"},{name:"bottom",icon:"icon svg__indent-bottom small linked",iconPosition:"insideRight"},{name:"left",icon:"icon svg__indent-left small linked",iconPosition:"insideRight"}]},strings:{link:"Link",unlink:"Unlink"}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.BoxTools",function(e,t,n){n._inherit;n.onConstructStart=function(){var e=this;return e.inputs=[],e.rawValue=null,e.isInputsLinked=!1,e.lastInput=null,e.linkInputsHandler=e.linkInputs.bind(e),e.setValuesHandler=e.setValues.bind(e),e},n.onEnable=function(){cm.forEach(this.inputs,function(e){cm.removeClass(e.nodes.inner,"disabled"),e.input.disabled=!1})},n.onDisable=function(){cm.forEach(this.inputs,function(e){cm.addClass(e.nodes.inner,"disabled"),e.input.disabled=!0})},n.renderContent=function(){var e=this,t={};return e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"com__box-tools__content"},cm.node("div",{class:"b-line"},e.renderInput(e.params.inputs[0],0)),cm.node("div",{class:"b-line"},e.renderInput(e.params.inputs[3],3),cm.node("div",{class:"b-link-container"},t.link=cm.node("div",{class:"b-link",title:e.lang("link")},cm.node("div",{class:"icon"}))),e.renderInput(e.params.inputs[1],1)),cm.node("div",{class:"b-line"},e.renderInput(e.params.inputs[2],2))),e.triggerEvent("onRenderContentProcess"),cm.addEvent(t.link,"click",e.linkInputsHandler),e.triggerEvent("onRenderContentEnd"),t.container},n.renderInput=function(n,e){var a=this,t={allowNegative:a.params.allowNegative,allowFloat:a.params.allowFloat};return(n=cm.merge({i:e,icon:"small",iconPosition:"leftInside",name:"",nodes:{}},n)).nodes=a.renderInputContainer(n),n.input=n.nodes.input,a.params.maxlength&&n.input.setAttribute("maxlength",a.params.maxlength),cm.addEvent(n.nodes.icon,"click",function(e){cm.preventDefault(e),n.input.setSelectionRange(0,n.input.value.length),n.input.focus()}),cm.addEvent(n.input,"focus",function(){a.lastInput=n}),cm.addEvent(n.input,"blur",a.setValuesHandler),cm.addEvent(n.input,"keypress",function(e){"Enter"===e.code&&(cm.preventDefault(e),a.setValues(),n.input.blur())}),cm.allowOnlyNumbersInputEvent(n.input,function(e,t){a.inputOnInputEvent(e,t,n)},t),a.inputs.push(n),n.nodes.container},n.inputOnInputEvent=function(e,t,n){return this.isInputsLinked?(this.tempRawValue=[t,t,t,t],this.setInputs()):this.tempRawValue[n.i]=t,this.selectAction(cm.arrayToCSSValues(this.tempRawValue,this.params.units),!0),this},n.renderInputContainer=function(e){var t={};switch(t.container=cm.node("div",{class:"b-container"},t.inner=cm.node("div",{class:"pt__input"},t.input=cm.node("input",{type:"text"}))),cm.isEmpty(e.title)||t.inner.setAttribute("title",e.title),t.icon=cm.node("div",{class:e.icon}),e.iconPosition){case"insideLeft":cm.addClass(t.inner,"is-less-indent"),cm.insertFirst(t.icon,t.inner);break;case"insideRight":cm.addClass(t.inner,"is-less-indent"),cm.insertLast(t.icon,t.inner);break;case"outsideLeft":cm.addClass(t.inner,"is-icon-outside"),cm.insertFirst(t.icon,t.inner);break;case"outsideRight":cm.addClass(t.inner,"is-icon-outside"),cm.insertLast(t.icon,t.inner)}return t},n.setInputs=function(){var t=this;return cm.forEach(t.inputs,function(e){e.input.value=t.tempRawValue[e.i]}),t},n.setValues=function(e){return e=!!cm.isUndefined(e)||e,this.set(cm.arrayToCSSValues(this.tempRawValue,this.params.units),e),this},n.linkInputs=function(){var t,e=this;return e.disabled||(e.isInputsLinked?(e.isInputsLinked=!1,cm.removeClass(e.nodes.content.link,"active"),e.nodes.content.link.title=e.lang("link")):(e.isInputsLinked=!0,cm.addClass(e.nodes.content.link,"active"),e.nodes.content.link.title=e.lang("unlink"),e.lastInput?e.set(e.lastInput.input.value):(t=0,cm.forEach(e.inputs,function(e){t=Math.max(t,parseInt(e.input.value))}),e.set(t)))),e},n.setData=function(){return this.setInputs(),this},n.validateValue=function(e){return cm.arrayToCSSValues(cm.CSSValuesToArray(e),this.params.units)},n.saveRawValue=function(e){this.tempRawValue=cm.CSSValuesToArray(e)}}),cm.define("Com.Autocomplete",{extend:"Com.AbstractController",require:["Com.Tooltip"],events:["onFocus","onBlur","onClear","onReset","onSelect","onChange","onEnable","onDisable","onClickSelect","onEnterPress","onAbort","onError","onRenderListStart","onRenderListEnd"],params:{controllerEvents:!0,renderStructure:!1,embedStructureOnRender:!1,embedStructure:"append",input:null,node:cm.node("input",{type:"text"}),target:!1,container:"document.body",name:"",minLength:3,direction:"auto",disabled:!1,delay:"cm._config.requestDelay",clearOnEmpty:!0,showListOnEmpty:!1,listItemNowrap:!1,className:"",classes:{list:"pt__list",listItem:"pt__list__item"},icons:{search:"icon default linked"},data:[],options:[],value:{},defaultValue:"",showLoader:!0,responseKey:"data",preloadData:!1,preselectQuery:!1,ajax:{type:"json",method:"get",url:"",params:""},tooltip:{limitWidth:!0,constructor:"Com.Tooltip",constructorParams:{hideOnOut:!0,targetEvent:"none",width:"targetWidth",minWidth:"targetWidth",top:cm._config.tooltipDown,ariaRole:"listbox"}},suggestion:{enable:!1,queryKey:"text",constructor:"Com.AbstractContainer",constructorParams:{}}},strings:{loader:"Searching for <b>%query%</b>…",suggestion:"<b>%query%</b> not found. Add?"}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Autocomplete",function(e,t,n,a){n.onConstructStart=function(){var e=this;e.disabled=!1,e.ajaxHandler=null,e.isOpen=!1,e.isAjax=!1,e.requestData={},e.requestDelay=null,e.clickTarget=null,e.registeredItems=[],e.suggestionItem=null,e.suggestionItemFocus=!1,e.selectedItemIndex=null,e.value=null,e.previousValue=null,e.valueText=null,e.rawValue=null,e.requestHandler=e.request.bind(e),e.setInputActionHandler=e.setInputAction.bind(e),e.afterFocusHandler=e.afterFocus.bind(e),e.afterBlurHandler=e.afterBlur.bind(e),e.afterKeypressHandler=e.afterKeypress.bind(e),e.afterBodyClickHandler=e.afterBodyClick.bind(e)},n.onValidateParams=function(){var e=this;cm.isNode(e.params.input)&&(e.params.node=e.params.input),e.params.target||(e.params.target=e.params.node),e.isAjax=!cm.isEmpty(e.params.ajax.url),e.params.data=cm.merge(e.params.data,e.params.options),e.setData(e.params.data),e.params.value=cm.isEmpty(e.params.value)?e.params.defaultValue:e.params.value,e.params.disabled=e.params.node.disabled||e.params.node.readOnly||e.params.disabled,cm.isObject(e.params["Com.Tooltip"])&&(e.params.tooltip.constructorParams=cm.merge(e.params.tooltip.constructorParams,e.params["Com.Tooltip"])),e.params.tooltip.limitWidth||(e.params.tooltip.constructorParams.width="auto"),e.params.tooltip.constructorParams.className=["com__ac-tooltip",[e.params.className,"tooltip"].join("__")].join(" ")},n.onAfterRender=function(){this.setInput(this.params.node),cm.isEmpty(this.params.value)||this.set(this.params.value,!1),this.params.disabled&&this.disable()},n.onDestructStart=function(){this.callbacks.destructListSuggestion(this,this.suggestionItem),this.unsetInputEvents()},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),cm.getConstructor(t.params.tooltip.constructor,function(e){t.components.tooltip=new e(cm.merge(t.params.tooltip.constructorParams,{container:t.params.container,target:t.params.target,events:{onShowStart:t.afterShow.bind(t),onHideStart:t.afterHide.bind(t)}}))})},n.setInputEvents=function(){cm.addEvent(this.params.node,"input",this.requestHandler),cm.addEvent(this.params.node,"keydown",this.afterKeypressHandler),cm.addEvent(this.params.node,"focus",this.afterFocusHandler),cm.addEvent(this.params.node,"blur",this.afterBlurHandler)},n.unsetInputEvents=function(){cm.removeEvent(this.params.node,"input",this.requestHandler),cm.removeEvent(this.params.node,"keydown",this.afterKeypressHandler),cm.removeEvent(this.params.node,"focus",this.afterFocusHandler),cm.removeEvent(this.params.node,"blur",this.afterBlurHandler)},n.getInputValue=function(){return this.params.node.value.trim()},n.setInputAction=function(){var e=this,t=(e.abort(),e.getInputValue()),n=e.getItemAction(null,t);n?e.value!==n.value&&e.set(n,!0):e.params.clearOnEmpty||cm.isEmpty(t)?e.clear():e.params.preselectQuery&&e.isAjax?e.requestAction({behavior:"preselect",showLoader:!1}):e.set(t,!0)},n.setListAction=function(e){var t=this,n=(t.params.suggestion.enable&&t.callbacks.suggestionItemUnselect(t,t.suggestionItem),t.registeredItems[t.selectedItemIndex]),n=(n&&(n.container.setAttribute("aria-selected","false"),cm.removeClass(n.container,"active")),t.registeredItems[e]);n&&(t.selectedItemIndex=e,n.container.setAttribute("aria-selected","true"),cm.addClass(n.container,"active"),t.components.tooltip.scrollToNode(n.container),t.setRegisteredItem(n))},n.getItemAction=function(e,t){var n=null;return n=(n=(n=this.rawValue&&(!cm.isUndefined(e)&&e===this.rawValue.value||!cm.isEmpty(t)&&t===this.rawValue.text)?this.rawValue:n)||this.getRequestItem(e,t))||this.getItem(e,t)},n.afterFocus=function(){this.params.showListOnEmpty&&this.request(),this.triggerEvent("onFocus",this.value)},n.afterBlur=function(){this.isOwnNode(this.clickTarget)||(this.hide(),this.setInputAction()),this.clickTarget=null,this.triggerEvent("onBlur",this.value)},n.afterShow=function(){this.isOpen=!0,cm.addEvent(document,"mousedown",this.afterBodyClickHandler)},n.afterHide=function(){this.isOpen=!1,cm.removeEvent(document,"mousedown",this.afterBodyClickHandler)},n.afterKeypress=function(e){var t=this,n={ArrowUp:function(){return t.setListAction(t.findPreviousIndex(t.selectedItemIndex))},ArrowDown:function(){return t.setListAction(t.findNextIndex(t.selectedItemIndex))},Home:function(){return t.setListAction(t.findFirstIndex())},End:function(){return t.setListAction(t.findLastIndex())}};n[e.code]&&(e.preventDefault(),t.registeredItems.length?n[e.code]():t.callbacks.suggestionItemSelect(t,t.suggestionItem)),"Enter"===e.code&&(t.suggestionItemFocus?t.callbacks.listSuggestionItemEvent(t,t.suggestionItem):(t.hide(),t.setInputAction()),t.triggerEvent("onEnterPress"))},n.afterChange=function(){this.value!==this.previousValue&&this.triggerEvent("onChange",this.value)},n.afterBodyClick=function(e){this.clickTarget=cm.getEventTarget(e),this.isOwnNode(this.clickTarget)||(this.hide(),this.setInputAction())},n.findFirstIndex=function(){return 0},n.findLastIndex=function(){return this.registeredItems.length-1},n.findPreviousIndex=function(e){return cm.isNumber(e)?(e-1+this.registeredItems.length)%this.registeredItems.length:this.findLastIndex()},n.findNextIndex=function(e){return cm.isNumber(e)?(e+1)%this.registeredItems.length:this.findFirstIndex()},n.request=function(){var e,t=this,n=t.getInputValue();t.valueText=n,t.selectedItemIndex=null,t.registeredItems=[],t.abort(),t.params.showListOnEmpty||n.length>=t.params.minLength?(e=t.params.showListOnEmpty&&cm.isEmpty(n)?0:t.params.delay,t.requestDelay=setTimeout(function(){t.params.preloadData&&!cm.isEmpty(t.requestData.data)?t.callbacks.data(t,{data:t.requestData.data,query:n}):t.isAjax?t.requestAction():t.callbacks.data(t,{data:t.params.data,query:n})},e)):t.hide()},n.requestAction=function(e){(e=cm.merge({query:this.getInputValue(),config:cm.clone(this.params.ajax),behavior:"query",showLoader:this.params.showLoader},e)).showLoader&&(this.callbacks.renderLoader(this,e),this.show()),this.ajaxHandler=this.callbacks.request(this,e)},n.callbacks.prepare=function(e,t){return t.config=e.callbacks.beforePrepare(e,t),t.config.url=cm.strReplace(t.config.url,{"%query%":t.query,"%baseUrl%":cm._baseUrl}),t.config.params=cm.objectReplace(t.config.params,{"%query%":t.query,"%baseUrl%":cm._baseUrl}),t.config=e.callbacks.afterPrepare(e,t),t.config},n.callbacks.beforePrepare=function(e,t){return t.config},n.callbacks.afterPrepare=function(e,t){return t.config},n.callbacks.request=function(t,n){return(n=cm.merge({response:null,data:null,config:null,query:"",behavior:"query"},n)).config=t.callbacks.prepare(t,n),t.requestData=n,cm.ajax(cm.merge(n.config,{onSuccess:function(e){n.response=e,t.callbacks.response(t,n)},onError:function(){t.callbacks.error(t,n)}}))},n.callbacks.filter=function(e,t){var n=[],e=cm.reducePath(e.params.responseKey,t.response);return n=cm.isEmpty(e)?n:e},n.callbacks.response=function(e,t){cm.isEmpty(t.response)||(t.data=e.callbacks.filter(e,t)),cm.isEmpty(t.data)||(t.data=e.callbacks.convert(e,t.data)),"preselect"===t.behavior?e.callbacks.preselect(e,t):e.callbacks.render(e,t)},n.callbacks.error=function(e,t){e.hide(),e.triggerEvent("onError")},n.callbacks.data=function(e,t){t.data=e.callbacks.query(e,t),e.callbacks.render(e,t)},n.callbacks.convert=function(t,e){return cm.isObject(e)?t.callbacks.convertObject(t,e):e.map(function(e){return t.callbacks.convertItem(t,e)})},n.callbacks.convertItem=function(e,t){return cm.isEmpty(t)?null:cm.isObject(t)?(cm.isUndefined(t.value)&&(t.value=t.text),t):{text:t,value:t}},n.callbacks.convertObject=function(e,t){var n=[];return cm.forEach(t,function(e,t){n.push({text:e,value:t})}),n},n.callbacks.renderList=function(n,a){n.triggerEvent("onRenderListStart");var r=n.callbacks.renderListStructure(n,a);cm.forEach(a.data,function(e,t){n.callbacks.renderItem(n,a,{data:e,i:t},r.items)}),n.callbacks.embed(n,r.container),n.triggerEvent("onRenderListEnd")},n.callbacks.renderListStructure=function(e,t){var n={};return n.container=cm.node("div",{classes:e.params.classes.list},n.items=cm.node("ul",{role:"listbox"})),n},n.callbacks.renderItem=function(e,t,n,a){n.nodes=e.callbacks.renderItemStructure(e,t,n),e.params.listItemNowrap&&cm.addClass(n.nodes.container,"is-nowrap"),e.value===n.data.value&&(cm.addClass(n.nodes.container,"active"),e.selectedItemIndex=n.i),e.callbacks.registerItem(e,t,n),cm.appendChild(n.nodes.container,a)},n.callbacks.renderItemStructure=function(e,t,n){var a={};return a.container=cm.node("li",{classes:e.params.classes.listItem,role:"option","aria-selected":"false"},cm.node("div",{classes:"inner"},cm.node("div",{classes:"content",innerHTML:n.data.text}))),a},n.callbacks.renderLoader=function(e,t){var n=e.callbacks.renderListStructure(e,t);cm.addClass(n.container,"disabled"),n.item=e.callbacks.renderLoaderItemStructure(e,t),e.params.listItemNowrap&&cm.addClass(n.item.container,"is-nowrap"),cm.appendChild(n.item.container,n.items),e.callbacks.embed(e,n.container)},n.callbacks.renderLoaderItemStructure=function(e,t){var n={};return n.container=cm.node("li",{classes:e.params.classes.listItem,role:"status"},cm.node("div",{classes:"inner"},cm.node("div",{classes:"content"},cm.node("span",{classes:"icon small cm-ia__spinner"}),cm.node("span",{innerHTML:e.lang("loader",{"%query%":t.query})})))),n},n.callbacks.renderListSuggestion=function(e,t){var n=e.callbacks.renderListStructure(e,t);n.item=e.callbacks.renderListSuggestionItem(e,t,{},n.items),e.callbacks.embed(e,n.container)},n.callbacks.destructListSuggestion=function(e,t){t&&cm.isFunction(t.controller.destruct)&&t.controller.destruct()},n.callbacks.renderListSuggestionItem=function(e,t,n,a){return n.params=t,n.nodes=e.callbacks.renderListSuggestionItemStructure(e,n),e.params.listItemNowrap&&cm.addClass(n.nodes.container,"is-nowrap"),e.params.suggestion.constructor&&e.callbacks.renderListSuggestionItemConstructor(e,n),cm.appendChild(n.nodes.container,a),e.suggestionItem=n,e.suggestionItemFocus=!1,n},n.callbacks.renderListSuggestionItemConstructor=function(e,t){e.suggestionItem&&e.suggestionItem.controller&&!e.suggestionItem.controller.isDestructed?e.callbacks.renderListSuggestionItemControllerCached(e,t):e.callbacks.renderListSuggestionItemController(e,t),cm.click.add(t.nodes.container,function(){e.callbacks.listSuggestionItemEvent(e,t)})},n.callbacks.renderListSuggestionItemStructure=function(e,t){var n={};return n.container=cm.node("li",{classes:e.params.classes.listItem,role:"option"},cm.node("div",{classes:"inner"},cm.node("div",{classes:"content"},cm.node("span",{classes:"icon small add"}),cm.node("span",{innerHTML:e.lang("suggestion",{"%query%":t.params.query})})))),n},n.callbacks.renderListSuggestionItemController=function(n,t){cm.getConstructor(n.params.suggestion.constructor,function(e){t.controller=new e(cm.merge(n.params.suggestion.constructorParams,{events:{onSuccess:function(e,t){n.set(t,!0)}}}))})},n.callbacks.renderListSuggestionItemControllerCached=function(e,t){t.controller=e.suggestionItem.controller},n.callbacks.listSuggestionItemEvent=function(e,t){var n={};n[e.params.suggestion.queryKey]=t.params.query,t.controller.set(n),t.controller.open(),e.hide(),e.clear()},n.callbacks.suggestionItemSelect=function(e,t){t&&(e.suggestionItemFocus=!0,cm.addClass(t.nodes.container,"active"))},n.callbacks.suggestionItemUnselect=function(e,t){t&&(e.suggestionItemFocus=!1,cm.removeClass(t.nodes.container,"active"))},n.callbacks.query=function(t,n){var a=[];return cm.forEach(n.data,function(e){t.callbacks.isContain(t,e.text,n.query)&&a.push(e)}),a},n.callbacks.preselect=function(e,n){var a;cm.forEach(n.data,function(e,t){e.text===n.query&&(a={data:e,i:t})}),a?(e.callbacks.registerItem(e,n,a),e.set(a.data,!0)):e.params.clearOnEmpty?e.clear():e.set(n.query,!0)},n.callbacks.isContain=function(e,t,n){return t=t.trim().toLowerCase(),n=n.trim().toLowerCase(),"start"!==e.params.direction?-1<t.indexOf(n):new RegExp("^"+n,"i").test(t)},n.callbacks.render=function(e,t){cm.isEmpty(t.data)?e.params.suggestion.enable?(e.callbacks.renderListSuggestion(e,t),e.show()):e.hide():(e.callbacks.renderList(e,t),e.show())},n.callbacks.registerItem=function(e,t,n){n.nodes&&(n.container=n.nodes.container,cm.click.add(n.container,function(){e.setRegisteredItem(n),e.hide(),e.triggerEvent("onClickSelect",e.value)})),e.registeredItems.push(n)},n.callbacks.embed=function(e,t){e.components.tooltip.setContent(t)},n.set=function(e,t){var n=this;return n.rawValue=n.callbacks.convertItem(n,e),n.previousValue=n.value,n.value=cm.isEmpty(n.rawValue)?null:n.rawValue.value,n.valueText=cm.isEmpty(n.rawValue)?"":n.rawValue.text,n.params.node.value=n.valueText,(t=void 0===t||t)&&(n.triggerEvent("onSelect",n.value),n.afterChange()),n},n.setData=function(e){return this.params.data=this.callbacks.convert(this,e),this},n.setInput=function(e){return cm.isNode(e)&&(this.unsetInputEvents(),this.params.node=e,this.setInputEvents(),"targetParent"===(e=this.params.container)&&(e=this.params.node.parentNode),this.components.tooltip.setContainer(e)),this},n.setTarget=function(e){return cm.isNode(e)&&(this.params.target=e,this.components.tooltip.setTarget(e)),this},n.setRegisteredItem=function(e,t){return cm.inArray(this.registeredItems,e)&&this.set(e.data,t),this},n.get=function(){return this.value},n.getText=function(){return this.valueText},n.getRaw=function(){return this.rawValue},n.getItem=function(t,n){if(!cm.isEmpty(this.params.data))return this.params.data.find(function(e){return cm.isUndefined(t)?cm.isEmpty(n)?void 0:e.text===n:e.value===t})},n.getRequestItem=function(t,n){if(!cm.isEmpty(this.requestData.data))return this.requestData.data.find(function(e){return cm.isUndefined(t)?cm.isEmpty(n)?void 0:e.text===n:e.value===t})},n.getRegisteredItem=function(t,n){if(!cm.isEmpty(this.registeredItems))return this.registeredItems.find(function(e){return cm.isUndefined(t)?cm.isEmpty(n)?void 0:e.data.text===n:e.data.value===t})},n.reset=n.clear=function(e){var t=this;return e=void 0===e||e,t.previousValue=t.value,t.value=null,t.rawValue=null,t.valueText=null,t.params.node.value="",e&&(t.triggerEvent("onClear",t.value),t.triggerEvent("onReset",t.value),t.afterChange()),t},n.show=function(){return this.components.tooltip.show(),this},n.hide=function(){return this.components.tooltip.hide(),this},n.setAction=function(e,t,n){switch(t=cm.inArray(["raw","update","current"],t)?t:"current"){case"raw":this.params.ajax=cm.merge(this._raw.params.ajax,e);break;case"current":this.params.ajax=cm.merge(this.params.ajax,e);break;case"update":this.params.ajax=cm.merge(this._update.params.ajax,e)}return n&&(this._update.params.ajax=cm.clone(this.params.ajax)),this},n.setVariables=function(e,t,n){switch(t=cm.inArray(["raw","update","current"],t)?t:"current"){case"raw":this.params.ajax.variables=cm.merge(this._raw.params.ajax.variables,e);break;case"current":this.params.ajax.variables=cm.merge(this.params.ajax.variables,e);break;case"update":this.params.ajax.variables=cm.merge(this._update.params.ajax.variables,e)}return n&&(this._update.params.ajax.variables=cm.clone(this.params.ajax.variables)),this},n.abort=function(){return this.requestDelay&&clearTimeout(this.requestDelay),this.ajaxHandler&&this.ajaxHandler.abort&&this.ajaxHandler.abort(),this},n.focus=function(e){return!0===e&&(e=this.params.node.value,this.params.node.setSelectionRange(0,e.length)),this.params.node.focus(),this},n.blur=function(){return this.params.node.blur(),this},n.enable=function(){return this.disabled&&(this.disabled=!1,this.params.node.disabled=!1,this.triggerEvent("onEnable")),this},n.disable=function(){return this.disabled||(this.disabled=!0,this.params.node.disabled=!0,this.triggerEvent("onDisable")),this},n.isOwnNode=function(e){return cm.isParent(this.params.target,e,!0)||this.components.tooltip.isOwnNode(e)}}),Com.FormFields.add("autocomplete",{node:cm.node("input",{type:"search",autocomplete:"none"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Autocomplete"}),cm.define("Com.AutocompleteField",{extend:"Com.AbstractInput",events:["onFocus","onBlur"],params:{controllerEvents:!0,type:"text",autocomplete:{constructor:"Com.Autocomplete",constructorParams:{minLength:1,direction:"start"}}}},function(){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.AutocompleteField",function(e,t,n,a){n.construct=function(){this.options=[],a.prototype.construct.apply(this,arguments)},n.validateParams=function(){var t=this,e=(a.prototype.validateParams.apply(t,arguments),t.params.node.options);cm.forEach(e,function(e){t.options.push({value:e.value,text:e.innerHTML})})},n.validateParamsValue=function(){var e;cm.isNode(this.params.node)&&(e=cm.getSelectValue(this.params.node),this.params.value=cm.isEmpty(e)?this.params.value:e),this.params.value=cm.isEmpty(this.params.value)?this.params.defaultValue:this.params.value},n.renderContent=function(){var e={};return this.nodes.content=e,this.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"pt__input"},e.input=cm.node("input",{type:this.params.type})),cm.isEmpty(this.params.placeholder)||(e.input.placeholder=this.params.placeholder),this.triggerEvent("onRenderContentProcess"),this.triggerEvent("onRenderContentEnd"),e.container},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),cm.getConstructor(t.params.autocomplete.constructor,function(e){t.components.autocomplete=new e(cm.merge(t.params.autocomplete.constructorParams,{node:t.nodes.content.input,data:t.options,callbacks:t.renderAutocompleteCallbacks.bind(t),events:t.renderAutocompleteEvents.bind(t)}))})},n.renderAutocompleteCallbacks=function(){return{}},n.renderAutocompleteEvents=function(){var n=this;return{onChange:function(e,t){n.set(t,!0)},onFocus:function(){n.triggerEvent("onFocus")},onBlur:function(){n.triggerEvent("onBlur")}}},n.setData=function(){var e=this.value,t=this.getOption(this.value);return t&&(e=cm.isEmpty(t.text)?t.value:t.text),this.nodes.content.input.value=e,this},n.getOption=function(t){var n;return cm.forEach(this.options,function(e){e.value===t&&(n=e)}),n}}),Com.FormFields.add("autocomplete-field",{node:cm.node("select"),fieldConstructor:"Com.AbstractFormField",constructor:"Com.AutocompleteField"}),cm.define("Com.BoxRadiusTools",{extend:"Com.BoxTools",params:{className:"com__box-tools com__box-tools--radius",inputs:[{name:"topleft",icon:"icon svg__radius-topleft small linked",iconPosition:"outsideLeft"},{name:"topright",icon:"icon svg__radius-topright small linked",iconPosition:"outsideRight"},{name:"bottomright",icon:"icon svg__radius-bottomright small linked",iconPosition:"outsideRight"},{name:"bottomleft",icon:"icon svg__radius-bottomleft small linked",iconPosition:"outsideLeft"}]}},function(e){Com.BoxTools.apply(this,arguments)}),cm.getConstructor("Com.BoxRadiusTools",function(e,t,n){n._inherit;n.renderContent=function(){var e=this,t={};return e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"com__box-tools__content"},cm.node("div",{class:"b-line"},e.renderInput(e.params.inputs[0],0),e.renderInput(e.params.inputs[1],1)),cm.node("div",{class:"b-line"},e.renderInput(e.params.inputs[3],3),e.renderInput(e.params.inputs[2],2)),cm.node("div",{class:"b-line"},cm.node("div",{class:"b-link-container"},t.link=cm.node("div",{class:"b-link",title:e.lang("link")},cm.node("div",{class:"icon"}))))),e.triggerEvent("onRenderContentProcess"),cm.addEvent(t.link,"click",e.linkInputsHandler),e.triggerEvent("onRenderContentEnd"),t.container}}),cm.define("Com.Check",{extend:"Com.AbstractInput",params:{controllerEvents:!0,type:"checkbox",inline:!1,renderRequiredMessage:!1,multiple:!1,values:{checked:null,unchecked:null},contentIcon:null,help:null,helpType:"tooltip",helpConstructor:"Com.HelpBubble",helpParams:{renderStructure:!0,embedStructureOnRender:!0}},strings:{required:"This field is required."}},function(){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.Check",function(e,t,n,a){n.onConstructStart=function(){this.inputs=[],this.hidden=[],this.setValueHandler=this.setValue.bind(this)},n.onValidateParamsProcess=function(){var t=this;cm.isEmpty(t.params.options)?(t.params.type="checkbox",t.params.multiple=!1,cm.isEmpty(t.params.values)&&(t.params.values={checked:null,unchecked:null}),cm.isEmpty(t.params.value)&&t.params.checked&&(t.params.value=!0),!cm.isEmpty(t.params.value)&&cm.isEmpty(t.params.values.checked)&&(t.params.values.checked=t.params.value),cm.isEmpty(t.params.values.checked)&&(t.params.values.checked=!0),cm.isEmpty(t.params.values.unchecked)&&(t.params.values.unchecked=!1)):(t.params.multiple="checkbox"===t.params.type,cm.forEach(t.params.options,function(e){e.checked=e.checked||e.selected,!cm.isEmpty(e.value)&&e.checked&&(cm.isEmpty(t.params.value)?t.params.value=[]:(cm.isString(t.params.value)||cm.isNumber(t.params.value))&&(t.params.value=[t.params.value]),cm.arrayAdd(t.params.value,e.value))}))},n.onEnable=function(){cm.forEach(this.inputs,function(e){e.input.disabled=!1})},n.onDisable=function(){cm.forEach(this.inputs,function(e){e.input.disabled=!0})},n.renderHiddenContent=function(){var t,n=this,a={};return(n.nodes.hiddenContent=a).container=cm.node("div",{classes:"display-none"}),cm.isEmpty(n.params.options)?(t=n.renderHiddenInput({value:n.params.value,values:n.params.values}),cm.appendChild(t,a.container)):cm.forEach(n.params.options,function(e){t=n.renderHiddenInput(e),cm.appendChild(t,a.container)}),a.container},n.renderHiddenInput=function(e){return e=cm.merge({nodes:{},value:null,values:{checked:null,unchecked:null}},e),cm.isEmpty(e.values.checked)&&(e.values.checked=!!cm.isEmpty(e.value)||e.value),cm.isEmpty(e.values.unchecked)&&(e.values.unchecked=!1),e.nodes.container=e.nodes.input=cm.node("input",{type:this.params.type}),e.input=e.nodes.input,cm.isEmpty(this.params.name)||e.input.setAttribute("name",this.params.name),this.hidden.push(e),e.nodes.container},n.renderContent=function(){var t,n=this,a={};return n.nodes.content=a,n.triggerEvent("onRenderContentStart"),a.container=cm.node("div",{classes:"pt__check-line"}),cm.isBoolean(n.params.inline)&&(n.params.inline?cm.addClass(a.container,"is-line"):cm.addClass(a.container,"is-box")),n.triggerEvent("onRenderContentProcess"),cm.isEmpty(n.params.options)?(t=n.renderInput({text:n.params.placeholder,value:n.params.value,values:n.params.values}),cm.appendChild(t,a.container)):("radio"===n.params.type&&a.container.setAttribute("role","radiogroup"),cm.forEach(n.params.options,function(e){t=n.renderInput(e),cm.appendChild(t,a.container)})),n.triggerEvent("onRenderContentEnd"),a.container},n.renderInput=function(e){var t=this;return e=cm.merge({nodes:{},textNodes:{},value:null,text:"",hint:null,icon:null,help:t.params.help,helpType:t.params.helpType,values:{checked:null,unchecked:null}},e),cm.isEmpty(e.icon)&&(e.icon=t.params.contentIcon),cm.isUndefined(e.values.checked)&&(e.values.checked=!!cm.isUndefined(e.value)||e.value),cm.isUndefined(e.values.unchecked)&&(e.values.unchecked=!1),e.nodes.container=cm.node("label",e.nodes.input=cm.node("input",{type:t.params.type})),e.input=e.nodes.input,"checkbox"===t.params.type&&(e.input.value=e.value),cm.isEmpty(e.text)||(e.nodes.label=cm.node("span",{classes:"label",innerHTML:e.text}),e.textNodes=cm.getNodes(e.nodes.label),cm.appendChild(e.nodes.label,e.nodes.container)),cm.isEmpty(e.hint)||(e.nodes.hint=cm.node("span",{classes:"hint",innerHTML:e.hint}),cm.appendChild(e.nodes.hint,e.nodes.label)),cm.isNode(e.icon)&&(e.nodes.icon=cm.clone(e.icon),cm.appendChild(e.nodes.icon,e.nodes.container),cm.addClass(e.nodes.container,"has-icon")),cm.addEvent(e.nodes.input,"click",function(){t.setValue(e,!0)}),cm.isEmpty(e.help)||t.renderHelp(e),t.inputs.push(e),e.nodes.container},n.renderHelp=function(t){t.helpParams=cm.merge(this.params.helpParams,{name:this.params.name,content:t.help,type:t.helpType,container:t.nodes.container}),t.textNodes&&t.textNodes.helpButton&&(t.helpParams.nodes={button:t.textNodes.helpButton},t.helpParams.renderStructure=!1,t.helpParams.embedStructureOnRender=!1),cm.getConstructor(this.params.helpConstructor,function(e){t.helpController=new e(t.helpParams)})},n.setHiddenAttributes=function(){},n.validateValue=function(e){return cm.isEmpty(this.params.options)?cm.isEmpty(e)?this.params.values.unchecked:cm.isBoolean(e)?e?this.params.values.checked:this.params.values.unchecked:e:e},n.setValue=function(e,t){t=!!cm.isUndefined(t)||t;var n=null;return cm.isEmpty(this.params.options)?n=e.input.checked?e.values.checked:e.values.unchecked:this.params.multiple?(n=[],cm.forEach(this.inputs,function(e){e.input.checked&&e.values.checked?n.push(e.values.checked):e.values.unchecked&&n.push(e.values.unchecked)})):n=e.values.checked,this.set(n,t),this},n.saveHiddenValue=function(t){var n=this;cm.isEmpty(n.params.options)?n.setInputItemValue(n.hidden[0],t):cm.forEach(n.hidden,function(e){n.setInputItemValue(e,t)})},n.setData=function(t){var n=this;cm.isEmpty(n.params.options)?n.setInputItemValue(n.inputs[0],t):cm.forEach(n.inputs,function(e){n.setInputItemValue(e,t)})},n.setInputItemValue=function(e,t){t=cm.isEmpty(this.params.options)?this.testInputValue(t,this.params.values.checked,this.params.values.unchecked):this.params.multiple?cm.inArray(t,e.values.checked):t===e.values.checked;e.input.checked=t,cm.toggleClass(e.nodes.container,"active",t)},n.testInputValue=function(e,t,n){return!cm.isEmpty(t)&&e===t||!(cm.isEmpty(e)||0===e||"0"===e||!1===e||e===n)},n.validator=function(e){return e.required&&cm.isEmpty(this.params.options)&&(e.valid=e.value===this.params.values.checked,!e.valid)&&this.params.renderRequiredMessage&&(e.message=this.msg("required")),e}}),Com.FormFields.add("checkbox",{node:cm.node("div",{classes:"pt__check-line"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Check",constructorParams:{type:"checkbox"}}),Com.FormFields.add("checkbox-group",{node:cm.node("div",{classes:"pt__check-line"}),multiple:!0,isValueObject:!0,fieldConstructor:"Com.AbstractFormField",constructor:"Com.Check",constructorParams:{type:"checkbox",inline:!1}}),Com.FormFields.add("radio",{node:cm.node("div",{classes:"pt__check-line"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Check",constructorParams:{type:"radio",inline:!0}}),Com.FormFields.add("check",{node:cm.node("div",{classes:"pt__check-line"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Check",constructorParams:{type:"checkbox",inline:!0}}),cm.define("Com.CheckTrigger",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,checked:!1,unchecked:!1}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.CheckTrigger",function(e,t,n){n._inherit;n.onConstructStart=function(){this.checked=!1,this.checkedA=[],this.uncheckedA=[],this.toggleHandler=this.toggle.bind(this)},n.onValidateParams=function(){this.checked=this.params.node.checked},n.renderViewModel=function(){var e=this;cm.addEvent(e.params.node,"change",e.toggleHandler),cm.isObject(e.params.checked)?e.find(e.params.checked,e.checkedA):cm.isString(e.params.checked)&&e.find({type:"input",name:e.params.checked},e.checkedA),cm.isObject(e.params.unchecked)?e.find(e.params.unchecked,e.uncheckedA):cm.isString(e.params.unchecked)&&e.find({type:"input",name:e.params.unchecked},e.uncheckedA)},n.find=function(t,n){var a=this;switch((t=cm.merge({type:"controller",className:null,classInstance:null,name:null,container:null,node:null,method:"disable"},t)).type){case"controller":new cm.Finder(t.className,t.name,t.container,function(e){e=cm.merge(t,{classInstance:e});n.push(e),a.toggle()});break;case"input":var e=cm.getByName(t.name,t.container);cm.forEach(e,function(e){e=cm.merge(t,{node:e});n.push(e),a.toggle()})}},n.toggle=function(){var e=this;return e.checked=e.params.node.checked,e.checked?(e.enableTrigger(e.checkedA),e.disableTrigger(e.uncheckedA)):(e.disableTrigger(e.checkedA),e.enableTrigger(e.uncheckedA)),e},n.enableTrigger=function(e){return cm.forEach(e,function(e){switch(e.type){case"controller":e.classInstance&&cm.isFunction(e.classInstance.enable)&&e.classInstance.enable();break;case"input":cm.isNode(e.node)&&(e.node.disabled=!1,e.node.focus())}}),this},n.disableTrigger=function(e){return cm.forEach(e,function(e){switch(e.type){case"controller":e.classInstance&&cm.isFunction(e.classInstance.disable)&&e.classInstance.disable();break;case"input":cm.isNode(e.node)&&(e.node.disabled=!0,e.node.blur())}}),this}}),cm.define("Com.CodeHighlight",{modules:["Params","Events","DataConfig","Stack"],events:["onRender"],params:{node:cm.node("div"),name:"",language:"javascript",lineNumbers:!0,lineWrapping:!1,customEvents:!0,disabled:!1,title:""}},function(e){function t(){cm.isNode(a.params.node)&&(a.params.title=a.params.node.getAttribute("title")||a.params.title,a.params.name=a.params.node.getAttribute("name")||a.params.name,a.params.disabled=a.params.node.disabled||a.params.node.readOnly||a.params.disabled),a.disabled=a.params.disabled}function n(){cm.loadScript({path:"CodeMirror",src:"%assetsUrl%/libs/codemirror_comp/codemirror.min.js?%version%",callback:function(e){e&&(a.components.codemirror=e.fromTextArea(a.params.node,{lineNumbers:a.params.lineNumbers,lineWrapping:a.params.lineWrapping,viewportMargin:1/0,mode:a.params.language}),a.components.codemirror.on("change",function(e){a.params.node.value=e.getValue()})),a.disabled?a.disable():a.enable()}}),a.params.customEvents&&cm.customEvent.add(a.params.node,"redraw",a.redraw)}var a=this;a.components={},a.disabled=!1;a.set=function(e){return a.components.codemirror?a.components.codemirror.setValue(e):a.params.node.value=e,a},a.get=function(){return a.components.codemirror?a.components.codemirror.getValue():a.params.node.value},a.redraw=function(){return a.components.codemirror&&a.components.codemirror.refresh(),a},a.disable=function(){return a.disabled=!0,a.components.codemirror&&a.components.codemirror.setOption("readOnly",!0),a},a.enable=function(){return a.disabled=!1,a.components.codemirror&&a.components.codemirror.setOption("readOnly",!1),a},a.setParams(e),a.convertEvents(a.params.events),a.getDataConfig(a.params.node),t(),n(),a.addToStack(a.params.node),a.triggerEvent("onRender")}),cm.define("Com.ColorPicker",{modules:["Params","Events","Langs","Structure","DataConfig","Storage","Stack"],require:["Com.Tooltip","Com.Palette"],events:["onRender","onSelect","onChange","onClear"],params:{input:null,node:cm.node("input",{type:"text"}),container:null,embedStructure:"replace",name:"",value:null,defaultValue:"transparent",title:"",showLabel:!0,showClearButton:!1,showTitleTooltip:!0,renderInBody:!0,disabled:!1,size:"default",icons:{picker:"icon default linked",clear:"icon default linked"},"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,className:"com__colorpicker__tooltip",top:cm._config.tooltipDown},"Com.Palette":{setOnInit:!1}},strings:{Transparent:"Transparent",Clear:"Clear"}},function(e){function t(){cm.isNode(s.params.input)&&(s.params.node=s.params.input)}function n(){cm.isNode(s.params.node)&&(s.params.title=s.params.node.getAttribute("title")||s.params.title,s.params.disabled=s.params.node.disabled||s.params.disabled,s.value=s.params.node.value,s.params.name=s.params.node.getAttribute("name")||s.params.name),s.value=s.params.value||s.value||s.params.defaultValue,s.disabled=s.params.disabled,s.params["Com.Palette"].name=[s.params.name,"palette"].join("-")}function a(){s.nodes.container=cm.node("div",{class:"com__colorpicker"},s.nodes.hidden=cm.node("input",{type:"hidden"}),s.nodes.target=cm.node("div",{class:"pt__input"},s.nodes.input=cm.node("input",{type:"text",readOnly:"true"}),s.nodes.icon=cm.node("div",{class:s.params.icons.picker})),s.nodes.menuContainer=cm.node("div",{class:"form"},s.nodes.paletteContainer=cm.node("div"))),cm.isEmpty(s.params.size)||cm.addClass(s.nodes.container,["size",s.params.size].join("-")),s.params.showTitleTooltip&&!cm.isEmpty(s.params.title)&&(s.nodes.container.title=s.params.title),s.params.node.id&&(s.nodes.container.id=s.params.node.id),s.params.name&&s.nodes.hidden.setAttribute("name",s.params.name),s.params.showLabel||cm.addClass(s.nodes.target,"is-no-label"),s.params.showClearButton&&(cm.addClass(s.nodes.container,"has-clear-button"),s.nodes.container.appendChild(s.nodes.clearButton=cm.node("div",{class:s.params.icons.clear,title:s.lang("Clear")}))),s.embedStructure(s.nodes.container)}function r(){cm.addEvent(s.nodes.input,"keydown",function(e){e=cm.getEvent(e),cm.preventDefault(e),8==e.keyCode&&(s.clear(),s.components.tooltip.hide())}),s.params.showClearButton&&cm.addEvent(s.nodes.clearButton,"click",function(){s.clear(),s.components.tooltip.hide()}),s.components.tooltip=new Com.Tooltip(cm.merge(s.params["Com.Tooltip"],{container:s.params.renderInBody?document.body:s.nodes.container,content:s.nodes.menuContainer,target:s.nodes.target,events:{onShowStart:d,onHideStart:c}})),s.components.palette=new Com.Palette(cm.merge(s.params["Com.Palette"],{node:s.nodes.menuContainer,events:{onChange:function(e,t){i(e.get("rgb"),!0),s.components.tooltip.hide()}}})),s.disabled?s.disable():s.enable()}function o(){s.value!=s.previousValue&&s.triggerEvent("onChange",s.value)}var s=this,i=(s.nodes={},s.components={},s.value=null,s.previousValue=null,s.disabled=!1,function(e,t){s.previousValue=s.value,cm.isEmpty(e)&&(e=s.params.defaultValue),s.value=e,s.components.palette.set(s.value,!1),s.nodes.hidden.value=s.components.palette.get("rgb"),"transparent"===s.value?(s.params.showLabel&&(s.nodes.input.value=s.lang("Transparent")),cm.replaceClass(s.nodes.input,"input-dark input-light","input-checkers")):(s.params.showLabel&&(s.nodes.input.value=s.components.palette.get("hex")),s.nodes.input.style.backgroundColor=s.components.palette.get("hex"),s.components.palette.isDark()?cm.replaceClass(s.nodes.input,"input-checkers input-light","input-dark"):cm.replaceClass(s.nodes.input,"input-checkers input-dark","input-light")),t&&(s.triggerEvent("onSelect",s.value),o())}),c=function(){s.nodes.input.blur(),cm.removeClass(s.nodes.container,"active"),s.components.palette.set(s.value,!1)},d=function(){cm.addClass(s.nodes.container,"active"),s.components.palette.redraw()};s.set=function(e,t){return i(e,t=void 0===t||t),s},s.get=function(){return s.value},s.clear=function(e){return e=void 0===e||e,i(s.params.defaultValue,!1),e&&(s.triggerEvent("onClear",s.value),o()),s},s.disable=function(){return s.disabled=!0,cm.addClass(s.nodes.container,"disabled"),s.nodes.input.disabled=!0,s.components.tooltip.disable(),s},s.enable=function(){return s.disabled=!1,cm.removeClass(s.nodes.container,"disabled"),s.nodes.input.disabled=!1,s.components.tooltip.enable(),s},s.setParams(e),t(),s.convertEvents(s.params.events),s.getDataConfig(s.params.node),n(),a(),r(),s.addToStack(s.nodes.container),s.set(s.value,!1),s.triggerEvent("onRender",s.value)}),Com.FormFields.add("color-picker",{node:cm.node("input",{type:"text"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.ColorPicker"}),cm.define("Com.FieldContent",{extend:"Com.AbstractInput",params:{controllerEvents:!0,renderStructureContent:!1,renderHiddenContent:!1,setHiddenInput:!1}},function(){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.FieldContent",function(e,t,n,a){n.setData=function(){var e=this.value;return cm.clearNode(this.nodes.contentContainer),cm.isNode(e)||(e=cm.node("div",{innerHTML:e})),cm.appendChild(e,this.nodes.contentContainer),this},n.setAttributes=function(){a.prototype.setAttributes.apply(this,arguments),cm.isEmpty(this.params.fieldName)||this.nodes.container.setAttribute("id",this.params.fieldName)}}),Com.FormFields.add("content",{node:cm.node("div"),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.FieldContent"}),Com.FormFields.add("node",{node:cm.node("div",{classes:"pt__field-node"}),value:"",defaultValue:"",inputValueType:"unset",renderStructureField:!1,renderStructureContent:!1,fieldConstructor:"Com.AbstractFormField",constructor:"Com.FieldContent",constructorParams:{embedStructure:"append"}}),Com.Elements.Datepicker={},Com.GetDatepicker=function(e){return Com.Elements.Datepicker[e]||null},cm.define("Com.Datepicker",{modules:["Params","Events","DataConfig","Structure","Langs","Stack"],events:["onRender","onSelect","onChange","onClear","onFocus","onBlur"],params:{input:null,node:cm.node("input",{type:"text"}),container:null,name:"",embedStructure:"replace",customEvents:!0,renderInBody:!0,size:"default",format:"cm._config.dateFormat",displayFormat:"cm._config.displayDateFormat",isDateTime:!1,dateTimeFormat:"cm._config.dateTimeFormat",displayDateTimeFormat:"cm._config.displayDateTimeFormat",setEmptyDateByFormat:!0,minutesInterval:1,startYear:1950,endYear:"current + 10",startWeekDay:0,showTodayButton:!0,showClearButton:!1,showTitleTooltip:!0,showPlaceholder:!0,title:"",placeholder:"",menuMargin:4,value:0,disabled:!1,icons:{datepicker:"icon default linked",clear:"icon default linked"},"Com.Tooltip":{targetEvent:"click",hideOnReClick:!1,className:"com__datepicker__tooltip",top:cm._config.tooltipDown}},strings:{daysAbbr:["S","M","T","W","T","F","S"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],"Clear date":"Clear date",Today:"Today",Now:"Now",Time:"Time:"}},function(params){var that=this,nodes={},components={},init=(that.date=null,that.previousDate=null,that.value=null,that.previousValue=null,that.format=null,that.displayFormat=null,that.disabled=!1,that.isDestructed=null,function(){that.destructHandler=that.destruct.bind(that),that.setParams(params),preValidateParams(),that.convertEvents(that.params.events),that.getDataConfig(that.params.node),validateParams(),render(),setLogic(),setEvents(),that.addToStack(nodes.container),that.params.value?that.set(that.params.value,that.format,!1):that.set(that.params.node.value,that.format,!1),that.triggerEvent("onRender",that.value)}),preValidateParams=function(){cm.isNode(that.params.input)&&(that.params.node=that.params.input)},validateParams=function validateParams(){cm.isNode(that.params.node)&&(that.params.placeholder=that.params.node.getAttribute("placeholder")||that.params.placeholder,that.params.title=that.params.node.getAttribute("title")||that.params.title,that.params.disabled=that.params.node.disabled||that.params.disabled,that.params.name=that.params.node.getAttribute("name")||that.params.name),"now"===that.params.value&&(that.params.value=new Date),/current/.test(that.params.startYear)&&(that.params.startYear=eval(cm.strReplace(that.params.startYear,{current:(new Date).getFullYear()}))),/current/.test(that.params.endYear)&&(that.params.endYear=eval(cm.strReplace(that.params.endYear,{current:(new Date).getFullYear()}))),that.format=that.params.isDateTime?that.params.dateTimeFormat:that.params.format,that.displayFormat=that.params.isDateTime?that.params.displayDateTimeFormat:that.params.displayFormat,that.disabled=that.params.disabled},render=function(){nodes.container=cm.node("div",{class:"com__datepicker-input"},nodes.hidden=cm.node("input",{type:"hidden"}),nodes.target=cm.node("div",{class:"pt__input has-icon-right"},nodes.input=cm.node("input",{type:"text"}),nodes.icon=cm.node("div",{class:that.params.icons.datepicker})),nodes.menuContainer=cm.node("div",{class:"form"},nodes.calendarContainer=cm.node("div",{class:"calendar-holder"}))),cm.isEmpty(that.params.size)||cm.addClass(nodes.container,["size",that.params.size].join("-")),that.params.showTitleTooltip&&!cm.isEmpty(that.params.title)&&(nodes.container.title=that.params.title),that.params.node.id&&(nodes.container.id=that.params.node.id),that.params.name&&nodes.hidden.setAttribute("name",that.params.name),that.params.showPlaceholder&&!cm.isEmpty(that.params.placeholder)&&nodes.input.setAttribute("placeholder",that.params.placeholder),that.params.showClearButton&&(cm.addClass(nodes.container,"has-clear-button"),nodes.container.appendChild(nodes.clearButton=cm.node("div",{class:that.params.icons.clear,title:that.lang("Clear date")}))),that.params.showTodayButton&&nodes.menuContainer.appendChild(nodes.todayButton=cm.node("div",{class:"button today is-wide"},that.lang(that.params.isDateTime?"Now":"Today"))),that.params.isDateTime&&(nodes.timeHolder=cm.node("div",{class:"time-holder"},cm.node("dl",{class:"form-box"},cm.node("dt",that.lang("Time")),nodes.timeContainer=cm.node("dd"))),cm.insertAfter(nodes.timeHolder,nodes.calendarContainer)),that.embedStructure(nodes.container)},setLogic=function(){cm.addEvent(nodes.input,"keypress",inputKeypressHandler),cm.addEvent(nodes.input,"keyup",inputKeyHandler),that.params.showClearButton&&cm.addEvent(nodes.clearButton,"click",function(){that.clear(),components.menu.hide(!1)}),that.params.showTodayButton&&cm.addEvent(nodes.todayButton,"click",function(){that.set(new Date),components.menu.hide(!1)}),components.menu=new Com.Tooltip(cm.merge(that.params["Com.Tooltip"],{container:that.params.renderInBody?document.body:nodes.container,content:nodes.menuContainer,target:nodes.target,events:{onShowStart:onShow,onHideStart:onHide}})),components.calendar=new Com.Calendar({node:nodes.calendarContainer,renderSelectsInBody:!1,className:"com__datepicker-calendar",startYear:that.params.startYear,endYear:that.params.endYear,startWeekDay:that.params.startWeekDay,langs:that.params.langs,renderMonthOnInit:!1,events:{onMonthRender:function(){that.date&&components.calendar.selectDay(that.date)},onDayClick:function(e,t){setDate(null,null,t.day),components.calendar.unSelectDay(that.previousDate),components.calendar.selectDay(that.date),set(!0),that.params.isDateTime||components.menu.hide(!1)}}}),that.params.isDateTime&&(components.time=new Com.TimeSelect({container:nodes.timeContainer,renderSelectsInBody:!1,minutesInterval:that.params.minutesInterval}),components.time.addEvent("onChange",function(){setDate(),components.calendar.set(that.date.getFullYear(),that.date.getMonth(),!1),components.calendar.selectDay(that.date),set(!0)})),that.disabled?that.disable():that.enable()},inputKeypressHandler=function(e){"Enter"===e.code&&cm.preventDefault(e)},inputKeyHandler=function(e){var t=nodes.input.value;"Enter"===e.code&&(cm.preventDefault(e),validateInputValue(),components.menu.hide(!1)),"Delete"===e.code&&cm.isEmpty(t)&&that.clear(!0)},setEvents=function(){that.params.customEvents&&cm.customEvent.add(nodes.container,"destruct",that.destructHandler)},unsetEvents=function(){that.params.customEvents&&cm.customEvent.remove(nodes.container,"destruct",that.destructHandler)},onShow=function(){renderCalendarMonth(),cm.addClass(nodes.container,"active"),that.triggerEvent("onFocus",that.value)},onHide=function(){setInputValues(),nodes.input.blur(),cm.removeClass(nodes.container,"active"),that.triggerEvent("onBlur",that.value)},validateInputValue=function(){var e=nodes.input.value,t=new Date(e);cm.isEmpty(e)||!cm.isDateValid(t)?that.clear(!0):that.set(t,null,!0)},set=function(e){that.previousValue=that.value,that.date?(setDate(),that.value=cm.dateFormat(that.date,that.format,that.lang())):that.value=cm.dateFormat(!1,that.format,that.lang()),setInputValues(),renderCalendarMonth(),e&&(that.triggerEvent("onSelect",that.value),onChange())},setDate=function(e,t,n,a,r,o){that.date?that.previousDate=cm.clone(that.date):(that.date=new Date,that.previousDate=null),e=cm.isUndefined(e)?components.calendar.getFullYear():e,t=cm.isUndefined(t)?components.calendar.getMonth():t,cm.isEmpty(e)||that.date.setFullYear(e),cm.isEmpty(t)||that.date.setMonth(t),cm.isEmpty(n)||that.date.setDate(n),that.params.isDateTime&&(a=cm.isUndefined(a)?components.time.getHours():a,r=cm.isUndefined(r)?components.time.getMinutes():r,o=cm.isUndefined(o)?0:o,cm.isEmpty(a)||that.date.setHours(a),cm.isEmpty(r)||that.date.setMinutes(r),cm.isEmpty(o)||that.date.setSeconds(o))},renderCalendarMonth=function(){that.date&&components.calendar.set(that.date.getFullYear(),that.date.getMonth()),components.calendar.renderMonth()},setInputValues=function(){that.date?(nodes.input.value=cm.dateFormat(that.date,that.displayFormat,that.strings),nodes.hidden.value=that.value):(nodes.input.value="",that.params.setEmptyDateByFormat?nodes.hidden.value=cm.dateFormat(!1,that.format,that.strings):nodes.hidden.value="")},onChange=function(){that.previousValue&&(that.value||!that.previousValue)&&that.value===that.previousValue||that.triggerEvent("onChange",that.value)};that.destruct=function(){return this.isDestructed||(this.isDestructed=!0,cm.customEvent.trigger(nodes.calendarContainer,"destruct",{direction:"child",self:!1}),unsetEvents(),this.removeFromStack()),this},that.get=function(e){return e=cm.isUndefined(e)?that.format:e,that.date||that.params.setEmptyDateByFormat?cm.dateFormat(that.date,e,that.strings):""},that.getDate=function(){return that.date},that.getFullYear=function(){return that.date?that.date.getFullYear():null},that.getMonth=function(){return that.date?that.date.getMonth():null},that.getDay=function(){return that.date?that.date.getDate():null},that.getHours=function(){return that.date?that.date.getHours():null},that.getMinutes=function(){return that.date?that.date.getMinutes():null},that.set=function(e,t,n){t=cm.isUndefined(t)?that.format:t,n=!!cm.isUndefined(n)||n;var a=cm.dateFormat(!1,t,that.lang());return cm.isEmpty(e)||e===a?that.clear():(cm.isDate(e)?that.date=e:that.date=cm.parseDate(e,t),components.calendar.set(that.date.getFullYear(),that.date.getMonth(),!1),that.params.isDateTime&&components.time.set(that.date,null,!1),set(n)),that},that.clear=function(e){return e=!!cm.isUndefined(e)||e,that.date=null,components.calendar.clear(!1),that.params.isDateTime&&components.time.clear(!1),set(!1),e&&(that.triggerEvent("onClear",that.value),onChange()),that},that.disable=function(){return that.disabled=!0,cm.addClass(nodes.container,"disabled"),nodes.input.disabled=!0,components.menu.disable(),that},that.enable=function(){return that.disabled=!1,cm.removeClass(nodes.container,"disabled"),nodes.input.disabled=!1,components.menu.enable(),that},that.getNodes=function(e){return nodes[e]||nodes},init()}),Com.FormFields.add("date-picker",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Datepicker"}),cm.define("Com.DateSelect",{modules:["Params","DataConfig","Langs","Events","Structure","Stack"],events:["onSelect","onChange"],params:{input:null,node:cm.node("input",{type:"text"}),name:"",embedStructure:"replace",container:null,fields:["year","month","day"],format:"cm._config.dateFormat",startYear:1950,endYear:"current + 10",renderSelectsInBody:!0,fieldSizes:{year:"small",month:"medium",day:"x-small"}},strings:{Day:"Day",Month:"Month",Year:"Year",months:["January","February","March","April","May","June","July","August","September","October","November","December"]}},function(params){var that=this,nodes={},defaultDate={day:"00",month:"00",year:"0000"},init=(that.components={},that.options={},that.isDestructed=!1,that.previous=cm.clone(defaultDate),that.selected=cm.clone(defaultDate),function(){that.setParams(params),preValidateParams(),that.convertEvents(that.params.events),that.getDataConfig(that.params.node),validateParams(),render(),that.addToStack(nodes.container),set(that.params.node.value)}),preValidateParams=function(){cm.isNode(that.params.input)&&(that.params.node=that.params.input)},validateParams=function validateParams(){cm.isNode(that.params.node)&&(that.params.name=that.params.node.getAttribute("name")||that.params.name),"now"===that.params.value&&(that.params.value=new Date),/current/.test(that.params.startYear)&&(that.params.startYear=eval(cm.strReplace(that.params.startYear,{current:(new Date).getFullYear()}))),/current/.test(that.params.endYear)&&(that.params.endYear=eval(cm.strReplace(that.params.endYear,{current:(new Date).getFullYear()})))},render=function(){nodes.container=cm.node("div",{class:"com__dateselect"},nodes.hidden=cm.node("input",{type:"hidden"}),cm.node("div",{class:"pt__toolbar bottom is-not-adaptive"},cm.node("div",{class:"inner clear"},nodes.fields=cm.node("ul",{class:"group is-adaptive-flex"})))),renderFields(),that.params.name&&nodes.hidden.setAttribute("name",that.params.name),that.embedStructure(nodes.container)},renderFields=function(){cm.forEach(that.params.fields,function(e){switch(e){case"year":renderYearField();break;case"month":renderMonthField();break;case"day":renderDayField()}})},renderYearField=function(){nodes.year=cm.node("li",{class:"is-field"}),cm.addClass(nodes.year,that.params.fieldSizes.year),cm.appendChild(nodes.year,nodes.fields),that.options.year=[{value:"0000",text:that.lang("Year"),placeholder:!0}];for(var e=that.params.endYear;e>=that.params.startYear;e--)that.options.year.push({value:e,text:e});that.components.year=new Com.Select({container:nodes.year,options:that.options.year,renderInBody:that.params.renderSelectsInBody,events:{onChange:function(e,t){that.previous=cm.clone(that.selected),that.selected.year=t,setMisc(!0)}}})},renderMonthField=function(){nodes.month=cm.node("li",{class:"is-field"}),cm.addClass(nodes.month,that.params.fieldSizes.month),cm.appendChild(nodes.month,nodes.fields),that.options.month=[{value:"00",text:that.lang("Month"),placeholder:!0}],cm.forEach(that.lang("months"),function(e,t){that.options.month.push({value:cm.addLeadZero(parseInt(t+1)),text:e})}),that.components.month=new Com.Select({container:nodes.month,options:that.options.month,renderInBody:that.params.renderSelectsInBody,events:{onChange:function(e,t){that.previous=cm.clone(that.selected),that.selected.month=t,setMisc(!0)}}})},renderDayField=function(){nodes.day=cm.node("li",{class:"is-field"}),cm.addClass(nodes.day,that.params.fieldSizes.day),cm.appendChild(nodes.day,nodes.fields),that.options.day=[{value:"00",text:that.lang("Day"),placeholder:!0,i:0}];for(var e=1;e<=31;e++)that.options.day.push({value:cm.addLeadZero(e),text:e,i:e});that.components.day=new Com.Select({container:nodes.day,options:that.options.day,renderInBody:that.params.renderSelectsInBody,events:{onChange:function(e,t){that.previous=cm.clone(that.selected),that.selected.day=t,setMisc(!0)}}})},set=function(e,t){that.previous=cm.clone(that.selected),e&&e!==toStr(defaultDate)?e instanceof Date?that.selected=fromStr(cm.parseDate(e)):that.selected=fromStr(e):that.selected=cm.clone(defaultDate),that.components.day&&that.components.day.set(that.selected.day,!1),that.components.month&&that.components.month.set(that.selected.month,!1),that.components.year&&that.components.year.set(that.selected.year,!1),setMisc(t)},setMisc=function(e){var t,n;nodes.hidden.value=toStr(that.selected),that.components.day&&(t="0000"===that.selected.year?2e3:that.selected.year,n=new Date(t,that.selected.month,0).getDate(),cm.forEach(that.options.day,function(e){that.components.day.toggleOptionVisibility(e.value,e.i<=n)}),parseInt(that.selected.day)>n)&&that.components.day.set("00"),e&&(that.triggerEvent("onSelect",toStr(that.selected)),toStr(that.selected)!==toStr(that.previous))&&that.triggerEvent("onChange",toStr(that.selected))},fromStr=function(n,a){var t=cm.clone(defaultDate),e={YYYY:function(e){t.year=e},mm:function(e){t.month=e},dd:function(e){t.day=e}},r=0;return a=a||that.params.format,cm.forEach({"%Y":"YYYY","%m":"mm","%d":"dd"},function(e,t){a=a.replace(t,e)}),cm.forEach(e,function(e,t){for(r=a.indexOf(t);-1!=r;)e(n.substr(r,t.length)),r=a.indexOf(t,r+1)}),t},toStr=function(e,t){var n,a=t||that.params.format;return cm.forEach((n=e,{"%Y":function(){return n.year},"%m":function(){return n.month},"%d":function(){return n.day}}),function(e,t){a=a.replace(t,e)}),a};that.destruct=function(){return this.isDestructed||(this.isDestructed=!0,this.removeFromStack()),this},that.get=function(e){return e=e||that.params.format,toStr(that.selected,e)},that.getDate=function(){return that.selected},that.set=function(e){return set(e,!0),that},init()}),Com.FormFields.add("date-select",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.DateSelect"}),cm.define("Com.FileInput",{extend:"Com.AbstractInput",params:{controllerEvents:!0,embedStructure:"replace",hiddenType:"textarea",className:"com__file-input",size:"full",showLink:!0,showFilename:!0,showClearButton:!0,autoOpen:!1,placeholder:null,buttonsAdaptive:!1,defaultValue:"",accept:[],acceptSizes:{min:0,max:0},readValueType:"base64",outputValueType:"object",local:!0,fileManager:!1,fileManagerConstructor:"Com.AbstractFileManagerContainer",fileManagerParams:{constructorParams:{max:1}},fileUploader:!1,fileUploaderConstructor:"Com.FileUploaderContainer",fileUploaderParams:{constructorParams:{max:1}},dropzone:!0,dropzoneConstructor:"Com.FileDropzone",dropzoneParams:{embedStructure:"append",max:1,rollover:!0},fileReaderConstructor:"Com.FileReader",fileReaderParams:{readOnRender:!1}},strings:{browse:"Browse",browse_local:"Browse Local",browse_filemanager:"Browse File Manager",remove:"Remove",open:"Open",errors:{accept:"File type is not accepted",sizes:"File size does not meet requirements"}}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.FileInput",function(e,t,n,a){n.construct=function(){var e=this;e.browseHandler=e.browse.bind(e),e.browseActionHandler=e.browseAction.bind(e),e.processFilesHandler=e.processFiles.bind(e),a.prototype.construct.apply(e,arguments)},n.onInitComponentsStart=function(){var t=this;cm.getConstructor(t.params.fileReaderConstructor,function(e){t.components.validator=new e(t.params.fileReaderParams)})},n.onValidateParamsEnd=function(){var e=this;e.setLangs({_browse_local:e.params.fileManager?e.lang("browse_local"):e.lang("browse"),_browse_filemanager:e.params.local?e.lang("browse_filemanager"):e.lang("browse")}),e.params.dropzone=!!e.params.local&&e.params.dropzone,e.params.fileUploaderParams.openOnConstruct=e.params.autoOpen,e.params.fileUploaderParams.constructorParams.local=e.params.local,e.params.fileUploaderParams.constructorParams.fileManager=e.params.fileManager,e.params.fileReaderParams.readValueType=e.params.readValueType,e.params.local=!e.params.fileUploader&&e.params.local,e.params.fileManagerParams.openOnConstruct=e.params.autoOpen,e.params.fileManager=!e.params.fileUploader&&e.params.fileManager},n.onReset=function(){this.releaseFileURL()},n.onDestruct=function(){this.releaseFileURL()},n.renderViewModel=function(){var n=this;a.prototype.renderViewModel.apply(n,arguments),cm.getConstructor(n.params.fileReaderConstructor,function(e){n.components.reader=new e(n.params.fileReaderParams),n.components.reader.addEvent("onReadSuccess",function(e,t){n.set(t,!0)})}),n.params.dropzone&&cm.getConstructor(n.params.dropzoneConstructor,function(e){n.components.dropzone=new e(cm.merge(n.params.dropzoneParams,{disabled:n.params.disabled,container:n.nodes.content.inner,target:n.nodes.content.content})),n.components.dropzone.addEvent("onDrop",function(e,t){n.processFiles(t)})}),n.params.fileManager&&cm.getConstructor(n.params.fileManagerConstructor,function(e){n.components.fileManager=new e(cm.merge(n.params.fileManagerParams,{node:n.nodes.content.browseFileManager})),n.components.fileManager.addEvent("onComplete",function(e,t){n.processFiles(t)})}),n.params.fileUploader&&cm.getConstructor(n.params.fileUploaderConstructor,function(e){n.components.fileUploader=new e(cm.merge(n.params.fileUploaderParams,{node:n.nodes.content.browseFileUploader})),n.components.fileUploader.addEvent("onComplete",function(e,t){n.processFiles(t)})})},n.renderContent=function(){var e={};return this.nodes.content=e,this.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"com__file-input__content"},e.inner=cm.node("div",{class:"inner"},e.content=cm.node("div",{class:"com__file-input__holder"},e.buttons=cm.node("div",{class:"pt__file-line"},e.buttonsInner=cm.node("div",{class:"inner"},e.label=cm.node("div",{class:"label"}),e.placeholder=cm.node("div",{class:"label label-placeholder",innerHTML:this.params.placeholder})))))),this.renderButtons(),this.triggerEvent("onRenderContentProcess"),this.triggerEvent("onRenderContentEnd"),e.container},n.renderLocalInput=function(){this.nodes.content.input=cm.node("input",{class:"input__browse",type:"file"}),!cm.isEmpty(this.params.accept)&&cm.isArray(this.params.accept)&&(this.nodes.content.input.accept=this.params.accept.join(",")),cm.addEvent(this.nodes.content.input,"change",this.browseActionHandler),cm.insertFirst(this.nodes.content.input,this.nodes.content.content)},n.renderButtons=function(){var e=this;e.nodes.content.clear=cm.node("button",{type:"button",class:"button button-primary"},e.lang("remove")),cm.click.add(e.nodes.content.clear,e.clearEventHandler),cm.insertFirst(e.nodes.content.clear,e.nodes.content.buttonsInner),e.params.showClearButton||cm.addClass(e.nodes.content.clear,"is-hidden"),e.params.local&&(e.renderLocalInput(),e.nodes.content.browseLocal=cm.node("button",{type:"button",class:"button button-primary"},e.lang("_browse_local")),cm.click.add(e.nodes.content.browseLocal,e.browseHandler),cm.insertFirst(e.nodes.content.browseLocal,e.nodes.content.buttonsInner)),e.params.fileManager&&(e.nodes.content.browseFileManager=cm.node("button",{type:"button",class:"button button-primary"},e.lang("_browse_filemanager")),cm.insertFirst(e.nodes.content.browseFileManager,e.nodes.content.buttonsInner)),e.params.fileUploader&&(e.nodes.content.browseFileUploader=cm.node("button",{type:"button",class:"button button-primary"},e.lang("browse")),cm.insertFirst(e.nodes.content.browseFileUploader,e.nodes.content.buttonsInner))},n.browseAction=function(e){var t=e.target.files[0];return cm.preventDefault(e),this.processFiles(t),this},n.processFiles=function(e){var t=this;return cm.isFile(e)?t.components.reader.read(e):cm.isArray(e)?cm.forEach(e,function(e){t.processFiles(e)}):cm.isEmpty(e)||t.set(e,!0),t},n.releaseFileURL=function(){cm.isEmpty(this.value)||cm.isEmpty(this.value.url)||window.URL.revokeObjectURL(this.value.url)},n.isAcceptableFileFormat=function(e){var t=!0,t=!(!cm.isEmpty(this.params.accept)&&cm.isArray(this.params.accept)&&!cm.isEmpty(e)&&!cm.isEmpty(e.file))||cm.inArray(this.params.accept,e.type);return this.params.formField&&(t?this.params.formField.clearError():this.params.formField.renderError(this.msg("errors.accept"))),t},n.isAcceptableFileSizes=function(e){var t=!0,t=!!(cm.isEmpty(this.params.acceptSizes)||cm.isEmpty(e)||cm.isEmpty(e.file))||e.size>=this.params.acceptSizes.min&&(0===this.params.acceptSizes.max||e.size<=this.params.acceptSizes.max);return this.params.formField&&(t?this.params.formField.clearError():this.params.formField.renderError(this.msg("errors.sizes"))),t},n.get=function(){var e="file"===this.params.outputValueType?this.value.file||this.value.value||this.value||"":this.value||"";return e},n.validateValue=function(e){e=this.components.validator.validate(e);return cm.isEmpty(e.value)&&cm.isEmpty(e.file)||!this.isAcceptableFileFormat(e)||!this.isAcceptableFileSizes(e)?this.params.defaultValue:e},n.setData=function(){var e=this;return cm.isEmpty(e.value)?(cm.isEmpty(e.params.placeholder)?cm.addClass(e.nodes.content.placeholder,"is-hidden"):cm.removeClass(e.nodes.content.placeholder,"is-hidden"),cm.clearNode(e.nodes.content.label),cm.addClass(e.nodes.content.label,"is-hidden"),e.params.showClearButton&&(cm.removeClass(e.nodes.content.browseLocal,"is-hidden"),cm.removeClass(e.nodes.content.browseFileManager,"is-hidden"),cm.removeClass(e.nodes.content.browseFileUploader,"is-hidden"),cm.addClass(e.nodes.content.clear,"is-hidden")),e.params.buttonsAdaptive&&cm.addClass(e.nodes.content.buttons,"is-adaptive")):(cm.addClass(e.nodes.content.placeholder,"is-hidden"),cm.clearNode(e.nodes.content.label),cm.removeClass(e.nodes.content.label,"is-hidden"),e.params.showFilename&&(e.params.showLink?e.nodes.content.link=cm.node("a",{target:"_blank",href:e.value.url,title:e.lang("open")},e.value.name):e.nodes.content.link=cm.textNode(e.value.name),cm.appendChild(e.nodes.content.link,e.nodes.content.label)),e.params.showClearButton&&(cm.addClass(e.nodes.content.browseLocal,"is-hidden"),cm.addClass(e.nodes.content.browseFileManager,"is-hidden"),cm.addClass(e.nodes.content.browseFileUploader,"is-hidden"),cm.removeClass(e.nodes.content.clear,"is-hidden")),e.params.buttonsAdaptive&&cm.removeClass(e.nodes.content.buttons,"is-adaptive")),e},n.browse=function(){return this.params.local&&this.nodes.content.input.click(),this}}),Com.FormFields.add("file",{node:cm.node("input",{type:"text"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.FileInput"}),cm.define("Com.HiddenStoreField",{extend:"Com.AbstractInputContainer",params:{constructor:"Com.AbstractInput",storeRaw:!1,triggerName:null}},function(e){Com.AbstractInputContainer.apply(this,arguments)}),cm.getConstructor("Com.HiddenStoreField",function(e,t,n,a){n.onConstructStart=function(){this.processDataHandler=this.processData.bind(this)},n.onRenderController=function(){var e=this.components.form.getField(this.params.triggerName);e&&(this.components.trigger=e.controller,this.components.trigger.addEvent("onChange",this.processDataHandler),this.components.trigger.addEvent("onReset",this.resetHandler))},n.processData=function(){var e=this.params.storeRaw?this.components.trigger.getRaw():this.components.trigger.get();this.set(e)}}),Com.FormFields.add("hidden-store",{node:cm.node("input",{type:"hidden"}),visible:!1,fieldConstructor:"Com.AbstractFormField",constructor:"Com.HiddenStoreField"}),cm.define("Com.ImageInput",{extend:"Com.FileInput",params:{hiddenType:"textarea",className:"com__image-input",size:"default",fit:"cover",aspect:!1,types:{image:cm._config.fileTypes.image,video:cm._config.fileTypes.video,embed:cm._config.fileTypes.embed},showLabel:!0,showLink:!0,accept:[],acceptDimensions:{minWidth:0,minHeight:0},preview:!0,previewConstructor:"Com.ImagePreviewContainer",previewParams:{}},strings:{preview:"Preview",errors:{dimensions:"Image dimensions do not meet requirements"}}},function(){Com.FileInput.apply(this,arguments)}),cm.getConstructor("Com.ImageInput",function(e,t,n,a){n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),t.params.preview&&cm.getConstructor(t.params.previewConstructor,function(e){t.components.preview=new e(cm.merge(t.params.previewParams,{node:t.nodes.content.previewButton}))})},n.renderContent=function(){this.triggerEvent("onRenderContentStart");var e={};return(this.nodes.content=e).container=cm.node("div",{classes:"com__image-input__content"},e.inner=cm.node("div",{classes:"inner"},e.content=cm.node("div",{classes:"input__holder"},cm.node("div",{classes:"input__cover"},e.label=cm.node("div",{classes:"input__label"}),e.buttonsInner=cm.node("div",{classes:"input__buttons"})),e.imageContainer=cm.node("div",{classes:"pt__image"},e.imageHolder=cm.node("div",{classes:"inner"}))))),this.params.aspect&&(cm.addClass(e.imageContainer,"is-background has-aspect"),cm.addClass(e.imageContainer,["cm__aspect",this.params.aspect].join("-"))),this.params.fit&&cm.addClass(e.imageContainer,["is",this.params.fit].join("-")),this.renderButtons(),this.triggerEvent("onRenderContentProcess"),this.triggerEvent("onRenderContentEnd"),e.container},n.renderButtons=function(){var e=this;e.nodes.content.clearButton=cm.node("button",{type:"button",classes:["button","button-danger","input__button","input__button--remove"]},cm.node("span",e.msg("remove"))),cm.click.add(e.nodes.content.clearButton,e.clearEventHandler),cm.insertFirst(e.nodes.content.clearButton,e.nodes.content.buttonsInner),e.params.preview&&(e.nodes.content.previewButton=cm.node("button",{type:"button",classes:["button","button-primary","input__button","input__button--preview"]},cm.node("span",e.msg("preview"))),cm.insertFirst(e.nodes.content.previewButton,e.nodes.content.buttonsInner)),e.params.local&&(e.renderLocalInput(),e.nodes.content.browseLocal=cm.node("button",{type:"button",classes:["button","button-primary","input__button","input__button--browse"]},cm.node("span",e.msg("_browse_local"))),cm.click.add(e.nodes.content.browseLocal,e.browseHandler),cm.insertFirst(e.nodes.content.browseLocal,e.nodes.content.buttonsInner)),e.params.fileManager&&(e.nodes.content.browseFileManager=cm.node("button",{type:"button",classes:["button","button-primary","input__button","input__button--browse"]},cm.node("span",e.msg("_browse_filemanager"))),cm.insertFirst(e.nodes.content.browseFileManager,e.nodes.content.buttonsInner)),e.params.fileUploader&&(e.nodes.content.browseFileUploader=cm.node("button",{type:"button",classes:["button","button-primary","input__button","input__button--browse"]},cm.node("span",e.msg("browse"))),cm.insertFirst(e.nodes.content.browseFileUploader,e.nodes.content.buttonsInner))},n.isAcceptableImageDimensions=function(e){var t=!0,t=!(!(cm.isEmpty(this.params.acceptDimensions)||cm.isEmpty(e)||cm.isEmpty(e.file))&&e._isLoaded&&this.params.types.image.test(e.type)&&"image/svg+xml"!==e.type)||e.width>=this.params.acceptDimensions.minWidth&&e.height>=this.params.acceptDimensions.minHeight;return this.params.formField&&(t?this.params.formField.clearError():this.params.formField.renderError(this.msg("errors.dimensions"))),t},n.validateValue=function(e){e=this.components.validator.validate(e);return cm.isEmpty(e.value)&&cm.isEmpty(e.file)||!this.isAcceptableFileFormat(e)||!this.isAcceptableFileSizes(e)||!this.isAcceptableImageDimensions(e)?this.params.defaultValue:e},n.setData=function(){var e=this;cm.isEmpty(e.value)?(cm.clearNode(e.nodes.content.label),cm.addClass(e.nodes.content.label,"is-hidden"),cm.addClass(e.nodes.content.clearButton,"is-hidden")):(cm.clearNode(e.nodes.content.label),e.params.showLabel&&(e.params.showLink?e.nodes.content.link=cm.node("a",{target:"_blank",href:e.value.url,title:e.msg("open")},e.value.name):e.nodes.content.link=cm.textNode(e.value.name),cm.appendChild(e.nodes.content.link,e.nodes.content.label),cm.removeClass(e.nodes.content.label,"is-hidden")),cm.removeClass(e.nodes.content.clearButton,"is-hidden")),e.setPreviewData()},n.setPreviewData=function(){var e=this;cm.remove(e.nodes.content.image),cm.remove(e.nodes.content.video),cm.isEmpty(e.value)?(e.components.preview&&e.components.preview.clear(),cm.addClass(e.nodes.content.previewButton,"is-hidden"),cm.addClass(e.nodes.content.imageContainer,"is-default-image"),e.renderPreviewDefault()):(e.components.preview&&e.components.preview.set(e.value),cm.removeClass(e.nodes.content.previewButton,"is-hidden"),cm.removeClass(e.nodes.content.imageContainer,"is-default-image"),e.params.types.video.test(e.value.type)?e.renderPreviewVideo():e.renderPreviewImage())},n.renderPreviewDefault=function(){this.nodes.content.image=cm.node("div",{classes:"descr"}),cm.appendChild(this.nodes.content.image,this.nodes.content.imageHolder)},n.renderPreviewImage=function(){this.nodes.content.image=cm.node("div",{classes:"descr"}),this.nodes.content.image.style.backgroundImage=cm.URLToCSSURL(this.value.url),cm.appendChild(this.nodes.content.image,this.nodes.content.imageHolder)},n.renderPreviewVideo=function(){var e=this;e.nodes.content.video=cm.node("video",{classes:"descr",preload:"none",playsinline:!0,controls:!1,muted:!0,tabindex:-1}),e.nodes.content.video.controls=!1,e.nodes.content.video.playsinline=!0,e.nodes.content.video.playsInline=!0,e.nodes.content.video.muted=!0,e.nodes.content.video.loop=!0,e.nodes.content.video.autoplay=!0,cm.addEvent(e.nodes.content.video,"loadeddata",function(){e.nodes.content.video.pause()}),cm.addEvent(e.nodes.content.video,"loadedmetadata",function(){e.nodes.content.video.pause()}),cm.addEvent(e.nodes.content.video,"canplay",function(){e.nodes.content.video.pause()}),e.nodes.content.videoSource=cm.node("source",{src:e.value.url}),cm.appendChild(e.nodes.content.videoSource,e.nodes.content.video),cm.appendChild(e.nodes.content.video,e.nodes.content.imageHolder)}}),Com.FormFields.add("image",{node:cm.node("input",{type:"text"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.ImageInput"}),cm.define("Com.IndentInput",{extend:"Com.AbstractInput",params:{maxLength:3,units:"px",defaultValue:"",allowCustom:!1,allowNegative:!1,allowFloat:!1}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.IndentInput",function(e,t,n,a){n.construct=function(){this.setValueHandler=this.setValue.bind(this),a.prototype.construct.apply(this,arguments)},n.renderContent=function(){var n=this,e={allowNegative:n.params.allowNegative,allowFloat:n.params.allowFloat},t={};return n.nodes.content=t,n.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"pt__input"},t.input=cm.node("input",{type:"text"})),cm.isEmpty(n.params.placeholder)||(t.input.placeholder=n.params.placeholder),cm.setInputMaxLength(t.input,n.params.maxLength,n.params.max),n.triggerEvent("onRenderContentProcess"),cm.addEvent(t.input,"blur",n.setValueHandler),cm.addEvent(t.input,"keypress",function(e){"Enter"===e.code&&(cm.preventDefault(e),n.setValue(),t.input.blur())}),n.params.allowCustom?cm.addEvent(t.input,"input",function(e){n.selectAction(t.input.value,!0)}):cm.allowOnlyNumbersInputEvent(t.input,function(e,t){n.selectAction(n.validateValue(t),!0)},e),n.triggerEvent("onRenderContentEnd"),t.container},n.validateValue=function(e){return this.rawValue=cm.isEmpty(e)?this.params.defaultValue:e,cm.isEmpty(this.rawValue)||isNaN(this.rawValue)?this.rawValue:this.rawValue+this.params.units},n.setValue=function(e){return e=!!cm.isUndefined(e)||e,this.set(this.rawValue,e),this},n.setData=function(){return this.nodes.content.input.value=this.rawValue,this}}),Com.FormFields.add("indent",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.IndentInput"}),cm.define("Com.Input",{extend:"Com.AbstractInput",events:["onInputStart","onEnterPress","onKeyPress","onKeyDown","onKeyUp","onIconClick","onFocus","onBlur"],params:{controllerEvents:!0,type:"text",inputmode:null,trimValue:!0,limitValue:!0,constraints:{},inputClasses:[],lazy:!1,delay:"cm._config.requestDelay",icon:null,iconTitle:null,iconEvents:!0,iconInsertMethod:"appendChild",autoResize:!1,enterPressBehavior:!1}},function(){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.Input",function(e,t,n,a){n.construct=function(){var e=this;e.selectionStartInitial=null,e.selectionEndInitial=null,e.isFocus=!1,e.wasFocus=!1,e.lazyDelay=null,e.constraints={},e.focusHandler=e.focus.bind(e),e.blurHandler=e.blur.bind(e),e.inputEventHandler=e.inputEvent.bind(e),e.focusEventHandler=e.focusEvent.bind(e),e.blurEventHandler=e.blurEvent.bind(e),e.setValueHandler=e.setValue.bind(e),e.selectValueHandler=e.selectValue.bind(e),e.lazyValueHandler=e.lazyValue.bind(e),e.inputKeyDownHanlder=e.inputKeyDown.bind(e),e.inputKeyUpHanlder=e.inputKeyUp.bind(e),e.inputKeyPressHanlder=e.inputKeyPress.bind(e),e.iconEventHanlder=e.iconEvent.bind(e),a.prototype.construct.apply(e,arguments)},n.onValidateParamsStart=function(){var n=this;cm.forEach(n.params.constraints,function(e,t){cm.forEach(e,function(e){return n.addConstraint(t,e)})})},n.onEnable=function(){this.nodes.content.input.disabled=!1},n.onDisable=function(){this.nodes.content.input.disabled=!0},n.onAfterRender=function(){"textarea"===this.params.type&&this.params.autoResize&&(cm.addClass(this.nodes.content.input,"cm-autoresize"),Part.Autoresize(this.nodes.container))},n.renderContent=function(){return this.triggerEvent("onRenderContentStart"),this.nodes.content=this.renderContentView(),this.renderContentAttributes(),this.triggerEvent("onRenderContentProcess"),this.renderContentEvents(),this.triggerEvent("onRenderContentEnd"),this.nodes.content.container},n.renderContentView=function(){var e=this,t={};return t.container=cm.node("div",{classes:"pt__input"},t.inner=cm.node("div",{classes:"inner"})),"textarea"===e.params.type?(t.input=cm.node("textarea",{classes:e.params.inputClasses}),cm.addClass(t.container,"pt__input--textarea"),cm.addClass(e.nodes.container,"com__input--textarea")):t.input=cm.node("input",{classes:e.params.inputClasses,type:e.params.type}),cm.appendChild(t.input,t.inner),e.params.icon&&(cm.addClass(t.container,"has-icon"),cm.isNode(e.params.icon)?t.icon=e.params.icon:t.icon=e.renderIconView(),cm.isEmpty(e.params.iconTitle)||(t.icon.title=e.params.iconTitle),cm[e.params.iconInsertMethod](t.icon,t.inner)),t},n.renderContentAttributes=function(){var e=this;e.nodes.content.input.required=e.params.required,cm.setInputMinLength(e.nodes.content.input,e.params.minLength,e.params.min),cm.setInputMaxLength(e.nodes.content.input,e.params.maxLength,e.params.max,e.params.limitMaxLength),cm.isEmpty(e.params.placeholder)||(e.nodes.content.input.placeholder=e.params.placeholder,e.nodes.content.icon&&(e.nodes.content.icon.title=e.params.placeholder)),cm.isEmpty(e.params.title)||(e.nodes.content.input.title=e.params.title,e.nodes.content.icon&&(e.nodes.content.icon.title=e.params.title)),cm.isEmpty(e.params.ariaLabel)||e.nodes.content.input.setAttribute("aria-label",e.params.ariaLabel),cm.isEmpty(e.params.id)||e.nodes.content.input.setAttribute("id",e.params.id),cm.isEmpty(e.params.inputmode)||e.nodes.content.input.setAttribute("inputmode",e.params.inputmode),cm.isEmpty(e.params.autocomplete)||e.nodes.content.input.setAttribute("autocomplete",e.params.autocomplete),e.params.renderName&&(e.nodes.content.input.name=e.params.visibleName||e.params.name)},n.renderContentEvents=function(){var e=this;cm.addEvent(e.nodes.content.input,"input",e.inputEventHandler),cm.addEvent(e.nodes.content.input,"focus",e.focusEventHandler),cm.addEvent(e.nodes.content.input,"blur",e.blurEventHandler),cm.addEvent(e.nodes.content.input,"change",e.setValueHandler),cm.addEvent(e.nodes.content.input,"keydown",e.inputKeyDownHanlder),cm.addEvent(e.nodes.content.input,"keyup",e.inputKeyUpHanlder),cm.addEvent(e.nodes.content.input,"keypress",e.inputKeyPressHanlder),e.params.iconEvents&&(cm.addEvent(e.nodes.content.icon,"mousedown",e.iconEventHanlder),cm.addEvent(e.nodes.content.icon,"click",e.iconEventHanlder))},n.renderIconView=function(){return cm.node("div",{classes:this.params.icon})},n.getIcon=function(){return this.nodes.content.icon},n.inputKeyDown=function(e){var t=this;t.triggerEvent("onKeyDown",t.value,e),t.selectionStartInitial=t.nodes.content.input.selectionStart,t.selectionEndInitial=t.nodes.content.input.selectionStart,t.triggerEvent("onInputStart",t.value),"Enter"===e.code&&("textarea"!==t.params.type&&(cm.preventDefault(e),t.setValue(),t.blur(),t.triggerEvent("onEnterPress",t.value)),"textarea"!==t.params.type||!t.params.enterPressBehavior||"all"!==t.params.enterPressBehavior&&e.shiftKey||(cm.preventDefault(e),t.setValue(),t.blur(),t.triggerEvent("onEnterPress",t.value)))},n.inputKeyUp=function(e){this.triggerEvent("onKeyUp",this.value,e)},n.inputKeyPress=function(e){this.triggerEvent("onKeyPress",this.value,e)},n.inputEvent=function(){this.execConstraint("onInput",!1),this.selectValue(!0),this.params.lazy&&this.lazyValue(!0)},n.focusEvent=function(){this.isFocus=!0,this.execConstraint("onFocus",!1),this.triggerEvent("onFocus",this.value)},n.blurEvent=function(){this.isFocus=!1,this.execConstraint("onBlur",!1),this.setValue(!0),this.triggerEvent("onBlur",this.value)},n.iconEvent=function(e){cm.preventDefault(e),"mousedown"===e.type&&(this.wasFocus=this.isFocus),"click"===e.type&&(this.wasFocus||this.focus(!0),this.triggerEvent("onIconClick"))},n.addConstraint=function(e,t){return this.constraints[e]||(this.constraints[e]=[]),cm.isFunction(t)&&(this.constraints[e]=cm.arrayAdd(this.constraints[e],t)),this},n.removeConstraint=function(e,t){return this.constraints[e]||(this.constraints[e]=[]),cm.isFunction(t)&&(this.constraints[e]=cm.arrayRemove(this.constraints[e],t)),this},n.execConstraint=function(e,t){var n=this;if(n.constraints[e]&&(cm.forEach(n.constraints[e],function(e){return n.execConstraintHelper(e)}),t=!!cm.isUndefined(t)||t))switch(e){case"onInput":n.selectValue(!0);break;case"onChange":n.setValue(!0)}return n},n.execConstraintHelper=function(e){var t,n;cm.isFunction(e)&&(t=this.nodes.content.input.selectionStart,n=e(e=this.nodes.content.input.value),this.nodes.content.input.value=n,-1<e.indexOf(n)||e===n?this.nodes.content.input.setSelectionRange(t,t):this.nodes.content.input.setSelectionRange(this.selectionStartInitial,this.selectionStartInitial))},n.validateValueHelper=function(e){return cm.isEmpty(e)||(this.params.trimValue&&cm.isString(e)&&(e=e.trim()),this.params.limitValue&&"number"===this.params.type&&(e=cm.getMinMax(e,this.params.min,this.params.max,this.params.minLength,this.params.maxLength))),a.prototype.validateValueHelper.call(this,e)},n.lazyValue=function(e){var t=this;e=!!cm.isUndefined(e)||e,t.lazyDelay&&clearTimeout(t.lazyDelay),t.lazyDelay=setTimeout(function(){e&&t.setValue(!0)},t.params.delay)},n.setValue=function(e){var t=this.nodes.content.input.value;return e=!!cm.isUndefined(e)||e,this.set(t,e),this},n.selectValue=function(e){var t=this.nodes.content.input.value;return e=!!cm.isUndefined(e)||e,this.selectAction(t,e),this},n.setData=function(e){return this.nodes.content.input.value=cm.isUndefined(e)?this.value:e,this},n.focus=function(e){return!0===e&&(e=this.nodes.content.input.value,this.nodes.content.input.setSelectionRange(0,e.length)),this.nodes.content.input.focus(),this},n.blur=function(){return this.nodes.content.input.blur(),this}}),Com.FormFields.add("input",{node:cm.node("input",{type:"text"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"text"}}),Com.FormFields.add("textarea",{node:cm.node("textarea"),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"textarea"}}),Com.FormFields.add("password",{node:cm.node("input",{type:"password"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"password"}}),Com.FormFields.add("email",{node:cm.node("input",{type:"email"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"email"}}),Com.FormFields.add("url",{node:cm.node("input",{type:"url"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"url"}}),Com.FormFields.add("search",{node:cm.node("input",{type:"search",inputmode:"search",autocomplete:"off"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"search",inputmode:"search"}}),Com.FormFields.add("phone",{node:cm.node("input",{type:"tel"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"tel"}}),Com.FormFields.add("number",{node:cm.node("input",{type:"number"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"number"}}),Com.FormFields.add("hidden",{node:cm.node("input",{type:"hidden"}),visible:!1,adaptive:!1,value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"hidden"}}),cm.define("Com.InputTrigger",{extend:"Com.AbstractController",events:["onChange","onInput","onClick"],params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,type:"radio",triggerDefault:!1}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.InputTrigger",function(e,t,n){n._inherit;n.onConstructStart=function(){var e=this;e.inputs=[],e.changeHandler=e.change.bind(e),e.inputHandler=e.input.bind(e),e.clickHandler=e.click.bind(e)},n.renderViewModel=function(){var t=this;t.inputs=cm.getByAttr("type",t.params.type,t.params.node),cm.forEach(t.inputs,function(e){cm.addEvent(e,"input",t.inputHandler),cm.addEvent(e,"change",t.changeHandler),cm.addEvent(e,"click",t.clickHandler),t.params.triggerDefault&&cm.triggerEvent(e,"change")})},n.change=function(e){var e=cm.getEventTarget(e),t=e.value,n=/radio|checkbox/.test(e.type);return(!n||e.checked)&&this.triggerEvent("onChange",e,t),this},n.input=function(e){var e=cm.getEventTarget(e),t=e.value;return this.triggerEvent("onInput",e,t),this},n.click=function(e){var e=cm.getEventTarget(e),t=e.value;return this.triggerEvent("onClick",e,t),this}}),cm.define("Com.IntegerInput",{extend:"Com.AbstractInput",params:{controllerEvents:!0,maxLength:3,max:0,defaultValue:0,allowNegative:!1,allowFloat:!1}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.IntegerInput",function(e,t,n,a){n.construct=function(){this.setValueHandler=this.setValue.bind(this),a.prototype.construct.apply(this,arguments)},n.onValidateParams=function(){cm.isNode(this.params.node)&&(this.params.type=this.params.node.getAttribute("type")||this.params.max,this.params.max=this.params.node.getAttribute("max")||this.params.max)},n.renderContent=function(){var n=this,e={allowNegative:n.params.allowNegative,allowFloat:n.params.allowFloat},t={};return n.nodes.content=t,n.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"pt__input"},t.input=cm.node("input",{type:n.params.type})),cm.setInputMaxLength(t.input,n.params.maxLength,n.params.max),cm.isEmpty(n.params.placeholder)||(t.input.placeholder=n.params.placeholder),n.triggerEvent("onRenderContentProcess"),cm.addEvent(t.input,"blur",n.setValueHandler),cm.addEvent(t.input,"keypress",function(e){"Enter"===e.code&&(cm.preventDefault(e),n.setValue(),t.input.blur())}),cm.allowOnlyNumbersInputEvent(t.input,function(e,t){n.selectAction(n.validateValue(t),!0)},e),n.triggerEvent("onRenderContentEnd"),t.container},n.validateValue=function(e){return e=cm.isEmpty(e)?this.params.defaultValue:e,e=parseFloat(e),this.rawValue=isNaN(e)?"":e,this.rawValue},n.setValue=function(e){return e=!!cm.isUndefined(e)||e,this.set(this.rawValue,e),this},n.setData=function(){return this.nodes.content.input.value=this.rawValue,this}}),Com.FormFields.add("integer",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.IntegerInput"}),cm.define("Com.MultipleAutocomplete",{extend:"Com.MultipleInput",params:{embedStructure:"replace",className:"com__multiple-autocomplete",sortable:!1,showToolbar:!1,showControls:!0,focusInput:!0,inputConstructor:"Com.Autocomplete"}},function(e){Com.MultipleInput.apply(this,arguments)}),Com.FormFields.add("multi-autocomplete",{node:cm.node("div"),fieldConstructor:"Com.AbstractFormField",constructor:"Com.MultipleAutocomplete"}),cm.define("Com.MultipleFileInput",{extend:"Com.MultipleInput",params:{embedStructure:"replace",className:"com__multiple-file-input",local:!0,sortable:!1,showToolbar:!0,showControls:!1,showList:!0,focusInput:!1,buttonsAlign:"left",inputConstructor:"Com.FileInput",inputParams:{embedStructure:"replace",dropzone:!1},fileManager:!1,fileManagerConstructor:"Com.AbstractFileManagerContainer",fileManagerParams:{constructorParams:{}},fileUploader:!1,fileUploaderConstructor:"Com.FileUploaderContainer",fileUploaderParams:{constructorParams:{}},dropzone:!0,dropzoneConstructor:"Com.FileDropzone",dropzoneParams:{embedStructure:"append",rollover:!0},"Com.FileReader":{}},strings:{browse:"Browse",browse_local:"Browse Local",browse_filemanager:"Browse File Manager"}},function(e){this.myComponents={},this.dragInterval=null,this.isDropzoneShow=!1,this.hasButtons=!1,Com.MultipleInput.apply(this,arguments)}),cm.getConstructor("Com.MultipleFileInput",function(e,t,n){var a=n._inherit;n.construct=function(){var e=this;return e.validateParamsEndHandler=e.validateParamsEnd.bind(e),e.itemAddProcessHandler=e.itemAddProcess.bind(e),e.browseActionHandler=e.browseAction.bind(e),e.processFilesHandler=e.processFiles.bind(e),e.addEvent("onValidateParamsEnd",e.validateParamsEndHandler),e.addEvent("onItemAddProcess",e.itemAddProcessHandler),a.prototype.construct.apply(e,arguments),e},n.clear=function(){return this.params.showToolbar&&cm.removeClass(this.nodes.toolbar.browseHolder,"is-hidden"),a.prototype.clear.apply(this,arguments),this},n.validateParamsEnd=function(){var e=this;return e.isMultiple=!e.params.max||1<e.params.max,e.setLangs({_browse_local:e.params.fileManager?e.lang("browse_local"):e.lang("browse"),_browse_filemanager:e.params.local?e.lang("browse_filemanager"):e.lang("browse")}),e.params.dropzoneParams.max=e.params.max,e.params.fileManagerParams.constructorParams.max=e.params.max,e.params.fileUploaderParams.constructorParams.max=e.params.max,e.params.fileUploaderParams.constructorParams.local=e.params.local,e.params.fileUploaderParams.constructorParams.fileManager=e.params.fileManager,e.params.dropzone=!!e.params.local&&e.params.dropzone,e.params.local=!e.params.fileUploader&&e.params.local,e.params.fileManager=!e.params.fileUploader&&e.params.fileManager,e.hasButtons=e.params.local||e.params.fileManager||e.params.fileUploader,e},n.renderViewModel=function(){var n=this;return a.prototype.renderViewModel.apply(n,arguments),cm.getConstructor("Com.FileReader",function(e,t){n.myComponents.reader=new e(n.params[t]),n.myComponents.reader.addEvent("onReadSuccess",function(e,t){n.addItem({value:t},{triggerEvents:!0})})}),n.params.dropzone&&cm.getConstructor(n.params.dropzoneConstructor,function(e){n.myComponents.dropzone=new e(cm.merge(n.params.dropzoneParams,{container:n.nodes.inner,target:n.nodes.holder})),n.myComponents.dropzone.addEvent("onDrop",function(e,t){n.processFiles(t)})}),n.params.showToolbar&&n.params.fileManager&&cm.getConstructor(n.params.fileManagerConstructor,function(e){n.myComponents.fileManager=new e(cm.merge(n.params.fileManagerParams,{node:n.nodes.toolbar.browseFileManager})),n.myComponents.fileManager.addEvent("onComplete",function(e,t){n.processFiles(t)})}),n.params.showToolbar&&n.params.fileUploader&&cm.getConstructor(n.params.fileUploaderConstructor,function(e){n.myComponents.fileUploader=new e(cm.merge(n.params.fileUploaderParams,{node:n.nodes.toolbar.browseFileUploader})),n.myComponents.fileUploader.addEvent("onComplete",function(e,t){n.processFiles(t)})}),n},n.renderToolbarView=function(){var e=this,t={};return t.container=cm.node("div",{class:"com__multiple-input__toolbar"},t.content=cm.node("div",{class:"pt__buttons"},t.contentInner=cm.node("div",{class:"inner"}))),cm.addClass(t.content,["pull",e.params.buttonsAlign].join("-")),e.params.local&&(t.browseLocal=cm.node("div",{class:"browse-button"},cm.node("button",{type:"button",class:"button button-primary"},e.lang("_browse_local")),cm.node("div",{class:"inner"},t.input=cm.node("input",{type:"file"}))),e.isMultiple&&t.input.setAttribute("multiple","multiple"),cm.insertFirst(t.browseLocal,t.contentInner)),e.params.fileManager&&(t.browseFileManager=cm.node("button",{type:"button",class:"button button-primary"},e.lang("_browse_filemanager")),cm.insertFirst(t.browseFileManager,t.contentInner)),e.params.fileUploader&&(t.browseFileUploader=cm.node("button",{type:"button",class:"button button-primary"},e.lang("browse")),cm.insertFirst(t.browseFileUploader,t.contentInner)),e.hasButtons||cm.addClass(t.container,"is-hidden"),cm.addEvent(t.input,"change",e.browseActionHandler),(e.nodes.toolbar=t).container},n.itemAddProcess=function(e,t){var n=this;return t.controller.addEvent("onClear",function(){n.removeItem(t,{triggerEvents:!0})}),n},n.browseAction=function(t){var n=this,e=n.params.max?Math.min(t.target.files.length,n.params.max-n.items.length):t.target.files.length;return cm.forEach(e,function(e){n.processFiles(t.target.files[e])}),n},n.processFiles=function(e){var t=this;return cm.isFile(e)?t.myComponents.reader.read(e):cm.isArray(e)?cm.forEach(e,function(e){t.processFiles(e)}):cm.isEmpty(e)||t.addItem({value:e},{triggerEvents:!0}),t},n.browse=function(){return this.params.local&&this.nodes.toolbar.input.click(),this}}),Com.FormFields.add("multi-file-input",{node:cm.node("div"),fieldConstructor:"Com.AbstractFormField",constructor:"Com.MultipleFileInput"}),cm.define("Com.OpacityRange",{extend:"Com.AbstractRange",params:{className:"com__range",theme:"theme--arrows",min:100,max:0,value:100,color:"red"}},function(e){Com.AbstractRange.apply(this,arguments)}),cm.getConstructor("Com.OpacityRange",function(e,t,n){n._inherit;n.onConstructEnd=function(){this.setColor(this.params.color)},n.renderRangeContent=function(){var e={};return(this.nodes.rangeContent=e).container=cm.node("div",{class:"com__opacity-range__content"},e.inner=cm.node("div",{class:"inner range-helper"})),e.container},n.setColor=function(e){switch(this.params.direction){case"horizontal":this.nodes.rangeContent.inner.style.background="linear-gradient(to right, "+e+", rgba(255,255,255,0))";break;case"vertical":this.nodes.rangeContent.inner.style.background="linear-gradient(to bottom, "+e+", rgba(255,255,255,0))"}}}),Com.FormFields.add("opacity-range",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.OpacityRange"}),cm.define("Com.PositionTools",{extend:"Com.AbstractInput",params:{controllerEvents:!0,className:"com__position-tools",defaultValue:"center center",fieldSize:"medium",options:[{name:"left top",icon:"svg__position-topleft",iconActive:"svg__position-topleft--light"},{name:"center top",icon:"svg__position-topcenter",iconActive:"svg__position-topcenter--light"},{name:"right top",icon:"svg__position-topright",iconActive:"svg__position-topright--light"},{name:"left center",icon:"svg__position-middleleft",iconActive:"svg__position-middleleft--light"},{name:"center center",icon:"svg__position-middlecenter",iconActive:"svg__position-middlecenter--light"},{name:"right center",icon:"svg__position-middleright",iconActive:"svg__position-middleright--light"},{name:"left bottom",icon:"svg__position-bottomleft",iconActive:"svg__position-bottomleft--light"},{name:"center bottom",icon:"svg__position-bottomcenter",iconActive:"svg__position-bottomcenter--light"},{name:"right bottom",icon:"svg__position-bottomright",iconActive:"svg__position-bottomright--light"}]}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.PositionTools",function(e,t,n){var a=n._inherit;n.onConstructStart=function(){return this.options={},this},n.set=function(){return a.prototype.set.apply(this,arguments),this.setOption(),this},n.renderContent=function(){var t=this,e={};return t.nodes.content=e,t.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"com__position-tools__content"},e.inner=cm.node("div",{class:"inner"})),cm.addClass(e.container,["size",t.params.fieldSize].join("-")),cm.forEach(t.params.options,function(e){t.renderOption(e)}),t.triggerEvent("onRenderContentProcess"),t.triggerEvent("onRenderContentEnd"),e.container},n.renderOption=function(e){var t=this;return(e=cm.merge({iconType:"icon",icon:"",iconActive:"",name:"",nodes:{}},e)).nodes.container=cm.node("div",{class:"option__item"},e.nodes.icon=cm.node("div",{class:[e.iconType,e.icon].join(" ")})),cm.appendChild(e.nodes.container,t.nodes.content.inner),cm.addEvent(e.nodes.container,"click",function(){t.disabled||t.set(e.name)}),t.options[e.name]=e,t},n.setOption=function(){var e;this.options[this.previousValue]&&(e=this.options[this.previousValue],cm.removeClass(e.nodes.container,"active"),cm.replaceClass(e.nodes.icon,e.iconActive,e.icon)),this.options[this.value]&&(e=this.options[this.value],cm.addClass(e.nodes.container,"active"),cm.replaceClass(e.nodes.icon,e.icon,e.iconActive))}}),cm.define("Com.Range",{extend:"Com.AbstractRange",params:{className:"com__range",theme:"theme--default",min:0,max:100,value:0}},function(e){Com.AbstractRange.apply(this,arguments)}),cm.getConstructor("Com.Range",function(e,t,n,a){n.renderRangeContent=function(){var e={};return(this.nodes.rangeContent=e).container=cm.node("div",{class:"com__range__field"},e.bar=cm.node("div",{class:"bar"},e.range=cm.node("div",{class:"range"})),cm.node("div",{class:"min"},this.params.min),cm.node("div",{class:"max"},this.params.max)),e.container},n.setBarRange=function(){var e=cm.clone(this.tempRawValue);this.params.range||e.push(this.params.min),(e=cm.arraySort(e,!1,"desc"))[0]=this.getBarRangeValuePosition(e[0]),e[1]=this.getBarRangeValuePosition(e[1]),this.nodes.rangeContent.range.style.left=e[0]+"px",this.nodes.rangeContent.range.style.width=e[1]-e[0]+"px"},n.getBarRangeValuePosition=function(e){var t,n=cm.getFullRect(this.nodes.rangeContent.bar),a=e-this.params.min,r=this.params.max-this.params.min;switch(this.params.direction){case"horizontal":t=n.absoluteWidth/r*a,e=Math.round(t);break;case"vertical":t=n.absoluteHeight/r*a,e=Math.round(t)}return e},n.selectData=function(){this.setBarRange()},n.setData=function(){a.prototype.setData.apply(this,arguments),this.setBarRange()}}),Com.FormFields.add("range",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Range"}),cm.define("Com.RepeatTools",{extend:"Com.AbstractInput",params:{className:"com__repeat-tools",defaultValue:"no-repeat",fieldStyle:"row",options:[{name:"no-repeat",icon:"svg__repeat-no"},{name:"repeat-x",icon:"svg__repeat-horizontal"},{name:"repeat-y",icon:"svg__repeat-vertical"},{name:"repeat",icon:"svg__repeat-both"}]},strings:{"no-repeat":"No","repeat-x":"Horizontally","repeat-y":"Vertically",repeat:"Both"}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.RepeatTools",function(e,t,n){var a=n._inherit;n.construct=function(){return this.options={},a.prototype.construct.apply(this,arguments),this},n.set=function(){return a.prototype.set.apply(this,arguments),this.setOption(),this},n.renderContent=function(){var t=this,e={};return t.nodes.content=e,t.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"com__repeat-tools__content"},e.inner=cm.node("div",{class:"inner"})),cm.addClass(e.container,["style",t.params.fieldStyle].join("-")),cm.forEach(t.params.options,function(e){t.renderOption(e)}),t.triggerEvent("onRenderContentProcess"),t.triggerEvent("onRenderContentEnd"),e.container},n.renderOption=function(e){var t=this;return(e=cm.merge({iconType:"icon",icon:"",name:"",nodes:{}},e)).nodes.container=cm.node("div",{class:"option__item",title:t.lang(e.name)},e.nodes.icon=cm.node("div",{class:[e.iconType,e.icon].join(" ")})),cm.appendChild(e.nodes.container,t.nodes.content.inner),cm.addEvent(e.nodes.container,"click",function(){t.set(e.name)}),t.options[e.name]=e,t},n.setOption=function(){var e;this.options[this.previousValue]&&(e=this.options[this.previousValue],cm.removeClass(e.nodes.container,"is-active")),this.options[this.value]&&(e=this.options[this.value],cm.addClass(e.nodes.container,"is-active"))}}),cm.define("Com.ScaleTools",{extend:"Com.AbstractInput",params:{className:"com__scale-tools",defaultValue:"auto",fieldStyle:"row",options:[{name:"auto",icon:"svg__scale-auto"},{name:"contain",icon:"svg__scale-contain"},{name:"cover",icon:"svg__scale-cover"},{name:"100% 100%",icon:"svg__scale-fill"}]},strings:{auto:"Auto",contain:"Contain",cover:"Cover","100% 100%":"Fill"}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.ScaleTools",function(e,t,n){var a=n._inherit;n.construct=function(){return this.options={},a.prototype.construct.apply(this,arguments),this},n.set=function(){return a.prototype.set.apply(this,arguments),this.setOption(),this},n.renderContent=function(){var t=this,e={};return t.nodes.content=e,t.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"com__scale-tools__content"},e.inner=cm.node("div",{class:"inner"})),cm.addClass(e.container,["style",t.params.fieldStyle].join("-")),cm.forEach(t.params.options,function(e){t.renderOption(e)}),t.triggerEvent("onRenderContentProcess"),t.triggerEvent("onRenderContentEnd"),e.container},n.renderOption=function(e){var t=this;return(e=cm.merge({iconType:"icon",icon:"",name:"",nodes:{}},e)).nodes.container=cm.node("div",{class:"option__item",title:t.lang(e.name)},e.nodes.icon=cm.node("div",{class:[e.iconType,e.icon].join(" ")})),cm.appendChild(e.nodes.container,t.nodes.content.inner),cm.addEvent(e.nodes.container,"click",function(){t.set(e.name)}),t.options[e.name]=e,t},n.setOption=function(){var e;this.options[this.previousValue]&&(e=this.options[this.previousValue],cm.removeClass(e.nodes.container,"is-active")),this.options[this.value]&&(e=this.options[this.value],cm.addClass(e.nodes.container,"is-active"))}}),Com.Elements.Selects={},Com.GetSelect=function(e){return Com.Elements.Selects[e]||null},cm.define("Com.Select",{modules:["Params","Events","Structure","DataConfig","Stack"],events:["onValidateParams","onValidateParamsStart","onValidateParamsProcess","onValidateParamsEnd","onRender","onRenderStart","onSelect","onChange","onReset","onFocus","onBlur","onIconClick"],params:{select:null,node:null,container:null,name:"",embedStructure:"replace",customEvents:!0,renderInBody:!0,renderHiddenContent:!0,multiple:!1,placeholder:"",showPlaceholderAbove:!1,showTitleTag:!0,title:!1,options:[],selected:0,max:0,setInitialValue:!0,setPlaceholderText:!0,value:null,defaultValue:null,disabled:!1,id:null,className:[],inputClassName:[],tabindex:null,icons:{arrow:"icon default linked"},tooltip:{limitWidth:!0,constructor:"Com.Tooltip",constructorParams:{targetEvent:"none",hideOnOut:!0,hold:!0,scroll:!1,className:"com__select__tooltip",width:"targetWidth",minWidth:"targetWidth",top:cm._config.tooltipDown,ariaRole:"listbox"}}}},function(e){function t(){cm.isNode(h.params.select)&&(h.params.node=h.params.select)}function n(){var e;h.triggerEvent("onValidateParamsStart"),cm.isEmpty(h.params.className)?h.params.className=[]:cm.isString(h.params.className)&&(h.params.className=[h.params.className]),cm.isObject(h.params["Com.Tooltip"])&&(h.params.tooltip.constructorParams=cm.merge(h.params.tooltip.constructorParams,h.params["Com.Tooltip"])),h.params.tooltip.limitWidth||(h.params.tooltip.constructorParams.width="auto"),cm.isNode(h.params.node)&&(h.params.placeholder=h.params.node.getAttribute("placeholder")||h.params.placeholder,h.params.multiple=h.params.node.multiple,h.params.title=h.params.node.getAttribute("title")||h.params.title,h.params.name=h.params.node.getAttribute("name")||h.params.name,h.params.disabled=h.params.node.disabled||h.params.node.readOnly||h.params.disabled,h.params.tabindex=h.params.node.getAttribute("tabindex")||h.params.tabindex,h.params.id=h.params.node.id||h.params.id,e=Array.from(h.params.node.classList),h.params.className=cm.merge(h.params.className,e)),h.params.multiple&&(p=[]),h.triggerEvent("onValidateParams"),h.triggerEvent("onValidateParamsProcess"),E(),h.disabled=h.params.disabled,h.triggerEvent("onValidateParamsEnd")}function a(){(h.params.multiple?S:w)(),cm.addClass(g.container,h.params.className),h.params.showTitleTag&&h.params.title&&(g.container.title=h.params.title),cm.isNumber(h.params.tabindex)&&g.container.setAttribute("tabindex",h.params.tabindex),cm.isEmpty(h.params.id)||(g.container.id=h.params.id),cm.isNode(h.params.node)&&cm.forEach(h.params.node.attributes,function(e){/^data-(?!node|element)/.test(e.name)&&(g.hidden.setAttribute(e.name,e.value),g.container.setAttribute(e.name,e.value))}),h.params.name&&g.hidden.setAttribute("name",h.params.name),cm.isEmpty(h.params.placeholder)||(g.placeholder=cm.node("li",cm.node("div",{class:"text disabled"},cm.node("span",{class:"label"},h.params.placeholder))),h.params.showPlaceholderAbove&&(cm.addClass(g.scroll,"has-placeholder-sticky"),cm.addClass(g.placeholder,["sticky","placeholder-sticky"])),cm.appendChild(g.placeholder,g.items)),cm.isNode(h.params.node)&&q(),cm.forEach(h.params.options,function(e){A(e)}),h.embedStructure(g.container)}function r(){h.params.multiple||(cm.addEvent(g.arrow,"mousedown",k),cm.addEvent(g.arrow,"click",k),cm.addEvent(g.text,"keydown",j),cm.addEvent(g.text,"focus",_),cm.addEvent(g.text,"blur",L),cm.getConstructor(h.params.tooltip.constructor,function(e){f.menu=new e(cm.merge(h.params.tooltip.constructorParams,{container:h.params.renderInBody?document.body:g.container,content:g.scroll,target:g.target,holdTarget:g.container,disabled:!y,events:{onShowStart:M.bind(h),onHideStart:O.bind(h)}}))})),h.disabled?h.disable():h.enable()}function o(){h.params.customEvents&&cm.customEvent.add(g.container,"destruct",h.destructHandler)}function s(t){return C.find(function(e){return e.name===t})}function i(t,e){e=cm.merge({setDefault:!0},e);var n=cm.isUndefined(t.value)?t.text:t.value;cm.remove(t.node),cm.remove(t.option),b=b.filter(function(e){return t!=e}),y=b.length,delete v[t.value],h.params.multiple?cm.isArray(p)&&(p=p.filter(function(e){return n!=e})):n===p&&(e.setDefault&&y?R(b[0],!0):(p=null,g.text.value=""))}function c(e){var t=cm.isUndefined(e.value)?e.text:e.value;e.selected?H(e):(!h.params.max||0<h.params.max&&p.length<h.params.max)&&(p.push(t),I(e))}function d(e){u=p,p=cm.isUndefined(e.value)?e.text:e.value,b.forEach(D),!e.placeholder||h.params.setPlaceholderText?e.group?g.text.value=[cm.decode(e.group),cm.decode(e.text)].join(" › "):g.text.value=cm.decode(e.text):g.text.value="",g.hidden.value=p,I(e)}function l(){cm.stringifyJSON(p)!==cm.stringifyJSON(u)&&h.triggerEvent("onChange",p)}function m(){f.menu&&!h.params.multiple&&(!h.disabled&&0<y?f.menu.enable():f.menu.disable())}var u,p,h=this,g={menu:{}},f={},v={},b=[],y=0,C=[],E=(h.disabled=!1,h.isOpen=!1,h.isFocus=!1,h.wasFocus=!1,h.clickTarget=null,h.isDestructed=null,function(){var e,t;cm.isNode(h.params.node)&&(e=h.params.node.getAttribute("data-value"),t=cm.getSelectValue(h.params.node),cm.isEmpty(e)||(t=cm.parseJSON(e)),h.params.value=cm.isEmpty(t)?h.params.value:t),h.params.value=cm.isEmpty(h.params.value)?h.params.defaultValue:h.params.value}),w=function(){g.container=cm.node("div",{class:"com__select"},g.target=cm.node("div",{class:"pt__input"},g.text=cm.node("input",{type:"text",readOnly:"true"}),g.arrow=cm.node("div",{class:h.params.icons.arrow,role:"combobox","aria-haspopup":"true","aria-controls":"listbox","aria-expanded":"false"})),g.scroll=cm.node("div",{class:"pt__listing-items"},g.items=cm.node("ul",{role:"listbox"}))),cm.addClass(g.target,h.params.inputClassName),cm.isEmpty(h.params.id)||g.text.setAttribute("aria-describedby",h.params.id),g.hidden=cm.node("select",{class:"display-none"}),h.params.renderHiddenContent&&cm.insertFirst(g.hidden,g.container)},S=function(){g.container=cm.node("div",{class:"com__select-multi"},g.inner=cm.node("div",{class:"inner"},g.scroll=cm.node("div",{class:"pt__listing-items"},g.items=cm.node("ul",{role:"listbox"})))),g.hidden=cm.node("select",{class:"display-none",multiple:!0}),h.params.renderHiddenContent&&cm.insertFirst(g.hidden,g.container)},k=function(e){"mousedown"===e.type&&(h.wasFocus=h.isFocus),"click"===e.type&&(h.wasFocus?h.toggleMenu(!1):h.focus(),h.triggerEvent("onIconClick"))},_=function(){y&&(cm.addClass(g.container,"active"),h.toggleMenu(!0),p)&&v[p]&&F(v[p]),h.isFocus=!0,h.triggerEvent("onFocus",p)},L=function(){h.isOwnNode(h.clickTarget)||h.toggleMenu(!1),h.isFocus=!1,h.clickTarget=null,cm.removeClass(g.container,"active"),h.triggerEvent("onBlur",p)},M=function(){h.isOpen=!0,g.arrow.setAttribute("aria-expanded","true"),cm.addEvent(document,"keydown",N),cm.addEvent(document,"mousedown",x)},O=function(){h.isOpen=!1,g.arrow.setAttribute("aria-expanded","false"),cm.removeEvent(document,"keydown",N),cm.removeEvent(document,"mousedown",x)},j=function(e){var t,n;b.filter(function(e){return!e.disabled}).length&&((t={ArrowUp:function(e){return U(e)},ArrowDown:function(e){return z(e)},Home:function(){return V()},End:function(){return B()}})[e.code]&&(e.preventDefault(),n=b.indexOf(v[p]),t=t[e.code](n),n=b[t])&&(R(n,!0),F(n)),["Enter","Space"].includes(e.code))&&(e.preventDefault(),h.toggleMenu(!1))},x=function(e){h.clickTarget=cm.getEventTarget(e),h.isOwnNode(h.clickTarget)||h.toggleMenu(!1)},V=function(){return b.findIndex(function(e){return!e.disabled})},B=function(){return b.findLastIndex(function(e){return!e.disabled})},U=function(e){if(!cm.isNumber(e))return h.findLastIndex();for(var t=(e-1+y)%y;b[t].disabled;)t=(t-1+y)%y;return t},z=function(e){if(!cm.isNumber(e))return h.findFirstIndex();for(var t=(e+1)%y;b[t].disabled;)t=(t+1)%y;return t},P=function(e){return{value:e.value,text:e.innerHTML,classes:[e.className],style:e.style.cssText,hidden:e.hidden,disabled:e.disabled}},q=function(){var t,n,e=h.params.node.childNodes;cm.forEach(e,function(e){cm.isElementNode(e)&&("optgroup"===(t=e.tagName.toLowerCase())?(n=W(e),T(e.label,n)):"option"===t&&A(P(e)))})},W=function(e){var e=e.querySelectorAll("option"),t=[];return cm.forEach(e,function(e){t.push(P(e))}),t},T=function(e,t){var n={name:e,options:t};return n.optgroup=cm.node("optgroup",{label:n.name}),n.container=cm.node("li",{class:"group",role:"option"},n.items=cm.node("ul",{class:"pt__listing-items",role:"group"})),cm.isEmpty(n.name)||(cm.addClass(n.container,"group-sticky"),cm.insertFirst(cm.node("div",{class:"title",innerHTML:n.name}),n.container)),cm.forEach(n.options,function(e){A(e,n)}),g.items.appendChild(n.container),g.hidden.appendChild(n.optgroup),C.push(n),n},A=function(e,t){return(e=cm.merge({group:null,groupItem:null,hidden:!1,select:!1,selected:!1,disabled:!1,placeholder:!1,value:"",text:"",textNode:null,classes:[],style:null,renderCheckbox:!1},e)).placeholder=!!cm.isEmpty(e.value)||e.placeholder,cm.isEmpty(e.className)||(cm.isArray(e.classes)?e.classes.push(e.className):e.classes=[e.classes,e.className]),v[e.value]&&i(v[e.value]),cm.isUndefined(t)?cm.isEmpty(e.group)||(e.groupItem=s(e.group),e.groupItem)||(e.groupItem=T(e.group)):(e.groupItem=t,e.group=t.name),e.option=cm.node("option",{value:e.value,innerHTML:e.text}),e.node=cm.node("li",{classes:e.classes,style:e.style,role:"option","aria-selected":"false"},e.link=cm.node("a",{title:cm.cutHTML(e.text)})),cm.isNode(e.textNode)?cm.appendChild(e.textNode,e.link):e.link.innerHTML=e.text,e.renderCheckbox&&(e.checkbox=cm.node("input",{classes:"checkbox",type:h.params.multiple?"checkbox":"radio","aria-hidden":!0}),cm.insertFirst(e.checkbox,e.link)),e.hidden&&cm.addClass(e.node,"hidden"),e.disabled&&cm.addClass(e.node,"disabled"),e.placeholder&&cm.addClass(e.node,"placeholder"),(e.groupItem?(e.groupItem.items.appendChild(e.node),e.groupItem.optgroup):(g.items.appendChild(e.node),g.hidden)).appendChild(e.option),cm.click.add(e.link,function(){e.disabled||h.disabled||R(e,!0),h.params.multiple||h.toggleMenu(!1)}),v[e.value]=e,b.push(e),y=b.length,e.select&&R(e,!1),e},R=function(e,t){e&&(h.params.multiple?c:d)(e),t&&(h.triggerEvent("onSelect",p),l())},D=function(e){e.option.selected=!1,e.selected=!1,e.checkbox&&(e.checkbox.checked=!1),e.node.setAttribute("aria-selected","false"),cm.removeClass(e.node,"active")},I=function(e){e.option.selected=!0,e.selected=!0,e.checkbox&&(e.checkbox.checked=!0),e.node.setAttribute("aria-selected","true"),cm.addClass(e.node,"active")},H=function(e){var t=cm.isUndefined(e.value)?e.text:e.value;p=p.filter(function(e){return t!=e}),D(e)},F=function(e){f.menu&&!h.params.multiple&&f.menu.scrollToNode(e.node)},N=function(e){38!==(e=cm.getEvent(e)).keyCode&&40!==e.keyCode||cm.preventDefault(e)};h.destruct=function(){return this.isDestructed||(this.isDestructed=!0,h.params.customEvents&&cm.customEvent.remove(g.container,"destruct",h.destructHandler),this.removeFromStack()),this},h.get=function(){return p},h.getText=function(){var t=[];return cm.isArray(p)?cm.forEach(p,function(e){v[e]&&t.push(v[e].text)}):v[p]&&t.push(v[p].text),t.join(", ")||null},h.set=function(e,t){return t=!!cm.isUndefined(t)||t,cm.isUndefined(e)||(cm.isArray(e)?(cm.forEach(e,function(e){v[e]&&R(v[e],!1)}),t&&(h.triggerEvent("onSelect",p),h.triggerEvent("onChange",p))):v[e]&&R(v[e],t)),h},h.reset=function(e){e=!!cm.isUndefined(e)||e,h.params.multiple?h.deselectAll(e):y&&R(b[0],e),h.triggerEvent("onReset",p)},h.selectAll=function(e){return e=!!cm.isUndefined(e)||e,h.params.multiple&&(cm.forEach(v,H),cm.forEach(v,c),e)&&(h.triggerEvent("onSelect",p),l()),h},h.deselectAll=function(e){return e=!!cm.isUndefined(e)||e,h.params.multiple&&(cm.forEach(v,H),e)&&(h.triggerEvent("onSelect",p),l()),h},h.addOption=function(e,t){return cm.isObject(e)?A(e):A({value:e,text:t}),m(),h},h.addOptions=function(e){return cm.forEach(e,function(e){A(e)}),m(),h},h.editOption=function(e,t){var n;return!cm.isUndefined(e)&&v[e]&&(e=v[e],t=t,n=cm.isUndefined(e.value)?e.text:e.value,e.text=t,e.node.innerHTML=t,e.option.innerHTML=t,h.params.multiple||n!==p||(g.text.value=cm.decode(t))),h},h.removeOption=function(e){return!cm.isUndefined(e)&&v[e]&&(i(v[e]),m()),h},h.removeOptions=h.removeOptionsAll=function(){return cm.forEach(v,function(e){i(e,{setDefault:!1})}),m(),h},h.getOption=function(e){return!cm.isUndefined(e)&&v[e]?v[e]:null},h.getSelectedOption=h.getValueOption=function(){var t;return cm.isArray(p)?(t=[],cm.forEach(p,function(e){e=h.getOption(e);e&&t.push(e)}),t):h.getOption(p)},h.getOptions=h.getOptionsAll=h.getAllOptions=function(){var t=[];return cm.forEach(b,function(e){t.push({text:e.text,value:e.value})}),t},h.hideOption=function(e){!cm.isUndefined(e)&&v[e]&&((e=v[e]).hidden=!0,cm.addClass(e.node,"hidden"))},h.showOption=function(e){!cm.isUndefined(e)&&v[e]&&((e=v[e]).hidden=!1,cm.removeClass(e.node,"hidden"))},h.toggleOptionVisibility=function(e,t){var n=v[e];!cm.isUndefined(e)&&n&&(t?h.showOption(e):h.hideOption(e))},h.disableOption=function(e){!cm.isUndefined(e)&&v[e]&&((e=v[e]).disabled=!0,cm.addClass(e.node,"disabled"))},h.enableOption=function(e){!cm.isUndefined(e)&&v[e]&&((e=v[e]).disabled=!1,cm.removeClass(e.node,"disabled"))},h.focus=function(){return h.params.multiple||g.text.focus(),h},h.blur=function(){return h.params.multiple||g.text.blur(),h},h.disable=function(){return h.disabled=!0,cm.addClass(g.container,"disabled"),cm.addClass(g.scroll,"disabled"),cm.addClass(g.target,"disabled"),h.params.multiple||(g.text.disabled=!0,f.menu&&f.menu.disable()),h},h.enable=function(){return h.disabled=!1,cm.removeClass(g.container,"disabled"),cm.removeClass(g.scroll,"disabled"),cm.removeClass(g.target,"disabled"),h.params.multiple||(g.text.disabled=!1,0<y&&f.menu&&f.menu.enable()),h},h.toggleVisibility=function(e){return cm.toggleClass(g.container,"is-hidden",!e),h},h.toggleMenu=function(e,t){return!h.disabled&&f.menu&&(e?f.menu.show(t):f.menu.hide(t)),h},h.getNodes=function(e){return g[e]||g},h.getContainer=function(){return g.container},h.isOwnNode=function(e){return cm.isParent(g.container,e,!0)||f.menu.isOwnNode(e)},h.destructHandler=h.destruct.bind(h),h.setParams(e),t(),h.convertEvents(h.params.events),h.getDataConfig(h.params.node),n(),h.addToStack(h.params.node),h.triggerEvent("onRenderStart"),a(),r(),o(),h.params.multiple?!cm.isEmpty(h.params.value)&&cm.isArray(h.params.value)&&cm.forEach(h.params.value,function(e){v[e]&&R(v[e],!0)}):!cm.isEmpty(h.params.value)&&v[h.params.value]?R(v[h.params.value]):h.params.setInitialValue&&y&&R(b[0]),h.addToStack(g.container),h.triggerEvent("onRender",p)}),Com.FormFields.add("select",{node:cm.node("select"),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Select"}),cm.define("Com.SelectFieldTrigger",{extend:"Com.AbstractController",params:{renderStructure:!0,embedStructureOnRender:!0,controllerEvents:!0,triggerName:null,triggerFieldSize:null,options:[],"Com.Toolbar":{embedStructure:"append"}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.SelectFieldTrigger",function(e,t,n){var a=n._inherit;n.onConstructStart=function(){this.fields={},this.changeEventHandler=this.changeEvent.bind(this)},n.onValidateParams=function(){this.components.form=this.params.form,this.components.formField=this.params.formField},n.onRender=function(){this.toggle()},n.renderView=function(){return this.triggerEvent("onRenderViewStart"),this.nodes.container=cm.node("div",{class:"app__select-trigger"}),this.triggerEvent("onRenderViewProcess"),this.triggerEvent("onRenderViewEnd"),this},n.renderViewModel=function(){a.prototype.renderViewModel.apply(this,arguments),this.getTriggerField(),this.getFields(),this.renderToolbar()},n.getTriggerField=function(){var e=this.components.form.getField(this.params.triggerName);e&&(this.components.trigger=e.controller,this.components.trigger.addEvent("onChange",this.changeEventHandler))},n.getFields=function(){var n=this;cm.forEach(n.params.options,function(t){cm.forEach(t.fields,function(e){cm.isObject(e)?n.processField(t.value,e):n.processField(t.value,{name:e})})})},n.processField=function(e,t){(t=cm.merge({value:e,name:null,size:null,field:null,controller:null,container:null},t)).field=this.components.form.getField(t.name),t.field&&(t.controller=t.field.controller,t.container=t.controller.getContainer()),this.fields[t.name]=t},n.renderToolbar=function(){var n=this;cm.getConstructor("Com.Toolbar",function(e,t){n.components.toolbar=new e(cm.merge(n.params[t],{container:n.nodes.container})),n.components.toolbar.addGroup({name:"trigger",position:"left"}).addGroup({name:"fields",position:"left"}).addField({group:"trigger",name:"trigger",node:n.components.trigger.getContainer(),size:n.params.triggerFieldSize})}),cm.forEach(n.fields,function(e,t){n.components.toolbar.addField({group:"fields",name:e.name,node:e.container,size:e.size,hidden:!0})})},n.changeEvent=function(){this.toggle()},n.toggle=function(){var n=this,a=n.components.trigger.get();cm.forEach(n.fields,function(e,t){e.value==a?n.components.toolbar.showField(e.name,"fields"):n.components.toolbar.hideField(e.name,"fields")})}}),Com.FormFields.add("select-field-trigger",{field:!1,fieldConstructor:"Com.AbstractFormField",constructor:"Com.SelectFieldTrigger"}),cm.define("Com.TagsInput",{modules:["Params","Events","Langs","Structure","DataConfig","Stack"],require:["Com.Autocomplete"],events:["onRender","onAdd","onRemove","onChange","onOpen","onClose","onReset"],params:{input:null,node:cm.node("input",{type:"text"}),container:null,name:"",embedStructure:"replace",data:[],maxSingleTagLength:255,max:0,autocomplete:!1,icons:{add:"icon default linked",remove:"icon default linked"},"Com.Autocomplete":{clearOnEmpty:!1}},strings:{tags:"Tags",add:"Add",remove:"Remove",placeholder:"Add tags..."}},function(e){function t(){cm.isNode(s.params.input)&&(s.params.node=s.params.input)}function n(){cm.isNode(s.params.node)&&(s.params.name=s.params.node.getAttribute("name")||s.params.name),s.isAutocomplete=s.params.autocomplete}function a(){i.container=cm.node("div",{class:"com__tags-input"},i.hidden=cm.node("input",{type:"hidden"}),i.inner=cm.node("div",{class:"inner input"},i.tags=cm.node("div",{class:"tags"}))),l(),s.params.name&&i.hidden.setAttribute("name",s.params.name),cm.addEvent(i.container,"click",function(e){e=cm.getEventTarget(e);cm.isParent(i.tags,e,!0)||i.input.focus()}),s.embedStructure(i.container)}function r(e){var t={tag:e};t.container=cm.node("div",{class:"item"},cm.node("div",{class:"inner"},cm.node("div",{class:"text",title:e},e),t.button=cm.node("div",{class:s.params.icons.remove,title:s.lang("remove")}))),t.anim=new cm.Animation(t.container),cm.appendChild(t.container,i.tags),cm.addEvent(t.button,"click",function(){p(t)}),d[e]=t}function o(){s.value=c.join(","),i.hidden.value=s.value}var s=this,i={},c=[],d={},l=(s.isDestructed=null,s.value=null,s.components={},s.isAutocomplete=!1,function(){i.input=cm.node("input",{type:"text",maxlength:s.params.maxSingleTagLength,class:"adder",placeholder:s.lang("placeholder")}),cm.appendChild(i.input,i.inner),s.isAutocomplete&&(cm.getConstructor("Com.Autocomplete",function(e){s.components.autocomplete=new e(cm.merge(s.params["Com.Autocomplete"],{events:{onClickSelect:function(){m(!0)}}}))}),s.components.autocomplete.setTarget(i.input),s.components.autocomplete.setInput(i.input)),cm.addEvent(i.input,"keypress",function(e){44!==e.charCode&&59!==e.charCode||(cm.preventDefault(e),m(!0),s.isAutocomplete&&s.components.autocomplete.hide())}),cm.addEvent(i.input,"keydown",function(e){cm.inArray(["Enter","Escape"],e.code)&&(cm.preventDefault(e),m(!0),s.isAutocomplete)&&s.components.autocomplete.hide()}),cm.addEvent(i.input,"focus",function(){cm.addClass(i.container,"active"),cm.addClass(i.inner,"input-focus")}),cm.addEvent(i.input,"blur",function(){m(!0),cm.removeClass(i.container,"active"),cm.removeClass(i.inner,"input-focus")})}),m=function(t){var e=i.input.value.split(",");cm.forEach(e,function(e){u(e,t)}),i.input.value="",s.isAutocomplete&&s.components.autocomplete.clear()},u=function(e,t){(e=e.trim())&&e.length&&!/^[\s]*$/.test(e)&&!cm.inArray(c,e)&&(c.push(e),r(e),o(),t)&&(s.triggerEvent("onChange",{tag:e}),s.triggerEvent("onAdd",{tag:e}))},p=function(e){c=cm.arrayRemove(c,e.tag),delete d[e.tag],o(),s.triggerEvent("onChange",{tag:e.tag}),s.triggerEvent("onRemove",{tag:e.tag}),cm.remove(e.container)};s.destruct=function(){return this.isDestructed||(this.isDestructed=!0,this.removeFromStack()),this},s.get=function(){return cm.isEmpty(s.value)?"":s.value},s.set=function(e){return s.add(e),s},s.add=function(e){e=e?cm.isArray(e)?e:e.split(","):[];return cm.forEach(e,function(e){u(e,!0)}),s},s.remove=function(e){e=e?cm.isArray(e)?e:e.split(","):[];return cm.forEach(e,function(e){cm.inArray(c,e)&&p(d[e])}),s},s.reset=function(){return cm.forEach(d,function(e){p(e,!0)}),s.triggerEvent("onReset"),s},s.getAutocomplete=function(){return s.components.autocomplete},t(),s.setParams(e),s.convertEvents(s.params.events),s.getDataConfig(s.params.node),n(),a(),s.addToStack(i.container),s.triggerEvent("onRender"),e=s.params.node.value.split(","),e=cm.extend(s.params.data,e),cm.forEach(e,function(e){u(e)})}),Com.FormFields.add("tags",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.TagsInput"}),cm.define("Com.TimeSelect",{modules:["Params","Events","Langs","Structure","DataConfig","Stack"],events:["onRender","onSelect","onChange","onClear"],params:{input:null,node:cm.node("input",{type:"text"}),container:null,embedStructure:"replace",name:"",renderSelectsInBody:!0,size:"default",format:"cm._config.timeFormat",showTitleTag:!0,title:!1,withHours:!0,hoursInterval:0,hoursFormat:24,withMinutes:!0,minutesInterval:0,withSeconds:!1,secondsInterval:0,selected:0},strings:{separator:":",Hours:"HH",Minutes:"MM",Seconds:"SS",HoursTitle:"Hours",MinutesTitle:"Minutes",SecondsTitle:"Seconds"}},function(e){var a=this,n={},r={},t=(a.date=new Date,a.value=0,a.previousValue=0,a.disabled=!1,function(){cm.isNode(a.params.input)&&(a.params.node=a.params.input)}),o=function(){cm.isNode(a.params.node)&&(a.params.title=a.params.node.getAttribute("title")||a.params.title,a.params.name=a.params.node.getAttribute("name")||a.params.name),!cm.isEmpty(a.params.hoursInterval)&&0!==a.params.hoursInterval||(a.params.hoursInterval=1),!cm.isEmpty(a.params.minutesInterval)&&0!==a.params.minutesInterval||(a.params.minutesInterval=1),!cm.isEmpty(a.params.secondsInterval)&&0!==a.params.secondsInterval||(a.params.secondsInterval=1)},s=function(){n.container=cm.node("div",{class:"com__timeselect"},n.hidden=cm.node("input",{type:"hidden"}),n.inner=cm.node("div",{class:"inner"})),cm.isEmpty(a.params.size)||cm.addClass(n.container,["size",a.params.size].join("-")),a.params.withHours&&i(),a.params.withMinutes&&c(),a.params.withSeconds&&d(),a.params.showTitleTag&&a.params.title&&(n.container.title=a.params.title),a.params.name&&n.hidden.setAttribute("name",a.params.name),a.embedStructure(n.container)},i=function(){var e,t=0;for(n.inner.childNodes.length&&n.inner.appendChild(cm.node("div",{class:"sep"},a.lang("separator"))),n.inner.appendChild(cm.node("div",{class:"field"},n.selectHours=cm.node("select",{placeholder:a.lang("Hours"),title:a.lang("HoursTitle")})));t<24;)e=24===a.params.hoursFormat?cm.addLeadZero(t):[t%12||12,t<12?"am":"pm"].join(""),n.selectHours.appendChild(cm.node("option",{value:t},e)),t+=a.params.hoursInterval},c=function(){var e=0;for(n.inner.childNodes.length&&n.inner.appendChild(cm.node("div",{class:"sep"},a.lang("separator"))),n.inner.appendChild(cm.node("div",{class:"field"},n.selectMinutes=cm.node("select",{placeholder:a.lang("Minutes"),title:a.lang("MinutesTitle")})));e<60;)n.selectMinutes.appendChild(cm.node("option",{value:e},cm.addLeadZero(e))),e+=a.params.minutesInterval},d=function(){var e=0;for(n.inner.childNodes.length&&n.inner.appendChild(cm.node("div",{class:"sep"},a.lang("separator"))),n.inner.appendChild(cm.node("div",{class:"field"},n.selectSeconds=cm.node("select",{placeholder:a.lang("Seconds"),title:a.lang("SecondsTitle")})));e<60;)n.selectSeconds.appendChild(cm.node("option",{value:e},cm.addLeadZero(e))),e+=a.params.secondsInterval},l=function(){a.params.withHours&&(r.selectHours=new Com.Select({select:n.selectHours,renderInBody:a.params.renderSelectsInBody}).addEvent("onChange",function(){m(!0)})),a.params.withMinutes&&(r.selectMinutes=new Com.Select({select:n.selectMinutes,renderInBody:a.params.renderSelectsInBody}).addEvent("onChange",function(){m(!0)})),a.params.withSeconds&&(r.selectSeconds=new Com.Select({select:n.selectSeconds,renderInBody:a.params.renderSelectsInBody}).addEvent("onChange",function(){m(!0)})),a.triggerEvent("onRender")},m=function(e){a.previousValue=a.value,a.params.withHours&&a.date.setHours(r.selectHours.get()),a.params.withMinutes&&a.date.setMinutes(r.selectMinutes.get()),a.params.withSeconds&&a.date.setSeconds(r.selectSeconds.get()),a.value=cm.dateFormat(a.date,a.params.format),n.hidden.value=a.value,e&&(a.triggerEvent("onSelect",a.value),u())},u=function(){a.previousValue&&(a.value||!a.previousValue)&&a.value==a.previousValue||a.triggerEvent("onChange",a.value)};a.set=function(e,t,n){return t=cm.isUndefined(t)?a.params.format:t,n=!!cm.isUndefined(n)||n,cm.isEmpty(e)||"string"==typeof e&&new RegExp(cm.dateFormat(!1,a.params.format)).test(e)?a.clear():("object"==_typeof2(e)?a.date=e:a.date=cm.parseDate(e,t),a.params.withHours&&r.selectHours.set(a.date.getHours(),!1),a.params.withMinutes&&r.selectMinutes.set(a.date.getMinutes(),!1),a.params.withSeconds&&r.selectSeconds.set(a.date.getSeconds(),!1),m(n)),a},a.get=function(){return a.value},a.getDate=function(){return a.date},a.getHours=function(){return a.date.getHours()},a.getMinutes=function(){return a.date.getMinutes()},a.getSeconds=function(){return a.date.getSeconds()},a.clear=function(e){return e=void 0===e||e,a.date.setHours(0),a.date.setMinutes(0),a.date.setSeconds(0),a.params.withHours&&r.selectHours.set(a.date.getHours(),!1),a.params.withMinutes&&r.selectMinutes.set(a.date.getMinutes(),!1),a.params.withSeconds&&r.selectSeconds.set(a.date.getSeconds(),!1),m(!1),e&&(a.triggerEvent("onClear",a.value),u()),a},a.disable=function(){return a.disabled=!0,a.params.withHours&&r.selectHours.disable(),a.params.withMinutes&&r.selectMinutes.disable(),a.params.withSeconds&&r.selectSeconds.disable(),a},a.enable=function(){return a.disabled=!1,a.params.withHours&&r.selectHours.enable(),a.params.withMinutes&&r.selectMinutes.enable(),a.params.withSeconds&&r.selectSeconds.enable(),a},a.setParams(e),t(),a.convertEvents(a.params.events),a.getDataConfig(a.params.node),o(),s(),l(),a.addToStack(n.container),a.params.selected?a.set(a.params.selected,a.params.format,!1):a.set(a.params.node.value,a.params.format,!1)}),cm.define("Com.TintRange",{extend:"Com.AbstractRange",params:{className:"com__range",theme:"theme--arrows",min:360,max:0,value:360}},function(e){Com.AbstractRange.apply(this,arguments)}),cm.getConstructor("Com.TintRange",function(e,t,n){n.renderRangeContent=function(){var e={};return(this.nodes.rangeContent=e).container=cm.node("div",{class:"com__tint-range__content"}),e.container}}),Com.FormFields.add("tint-range",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.TintRange"}),cm.define("Com.TwoSideMultiSelect",{extend:"Com.AbstractInput",params:{controllerEvents:!0,className:"com__two-side-multi-select",setHiddenInput:!0,defaultValue:[],options:[],showLabels:!1,selectConstructor:"Com.Select",selectParams:{node:cm.node("select",{multiple:!0}),multiple:!0,className:"is-max"}},strings:{firstLabel:"Left:",secondLabel:"Right:",add:">>",remove:"<<",addTitle:"Add",removeTitle:"Remove"}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.TwoSideMultiSelect",function(e,t,n){var a=n._inherit;n.onConstructStart=function(){var e=this;e.value=[],e.options={},e.keyPressHandler=e.keyPressHelper.bind(e),e.moveToLeftHandler=e.moveToLeft.bind(e),e.moveToRightHandler=e.moveToRight.bind(e)},n.validateParamsValue=function(){var e;cm.isNode(this.params.node)&&(e=cm.getSelectValue(this.params.node),this.params.value=cm.isEmpty(e)?this.params.value:e),this.params.value=cm.isEmpty(this.params.value)?this.params.defaultValue:this.params.value},n.onSetEvents=function(){cm.addEvent(window,"keypress",this.keyPressHandler)},n.onUnsetEvents=function(){cm.removeEvent(window,"keypress",this.keyPressHandler)},n.renderHiddenContent=function(){var e={};return(this.nodes.hiddenContent=e).container=e.input=cm.node("select",{class:"display-none",multiple:!0}),e.container},n.renderContent=function(){var e=this,t={};return e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"com__two-side__content"},t.inner=cm.node("div",{class:"inner"},t.firstColumn=cm.node("div",{class:"column column--first"}),t.controls=cm.node("div",{class:"controls"},t.moveToRight=cm.node("button",{class:"button button-primary is-box",type:"button",title:e.lang("addTitle")},e.lang("add")),t.moveToLeft=cm.node("button",{class:"button button-primary is-box",type:"button",title:e.lang("removeTitle")},e.lang("remove"))),t.secondColumn=cm.node("div",{class:"column column--second"}))),e.params.showLabels&&(cm.appendChild(cm.node("div",{class:"label"},e.lang("firstLabel")),t.firstColumn),cm.appendChild(cm.node("div",{class:"label"},e.lang("secondLabel")),t.secondColumn),cm.addClass(t.container,"has-labels")),e.triggerEvent("onRenderContentProcess"),cm.addEvent(t.moveToRight,"click",e.moveToRightHandler),cm.addEvent(t.moveToLeft,"click",e.moveToLeftHandler),e.triggerEvent("onRenderContentEnd"),t.container},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),cm.getConstructor(t.params.selectConstructor,function(e){t.components.firstSelect=new e(cm.merge(t.params.selectParams,{container:t.nodes.content.firstColumn})),t.components.secondSelect=new e(cm.merge(t.params.selectParams,{container:t.nodes.content.secondColumn}))}),t.collectOptions(),cm.forEach(t.params.options,function(e){t.renderOption(e)})},n.collectOptions=function(){var t=this;cm.forEach(t.params.node.options,function(e){t.renderOption({value:e.value,text:e.innerHTML})})},n.renderOption=function(e){(e=cm.merge({value:null,text:null},e)).value=cm.isUndefined(e.value)?e.text:e.value,e.option=cm.node("option",{value:e.value,innerHTML:e.text}),this.nodes.hidden.appendChild(e.option),this.components.firstSelect.addOption(e.value,e.text),this.options[e.value]=e},n.moveToLeft=function(){var e=this.components.secondSelect.get();cm.isEmpty(e)||(this.components.secondSelect.deselectAll(),e=cm.extract(this.value,e),this.set(e,!0))},n.moveToRight=function(){var e=this.components.firstSelect.get();cm.isEmpty(e)||(this.components.firstSelect.deselectAll(),e=cm.extend(this.value,e),this.set(e,!0))},n.moveOptionToLeft=function(e){e.selected&&(e.selected=!1,this.components.secondSelect.removeOption(e.value),this.components.firstSelect.showOption(e.value))},n.moveOptionToRight=function(e){e.selected||(e.selected=!0,this.components.secondSelect.addOption(e.value,e.text),this.components.firstSelect.hideOption(e.value))},n.keyPressHelper=function(e){var t=this,n=cm.getElementAbove(e);cm.handleKey(e,"Enter",function(e){cm.isParent(t.nodes.content.firstColumn,n,!0)&&(cm.preventDefault(e),t.moveToRight()),cm.isParent(t.nodes.content.secondColumn,n,!0)&&(cm.preventDefault(e),t.moveToLeft())})},n.saveHiddenValue=function(t){var n;cm.forEach(this.options,function(e){cm.isEmpty(t)?e.option.selected=!1:(n=cm.isArray(t)&&cm.inArray(t,e.value),n=n||e.value===t,e.option.selected=n)})},n.setData=function(t){var n,a=this;cm.forEach(a.options,function(e){!cm.isEmpty(t)&&(n=cm.isArray(t)&&cm.inArray(t,e.value),n||e.value===t)?a.moveOptionToRight(e):a.moveOptionToLeft(e)})}});