!function(d){var c=/^\s+/,l=/\s+$/,a=0,s=d.round,m=d.min,u=d.max,e=d.random;function p(e,t){if(t=t||{},(e=e||"")instanceof p)return e;if(!(this instanceof p))return new p(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,a=null,o=null,r=null,s=!1,i=!1;"string"==typeof e&&(e=function(e){e=e.replace(c,"").replace(l,"").toLowerCase();var t,n=!1;if(x[e])e=x[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=j.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=j.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=j.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=j.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=j.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=j.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=j.hex8.exec(e))return{r:A(t[1]),g:A(t[2]),b:A(t[3]),a:I(t[4]),format:n?"name":"hex8"};if(t=j.hex6.exec(e))return{r:A(t[1]),g:A(t[2]),b:A(t[3]),format:n?"name":"hex"};if(t=j.hex4.exec(e))return{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),a:I(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=j.hex3.exec(e))return{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(V(e.r)&&V(e.g)&&V(e.b)?(t=function(e,t,n){return{r:255*R(e,255),g:255*R(t,255),b:255*R(n,255)}}(e.r,e.g,e.b),s=!0,i="%"===String(e.r).substr(-1)?"prgb":"rgb"):V(e.h)&&V(e.s)&&V(e.v)?(a=H(e.s),o=H(e.v),t=function(e,t,n){e=6*R(e,360),t=R(t,100),n=R(n,100);var a=d.floor(e),o=e-a,r=n*(1-t),s=n*(1-o*t),i=n*(1-(1-o)*t),c=a%6;return{r:255*[n,s,r,r,i,n][c],g:255*[i,n,n,s,r,r][c],b:255*[r,r,i,n,n,s][c]}}(e.h,a,o),s=!0,i="hsv"):V(e.h)&&V(e.s)&&V(e.l)&&(a=H(e.s),r=H(e.l),t=function(e,t,n){var a,o,r;function s(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}{var i,c;e=R(e,360),t=R(t,100),n=R(n,100),0===t?a=o=r=n:(a=s(c=2*n-(i=n<.5?n*(1+t):n+t-n*t),i,e+1/3),o=s(c,i,e),r=s(c,i,e-1/3))}return{r:255*a,g:255*o,b:255*r}}(e.h,a,r),s=!0,i="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=P(n),{ok:s,format:e.format||i,r:m(255,u(t.r,0)),g:m(255,u(t.g,0)),b:m(255,u(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=s(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=s(this._r)),this._g<1&&(this._g=s(this._g)),this._b<1&&(this._b=s(this._b)),this._ok=n.ok,this._tc_id=a++}function o(e,t,n){e=R(e,255),t=R(t,255),n=R(n,255);var a,o=u(e,t,n),r=m(e,t,n),s=(o+r)/2;if(o==r)a=c=0;else{var i=o-r,c=.5<s?i/(2-o-r):i/(o+r);switch(o){case e:a=(t-n)/i+(t<n?6:0);break;case t:a=(n-e)/i+2;break;case n:a=(e-t)/i+4}a/=6}return{h:a,s:c,l:s}}function r(e,t,n){e=R(e,255),t=R(t,255),n=R(n,255);var a,o=u(e,t,n),r=m(e,t,n),s=o,i=o-r,c=0===o?0:i/o;if(o==r)a=0;else{switch(o){case e:a=(t-n)/i+(t<n?6:0);break;case t:a=(n-e)/i+2;break;case n:a=(e-t)/i+4}a/=6}return{h:a,s:c,v:s}}function t(e,t,n,a){var o=[D(s(e).toString(16)),D(s(t).toString(16)),D(s(n).toString(16))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function i(e,t,n,a){return[D(F(a)),D(s(e).toString(16)),D(s(t).toString(16)),D(s(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.s-=t/100,n.s=N(n.s),p(n)}function h(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.s+=t/100,n.s=N(n.s),p(n)}function g(e){return p(e).desaturate(100)}function f(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.l+=t/100,n.l=N(n.l),p(n)}function v(e,t){t=0===t?0:t||10;var n=p(e).toRgb();return n.r=u(0,m(255,n.r-s(-t/100*255))),n.g=u(0,m(255,n.g-s(-t/100*255))),n.b=u(0,m(255,n.b-s(-t/100*255))),p(n)}function b(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.l-=t/100,n.l=N(n.l),p(n)}function C(e,t){var n=p(e).toHsl(),a=(n.h+t)%360;return n.h=a<0?360+a:a,p(n)}function y(e){var t=p(e).toHsl();return t.h=(t.h+180)%360,p(t)}function E(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+120)%360,s:t.s,l:t.l}),p({h:(n+240)%360,s:t.s,l:t.l})]}function w(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+90)%360,s:t.s,l:t.l}),p({h:(n+180)%360,s:t.s,l:t.l}),p({h:(n+270)%360,s:t.s,l:t.l})]}function S(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+72)%360,s:t.s,l:t.l}),p({h:(n+216)%360,s:t.s,l:t.l})]}function k(e,t,n){t=t||6,n=n||30;var a=p(e).toHsl(),o=360/n,r=[p(e)];for(a.h=(a.h-(o*t>>1)+720)%360;--t;)a.h=(a.h+o)%360,r.push(p(a));return r}function _(e,t){t=t||6;for(var n=p(e).toHsv(),a=n.h,o=n.s,r=n.v,s=[],i=1/t;t--;)s.push(p({h:a,s:o,v:r})),r=(r+i)%1;return s}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,a=e.b/255,o=t<=.03928?t/12.92:d.pow((.055+t)/1.055,2.4),r=n<=.03928?n/12.92:d.pow((.055+n)/1.055,2.4),s=a<=.03928?a/12.92:d.pow((.055+a)/1.055,2.4);return.2126*o+.7152*r+.0722*s},setAlpha:function(e){return this._a=P(e),this._roundA=s(100*this._a)/100,this},toHsv:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=r(this._r,this._g,this._b),t=s(360*e.h),n=s(100*e.s),a=s(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+a+"%)":"hsva("+t+", "+n+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=s(360*e.h),n=s(100*e.s),a=s(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+a+"%)":"hsla("+t+", "+n+"%, "+a+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,a,o){var r=[D(s(e).toString(16)),D(s(t).toString(16)),D(s(n).toString(16)),D(F(a))];if(o&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:s(this._r),g:s(this._g),b:s(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+s(this._r)+", "+s(this._g)+", "+s(this._b)+")":"rgba("+s(this._r)+", "+s(this._g)+", "+s(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:s(100*R(this._r,255))+"%",g:s(100*R(this._g,255))+"%",b:s(100*R(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+s(100*R(this._r,255))+"%, "+s(100*R(this._g,255))+"%, "+s(100*R(this._b,255))+"%)":"rgba("+s(100*R(this._r,255))+"%, "+s(100*R(this._g,255))+"%, "+s(100*R(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&T[t(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t,n="#"+i(this._r,this._g,this._b,this._a),a=n,o=this._gradientType?"GradientType = 1, ":"";return e&&(a="#"+i((t=p(e))._r,t._g,t._b,t._a)),"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+n+",endColorstr="+a+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,a=this._a<1&&0<=this._a;return t||!a||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return p(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(f,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(h,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(_,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},p.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]="a"===a?e[a]:H(e[a]));e=n}return p(e,t)},p.equals=function(e,t){return!(!e||!t)&&p(e).toRgbString()==p(t).toRgbString()},p.random=function(){return p.fromRatio({r:e(),g:e(),b:e()})},p.mix=function(e,t,n){n=0===n?0:n||50;var a=p(e).toRgb(),o=p(t).toRgb(),r=n/100;return p({r:(o.r-a.r)*r+a.r,g:(o.g-a.g)*r+a.g,b:(o.b-a.b)*r+a.b,a:(o.a-a.a)*r+a.a})},p.readability=function(e,t){var n=p(e),a=p(t);return(d.max(n.getLuminance(),a.getLuminance())+.05)/(d.min(n.getLuminance(),a.getLuminance())+.05)},p.isReadable=function(e,t,n){var a=p.readability(e,t),o=!1,r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n);switch(r.level+r.size){case"AAsmall":case"AAAlarge":o=4.5<=a;break;case"AAlarge":o=3<=a;break;case"AAAsmall":o=7<=a}return o},p.mostReadable=function(e,t,n){for(var a,o=null,r=0,s=(n=n||{}).includeFallbackColors,i=n.level,c=n.size,d=0;d<t.length;d++)r<(a=p.readability(e,t[d]))&&(r=a,o=p(t[d]));return p.isReadable(e,o,{level:i,size:c})||!s?o:(n.includeFallbackColors=!1,p.mostReadable(e,["#fff","#000"],n))};var x=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=p.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(x);function P(e){return e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=1),e}function R(e,t){var n;"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var a,o="string"==typeof(a=e)&&-1!=a.indexOf("%");return e=m(t,u(0,parseFloat(e))),o&&(e=parseInt(e*t,10)/100),d.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function N(e){return m(1,u(0,e))}function A(e){return parseInt(e,16)}function D(e){return 1==e.length?"0"+e:""+e}function H(e){return e<=1&&(e=100*e+"%"),e}function F(e){return d.round(255*parseFloat(e)).toString(16)}function I(e){return A(e)/255}var O,L,M,j=(L="[\\s|\\(]+("+(O="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+O+")[,|\\s]+("+O+")\\s*\\)?",M="[\\s|\\(]+("+O+")[,|\\s]+("+O+")[,|\\s]+("+O+")[,|\\s]+("+O+")\\s*\\)?",{CSS_UNIT:new RegExp(O),rgb:new RegExp("rgb"+L),rgba:new RegExp("rgba"+M),hsl:new RegExp("hsl"+L),hsla:new RegExp("hsla"+M),hsv:new RegExp("hsv"+L),hsva:new RegExp("hsva"+M),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function V(e){return j.CSS_UNIT.exec(e)}"undefined"!=typeof module&&module.exports?module.exports=p:"function"==typeof define&&define.amd?define(function(){return p}):window.tinycolor=p}(Math),window.URL=window.URL||window.webkitURL,Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=0,a=this.length;n<a;++n)e.call(t||this,this[n],n,this)}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var a,o=[],r=arguments[1],s=0;s<n;s++){s in t&&(a=t[s],e.call(r,a,s,t)&&o.push(a))}return o}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,a,o;if(null==this)throw new TypeError(" this is null or not defined");var r,s,i=Object(this),c=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(n=t),a=new Array(c),o=0;o<c;){o in i&&(r=i[o],s=e.call(n,r,o,i),a[o]=s),o++}return a}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0==n)return-1;var a=0;if(1<arguments.length&&((a=Number(arguments[1]))!=a?a=0:0!=a&&a!=1/0&&a!=-1/0&&(a=(0<a||-1)*Math.floor(Math.abs(a)))),n<=a)return-1;for(var o=0<=a?a:Math.max(n-Math.abs(a),0);o<n;o++)if(o in t&&t[o]===e)return o;return-1}),Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),a=n.length>>>0,o=arguments[1],r=0;r<a;r++)if(t=n[r],e.call(o,t,r,n))return t}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),a=n.length>>>0,o=0;if(2<=arguments.length)t=arguments[1];else{for(;o<a&&!o in n;)o++;if(a<=o)throw new TypeError("Reduce of empty array with no initial value");t=n[o++]}for(;o<a;o++)o in n&&(t=e(t,n[o],o,n));return t}),"function"!=typeof Array.prototype.reduceRight&&(Array.prototype.reduceRight=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),a=(n.length>>>0)-1;if(2<=arguments.length)t=arguments[1];else{for(;0<=a&&!a in n;)a--;if(a<0)throw new TypeError("Reduce of empty array with no initial value");t=n[a--]}for(;0<=a;a--)a in n&&(t=e(t,n[a],a,n));return t}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0==a)return!1;var o,r,s=0|t,i=Math.max(0<=s?s:a-Math.abs(s),0);for(;i<a;){if((o=n[i])===(r=e)||"number"==typeof o&&"number"==typeof r&&isNaN(o)&&isNaN(r))return!0;i++}return!1}}),Array.from||(Array.from=function(){function l(e){return"function"==typeof e||"[object Function]"===t.call(e)}function m(e){var t,n=(t=Number(e),isNaN(t)?0:0!==t&&isFinite(t)?(0<t?1:-1)*Math.floor(Math.abs(t)):t);return Math.min(Math.max(n,0),a)}var t=Object.prototype.toString,a=Math.pow(2,53)-1;return function(e,t,n){var a=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,r=1<arguments.length?t:void 0;if(void 0!==r){if(!l(r))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(o=n)}for(var s,i=m(a.length),c=l(this)?Object(new this(i)):new Array(i),d=0;d<i;)s=a[d],c[d]=r?void 0===o?r(s,d):r.call(o,s,d):s,d+=1;return c.length=i,c}}()),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){}function n(){return o.apply(this instanceof t&&e?this:e,a.concat(Array.prototype.slice.call(arguments)))}var a=Array.prototype.slice.call(arguments,1),o=this;return t.prototype=this.prototype,n.prototype=new t,n}),String.prototype.repeat||(String.prototype.repeat=function(e){"use strict";if(null==this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if((e=+e)!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0==t.length||0==e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="";1==(1&e)&&(n+=t),0!=(e>>>=1);)t+=t;return n}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Date.now||(Date.now=function(){return(new Date).getTime()}),function(){"undefined"==typeof JSON&&(window.JSON={}),JSON.parse&&JSON.stringify||(JSON.parse=function(str){return eval("("+str+")")},JSON.stringify=function(){throw new Error("JSON.stringify is not supported by this browser.")})}();var cm={_version:"3.38.32",_loadTime:Date.now(),_isDocumentReady:!1,_isDocumentLoad:!1,_debug:!0,_debugAlert:!1,_deviceType:"desktop",_deviceOrientation:"landscape",_adaptive:!1,_baseUrl:[window.location.protocol,window.location.hostname].join("//"),_pathUrl:"",_assetsUrl:[window.location.protocol,window.location.hostname].join("//"),_scrollSize:0,_pageSize:{},_clientPosition:{left:0,top:0},_config:{redrawOnLoad:!0,motionAsymmetric:"cubic-bezier(.5,0,.15,1)",motionSmooth:"ease-in-out",animDuration:250,animDurationShort:150,animDurationLong:500,loadDelay:500,hideDelay:250,hideDelayShort:150,hideDelayLong:500,autoHideDelay:2e3,requestDelay:300,adaptiveFrom:768,screenTablet:1024,screenTabletPortrait:768,screenMobile:640,screenMobilePortrait:480,dateFormat:"%Y-%m-%d",dateTimeFormat:"%Y-%m-%d %H:%i:%s",dateFormatCase:"nominative",timeFormat:"%H:%i:%s",displayDateFormat:"%F %j, %Y",displayDateTimeFormat:"%F %j, %Y, %H:%i",displayDateFormatCase:"nominative",tooltipIndent:4,tooltipTop:"targetHeight + 4",tooltipDown:"targetHeight + 4",tooltipUp:"- (selfHeight + 4)"},_variables:{"%baseUrl%":"cm._baseUrl","%assetsUrl%":"cm._assetsUrl","%pathUrl%":"cm._pathUrl","%version%":"cm._version"},_strings:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},Mod={},Part={},Com={Elements:{}};cm.isFileReader="FileReader"in window,cm.isHistoryAPI=!(!window.history||!history.pushState),cm.isLocalStorage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),cm.isSessionStorage=function(){try{return"sessionStorage"in window&&null!==window.sessionStorage}catch(e){return!1}}(),cm.isCanvas=!!document.createElement("canvas").getContext,cm.hasBeacon=!!navigator.sendBeacon,cm.hasPointerEvent=!!window.PointerEvent,cm._getVariables=function(){var n={};return cm.forEach(cm._variables,function(e,t){n[t]=cm.reducePath(e,window)}),n},cm.top=function(){try{return window.top.cm}catch(e){return window.cm}}(),cm.isType=function(t,e){if(cm.isString(e))return Object.prototype.toString.call(t)==="[object "+e+"]";if(cm.isRegExp(e))return e.test(Object.prototype.toString.call(t));if(cm.isObject(e)){var n=!1;return cm.forEach(e,function(e){n=n||Object.prototype.toString.call(t)==="[object "+e+"]"}),n}return!1},cm.isBoolean=function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},cm.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},cm.isNumber=function(e){return"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)},cm.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},cm.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},cm.isArguments=function(e){return"[object Arguments]"===Object.prototype.toString.call(e)},cm.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},cm.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},cm.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},cm.isFile=function(e){return"[object File]"===Object.prototype.toString.call(e)},cm.isWindow=function(e){return"[object Window]"===Object.prototype.toString.call(e)||"[object global]"===Object.prototype.toString.call(e)},cm.isNode=function(e){try{return!(!e||!e.nodeType)}catch(e){}return!1},cm.isTextNode=function(e){try{return!(!e||!e.nodeType||3!==e.nodeType)}catch(e){}return!1},cm.isElementNode=function(e){try{return!(!e||!e.nodeType||1!==e.nodeType)}catch(e){}return!1},cm.isTagName=function(e,t){return cm.isElementNode(e)&&e.tagName.toLowerCase()===t.toLowerCase()},cm.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;if("function"!=typeof Object.getPrototypeOf)return"[object Object]"===Object.prototype.toString.call(e);var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t},cm.forEach=function(t,n){if(!t||!n||"function"!=typeof n)return t;var a,o;if(cm.isObject(t)){for(var e in t)t.hasOwnProperty(e)&&n(t[e],e,t);return t}if(cm.isArray(t))return t.forEach(n),t;if(cm.isNumber(t)){for(a=0;a<t;a++)n(a);return t}try{Array.prototype.forEach.call(t,n)}catch(e){try{for(a=0,o=t.length;a<o;a++)n(t[a],a,t)}catch(e){}}return t},cm.forEachReverse=function(e,t){return e?(t&&(e.reverse(),cm.forEach(e,t),e.reverse()),e):null},cm.merge=function(e,t){var a;return t=t||(cm.isArray(e)?[]:{}),e=e||(cm.isArray(t)?[]:{}),cm.isObject(e)?(a=cm.clone(e),cm.forEach(t,function(t,n){try{void 0===t||t._isComponent?a[n]=t:cm.isObject(t)?cm.isObject(a[n])?a[n]=cm.merge(a[n],t):a[n]=cm.clone(t):cm.isArray(t)?a[n]=cm.clone(t):a[n]=t}catch(e){a[n]=t}})):cm.isArray(e)&&(a=cm.clone(e),cm.forEach(t,function(e){cm.inArray(a,e)||a.push(e)})),a},cm.extend=function(e,t,n){return e?t?cm.isArray(e)?a=e.concat(t):cm.isObject(e)?(a=cm.clone(e),cm.forEach(t,function(e,t){a[t]=n?cm.extend(a[t],e):e}),a):t:e:t;var a},cm.extract=function(e,t){return e?t?(cm.isArray(e)&&(n=e.filter(function(e){return!cm.inArray(t,e)})),n):e:t;var n},cm.clone=function(e,n,a){var o;return e?(n=!cm.isUndefined(n)&&n,a=!!cm.isUndefined(a)||a,cm.isType(e,"Arguments")?[].slice.call(e):cm.isType(e,/Array|StyleSheetList|CSSRuleList|HTMLCollection|NodeList|DOMTokenList|FileList/)?a?(o=[],cm.forEach(e,function(e){o.push(cm.clone(e,n))}),o):[].slice.call(e):cm.isObject(e)&&!e._isComponent?(o={},cm.forEach(e,function(e,t){o[t]=a?cm.clone(e,n):e}),o):cm.isDate(e)?((o=new Date).setTime(e.getTime()),o):cm.isNode(e)?o=n?e.cloneNode(!0):e:e):e},cm.getLength=function(e){if(cm.isArray(e))return e.length;var t=0;return cm.forEach(e,function(){t++}),t},cm.getCount=function(e){var t=0;return cm.forEach(e,function(e){cm.isUndefined(e)||t++}),t},cm.arrayIndex=function(e,t){return Array.prototype.indexOf.call(e,t)},cm.inArray=function(e,t){return cm.isString(e)?e===t:!!cm.isArray(e)&&-1<e.indexOf(t)},cm.arrayRemove=function(e,t){var n=cm.arrayIndex(e,t);return-1<n&&e.splice(n,1),e},cm.arrayAdd=function(e,t){return cm.inArray(e,t)||e.push(t),e},cm.arraySort=function(e,n,t,a){var o;if(!cm.isArray(e))return e;switch(t=cm.isUndefined(t)?"asc":t.toLowerCase(),t=cm.inArray(["asc","desc"],t)?t:"asc",o=(a=!!cm.isUndefined(a)||a)?cm.clone(e):e,t){case"asc":o.sort(function(e,t){return n?e[n]<t[n]?1:e[n]>t[n]?-1:0:e<t?1:t<e?-1:0});break;case"desc":o.sort(function(e,t){return n?e[n]<t[n]?-1:e[n]>t[n]?1:0:e<t?-1:t<e?1:0})}return o},cm.arrayParseFloat=function(e){return e.map(Number.parseFloat)},cm.objectToArray=function(e){if(!cm.isObject(e))return[e];var t=[];return cm.forEach(e,function(e){cm.isEmpty(e)||t.push(e)}),t},cm.arrayToObject=function(e){var n={};return e.forEach(function(e,t){"object"==typeof e?n[t]=e:n[e]=e}),n},cm.objectReplace=function(e,n){var a=cm.clone(e);return cm.forEach(a,function(e,t){cm.isObject(e)?a[t]=cm.objectReplace(e,n):cm.isString(e)&&(a[t]=cm.strReplace(e,n))}),a},cm.getDiffCompare=function(e,t){var n={};return cm.diffCompare(n,e,t,"key"),n.key},cm.isEmpty=function(e){return!!cm.isUndefined(e)||(cm.isBoolean(e)?!1===e:cm.isString(e)||cm.isArray(e)?0===e.length:!!cm.isObject(e)&&0===cm.getLength(e))},cm.isUndefined=function(e){return void 0===e||null==e},cm.objectFormPath=function(e,n){var t={},a=t,o=e.toString().split("."),r=o.length;return o.map(function(e,t){n&&r===t+1?a[e]=n:a=a[e]={}}),t},cm.objectPath=function(e,t){if(cm.isUndefined(t)||cm.isUndefined(e))return t;e=e.toString().split(".");var n=t;return cm.forEach(e,function(e){n=n&&n[e]}),n},cm.objectSelector=function(e,t,n){if(cm.isUndefined(t)||cm.isUndefined(e))return t;e=e.toString().split(".");var a=t,o=e.length;return cm.forEach(e,function(e,t){a[e]||(a[e]={}),n&&t===o-1&&(a[e]=n),a=a[e]}),a},cm.reducePath=function(e,t){return cm.isUndefined(t)||cm.isUndefined(e)?t:(e=e.toString().split(".")).reduce(function(e,t){return cm.isUndefined(e)?void 0:e[t]},t)},cm.sort=function(t,e){var n=cm.arraySort(Object.keys(t),null,e),a={};return cm.forEach(n,function(e){a[e]=t[e]}),a},cm.replaceDeep=function(e,n,a){var o=cm.clone(e);return cm.forEach(o,function(e,t){o[t]="object"==typeof e?cm.replaceDeep(e,n,a):e.replace(n,a)}),o},cm.log=function(){var e,t=[];return cm._debug&&Function.prototype.bind&&window.console?(e=Function.prototype.bind.call(console.log,console),function(){e.apply(console,arguments)}):cm._debug&&cm._debugAlert?function(){cm.forEach(arguments,function(e){t.push(e)}),alert(t.join(", "))}:function(){}}(),cm.errorLog=function(e){var t=cm.merge({type:"error",name:"",message:"",langs:{error:"Error!",success:"Success!",attention:"Attention!",common:"Common"}},e),n=[t.langs[t.type],t.name,t.message];cm.log(n.join(" > "))},cm.getEvent=function(e){return e||window.event},cm.stopPropagation=function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},cm.preventDefault=function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1},cm.getObjFromEvent=cm.getEventObject=cm.getEventTarget=function(e){return e.target||e.srcElement},cm.getObjToEvent=cm.getRelatedTarget=function(e){return e.relatedTarget||e.srcElement},cm.getEventClientPosition=function(e){var t={left:0,top:0};if(e)try{t.left=e.clientX,t.top=e.clientY,e.touches&&e.touches.length?(t.left=e.touches[0].clientX,t.top=e.touches[0].clientY):e.changedTouches&&e.changedTouches.length&&(t.left=e.changedTouches[0].clientX,t.top=e.changedTouches[0].clientY)}catch(e){}return t},cm.getElementAbove=function(e){var t=e.clientX||cm._clientPosition.left,n=e.clientY||cm._clientPosition.top;return document.elementFromPoint(t,n)},cm.onSchedule=function(e){animFrame(function(){animFrame(function(){e()})})},cm.addEvent=function(e,t,n,a){return e&&(a=!cm.isUndefined(a)&&a,e.addEventListener(t,n,a)),e},cm.removeEvent=function(e,t,n,a){return e&&(a=!cm.isUndefined(a)&&a,e.removeEventListener(t,n,a)),e},cm.triggerEvent=function(e,t){var n;return document.createEvent?(n=document.createEvent("Event")).initEvent(t,!0,!0):document.createEventObject&&((n=document.createEventObject()).eventType=t),n.eventName=t,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent&&e.fireEvent("on"+n.eventType,n),e},cm.customEvent=function(){var o={};return{add:function(e,t,n){return o[t]||(o[t]=[]),o[t].push({node:e,type:t,handler:cm.isFunction(n)?n:function(){}}),e},remove:function(t,e,n){return o[e]||(o[e]=[]),o[e]=o[e].filter(function(e){return e.node!==t&&e.handler!==n}),t},trigger:function(t,e,n){if(!t)return null;var a=!1;return n=cm.merge({target:t,type:e,direction:"all",self:!0,stopPropagation:function(){a=!0}},n),o[e]&&(o[e].sort(function(e,t){return"parent"===n.direction?cm.getNodeOffsetIndex(t.node)>cm.getNodeOffsetIndex(e.node):cm.getNodeOffsetIndex(e.node)-cm.getNodeOffsetIndex(t.node)}),cm.forEach(o[e],function(e){if(!a)switch(n.self&&t===e.node&&e.handler(n),n.direction){case"child":cm.isParent(t,e.node,!1)&&e.handler(n);break;case"parent":cm.isParent(e.node,t,!1)&&e.handler(n);break;default:t!==e.node&&e.handler(n)}})),t}}}(),cm.onLoad=function(e,t){t=!!cm.isUndefined(t)||t;var n=!1;try{cm.addEvent(window,"load",function(){n||(n=!0,t&&cm.errorLog({type:"common",name:"cm.onLoad",message:["Load time",Date.now()-cm._loadTime,"ms."].join(" ")}),e())})}catch(e){}},cm.onReady=function(e,t){t=!!cm.isUndefined(t)||t;function n(){a||(a=!0,t&&cm.errorLog({type:"common",name:"cm.onReady",message:["Ready time",Date.now()-cm._loadTime,"ms."].join(" ")}),e())}var a=!1;cm.addEvent(document,"DOMContentLoaded",n);try{cm.addEvent(window,"load",n)}catch(e){}},cm.addScrollEvent=function(e,t,n){return n=!cm.isUndefined(n)&&n,cm.isWindow(e)?cm.addEvent(e,"scroll",t,n):cm.isNode(e)&&(/body|html/gi.test(e.tagName)?cm.addEvent(cm.getOwnerWindow(e),"scroll",t,n):cm.addEvent(e,"scroll",t,n)),e},cm.removeScrollEvent=function(e,t,n){return n=!cm.isUndefined(n)&&n,cm.isWindow(e)&&cm.removeEvent(e,"scroll",t,n),cm.isNode(e)&&(/body|html/gi.test(e.tagName)?cm.removeEvent(cm.getOwnerWindow(e),"scroll",t,n):cm.removeEvent(e,"scroll",t,n)),e},cm.isolateScrolling=function(e){var t=this;return 0<e.deltaY&&t.clientHeight+t.scrollTop>=t.scrollHeight?(t.scrollTop=t.scrollHeight-t.clientHeight,cm.stopPropagation(e),cm.preventDefault(e),!1):!(e.deltaY<0&&t.scrollTop<=0)||(t.scrollTop=0,cm.stopPropagation(e),cm.preventDefault(e),!1)},cm.addIsolateScrolling=function(e){return cm.addEvent(e,"wheel",cm.isolateScrolling),e},cm.removeIsolateScrolling=function(e){return cm.removeEvent(e,"wheel",cm.isolateScrolling),e},cm.isCenterButton=function(e){return 1===e.button},cm.debounce=function(a,o,r){var s,i;return function(){var e=this,t=arguments,n=r&&!s;return clearTimeout(s),s=setTimeout(function(){s=null,r||(i=a.apply(e,t))},o),n&&(i=a.apply(e,t)),i}},cm.onScrollStart=function(e,t){function n(){a||t(),a=!0,o()}var a=!1,o=cm.debounce(function(){a=!1},300);return cm.addEvent(e,"scroll",n),{remove:function(){cm.removeEvent(e,"scroll",n)}}},cm.onScrollEnd=function(e,t){var n=cm.debounce(t,300);return cm.addEvent(e,"scroll",n),{remove:function(){cm.removeEvent(e,"scroll",n)}}},cm.onImageLoad=function(e,n,a){a=a||0;var o=[],r=cm.isArray(e),t=r?e:[e],s=t.length,i=0,c=Date.now(),d=0;return t.forEach(function(e,t){o[t]=cm.node("img",{alt:""}),o[t].onload=function(){++i===s&&(d=Date.now()-c,(a=d<a?a-d:0)?setTimeout(function(){n(r?o:o[0])},a):n(r?o:o[0]))},o[t].src=e}),r?o:o[0]},cm.fileFromDataTransfer=function(e,t){var n,a,o,r,s=new Image,i=document.createElement("canvas"),c=e.dataTransfer,d=c.getData("text/html");return cm.isEmpty(d)||(d=cm.strToHTML(d),cm.isEmpty(d)||(d=d.querySelector("img"),cm.isEmpty(d)||(n=d.src))),cm.isEmpty(n)&&cm.forEach(["url","text/plain","text/uri-list"],function(e){d=c.getData(e),cm.isEmpty(d)||(n=d)}),s.crossOrigin="anonymous",cm.addEvent(s,"load",function(){i.width=this.naturalWidth,i.height=this.naturalHeight,i.getContext("2d").drawImage(this,0,0),a=i.toDataURL("image/png"),o=cm.dataURItoBlob(a),r=new File([o],n),cm.isFunction(t)&&t(r)}),s.src=n},cm.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),o=new Uint8Array(a),r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return new Blob([a],{type:n})},cm.getOwnerWindow=function(e){return e.ownerDocument.defaultView},cm._addScriptStack={},cm.addScript=function(e,t,n){var a,o=cm._getVariables();return e=cm.isArray(e)?cm.objectReplace(e,o):cm.strReplace(e,o),t=!cm.isUndefined(t)&&t,n=cm.isUndefined(n)?function(){}:n,cm._addScriptStack[e]?(a=cm._addScriptStack[e]).loaded?n():a.callbacks.push(n):(a={src:e,async:t,loaded:!1,callback:function(e){for(a.loaded=!0;a.callbacks.length;)a.callbacks[0](e),cm.arrayRemove(a.callbacks,a.callbacks[0])},callbacks:[n]},(cm._addScriptStack[e]=a).script=document.createElement("script"),a.script.src=a.src,a.script.async=a.async,cm.addEvent(a.script,"load",a.callback),cm.addEvent(a.script,"error",a.callback),cm.appendChild(a.script,cm.getDocumentHead())),a.script},cm.loadScript=function(e){e=cm.merge({path:"",src:"",async:!0,callback:function(){}},e);var t=cm.objectPath(e.path,window);cm.isEmpty(t)?cm.addScript(e.src,e.async,function(){t=cm.objectPath(e.path,window),cm.isEmpty(t)?(cm.errorLog({type:"error",name:"cm.loadScript",message:[e.path,"does not loaded."].join(" ")}),e.callback(null)):e.callback(t)}):e.callback(t)},cm.getEl=function(e){return document.getElementById(e)},cm.getByClass=function(e,t){return(t=t||document).getElementsByClassName(e)},cm.getByAttr=function(e,t,n){return(n||document).querySelectorAll("["+e+'="'+t+'"]')},cm.getByName=function(e,t){return cm.isNode(t)?t.querySelectorAll('[name="'+e+'"]'):document.getElementsByName(e)},cm.getParentByTagName=function(e,t){if(cm.isEmpty(e)||!cm.hasParentNode(t))return null;var n=t.parentNode;do{if(n.tagName&&n.tagName.toLowerCase()===e.toLowerCase())return n}while(n=n.parentNode);return null},cm.getIFrameDOM=function(e){return e.contentDocument||e.document},cm.getDocumentHead=function(){return document.getElementsByTagName("head")[0]},cm.getDocumentHtml=function(){return document.documentElement},cm.getNodeOffsetIndex=function(e){if(!cm.isNode(e))return 0;for(var t=e,n=0;t.parentNode;)t=t.parentNode,n++;return n},cm.node=cm.Node=function(){for(var e=arguments,n=document.createElement(e[0]),t=0,t=cm.isObject(e[1])?(cm.forEach(e[1],function(e,t){switch(cm.isObject(e)&&(e=JSON.stringify(e)),t){case"style":n.style.cssText=e;break;case"class":n.className=e;break;case"innerHTML":n.innerHTML=e;break;default:n.setAttribute(t,e)}}),2):1,a=e.length;t<a;t++)void 0!==e[t]&&("string"==typeof e[t]||"number"==typeof e[t]?cm.appendChild(cm.textNode(e[t]),n):cm.appendChild(e[t],n));return n},cm.textNode=function(e){return document.createTextNode(e)},cm.wrap=function(e,t){return e&&t?(t.parentNode&&cm.insertBefore(e,t),e.appendChild(t),e):null},cm.inDOM=function(e){return e===document.body||document.body.contains(e)},cm.hasParentNode=function(e){return!!cm.isNode(e)&&!!e.parentNode},cm.isParent=function(e,t,n){if(n&&e===t)return!0;if(cm.isNode(t)){if(cm.isWindow(e)&&cm.inDOM(t))return!0;if(e.contains(t)&&e!==t)return!0}return!1},cm.isParentByClass=function(e,t){if(t&&t.parentNode){var n=t.parentNode;do{if(cm.isClass(n,e))return!0}while(n=n.parentNode)}return!1},cm.getData=function(e,t){return e?e.dataset?e.dataset[t]:e.getAttribute(["data",t].join("-")):null},cm.getTextValue=cm.getTxtVal=function(e){return 1===e.nodeType&&e.firstChild?e.firstChild.nodeValue:""},cm.getTextNodesStr=function(e){var t,n="";return e&&(cm.isArray(e)?cm.forEach(e,function(e){n+=cm.getTextNodesStr(e)}):cm.isNode(e)&&(t=e.childNodes,cm.forEach(t,function(e){1===e.nodeType?n+=cm.getTextNodesStr(e):n+=e.nodeValue}))),n},cm.remove=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},cm.clearNode=function(e){if(cm.isNode(e))for(;e.childNodes.length;)e.removeChild(e.firstChild);return e},cm.prevEl=function(e){return(e=e.previousSibling)&&e.nodeType&&1!==e.nodeType&&(e=cm.prevEl(e)),e},cm.nextEl=function(e){return(e=e.nextSibling)&&e.nodeType&&1!==e.nodeType&&(e=cm.nextEl(e)),e},cm.firstEl=function(e){return e&&e.firstChild?(1!==(e=e.firstChild).nodeType&&(e=cm.nextEl(e)),e):null},cm.insertFirst=function(e,t){return cm.isNode(e)&&cm.isNode(t)&&(t.firstChild?cm.insertBefore(e,t.firstChild):cm.appendChild(e,t)),e},cm.insertLast=cm.appendChild=function(e,t){return cm.isNode(e)&&cm.isNode(t)&&t.appendChild(e),e},cm.insertBefore=function(e,t){return cm.isNode(e)&&cm.isNode(t)&&t.parentNode&&t.parentNode.insertBefore(e,t),e},cm.insertAfter=function(e,t){var n;return cm.isNode(e)&&cm.isNode(t)&&t.parentNode&&((n=t.nextSibling)?cm.insertBefore(e,n):t.parentNode.appendChild(e)),e},cm.replaceNode=function(e,t){return cm.insertBefore(e,t),cm.remove(t),e},cm.appendNodes=function(e,t){if(cm.isEmpty(e))return t;if(cm.isNode(e))t.appendChild(e);else for(;e.length;)cm.isNode(e[0])?t.appendChild(e[0]):cm.remove(e[0]);return t},cm.hideSpecialTags=function(){var e;document.querySelectorAll?(e=document.querySelectorAll("iframe,object,embed"),cm.forEach(e,function(e){e.style.visibility="hidden"})):(e=document.getElementsByTagName("*"),cm.forEach(e,function(e){e.tagName&&/iframe|object|embed/.test(e.tagName)&&(e.style.visibility="hidden")}))},cm.showSpecialTags=function(){var e;document.querySelectorAll?(e=document.querySelectorAll("iframe,object,embed"),cm.forEach(e,function(e){e.style.visibility="visible"})):(e=document.getElementsByTagName("*"),cm.forEach(e,function(e){e.tagName&&/iframe|object|embed/.test(e.tagName)&&(e.style.visibility="visible")}))},cm.strToHTML=function(e){if(!e||cm.isNode(e))return e;var t=cm.Node("div");return t.insertAdjacentHTML("beforeend",e),1===t.childNodes.length?t.firstChild:t.childNodes},cm.getNodes=function(e,s){e=e||document.body,s=s||"data-node";function o(t,n,a){var o,e=t.getAttribute(s),r=e?e.split("|"):[];cm.forEach(r,function(e){o=[],-1===e.indexOf(".")?d(t,e,n,o):c(t,e,o),cm.forEach(o,function(e){a.push(e)})})}var i={},t=[],c=function(n,e,a){var o=e?e.split("."):[],r=i;cm.forEach(o,function(e,t){0===t&&cm.isEmpty(e)?r=i:t+1===o.length?d(n,e,r,a):(r[e]||(r[e]={}),r=r[e])})},d=function(e,t,n,a){var o,r=t?t.split(":"):[];1===r.length?n[r[0]]=e:2!==r.length&&3!==r.length||("[]"===r[1]?(n[r[0]]||(n[r[0]]=[]),o={},r[2]&&(o[r[2]]=e),l(e,o,a),n[r[0]].push(o)):"{}"===r[1]&&(n[r[0]]||(n[r[0]]={}),r[2]&&(n[r[0]][r[2]]=e),l(e,n[r[0]],a))),a.push(e)},l=function(e,t,n){var a=e.querySelectorAll("["+s+"]");cm.forEach(a,function(e){cm.inArray(n,e)||o(e,t,n)})};return o(e,i,t),l(e,i,t),i},cm.processDataAttributes=function(e,t,n){n=cm.isUndefined(n)?{}:n;function a(e){(o=e.getAttribute(r))&&e.setAttribute(t,cm.strReplace(o,n))}var o,r=["data-attributes",t].join("-"),s=e.querySelectorAll("["+r+"]");a(e),cm.forEach(s,a)},cm.setFDO=function(e,r){return cm.forEach(e,function(e,t){for(var n=cm.getByAttr("name",t,r),a=0,o=n.length;a<o;a++){switch((n[a].type||"").toLowerCase()){case"radio":e==n[a].value&&(n[a].checked=!0);break;case"checkbox":n[a].checked=!!e;break;default:cm.isTagName(n[a],"select")?cm.setSelect(n[a],e):n[a].value=e}}}),r},cm.getFDO=function(e,t){var a={};if(!cm.isNode(e))return a;function n(e,o){if(/\[.*\]$/.test(e)){for(var r=[],t=/\[(.*?)\]/g,n=null;n=t.exec(e);)r.push(n[1]);e=e.replace(/\[.*\]$/,""),a[e]=function(e,t){var n=r[e],a=!cm.isUndefined(r[e+1]);return""===n?t&&t instanceof Array?t.push(a?arguments.callee(e+1,t):o):t=[a?arguments.callee(e+1,t):o]:(t&&t instanceof Object||(t={}),t[n]=a?arguments.callee(e+1,t[n]):o),t}(0,a[e])}else a[e]=o;return 1}for(var o=[e.getElementsByTagName("input"),e.getElementsByTagName("textarea"),e.getElementsByTagName("select")],r=0,s=o.length;r<s;r++)for(var i=0,c=o[r].length;i<c;i++)if(o[r][i].name.length)switch(o[r][i].tagName.toLowerCase()){case"input":switch(o[r][i].type.toLowerCase()){case"radio":o[r][i].checked&&n(o[r][i].name,o[r][i].value||1);break;case"checkbox":o[r][i].checked?n(o[r][i].name,o[r][i].value||1):cm.isUndefined(t)||!1===t||n(o[r][i].name,t);break;case"password":case"hidden":case"text":default:n(o[r][i].name,o[r][i].value)}break;case"select":if(o[r][i].multiple){var d=o[r][i].getElementsByTagName("option");for(var l in d)d[l].selected&&n(o[r][i].name,d[l].value)}else n(o[r][i].name,o[r][i].value);break;case"textarea":n(o[r][i].name,o[r][i].value)}return a},cm.clearForm=function(e){for(var t=cm.getByClass("formData",e),n=0,a=t.length;n<a;n++)if(cm.isTagName(t[n],"input"))"checkbox"===t[n].type.toLowerCase()||"radio"===t[n].type.toLowerCase()?t[n].checked=!1:t[n].value="";else if(cm.isTagName(t[n],"textarea"))t[n].value="";else if(cm.isTagName(t[n],"select"))for(var o=t[n].getElementsByTagName("option"),r=0,s=o.length;r<s;r++)o[r].selected=!1;return e},cm.setSelect=function(e,t){if(!e||!cm.isNode(e))return null;var n=e.getElementsByTagName("option");return cm.forEach(n,function(e){e.selected=cm.isArray(t)?cm.inArray(e.value,t):e.value==t}),e},cm.toggleRadio=function(e,t,n){n=n||document.body;for(var a=cm.getByName(e,n),o=0;o<a.length;o++)a[o].value==t&&(a[o].checked=a[o].value==t)},cm.getValue=function(e,t){t=t||document.body;for(var n,a=cm.getByName(e,t),o=0,r=a.length;o<r;o++)a[o].checked&&(n=a[o].value);return n},cm.getSelectedOptions=function(e,t){if(!cm.isNode(e))return null;var n=e.selectedOptions?e.selectedOptions:e.querySelectorAll("option:checked");return cm.isUndefined(t)?n:n[t]},cm.getSelectValue=function(e){if(!cm.isNode(e))return null;if(!e.multiple)return e.value;var t,n=[];try{t=cm.getSelectedOptions(e),n=Array.from(t).map(function(e){return e.value})}catch(e){}return n},cm.setInputMaxLength=function(e,t,n){var a;return cm.isNode(e)&&(a=0,"number"===e.type?(a=n||"9".repeat(t))&&(e.max=a):(a=t||n)&&(e.maxLength=a)),e},cm.setInputMinLength=function(e,t,n){var a;return cm.isNode(e)&&(a=0,"number"===e.type?(a=n||t?"1"+"0".repeat(t-1):0)&&(e.min=a):(a=t||n)&&(e.minLength=a)),e},cm.constraintsPattern=function(t,n,a){var o,r;return function(e){return r=cm.isFunction(t)?t(e):t,o=cm.isRegExp(r)?r.test(e.value):r===e.value,e.pattern=r,e.message=a,e.valid=n?o:!o,e}},cm.constraintsCallback=function(t,n){return function(e){return e.message=n,e.valid=cm.isFunction(t)?t(e):function(){},e}},cm.toFixed=function(e,t){return parseFloat(e).toFixed(t)},cm.toNumber=function(e){return parseInt(e.replace(/\s+/,""))},cm.is=function(e){return cm.isUndefined(Com.UA)?(cm.log('Error. UA.js is not exists or not loaded. Method "cm.is()" returns false.'),!1):Com.UA.is(e)},cm.isVersion=function(){return cm.isUndefined(Com.UA)?(cm.log('Error. UA.js is not exists or not loaded. Method "cm.isVersion()" returns null.'),null):Com.UA.isVersion()},cm.isMobile=function(){return cm.isUndefined(Com.UA)?(cm.log('Error. UA.js is not exists or not loaded. Method "cm.isMobile()" returns false.'),!1):Com.UA.isMobile()},cm.decode=function(){var t=cm.node("textarea",{class:"cm__textarea-clipboard"});return function(e){return cm.isEmpty(e)?"":(t.innerHTML=e,t.value)}}(),cm.copyToClipboard=function(){var n,a=cm.node("textarea",{class:"cm__textarea-clipboard"});return cm.insertFirst(a,document.body),function(e,t){t=cm.isFunction(t)?t:function(){},cm.isEmpty(e)||(a.value=e,a.select(),(n=document.execCommand("copy"))||cm.errorLog({type:"error",name:"cm.copyToClipboard",message:"Unable to copy text to clipboard!"}),t(n))}}(),cm.RegExpEscape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},cm.strWrap=function(e,t){return["",e=e.toString(),""].join(t)},cm.strReplace=function(n,e){return e&&cm.isObject(e)&&(n=n.toString(),cm.forEach(e,function(e,t){cm.isObject(e)&&(e=JSON.stringify(e)),n=n.replace(new RegExp(t,"g"),e)})),n},cm.reduceText=function(e,t,n){return e=e.toString(),n=!cm.isUndefined(n)&&n,e.length>t?e.slice(0,t)+(n?"…":""):e},cm.reduceTextSmart=function(e,t,n){if(e.length<=t)return e;for(var a=e.split(/[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+/),o="",r="",s=0;a[s]&&r.length<=t;)o=r,r+=" "+a[s],s++;return cm.isUndefined(n)||(o+="…"),o},cm.removeDanger=function(e){return e.replace(/(<|>|&lt;|&gt;)/gim,"")},cm.removeSpaces=function(e){return e.replace(/[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+/g,"")},cm.cutHTML=function(e){return e.replace(/<[^>]*>/g,"")},cm.splitNumber=function(e){return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")},cm.getPercentage=function(e,t){return e/t/100},cm.rand=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},cm.isEven=function(e){return/^(.*)(0|2|4|6|8)$/.test(e)},cm.addLeadZero=function(e){return(e=parseInt(e,10))<10?"0"+e:e},cm.plural=cm.getNumberDeclension=function(e,t){if(!cm.isArray(t))return t;var n=4<e%100&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5];return t[n]||t[n-1]||t[0]},cm.toRadians=function(e){return e*Math.PI/180},cm.toDegrees=function(e){return 180*e/Math.PI},cm.isDateValid=function(e){return cm.isDate(e)&&!isNaN(e.valueOf())},cm.getCurrentDate=function(e){return e=e||cm._config.dateTimeFormat,cm.dateFormat(new Date,e)},cm.dateFormat=function(e,t,n,a){cm.isDate(e)?e=new Date(+e):cm.isString(e)&&(e=new Date(e)),isNaN(e)&&(e=null),t=cm.isString(t)?t:cm._config.dateTimeFormat,a=cm.isString(a)?a:cm._config.dateFormatCase,n=cm.merge({months:cm._strings.months,days:cm._strings.days},n),cm.isObject(n.months)&&n.months[a]&&(n.months=n.months[a]);var o;return t=cm.strReplace(t,{"%Y%":"%Y","%m%":"%m","%n%":"%n","%F%":"%F","%d%":"%d","%j%":"%j","%l%":"%l","%a%":"%a","%A%":"%A","%g%":"%g","%G%":"%G","%h%":"%h","%H%":"%H","%i%":"%i","%s%":"%s"}),t=cm.strReplace(t,(o=e,{"%Y":function(){return o?o.getFullYear():"0000"},"%m":function(){return o?cm.addLeadZero(o.getMonth()+1):"00"},"%n":function(){return o?o.getMonth()+1:"00"},"%F":function(){return o?n.months[o.getMonth()]:"00"},"%d":function(){return o?cm.addLeadZero(o.getDate()):"00"},"%j":function(){return o?o.getDate():"00"},"%l":function(){return o?n.days[o.getDay()]:"00"},"%a":function(){return o?12<=o.getHours()?"pm":"am":""},"%A":function(){return o?12<=o.getHours()?"PM":"AM":""},"%g":function(){return o?o.getHours()%12||12:"00"},"%G":function(){return o?o.getHours():"00"},"%h":function(){return o?cm.addLeadZero(o.getHours()%12||12):"00"},"%H":function(){return o?cm.addLeadZero(o.getHours()):"00"},"%i":function(){return o?cm.addLeadZero(o.getMinutes()):"00"},"%s":function(){return o?cm.addLeadZero(o.getSeconds()):"00"}}))},cm.parseDate=function(n,a){if(!n)return null;var t=new Date,e={YYYY:function(e){return"0000"!==e?e:t.getFullYear()},mm:function(e){return"00"!==e?e-1:t.getMonth()},dd:function(e){return"00"!==e?e:t.getDate()},hh:function(e){return e},HH:function(e){return e},ii:function(e){return e},ss:function(e){return e},vv:function(e){return e},e:function(e){return e}},o={YYYY:"0000",mm:"00",dd:"00",hh:"00",HH:"00",ii:"00",ss:"00",vvv:"000",e:"Z"},r=0;return a=cm.isString(a)?a:cm._config.dateTimeFormat,a=cm.strReplace(a,{"%Y%":"YYYY","%m%":"mm","%d%":"dd","%H%":"HH","%i%":"ii","%s%":"ss","%Y":"YYYY","%m":"mm","%d":"dd","%h":"hh","%H":"HH","%i":"ii","%s":"ss","%v":"vvv",$e:"e"}),cm.forEach(e,function(e,t){for(r=a.indexOf(t);-1!==r;)o[t]=e(n.substr(r,t.length)),r=a.indexOf(t,r+1)}),new Date(o.YYYY,o.mm,o.dd,o.HH,o.ii,o.ss,o.vvv)},cm.parseFormatDate=function(e,t,n,a,o){t=t||cm._config.dateFormat,n=n||cm._config.displayDateFormat,o=o||cm._config.displayDateFormatCase;var r=cm.parseDate(e,t);return cm.dateFormat(r,n,a,o)},cm.parseFormatDateTime=function(e,t,n,a,o){t=t||cm._config.dateTimeFormat,n=n||cm._config.displayDateTimeFormat,o=o||cm._config.displayDateFormatCase;var r=cm.parseDate(e,t);return cm.dateFormat(r,n,a,o)},cm.getWeek=function(e){var t=new Date;return cm.isDate(e)?t=new Date(+e):cm.isString(e)&&(t=new Date(e)),t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7)),Math.ceil(((t-new Date(t.getFullYear(),0,1))/864e5+1)/7)},cm.getWeeksInYear=function(e){e=e||(new Date).getFullYear();var t=new Date(e,11,31),n=cm.getWeek(t);return 1===n?cm.getWeek(t.setDate(24)):n},cm.addClass=function(t,e,n){return!cm.isNode(t)||cm.isEmpty(e)?null:(n=n&&t.clientHeight,cm.forEach(e.toString().split(/\s+/),function(e){cm.isEmpty(e)||t.classList.add(e)}),t)},cm.removeClass=function(t,e,n){return!cm.isNode(t)||cm.isEmpty(e)?null:(n=n&&t.clientHeight,cm.forEach(e.toString().split(/\s+/),function(e){cm.isEmpty(e)||t.classList.remove(e)}),t)},cm.replaceClass=function(e,t,n,a){return cm.isNode(e)?cm.addClass(cm.removeClass(e,t,a),n,a):null},cm.hasClass=cm.isClass=function(e,t){var n;return!!cm.isNode(e)&&(e.classList?e.classList.contains(t):(n=e.className?e.className.split(/\s+/):[],cm.inArray(n,t)))},cm.getPageSize=function(e){var t=document,n=t.documentElement,a=t.body,o={height:Math.max(Math.max(a.scrollHeight,n.scrollHeight),Math.max(a.offsetHeight,n.offsetHeight),Math.max(a.clientHeight,n.clientHeight)),width:Math.max(Math.max(a.scrollWidth,n.scrollWidth),Math.max(a.offsetWidth,n.offsetWidth),Math.max(a.clientWidth,n.clientWidth)),winHeight:n.clientHeight,winWidth:n.clientWidth};return o.scrollTop=cm.getBodyScrollTop(),o.scrollLeft=cm.getBodyScrollLeft(),o.scrollHeight=o.height-o.winHeight,o.scrollWidth=o.width-o.winWidth,o[e]||o},cm.getScrollBarSize=function(){var e;return function(){return e||(e=cm.node("div",{class:"cm__scroll-bar-size-checker"}),cm.insertFirst(e,document.body)),Math.max(e.offsetWidth-e.clientWidth,0)}}(),cm.setOpacity=function(e,t){return cm.isNode(e)&&(e.style.opacity=t),e},cm.getX=function(e){var t=0,n=e;try{for(;n;)t+=n.offsetLeft,n!==e&&(t+=cm.getStyle(n,"borderLeftWidth",!0)||0),n=n.offsetParent}catch(e){return t}return t},cm.getY=function(e){var t=0,n=e;try{for(;n;)t+=n.offsetTop,n!==e&&(t+=cm.getStyle(n,"borderTopWidth",!0)||0),n=n.offsetParent}catch(e){return t}return t},cm.getRealX=function(e){return cm.isNode(e)?e.getBoundingClientRect().left:0},cm.getRealY=function(e){return cm.isNode(e)?e.getBoundingClientRect().top:0},cm.getRect=function(e){var t,n,a;return cm.isWindow(e)?{top:0,right:(t=e.document.documentElement).clientWidth,bottom:t.clientHeight,left:0,width:t.clientWidth,height:t.clientHeight}:cm.isNode(e)?(n=e.getBoundingClientRect(),(a={top:Math.round(n.top),right:Math.round(n.right),bottom:Math.round(n.bottom),left:Math.round(n.left)}).width=cm.isUndefined(n.width)?n.right-n.left:Math.round(n.width),a.height=cm.isUndefined(n.height)?n.bottom-n.top:Math.round(n.height),a):{top:0,right:0,bottom:0,left:0,width:0,height:0}},cm.getOffsetRect=function(e){var t=cm.getRect(e),n=cm.getBodyScrollTop(),a=cm.getBodyScrollLeft();return t.offset={top:t.top+n,right:t.right+a,bottom:t.bottom+n,left:t.left+a},t},cm.getFullRect=function(e,t){if(!cm.isNode(e))return null;var n={};return t=cm.isUndefined(t)?cm.getStyleObject(e):t,n.width=e.offsetWidth,n.height=e.offsetHeight,n.x1=cm.getRealX(e),n.y1=cm.getRealY(e),n.x2=n.x1+n.width,n.y2=n.y1+n.height,n.padding={top:cm.getCSSStyle(t,"paddingTop",!0),right:cm.getCSSStyle(t,"paddingRight",!0),bottom:cm.getCSSStyle(t,"paddingBottom",!0),left:cm.getCSSStyle(t,"paddingLeft",!0)},n.innerWidth=n.width-n.padding.left-n.padding.right,n.innerHeight=n.height-n.padding.top-n.padding.bottom,n.innerX1=n.x1+n.padding.left,n.innerY1=n.y1+n.padding.top,n.innerX2=n.innerX1+n.innerWidth,n.innerY2=n.innerY1+n.innerHeight,n.margin={top:cm.getCSSStyle(t,"marginTop",!0),right:cm.getCSSStyle(t,"marginRight",!0),bottom:cm.getCSSStyle(t,"marginBottom",!0),left:cm.getCSSStyle(t,"marginLeft",!0)},n.absoluteWidth=n.width+n.margin.left+n.margin.right,n.absoluteHeight=n.height+n.margin.top+n.margin.bottom,n.absoluteX1=n.x1-n.margin.left,n.absoluteY1=n.y1-n.margin.top,n.absoluteX2=n.x2+n.margin.right,n.absoluteY2=n.y2+n.margin.bottom,n},cm.getNodeIndents=function(e,t){if(!cm.isNode(e))return null;t=cm.isUndefined(t)?cm.getStyleObject(e):t;var n={};return n.margin={top:cm.getCSSStyle(t,"marginTop",!0),right:cm.getCSSStyle(t,"marginRight",!0),bottom:cm.getCSSStyle(t,"marginBottom",!0),left:cm.getCSSStyle(t,"marginLeft",!0)},n.padding={top:cm.getCSSStyle(t,"paddingTop",!0),right:cm.getCSSStyle(t,"paddingRight",!0),bottom:cm.getCSSStyle(t,"paddingBottom",!0),left:cm.getCSSStyle(t,"paddingLeft",!0)},n},cm.getNodeOffset=function(e,t,n,a){return cm.isNode(e)?(t=cm.isUndefined(t)?cm.getStyleObject(e):t,(n=cm.isUndefined(n)?cm.getNodeIndents(e,t):n).offset=cm.getRect(e),a&&(n.offset.top+=a.top,n.offset.right+=a.left,n.offset.bottom+=a.top,n.offset.left+=a.left),n.inner={width:n.offset.width-n.padding.left-n.padding.right,height:n.offset.height-n.padding.top-n.padding.bottom,top:n.offset.top+n.padding.top,right:n.offset.right-n.padding.right,bottom:n.offset.bottom-n.padding.bottom,left:n.offset.left+n.padding.left},n.outer={width:n.offset.width+n.margin.left+n.margin.right,height:n.offset.height+n.margin.top+n.margin.bottom,top:n.offset.top-n.margin.top,right:n.offset.right+n.margin.right,bottom:n.offset.bottom+n.margin.bottom,left:n.offset.left-n.margin.left},n):null},cm.getRealWidth=function(e,t){var n,a=0,a=e.offsetWidth;return e.style.width="auto",n=e.offsetWidth,e.style.width=cm.isUndefined(t)?[a,"px"].join(""):t,n},cm.getRealHeight=function(e,t,n){var a,o,r=["self","current","offset","offsetRelative"],s={};return e&&cm.isNode(e)?(o=cm.getStyleObject(e),t=cm.isUndefined(t)||!cm.inArray(r,t)?"offset":t,n=!(cm.isUndefined(n)||!cm.inArray(r,n))&&n,cm.forEach(r,function(e){s[e]=0}),a={display:e.style.display,height:e.style.height,position:e.style.position},e.style.display="block",s.current=e.offsetHeight,e.style.height="auto",s.offset=e.offsetHeight,s.self=s.offset-cm.getStyle(o,"borderTopWidth",!0)-cm.getStyle(o,"borderBottomWidth",!0)-cm.getStyle(o,"paddingTop",!0)-cm.getStyle(o,"paddingBottom",!0),e.style.position="relative",s.offsetRelative=e.offsetHeight,e.style.display=a.display,e.style.height=a.height,e.style.position=a.position,n&&(e.style.height=[s[n],"px"].join("")),s[t]):0},cm.getIndentX=function(e){return e?cm.getStyle(e,"paddingLeft",!0)+cm.getStyle(e,"paddingRight",!0)+cm.getStyle(e,"borderLeftWidth",!0)+cm.getStyle(e,"borderRightWidth",!0):null},cm.getIndentY=function(e){return e?cm.getStyle(e,"paddingTop",!0)+cm.getStyle(e,"paddingBottom",!0)+cm.getStyle(e,"borderTopWidth",!0)+cm.getStyle(e,"borderBottomWidth",!0):null},cm.addStyles=function(t,e){var n;return e.replace(/\s/g,"").split(";").forEach(function(e){0<e.length&&((n=e.split(":"))[2]=cm.styleStrToKey(n[0]),"float"===n[0]?(t.style[n[2][0]]=n[1],t.style[n[2][1]]=n[1]):t.style[n[2]]=n[1])}),t},cm.getStyleObject=window.getComputedStyle?function(e){return document.defaultView.getComputedStyle(e,null)}:function(e){return e.currentStyle},cm.getCSSStyle=cm.getStyle=function(e,t,n){var a,o=cm.isNode(e)?cm.getStyleObject(e):e;return o?(a=o[t],n?cm.styleToNumber(a):a):0},cm.getCurrentStyle=function(e,t,n){switch(t){case"width":case"height":case"top":case"left":var a=t.charAt(0).toUpperCase()+t.substr(1,t.length-1);if("%"===n&&!e.style[t].match(/%/)){var o=/body/i.test(e.parentNode.tagName)||/top|left/i.test(a)?"client":"offset",r=/width|left/i.test(a)?e.parentNode[o+"Width"]:e.parentNode[o+"Height"];return e["offset"+a]/r*100}if("%"===n&&/%/.test(e.style[t])){var s=e.style.display;e.style.display="none";var i=cm.getCSSStyle(e,t,!0)||0;return e.style.display=s,i}return"px"===n&&/px/.test(e.style[t])?cm.getCSSStyle(e,t,!0)||0:e["offset"+a];case"opacity":if(cm.is("ie")&&cm.isVersion()<9){var c=/alpha\(opacity=(.*)\)/.exec(e.style.filter||cm.getCSSStyle(e,"filter"));return c?c[1]/100:1}var d=parseFloat(e.style.opacity||cm.getCSSStyle(e,"opacity"));return isNaN(d)?1:d;case"color":case"backgroundColor":case"borderColor":return(d=cm.getCSSStyle(e,t)).match(/rgb/i)?(d=d.match(/\d+/g),[parseInt(d[0]),parseInt(d[1]),parseInt(d[2])]):cm.hex2rgb(d.match(/[\w\d]+/)[0]);case"docScrollTop":return cm.getBodyScrollTop();case"scrollLeft":case"scrollTop":return e[t];case"x1":case"x2":case"y1":case"y2":return parseInt(e.getAttribute(t));default:return cm.getCSSStyle(e,t,!0)||0}},cm.getStyleDimension=function(e){var t=e.toString().match(/\d+(\D*)/);return t?t[1]:""},cm.styleToNumber=function(e){return e=parseFloat(e.toString().replace(/(pt|px|%)/g,"")),e=isNaN(e)?0:e},cm.hex2rgb=function(e){return[(t=parseInt(e,16))>>16&255,t>>8&255,255&t];var t},cm.rgb2hex=function(e,t,n){var a=[e,t,n];for(var o in a)a[o]=Number(a[o]).toString(16),"0"==a[o]?a[o]="00":1===a[o].length&&(a[o]="0"+a[o]);return"#"+a.join("")},cm.styleStrToKey=function(e){var t;return"float"===(e=e.replace(/\s/g,""))?e=["cssFloat","styleFloat"]:e.match("-")&&(e=(t=e.split("-"))[0]+t[1].replace(t[1].charAt(0),t[1].charAt(0).toUpperCase())),e},cm.getScrollTop=function(e){return cm.isWindow(e)?cm.getBodyScrollTop():cm.isNode(e)?/body|html/gi.test(e.tagName)?cm.getBodyScrollTop():e.scrollTop:0},cm.getScrollLeft=function(e){return cm.isWindow(e)?cm.getBodyScrollLeft():cm.isNode(e)?/body|html/gi.test(e.tagName)?cm.getBodyScrollLeft():e.scrollLeft:0},cm.setScrollTop=function(e,t){return cm.isWindow(e)?cm.setBodyScrollTop(t):cm.isNode(e)&&(/body|html/gi.test(e.tagName)?cm.setBodyScrollTop(t):e.scrollTop=t),e},cm.setScrollLeft=function(e,t){return cm.isWindow(e)?cm.setBodyScrollLeft(t):cm.isNode(e)&&(/body|html/gi.test(e.tagName)?cm.setBodyScrollLeft(t):e.scrollLeft=t),e},cm.getScrollHeight=function(e){return cm.isWindow(e)?cm.getBodyScrollHeight():cm.isNode(e)?/body|html/gi.test(e.tagName)?cm.getBodyScrollHeight():e.scrollHeight:0},cm.getScrollOffsetHeight=function(e){return cm.isWindow(e)?cm._pageSize.winHeight:cm.isNode(e)?/body|html/gi.test(e.tagName)?cm._pageSize.winHeight:e.offsetHeight:0},cm.getScrollTopMax=function(e){return cm.isWindow(e)?cm.getBodyScrollMaxTop():cm.isNode(e)?/body|html/gi.test(e.tagName)?cm.getBodyScrollMaxTop():e.scrollHeight-e.offsetHeight:0},cm.setBodyScrollTop=function(e){document.documentElement.scrollTop=e,document.body.scrollTop=e},cm.setBodyScrollLeft=function(e){document.documentElement.scrollLeft=e,document.body.scrollLeft=e},cm.getBodyScrollTop=function(){return Math.max(document.documentElement.scrollTop,document.body.scrollTop,window.pageYOffset,0)},cm.getBodyScrollLeft=function(){return Math.max(document.documentElement.scrollLeft,document.body.scrollLeft,window.pageXOffset,0)},cm.getBodyScrollHeight=function(){return Math.max(document.documentElement.scrollHeight,document.body.scrollHeight,0)},cm.getBodyScrollMaxTop=function(){return cm.getBodyScrollHeight()-cm._pageSize.winHeight},cm.scrollTo=function(e,t,n,a){if(!cm.isNode(e))return null;t=cm.isUndefined(t)?window:t;var o,r=cm.getScrollHeight(t),s=cm.getScrollOffsetHeight(t),i=cm.getScrollTopMax(t),c={};if(r===s)return e;if(a=cm.isFunction(a)?a:function(){},"auto"===(n=cm.merge({type:"auto",behavior:"smooth",block:"start",top:"auto",duration:cm._config.animDuration},n)).type&&(n.type=cm.isWindow(t)||t===document.body?"docScrollTop":"scrollTop"),o="docScrollTop"===n.type?cm.getY(e):e.offsetTop,"auto"===n.top)switch(n.block){case"end":n.top=Math.max(Math.min(o+s,i),0);break;case"center":n.top=Math.max(Math.min(o-(s-e.offsetHeight)/2,i),0);break;case"start":default:n.top=Math.max(Math.min(o,i),0)}return c[n.type]=n.top,"instant"===n.behavior?(cm.setScrollTop(t,n.top),a()):new cm.Animation(t).go({anim:n.behavior,duration:n.duration,onStop:a,style:c}),e},cm.getSupportedStyle=function(){var a=document.createElement("div");return function(t){var e=cm.styleStrToKey(t).replace(t.charAt(0),t.charAt(0).toUpperCase()),n=[cm.styleStrToKey(t),["Webkit",e].join(""),["Moz",e].join(""),["O",e].join(""),["ms",e].join("")];return t=!1,cm.forEach(n,function(e){cm.isUndefined(a.style[e])||t||(t=e)}),t}}(),cm.getTransitionDurationFromRule=function(e){var t,n=cm.getCSSRule(e)[0];return n&&(t=n.style[cm.getSupportedStyle("transitionDuration")])?cm.parseTransitionDuration(t):0},cm.getTransitionDurationFromLESS=function(e,t){var n=cm.getLESSVariable(e,t,!1);return cm.parseTransitionDuration(n)},cm.parseTransitionDuration=function(e){return cm.isEmpty(e)?0:!(e=e.toString()).match("ms")&&e.match("s")?e/1e3:parseFloat(e)},cm.getLESSVariable=function(e,t,n){e=e.replace(/^@/,"");var a=window.LESS&&window.LESS[e]?window.LESS[e]:t;return n?cm.styleToNumber(a):a},cm.createStyleSheet=function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet},cm.getCSSRule=function(t){var n,a=[];return document.styleSheets&&cm.forEach(document.styleSheets,function(e){n=e.cssRules?e.cssRules:e.rules,cm.forEach(n,function(e){e.selectorText===t&&a.push(e)})}),a},cm.addCSSRule=function(e,t,n,a){document.styleSheets&&(e=cm.isUndefined(e)||!e?document.styleSheets[0]:e,n=cm.isUndefined(n)||!n?"":n,a=cm.isUndefined(a)||!a?-1:a,"insertRule"in e?e.insertRule(t+"{"+n+"}",a):"addRule"in e&&e.addRule(t,n,a))},cm.removeCSSRule=function(a){var e;document.styleSheets&&cm.forEach(document.styleSheets,function(n){e=n.cssRules?n.cssRules:n.rules,cm.forEachReverse(e,function(e,t){e.selectorText===a&&(n.cssRules?n.deleteRule(t):n.removeRule(t))})})},cm.setCSSTranslate=function(){var r=cm.getSupportedStyle("transform");return r?function(e,t,n,a,o){return t=cm.isUndefined(t)||"auto"===t?0:t,n=cm.isUndefined(n)||"auto"===n?0:n,a=cm.isUndefined(a)||"auto"===a?0:a,o=cm.isUndefined(o)?"":o,e.style[r]=["translate3d(",t,",",n,",",a,")",o].join(" "),e}:function(e,t,n,a,o){return t=cm.isUndefined(t)?0:t,n=cm.isUndefined(n)?0:n,e.style.left=t,e.style.top=n,e}}(),cm.clearCSSTranslate=function(){var t=cm.getSupportedStyle("transform");return t?function(e){e.style[t]=""}:function(e){e.style.left="",e.style.top=""}}(),cm.setCSSTransitionDuration=function(){var n=cm.getSupportedStyle("transition-duration");return function(e,t){return n&&(cm.isNumber(t)&&(t=[t,"ms"].join("")),e.style[n]=t),e}}(),cm.inRange=function(e,t,n,a){return n<=e&&e<=a||n<=t&&t<=a||e<=n&&n<=t},cm.CSSValuesToArray=function(n){if(cm.isEmpty(n))return[0,0,0,0];switch(n=n.toString().replace(/[^\d\s-]/g,"").split(/\s+/),cm.forEach(n,function(e,t){n[t]=cm.isEmpty(e)?0:parseFloat(e)}),n.length){case 0:n=[0,0,0,0];break;case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return n},cm.arrayToCSSValues=function(n,o){var a;return o=cm.isUndefined(o)?"px":o,cm.forEach(n,function(e,t){a=cm.isEmpty(e)?0:parseFloat(e),a=isNaN(a)?0:a,n[t]=a}),n.reduce(function(e,t,n,a){return[e+o,t+(n===a.length-1?o:"")].join(" ")})},cm.URLToCSSURL=function(e){return cm.isEmpty(e)?"none":'url("'+e+'")'},cm.keyCodeTable={8:"delete",9:"tab",13:"enter",27:"escape",32:"space",35:"home",36:"end",37:"left",38:"top",39:"right",40:"bottom",46:"backspace"},cm.isKey=function(e,t){var n=e.keyCode;return cm.isKeyCode(n,t)},cm.isKeyCode=function(t,e){var n=!1;return cm.isString(e)&&(e=e.split(/\s+/)),cm.forEach(e,function(e){cm.keyCodeTable[t]===e&&(n=!0)}),n},cm.handleKey=function(e,t,n){!cm.isInputFocused()&&cm.isKey(e,t)&&n&&n(e)},cm.isLinkClick=function(e){return!(e.button||e.metaKey||e.ctrlKey)},cm.isInputFocused=function(){var e=document.activeElement,t=e.tagName.toLowerCase();return"textarea"===t||"input"===t&&!/button|file/.test(e.type)},cm.isFormInputFocused=function(){var e=document.activeElement;return"input"===e.tagName.toLowerCase()&&!/button|file/.test(e.type)},cm.allowKeyCode=function(e,n){var a=[];return cm.forEach(cm.keyCodeTable,function(e,t){cm.inArray(n,e)&&a.push(t)}),cm.inArray(a,e.toString())},cm.disallowKeyCode=function(e,n){var a=[];return cm.forEach(cm.keyCodeTable,function(e,t){cm.inArray(n,e)||a.push(t)}),cm.inArray(a,e.toString())},cm.charCodeIsDigit=function(e){var t=String.fromCharCode(e);return/^\d$/.test(t)},cm.allowOnlyDigitInputEvent=function(e,t){return cm.allowOnlyNumbersInputEvent(e,t,{allowNegative:!1,allowFloat:!1})},cm.allowOnlyNumbersInputEvent=function(t,n,e){var a,o,r,s;return e=cm.merge({allowNegative:!1,allowFloat:!1},e),a=e.allowNegative&&e.allowFloat?/[^\d-.]/g:e.allowNegative?/[^\d-]/g:e.allowFloat?/[^\d.]/g:/[^\d]/g,cm.addEvent(t,"input",function(e){o=t.value.replace(a,""),r=!cm.isEmpty(t.maxlength)&&0<t.maxlength,s=!cm.isEmpty(t.max)&&0<t.max,r||s?"number"===t.type?t.value=Math.min(parseFloat(o),parseFloat(t.max)):t.value=cm.reduceText(o,parseFloat(t.maxlength)):t.value=o,n&&n(e,t.value)}),t};var animFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(e,1e3/60)};cm.Animation=function(e){function c(e,t){if(e.match(/color/i)){if(/rgb/i.test(t)){var n=t.match(/\d+/g);return[parseInt(n[0]),parseInt(n[1]),parseInt(n[2])]}return cm.hex2rgb(t.match(/[\w\d]+/)[0])}return t.replace(/[^\-0-9\.]/g,"")}var u=this,p=e,h=[],g={random:function(e){return t=e,Math.random()*(1-t)+t;var t},simple:function(e){return e},acceleration:function(e){return Math.pow(e,3)},inhibition:function(e){return 1-g.acceleration(1-e)},smooth:function(e){return e<.5?g.acceleration(2*e)/2:1-g.acceleration(2*(1-e))/2}};u.getTarget=function(){return p},u.go=function(){var e=arguments[0],a=cm.merge({style:"",duration:"",anim:"simple",onStop:function(){}},e),o="animation_process_"+Math.random(),d=g[a.anim]||g.simple,l=[],m=Date.now();for(var t in a.style){var n=a.style[t].toString(),r=cm.getStyleDimension(n);l.push({name:t,new:c(t,n),dimension:r,old:cm.getCurrentStyle(p,t,r)})}for(var s in h)h[s]=!1;return h[o]=!0,function e(){var t=o;if(!h[t])return delete h[t],!1;var r,s,c,n=(Date.now()-m)/a.duration;r=n,s=d,c=l,a.duration,(r<=1?(c.forEach(function(e){var t,n,a,o=e.old+(e.new-e.old)*s(r);"opacity"===e.name?cm.setOpacity(p,o):/color/i.test(e.name)?(t=parseInt((e.new[0]-e.old[0])*s(r)+e.old[0]),n=parseInt((e.new[1]-e.old[1])*s(r)+e.old[1]),a=parseInt((e.new[2]-e.old[2])*s(r)+e.old[2]),p.style[c[i].name]=cm.rgb2hex(t,n,a)):/scrollLeft|scrollTop/.test(e.name)?p[e.name]=o:/x1|x2|y1|y2/.test(e.name)?p.setAttribute(e.name,Math.round(o)):"docScrollTop"===e.name?cm.setBodyScrollTop(o):p.style[e.name]=Math.round(o)+e.dimension}),0):(c.forEach(function(e){"opacity"===e.name?cm.setOpacity(p,e.new):/color/i.test(e.name)?p.style[e.name]=cm.rgb2hex(e.new[0],e.new[1],e.new[2]):/scrollLeft|scrollTop/.test(e.name)?p[e.name]=e.new:/x1|x2|y1|y2/.test(e.name)?p.setAttribute(e.name,e.new):"docScrollTop"===e.name?cm.setBodyScrollTop(e.new):p.style[e.name]=e.new+e.dimension}),1))?(delete h[t],a.onStop&&a.onStop()):animFrame(e)}(),u},u.stop=function(){for(var e in h)h[e]=!1;return u}},cm.transition=function(n,a){var o,e=cm.getSupportedStyle("transition"),r=[],t=function(){cm.forEach(a.properties,function(e,t){t=cm.styleStrToKey(t),o=cm.getStyleDimension(e),n.style[t]=cm.getCurrentStyle(n,t,o)+o}),a.immediately?(s(),i()):(setTimeout(s,a.delayIn),setTimeout(i,a.duration+a.delayIn+a.delayOut))},s=function(){n.style[e]=r,cm.forEach(a.properties,function(e,t){t=cm.styleStrToKey(t),n.style[t]=e})},i=function(){n.style[e]="",a.clear&&cm.forEach(a.properties,function(e,t){t=cm.styleStrToKey(t),n.style[t]=""}),a.onStop(n)};a=cm.merge({properties:{},duration:0,easing:"ease-in-out",delayIn:0,delayOut:0,immediately:!1,clear:!1,onStop:function(){}},a),cm.forEach(a.properties,function(e,t){t=cm.styleStrToKey(t),r.push([t,a.duration+"ms",a.easing].join(" "))}),r=r.join(", "),t()},cm.storageSet=function(e,t,n){if(n=!1!==n,cm.isLocalStorage)try{window.localStorage.setItem(e,t)}catch(e){}else n&&cm.cookieSet(e,t)},cm.storageGet=function(e,t){return t=!1!==t,cm.isLocalStorage?window.localStorage.getItem(e):t?cm.cookieGet(e):null},cm.storageRemove=function(e,t){t=!1!==t,cm.isLocalStorage?window.localStorage.removeItem(e):t&&cm.cookieRemove(e)},cm.sessionStorageSet=function(e,t){if(cm.isSessionStorage)try{window.sessionStorage.setItem(e,t)}catch(e){}},cm.sessionStorageGet=function(e){return cm.isSessionStorage?window.sessionStorage.getItem(e):null},cm.sessionStorageRemove=function(e){cm.isSessionStorage&&window.sessionStorage.removeItem(e)},cm.cookieSet=function(e,t,n,a){a="path="+(cm.isEmpty(a)?"/":encodeURI(a)),n=cm.isEmpty(n)?"":cm.cookieDate(n),document.cookie=encodeURI(e)+"="+encodeURI(t)+";"+a+";"+n},cm.cookieGet=function(e){var t=" "+document.cookie,n=" "+encodeURI(e)+"=",a=null,o=0,r=0;return 0<t.length&&-1!==(o=t.indexOf(n))&&(o+=n.length,-1===(r=t.indexOf(";",o))&&(r=t.length),a=encodeURI(t.substring(o,r))),a},cm.cookieRemove=function(e){var t=new Date;t.setDate(t.getDate()-1),document.cookie=encodeURI(e)+"=;expires="+t},cm.cookieDate=function(e){return"expires="+new Date(Date.now()+864e5*e).toUTCString()+";"},cm.ajax=function(e){function t(){c.onSuccess.apply(c.onSuccess,arguments),h.apply(h,arguments),c.onEnd.apply(c.onEnd,arguments)}var n,a,o,r,s,i,c=cm.merge({debug:!0,type:"json",method:"POST",paramsType:"uri",params:"",url:"",modifier:"",modifierParams:{},formData:!1,headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},withCredentials:!1,async:!0,beacon:!1,onStart:function(){},onEnd:function(){},onSuccess:function(){},onError:function(){},onAbort:function(){},handler:!1},e),d=cm._getVariables(),l=function(){c.httpRequestObject.open(c.method,c.url,c.async),c.httpRequestObject.responseType=c.type,"withCredentials"in c.httpRequestObject&&(c.httpRequestObject.withCredentials=c.withCredentials),cm.forEach(c.headers,function(e,t){c.httpRequestObject.setRequestHeader(t,e)}),cm.addEvent(c.httpRequestObject,"load",m),cm.addEvent(c.httpRequestObject,"error",u),cm.addEvent(c.httpRequestObject,"abort",p),c.onStart(),c.beacon&&cm.hasBeacon?navigator.sendBeacon(c.url,c.params):/POST|PUT|PATCH/.test(c.method)?c.httpRequestObject.send(c.params):c.httpRequestObject.send(null)},m=function(e){4===c.httpRequestObject.readyState&&(n=c.httpRequestObject.response,200===c.httpRequestObject.status?c.onSuccess(n,e):c.onError(n,e),h(n),c.onEnd(n,e))},u=function(){c.onError.apply(c.onError,arguments),h.apply(h,arguments),c.onEnd.apply(c.onEnd,arguments)},p=function(){c.onAbort.apply(c.onAbort,arguments),h.apply(h,arguments),c.onEnd.apply(c.onEnd,arguments)},h=function(){cm.isFunction(c.handler)&&(cm.errorLog({type:"attention",name:"cm.ajax",message:'Parameter "handler" is deprecated. Use "onSuccess", "onError" or "onAbort" callbacks instead.'}),c.handler.apply(c.handler,arguments))},g=function(){a=["cmAjaxJSONP",Date.now()].join("__"),o=[a,"Success"].join("__"),r=[a,"Error"].join("__"),window[o]=function(){t.apply(t,arguments),f()},window[r]=function(){u.apply(u,arguments),f()},s=cm.Node("script",{type:"application/javascript"}),/%callback%|%25callback%25/.test(c.url)?c.url=cm.strReplace(c.url,{"%callback%":o,"%25callback%25":o}):cm.addEvent(s,"load",window[o]),cm.addEvent(s,"error",window[r]),c.onStart(),s.setAttribute("src",c.url),document.getElementsByTagName("head")[0].appendChild(s)},f=function(){cm.removeEvent(s,"load",window[o]),cm.removeEvent(s,"error",window[r]),cm.remove(s),delete window[o],delete window[r]},v=function(){window[o]=function(){p(),f()}};return function(){c.httpRequestObject=cm.createXmlHttpRequestObject(),c.type=c.type.toLowerCase(),c.method=c.method.toUpperCase(),c.params instanceof FormData?delete c.headers["Content-Type"]:c.formData?(c.params=cm.obj2FormData(c.params),delete c.headers["Content-Type"]):cm.isObject(c.params)&&(c.params=cm.objectReplace(c.params,d),"json"===c.paramsType?(c.headers["Content-Type"]="application/json",c.params=cm.stringifyJSON(c.params)):c.params=cm.obj2URI(c.params)),cm.isEmpty(c.modifier)||cm.isEmpty(c.modifierParams)?delete c.modifier:(c.modifier=cm.strReplace(c.modifier,c.modifierParams),c.url+=c.modifier),c.url=cm.strReplace(c.url,d),/POST|PUT|PATCH/.test(c.method)||cm.isEmpty(c.params)||(c.url=[c.url,c.params].join("?"))}(),"jsonp"===c.type?(i={abort:v},g()):(i=c.httpRequestObject,l()),i},cm.parseJSON=function(t){var e;if(t)try{e=JSON.parse(t)}catch(e){cm.errorLog({type:"common",name:"cm.parseJSON",message:["Error while parsing JSON. Input string:",t].join(" ")})}return e},cm.stringifyJSON=function(e){return cm.isObject(e)||cm.isArray(e)?JSON.stringify(e):e},cm.obj2URI=function(e,n){var a,o=[];return cm.forEach(e,function(e,t){cm.isUndefined(e)||(a=cm.isEmpty(n)?t:n+"["+t+"]","object"==typeof e?o.push(cm.obj2URI(e,a)):o.push([a,encodeURIComponent(e)].join("=")))}),cm.isEmpty(o)?null:o.join("&")},cm.obj2Filter=function(e,n,a,o){var r,s={};return a=cm.isUndefined(a)?"=":a,cm.forEach(e,function(e,t){o&&cm.isEmpty(e)||(r=cm.isEmpty(n)?t:n+a+t,cm.isObject(e)?s=cm.merge(s,cm.obj2Filter(e,r,a,o)):s[r]=e)}),s},cm.obj2FormData=function(e){var n=new FormData;return cm.forEach(e,function(e,t){n.append(t,e)}),n},cm.formData2Obj=function(e){var t,n={};return e.entries&&(t=e.entries())&&cm.forEach(t,function(e){n[e[0]]=e[1]}),n},cm.formData2URI=function(e){return cm.obj2URI(cm.formData2Obj(e))},cm.xml2arr=function(e){if(3===(e=9===e.nodeType?cm.firstEl(e):e).nodeType||4===e.nodeType){var t=cm.nextEl(e);if(!t)return e.nodeValue;e=t}if(1!==e.nodeType)return null;var n={};n[e.tagName]={};for(var a=e.childNodes,o=0,r=a.length;o<r;o++){var s=arguments.callee(a[o]);if("object"==typeof s)for(var i in s)n[e.tagName][i]?n[e.tagName][i]&&(n[e.tagName][i].push?n[e.tagName][i].push(s[i]):n[e.tagName][i]=[n[e.tagName][i],s[i]]):n[e.tagName][i]=s[i];else n[e.tagName]=s}return n[e.tagName]=r?n[e.tagName]:"",n},cm.responseInArray=function(e){for(var t=[],n=e.getElementsByTagName("response")[0].childNodes,a=0;n.length>a;a++)if(1===n[a].nodeType){for(var o=n[a].childNodes,r=[],s=0;o.length>s;s++)1===o[s].nodeType&&(r[o[s].tagName]=o[s].firstChild?o[s].firstChild.nodeValue:"");t.push(r)}return t},cm.createXmlHttpRequestObject=function(){var t;try{t=new XMLHttpRequest}catch(e){var n=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];cm.forEach(n,function(e){try{t=new ActiveXObject(e)}catch(e){}})}return t||null},cm.loadHashData=function(){var e=document.location.hash.replace("#","").split("&");return window.userRequest={},e.forEach(function(e){window.userRequest[e.split("=")[0]]=e.split("=")[1]}),!0},cm.reloadHashData=function(){var n="#";return cm.forEach(window.userRequest,function(e,t){n+=t+"="+e}),document.location.hash=n,!0},cm.createSvg=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttribute("version","1.1"),e},cm._defineStack={},cm._defineExtendStack={},cm.defineHelper=function(n,e,a){var o=this;e=cm.merge({modules:[],require:[],params:{},events:[],extend:!1},e),o.build={constructor:a,_raw:cm.clone(e),_update:{},_name:{full:n,short:n.replace(".",""),split:n.split(".")},_className:n,_constructor:a,_modules:{},params:e.params,strings:e.strings},e.extend&&cm.getConstructor(e.extend,function(e,t){a.prototype=Object.create(e.prototype),o.build._inheritName=t,o.build._inherit=e,o.build._raw.modules=cm.merge(o.build._inherit.prototype._raw.modules,o.build._raw.modules),o.build._raw.events=cm.merge(o.build._inherit.prototype._raw.events,o.build._raw.events),cm._defineExtendStack[t]&&cm._defineExtendStack[t].push(n)}),cm.forEach(Mod,function(e,t){e._config&&e._config.predefine&&Mod.Extend._extend.call(o,t,e)}),cm.forEach(o.build._raw.modules,function(e){Mod[e]&&Mod.Extend._extend.call(o,e,Mod[e])}),cm.forEach(o.build,function(e,t){a.prototype[t]=e}),cm._defineExtendStack[n]||(cm._defineExtendStack[n]=[]),cm._defineStack[n]=a,cm.objectSelector(n,window,a)},cm.define=function(){var e=Function.prototype.call.bind(cm.defineHelper,arguments);return function(){e.apply(cm.defineHelper,arguments)}}(),cm.getConstructor=function(t,n){var e;return n=cm.isFunction(n)?n:function(){},t&&"*"!==t?(e=cm._defineStack[t])?(n(e,t,e.prototype,e.prototype._inherit),e):(cm._debug&&cm.errorLog({type:"attention",name:"cm.getConstructor",message:["Class",cm.strWrap(t,'"'),"does not exists or define."].join(" ")}),!1):(cm.forEach(cm._defineStack,function(e){n(e,t,e.prototype,e.prototype._inherit)}),cm._defineStack)},cm.find=function(e,t,n,a,o){var r,s=[],i={};return a=cm.isFunction(a)?a:function(){},o=cm.merge({childs:!1},o),e&&"*"!==e?(r=cm._defineStack[e])?r.prototype.findInStack?(s=cm.extend(s,r.prototype.findInStack(t,n,a)),o.childs&&cm._defineExtendStack[e]&&!i[e]&&(i[e]=!0,cm.forEach(cm._defineExtendStack[e],function(e){s=cm.extend(s,cm.find(e,t,n,a,o))}))):cm.errorLog({type:"error",name:"cm.find",message:["Class",cm.strWrap(e,'"'),"does not support Module Stack."].join(" ")}):cm.errorLog({type:"error",name:"cm.find",message:["Class",cm.strWrap(e,'"'),"does not exist."].join(" ")}):cm.forEach(cm._defineStack,function(e){e.prototype.findInStack&&(s=cm.extend(s,e.prototype.findInStack(t,n,a)))}),s},cm.Finder=function(t,n,a,o,r){var e,s=this,i=!1,c=function(e){e.removeEvent(r.event,c),e.isAppropriateToStack(n,a,o)&&!r.multiple&&i&&s.remove(e._constructor)};s.remove=function(e){e?e.prototype.removeEvent(r.event,c):cm.getConstructor(t,function(e){e.prototype.removeEvent(r.event,c)})},o=cm.isFunction(o)?o:function(){},r=cm.merge({event:"onRender",multiple:!1,childs:!1},r),(e=cm.find(t,n,a,o,{childs:r.childs}))&&e.length&&!r.multiple||(i=!0,cm.getConstructor(t,function(e){e.prototype.addEvent(r.event,c)}))},cm.setParams=function(e,a){cm.getConstructor(e,function(e,t,n){n.setParams(a)})},cm.setStrings=function(e,a){cm.getConstructor(e,function(e,t,n){n.setLangs(a)})},cm.getString=function(e,a){var o;return cm.getConstructor(e,function(e,t,n){o=n.lang(a)}),o},cm.getStrings=function(e,a){var o;return cm.getConstructor(e,function(e,t,n){o=n.langObject(a)}),o},Mod.Extend={_config:{extend:!0,predefine:!0},_construct:function(){},_extend:function(e,t){var n=this;n.build._modules[e]||(t._config=cm.merge({extend:!1,predefine:!1,require:[],events:[]},t._config),cm.forEach(t._config.require,function(e){Mod[e]&&Mod.Extend._extend.call(n,e,Mod[e])}),t._config.extend&&cm.forEach(t,function(e,t){/^(_)/.test(t)||(n.build[t]=e)}),cm.isEmpty(t._config.events)||(n.build._raw.events=cm.extend(n.build._raw.events,t._config.events)),cm.isFunction(t._construct)?t._construct.call(n):cm.errorLog({type:"error",name:n.build._name.full,message:["Module",cm.strWrap(e,'"'),'does not have "_construct" method.'].join(" ")}),n.build._modules[e]=t)},extend:function(e,t){var n=this;t?e?n._modules[e]?cm.errorLog({type:"error",name:n._name.full,message:["Module with name",cm.strWrap(e,'"'),"already constructed."].join(" ")}):(t._config=cm.merge({extend:!1,predefine:!1,require:[],events:[]},t._config),cm.forEach(t._config.require,function(e){Mod[e]&&Mod.Extend._extend.call(n,e,Mod[e])}),t._config.extend&&cm.forEach(t,function(e,t){/^(_)/.test(t)||(cm._defineStack[n._name.full].prototype[t]=e)}),cm.isEmpty(t._config.events)||(cm._defineStack[n._name.full].prototype._raw.events=cm.extend(cm._defineStack[n._name.full].prototype._raw.events,t._config.events)),cm.isFunction(t._construct)?t._construct.call(n):cm.errorLog({type:"error",name:n._name.full,message:["Module",cm.strWrap(e,'"'),'does not have "_construct" method.'].join(" ")}),n._modules[e]=t):cm.errorLog({type:"error",name:n._name.full,message:"Module should have a name."}):cm.errorLog({type:"error",name:n._name.full,message:"Trying to extend the class by non-existing module."})}},Mod.Component={_config:{extend:!0,predefine:!0},_construct:function(){this.build._isComponent=!0,void 0===this.build.params.consoleLogErrors&&(this.build.params.consoleLogErrors=!0)},renderComponent:function(){var t=this;cm.forEach(t._modules,function(e){cm.isFunction(e._render)&&e._render.call(t)})},cloneComponent:function(t){var n=this,a=null;return cm.getConstructor(n._className,function(e){a=new e(cm.merge(n.params,t))}),a}},Mod.Params={_config:{extend:!0,predefine:!1,require:["Extend"],events:["onSetParams"]},_construct:function(){var e=this;e.build.params||(e.build.params={}),e.build._update.params||(e.build._update.params={}),e.build._inherit&&(e.build.params=cm.merge(e.build._inherit.prototype.params,e.build.params))},_render:function(){this._inherit&&(this.params=cm.merge(this._inherit.prototype.params,this.params))},setParams:function(e,t){var n=this;return t=!cm.isUndefined(t)&&t,n.params=cm.merge(t?n._raw.params:n.params,e),n._update=cm.clone(n._update),n._update.params=cm.merge(n._update.params,n.params),cm.forEach(n.params,function(e,t){switch(t){case"strings":case"langs":cm.isFunction(n.setLangs)&&n.setLangs(e);break;default:switch(e){case"document.window":n.params[t]=window;break;case"document.html":cm.getDocumentHtml()&&(n.params[t]=cm.getDocumentHtml());break;case"document.body":document.body&&(n.params[t]=document.body);break;case"top.document.body":window.top.document.body&&(n.params[t]=window.top.document.body);break;case"document.head":cm.getDocumentHead()&&(n.params[t]=cm.getDocumentHead());break;default:/^cm._config./i.test(e)&&(n.params[t]=cm._config[e.replace("cm._config.","")]),/^@LESS./i.test(e)&&(n.params[t]=window.LESS[e.replace("@LESS.","")])}}}),n._modules.Events&&n.triggerEvent("onSetParams"),n},getParams:function(e){return e?this.params[e]:this.params}},Mod.Events={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){var t=this;t.build.events={},cm.forEach(t.build._raw.events,function(e){t.build.events[e]=[]}),t.build.params.events||(t.build.params.events={}),t.build._inherit&&(t.build.params.events=cm.extend(t.build._inherit.prototype.params.events,t.build.params.events,!0),t.build.events=cm.extend(t.build._inherit.prototype.events,t.build.events,!0))},_render:function(){var e=this;e._inherit&&(e.params.events=cm.extend(e._inherit.prototype.params.events,e.params.events,!0),e.events=cm.extend(e._inherit.prototype.events,e.events,!0))},addEvent:function(e,t){var n=this;return n.events=cm.clone(n.events),n.events[e]?cm.isFunction(t)?n.events[e].push(t):cm.errorLog({name:n._name.full,message:["Handler of event",cm.strWrap(e,'"'),"must be a function."].join(" ")}):cm.errorLog({type:"attention",name:n._name.full,message:[cm.strWrap(e,'"'),"does not exists."].join(" ")}),n},addEvents:function(e){return e&&this.convertEvents(e),this},removeEvent:function(e,t){var n=this;return n.events=cm.clone(n.events),n.events[e]?cm.isFunction(t)?n.events[e]=n.events[e].filter(function(e){return e!==t}):cm.errorLog({name:n._name.full,message:["Handler of event",cm.strWrap(e,'"'),"must be a function."].join(" ")}):cm.errorLog({type:"attention",name:n._name.full,message:[cm.strWrap(e,'"'),"does not exists."].join(" ")}),n},triggerEvent:function(e,t){var n,a=this,o=cm.clone(arguments);if((o[0]=a).events[e])for(var r=0,s=(n=a.events[e].slice()).length;r<s;r++)n[r].apply(a,o);else cm.errorLog({type:"attention",name:a._name.full,message:[cm.strWrap(e,'"'),"does not exists."].join(" ")});return a},hasEvent:function(e){return!!this.events[e]},convertEvents:function(e){var n=this;return cm.forEach(e,function(e,t){cm.isArray(e)?cm.forEach(e,function(e){n.addEvent(t,e)}):n.addEvent(t,e)}),n}},Mod.Langs={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){this.build.strings||(this.build.strings={}),this.build.params.langs||(this.build.params.langs={})},_render:function(){this.strings=cm.merge(this.strings,this.params.langs)},lang:function(e,t,n){var a;return cm.isUndefined(e)||cm.isEmpty(e)?"":(a=cm.objectPath(e,this.params.langs),cm.isUndefined(a)&&(a=cm.objectPath(e,this.strings)),cm.isUndefined(a)&&this._inherit&&(a=this._inherit.prototype.lang(e)),cm.isUndefined(a)&&(a=e),a=cm.isObject(a)||cm.isArray(a)?cm.objectReplace(a,t):cm.strReplace(a,t),!cm.isUndefined(n)&&cm.isArray(a)&&(a=cm.plural(n,a)),a)},msg:function(){return this.lang.apply(this,arguments)},langObject:function(e){var t=this.lang(e);return cm.isObject(t)||cm.isArray(t)?t:{}},setLangs:function(e){var t=this;return cm.isObject(e)&&(cm.isFunction(t)?t.prototype.strings=cm.merge(t.prototype.strings,e):t.strings=cm.merge(t.strings,e)),t}},Mod.DataConfig={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){cm.isUndefined(this.build.params.configDataMarker)&&(this.build.params.configDataMarker="data-config")},getDataConfig:function(e,t){var n;return cm.isNode(e)&&(t=t||this.params.configDataMarker,(n=(n=e.getAttribute(t))&&cm.parseJSON(n))&&this.setParams(n)),this},getNodeDataConfig:function(e,t){var n;return cm.isNode(e)&&(t=t||this.params.configDataMarker,n=(n=e.getAttribute(t))&&cm.parseJSON(n))?n:{}}},Mod.DataNodes={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){var e=this;e.build.params.nodes||(e.build.params.nodes={}),e.build.params.nodesDataMarker="data-node",e.build.params.nodesMarker=e.build._name.short,e.build.nodes||(e.build.nodes={}),e.build._inherit&&(e.build.params.nodes=cm.merge(e.build._inherit.prototype.params.nodes,e.build.params.nodes),e.build.nodes=cm.merge(e.build._inherit.prototype.nodes,e.build.nodes))},getDataNodes:function(e,t,n){var a=this,o={};return(e=cm.isUndefined(e)?document.body:e)&&(t=cm.isUndefined(t)?a.params.nodesDataMarker:t,o=(n=cm.isUndefined(n)?a.params.nodesMarker:n)?cm.getNodes(e,t)[n]||{}:cm.getNodes(e,t),a.nodes=cm.merge(a.nodes,o)),a.nodes=cm.merge(a.nodes,a.params.nodes),a},getDataNodesObject:function(e,t,n){return e=void 0===e?document.body:e,t=void 0===t?this.params.nodesDataMarker:t,(n=void 0===n?this.params.nodesMarker:n)?cm.getNodes(e,t)[n]||{}:cm.getNodes(e,t)}},Mod.Storage={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){this.build.params.name||(this.build.params.name="")},storageRead:function(e,t){var n=this,a=t?"sessionStorageGet":"storageGet",o=JSON.parse(cm[a](n._className))||{};return cm.isEmpty(n.params.name)?(cm.errorLog({type:"error",name:n._className,message:'Storage cannot be read because "name" parameter not provided.'}),null):!o[n.params.name]||cm.isUndefined(o[n.params.name][e])?(cm.errorLog({type:"attention",name:n._className,message:["Parameter",cm.strWrap(e,'"'),"does not exist or is not set in component with name",cm.strWrap(n.params.name,'"'),"."].join(" ")}),null):o[n.params.name][e]},storageReadAll:function(e){var t=this,n=e?"sessionStorageGet":"storageGet",a=JSON.parse(cm[n](t._className))||{};return cm.isEmpty(t.params.name)?(cm.errorLog({type:"error",name:t._className,message:'Storage cannot be read because "name" parameter not provided.'}),{}):a[t.params.name]?a[t.params.name]:(cm.errorLog({type:"attention",name:t._className,message:"Storage is empty."}),{})},storageWrite:function(e,t,n){var a=this,o=n?"sessionStorageGet":"storageGet",r=JSON.parse(cm[o](a._className))||{};return cm.isEmpty(a.params.name)?(cm.errorLog({type:"error",name:a._className,message:'Storage cannot be written because "name" parameter not provided.'}),{}):(r[a.params.name]||(r[a.params.name]={}),r[a.params.name][e]=t,cm[o=n?"sessionStorageSet":"storageSet"](a._className,JSON.stringify(r)),r[a.params.name])},storageWriteAll:function(e,t){var n=this,a=t?"sessionStorageGet":"storageGet",o=JSON.parse(cm[a](n._className))||{};return cm.isEmpty(n.params.name)?(cm.errorLog({type:"error",name:n._className,message:'Storage cannot be written because "name" parameter not provided.'}),{}):(o[n.params.name]=e,cm[a=t?"sessionStorageSet":"storageSet"](n._className,JSON.stringify(o)),o[n.params.name])},storageClear:function(e,t){var n=this,a=t?"sessionStorageGet":"storageGet",o=JSON.parse(cm[a](n._className))||{};return cm.isEmpty(n.params.name)?(cm.errorLog({type:"error",name:n._className,message:'Storage cannot be written because "name" parameter not provided.'}),{}):(o[n.params.name]||(o[n.params.name]={}),delete o[n.params.name][e],cm[a=t?"sessionStorageSet":"storageSet"](n._className,JSON.stringify(o)),o[n.params.name])}},Mod.Callbacks={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){var e=this;e.build.params.callbacks||(e.build.params.callbacks={}),e.build.callbacks={},e.build._callbacks={},e.build._inherit&&(e.build.params.callbacks=cm.extend(e.build._inherit.prototype.params.callbacks,e.build.params.callbacks),e.build.callbacks=cm.extend(e.build._inherit.prototype.callbacks,e.build.callbacks))},_render:function(){var e=this;e._inherit&&(e.params.callbacks=cm.merge(e._inherit.prototype.params.callbacks,e.params.callbacks),e.callbacks=cm.extend(e._inherit.prototype.callbacks,e.callbacks))},callbacksProcess:function(){var n=this;return n.callbacks=cm.clone(n.callbacks),cm.forEach(n.callbacks,function(e,t){n._callbacks[t]=e}),cm.forEach(n.params.callbacks,function(e,t){n.callbacks[t]=e}),n},callbacksRestore:function(){var n=this;return n.callbacks=cm.clone(n.callbacks),cm.forEach(n._callbacks,function(e,t){n.callbacks[t]=e}),n}},Mod.Stack={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){this.build.params.name||(this.build.params.name=""),this.build._stack=[]},addToStack:function(e){var t=this,n=cm.isNumber(t.params.name)?t.params.name.toString():t.params.name;return t._stackItem?cm.isNode(e)&&(t._stackItem.node=e):(t._stackItem={name:n,node:e,class:t,className:t._name.full},t._stack.push(t._stackItem)),t},removeFromStack:function(){return cm.arrayRemove(this._stack,this._stackItem),this._stackItem=null,this},isAppropriateToStack:function(e,t,n){var a=this._stackItem;return e=cm.isNumber(e)?e.toString():e,n=cm.isFunction(n)?n:function(){},!(!cm.isEmpty(e)&&a.name!==e||!cm.isEmpty(t)&&!cm.isParent(t,a.node,!0))&&(n(a.class,a,e),!0)},findInStack:function(t,n,a){var o=[];return t=cm.isNumber(t)?t.toString():t,a=cm.isFunction(a)?a:function(){},cm.forEach(this._stack,function(e){!cm.isEmpty(t)&&e.name!==t||!cm.isEmpty(n)&&!cm.isParent(n,e.node,!0)||(o.push(e),a(e.class,e,t))}),o},getStackNode:function(){return this._stackItem?this._stackItem.node:null}},Mod.Structure={_config:{extend:!0,predefine:!1,require:["Extend"]},_construct:function(){cm.isUndefined(this.build.params.renderStructure)&&(this.build.params.renderStructure=!0),cm.isUndefined(this.build.params.embedStructure)&&(this.build.params.embedStructure="append")},embedStructure:function(e){var t=this;switch(t.params.embedStructure){case"replace":t.replaceStructure(e);break;case"append":t.appendStructure(e,"insertLast");break;case"first":t.appendStructure(e,"insertFirst")}return t},appendStructure:function(e,t){var n=this.params.container||this.params.node;return n&&cm[t](e,n),this},replaceStructure:function(e){var t=this;return t.params.container?t.params.container===t.params.node?cm.insertBefore(e,t.params.node):t.params.container.appendChild(e):t.params.node&&cm.insertBefore(e,t.params.node),cm.remove(t.params.node),t}},Part.Menu=function(){function o(e){a=cm.getPageSize();var t=e.drop.offsetWidth,n=cm.getX(e.node);t+(e.node.parentNode&&cm.isClass(e.node.parentNode,"pt__menu-dropdown")?e.node.parentNode.offsetWidth:0)+n>=a.winWidth?cm.replaceClass(e.drop,"pull-left","pull-right"):cm.replaceClass(e.drop,"pull-right","pull-left")}function r(e,t){var n=cm.getEventTarget(e);cm.isParent(t.drop,n,!0)||o(t)}function s(e,t){var n;cm._pageSize.winWidth>cm._config.adaptiveFrom&&!t._show&&(t._interval&&clearTimeout(t._interval),t._interval=setTimeout(function(){t._show=!1},500),t._show=!0,n=cm.getEventTarget(e),cm.isParent(t.drop,n,!0)||(cm.isClass(t.node,"is-show")?cm.removeClass(t.node,"is-show"):(cm.preventDefault(e),cm.addClass(t.node,"is-show"))))}function i(e,t){var n=cm.getEventTarget(e);cm.isParent(t.node,n,!0)||cm.removeClass(t.node,"is-show")}var a,c=[];return function(e){e=cm.isUndefined(e)?document.body:e;var n,t=cm.getByClass("pt__menu",e),a=[];cm.forEach(t,function(e){var t;cm.inArray(c,e)||cm.hasClass(e,"is-manual")||((n={node:e,drop:cm.getByClass("pt__menu-dropdown",e)[0]}).drop&&(t=n,cm.addEvent(t.node,"pointerenter",function(e){r(e,t)}),cm.addEvent(t.node,"touchenter",function(e){r(e,t)}),cm.addEvent(t.node,"mouseover",function(e){r(e,t)}),cm.addEvent(t.node,"pointerdown",function(e){s(e,t)}),cm.addEvent(t.node,"touchstart",function(e){s(e,t)}),cm.addEvent(t.node,"mousedown",function(e){s(e,t)}),cm.addEvent(document.body,"pointerdown",function(e){i(e,t)}),cm.addEvent(document.body,"touchstart",function(e){i(e,t)}),cm.addEvent(document.body,"mousedown",function(e){i(e,t)}),o(t)),a.push(n),c.push(e))}),cm.addEvent(window,"resize",function(){cm.forEach(a,function(e){o(e)})})}}(),Part.Autoresize=function(){function t(e){var t,n,a,o,r,s;cm.inArray(i,e)||(cm.isNode(e)&&"textarea"===e.tagName.toLowerCase()&&(r=cm.getStyle(e,"lineHeight",!0),s=cm.getStyle(e,"paddingTop",!0)+cm.getStyle(e,"paddingBottom",!0)+cm.getStyle(e,"borderTopWidth",!0)+cm.getStyle(e,"borderBottomWidth",!0),cm.addEvent(e,"scroll",function(){e.scrollTop=0}),t=setInterval(function(){e&&cm.inDOM(e)||clearInterval(t),a=n,o=e.value.match(/\n/g),(n=o?o.length:0)!==a&&(e.style.height=[(n+1)*r+s,"px"].join(""))},5)),i.push(e))}var n,i=[];return function(e){e=cm.isUndefined(e)?document.body:e,n=cm.getByClass("cm-autoresize",e),cm.forEach(n,t)}}(),cm.init=function(){var e,t,n,a,o,r,s,i,c,d=function(){animFrame(function(){p(),h()})},l=function(){animFrame(function(){u(),p(),h()})},m=function(){void 0!==Com.UA&&Com.UA.setBrowserClass()},u=(a=cm.getDocumentHtml(),function(){e=cm.getPageSize(),t=e.winWidth,n=e.winHeight,cm.removeClass(a,["is",cm._deviceType].join("-")),cm.removeClass(a,["is",cm._deviceOrientation].join("-")),cm._deviceOrientation=t<n?"portrait":"landscape",t>cm._config.screenTablet&&(cm._deviceType="desktop"),t<=cm._config.screenTablet&&t>cm._config.screenMobile&&(cm._deviceType="tablet"),t<=cm._config.screenMobile&&(cm._deviceType="mobile"),t<=cm._config.adaptiveFrom?cm._adaptive=!0:cm._adaptive=!1,cm.addClass(a,["is",cm._deviceType].join("-")),cm.addClass(a,["is",cm._deviceOrientation].join("-"))}),p=function(){cm._scrollSize=cm.getScrollBarSize(),o!==cm._scrollSize&&(o=cm._scrollSize,cm.customEvent.trigger(window,"scrollSizeChange",{direction:"all",self:!0,scrollSize:cm._scrollSize}))},h=function(){cm._pageSize=cm.getPageSize(),s=JSON.stringify(cm._pageSize),r!==s&&(r=s,cm.customEvent.trigger(window,"pageSizeChange",{direction:"all",self:!0,pageSize:cm._pageSize}))},g=(c=document.body,function(e){cm._clientPosition=cm.getEventClientPosition(e)});cm._isDocumentReady=!0,m(),u(),p(),h(),cm.addEvent(window,"mousemove",g),cm.addEvent(window,"resize",l),setInterval(d,50)},cm.load=function(){cm._isDocumentLoad=!0,cm._config.redrawOnLoad&&cm.customEvent.trigger(document.body,"redraw",{direction:"child",self:!1})},cm.onReady(cm.init,!1),cm.onLoad(cm.load,!1),cm.diff=function(e,t){if(!t||"[object Object]"!==Object.prototype.toString.call(t))return e;var n,a={};for(n in e)e.hasOwnProperty(n)&&cm.diffCompare(a,e[n],t[n],n);for(n in t)t.hasOwnProperty(n)&&(e[n]||e[n]===t[n]||(a[n]=t[n]));return a},cm.diffCompare=function(e,t,n,a){var o,r=Object.prototype.toString.call(t),s=Object.prototype.toString.call(n);"[object Undefined]"!==s?r===s?"[object Object]"!==r?"[object Array]"!==r?"[object Function]"===r?t.toString()!==n.toString()&&(e[a]=n):t!==n&&(e[a]=n):cm.diffArraysMatch(t,n)||(e[a]=n):(o=cm.diff(t,n),0<Object.keys(o).length&&(e[a]=o)):e[a]=n:e[a]=null},cm.diffArraysMatch=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},cm.define("Com.AbstractController",{modules:["Params","Events","Langs","Structure","DataConfig","DataNodes","Storage","Callbacks","Stack"],events:["onConstruct","onConstructStart","onConstructProcess","onConstructEnd","onInitComponentsStart","onInitComponentsEnd","onGetLESSVariables","onGetLESSVariablesStart","onGetLESSVariablesProcess","onGetLESSVariablesEnd","onValidateParams","onValidateParamsStart","onValidateParamsProcess","onValidateParamsEnd","onRenderStart","onRender","onRenderEnd","onBeforeRender","onAfterRender","onRenderViewModel","onDestruct","onDestructStart","onDestructProcess","onDestructEnd","onRedraw","onScroll","onSetEvents","onSetEventsStart","onSetEventsProcess","onSetEventsEnd","onUnsetEvents","onUnsetEventsStart","onUnsetEventsProcess","onUnsetEventsEnd","onSetCustomEvents","onUnsetCustomEvents","onRenderViewStart","onRenderViewProcess","onRenderViewEnd"],params:{node:null,container:null,name:"",getDataNodes:!0,getDataConfig:!0,embedStructure:"append",renderStructure:!0,embedStructureOnRender:!0,redrawOnRender:"immediately",removeOnDestruct:!1,className:"",controllerEvents:!1,customEvents:!0,resizeEvent:!0,resizeNode:window,scrollEvent:!1,scrollNode:window,collector:null,constructCollector:!1,destructCollector:!1}},function(e){this.isDestructed=!1,this.nodes={},this.components={},this.construct(e)}),cm.getConstructor("Com.AbstractController",function(e,t,n,a){n.construct=function(e){var t=this;return t.redrawHandler=t.redraw.bind(t),t.scrollHandler=t.scroll.bind(t),t.destructHandler=t.destruct.bind(t),t.constructCollectorHandler=t.constructCollector.bind(t),t.destructCollectorHandler=t.destructCollector.bind(t),t.params.controllerEvents&&t.bindControllerEvents(),t.triggerEvent("onConstructStart"),t.renderComponent(),t.initComponents(),t.getLESSVariables(),t.setParams(e),t.convertEvents(t.params.events),t.params.getDataNodes&&t.getDataNodes(t.params.node),t.params.getDataConfig&&t.getDataConfig(t.params.node),t.callbacksProcess(),t.validateParams(),t.addToStack(t.params.node),t.triggerEvent("onConstruct"),t.triggerEvent("onRenderStart"),t.triggerEvent("onBeforeRender"),t.render(),t.triggerEvent("onAfterRender"),t.triggerEvent("onConstructProcess"),t.addToStack(t.nodes.container),t.setEvents(),t.triggerEvent("onRender"),t.triggerEvent("onRenderEnd"),t.triggerEvent("onConstructEnd"),t},n.destruct=function(){var e=this;return e.isDestructed||(e.isDestructed=!0,e.triggerEvent("onDestructStart"),e.triggerEvent("onDestruct"),e.triggerEvent("onDestructProcess"),cm.customEvent.trigger(e.getStackNode(),"destruct",{direction:"child",self:!1}),e.unsetEvents(),e.params.removeOnDestruct&&cm.remove(e.getStackNode()),e.removeFromStack(),e.triggerEvent("onDestructEnd")),e},n.redraw=function(e){var t=this;switch(e){case"full":cm.customEvent.trigger(t.nodes.container,"redraw",{direction:"child",self:!0});break;case"immediately":t.triggerEvent("onRedraw");break;default:animFrame(function(){t.triggerEvent("onRedraw")})}return t},n.scroll=function(e){var t=this;return"immediately"===e?t.triggerEvent("onScroll"):animFrame(function(){t.triggerEvent("onScroll")}),t},n.bindControllerEvents=function(){var t=this;return cm.forEach(t._raw.events,function(e){t[e]||(t[e]=function(){}),t[e+"Handler"]||(t[e+"Handler"]=t[e].bind(t)),t.addEvent(e,t[e+"Handler"])}),t},n.initComponents=function(){return this.triggerEvent("onInitComponentsStart"),this.triggerEvent("onInitComponentsEnd"),this},n.getLESSVariables=function(){var e=this;return e.triggerEvent("onGetLESSVariablesStart"),e.triggerEvent("onGetLESSVariables"),e.triggerEvent("onGetLESSVariablesProcess"),e.triggerEvent("onGetLESSVariablesEnd"),e},n.validateParams=function(){var e=this;return e.triggerEvent("onValidateParamsStart"),e.triggerEvent("onValidateParams"),e.triggerEvent("onValidateParamsProcess"),e.triggerEvent("onValidateParamsEnd"),e},n.render=function(){var e=this;return e.params.renderStructure&&e.renderView(),e.setAttributes(),e.renderViewModel(),e.params.embedStructureOnRender&&(e.embedStructure(e.nodes.container),!0===e.params.redrawOnRender?e.redraw():cm.isString(e.params.redrawOnRender)&&e.redraw(e.params.redrawOnRender)),e},n.renderView=function(){var e=this;return e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__abstract"}),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd"),e},n.renderViewModel=function(){return this.triggerEvent("onRenderViewModel"),this},n.setAttributes=function(){return cm.addClass(this.nodes.container,this.params.className),this},n.setEvents=function(){var e=this;return e.triggerEvent("onSetEventsStart"),e.params.resizeEvent&&cm.addEvent(e.params.resizeNode,"resize",e.redrawHandler),e.params.scrollEvent&&cm.addEvent(e.params.scrollNode,"scroll",e.scrollHandler),e.triggerEvent("onSetEvents"),e.triggerEvent("onSetEventsProcess"),e.params.customEvents&&(cm.customEvent.add(e.getStackNode(),"redraw",e.redrawHandler),cm.customEvent.add(e.getStackNode(),"destruct",e.destructHandler),e.triggerEvent("onSetCustomEvents")),e.triggerEvent("onSetEventsEnd"),e},n.unsetEvents=function(){var e=this;return e.triggerEvent("onUnsetEventsStart"),e.params.resizeEvent&&cm.removeEvent(e.params.resizeNode,"resize",e.redrawHandler),e.params.scrollEvent&&cm.removeEvent(e.params.scrollNode,"scroll",e.scrollHandler),e.triggerEvent("onUnsetEvents"),e.triggerEvent("onUnsetEventsProcess"),e.params.customEvents&&(cm.customEvent.remove(e.getStackNode(),"redraw",e.redrawHandler),cm.customEvent.remove(e.getStackNode(),"destruct",e.destructHandler),e.triggerEvent("onUnsetCustomEvents")),e.triggerEvent("onUnsetEventsEnd"),e},n.constructCollector=function(t){var e=this;return t=cm.isUndefined(t)?e.getStackNode():t,e.params.constructCollector&&(e.params.collector?e.params.collector.construct(t):cm.find("Com.Collector",null,null,function(e){e.construct(t)})),e},n.destructCollector=function(t){var e=this;return t=cm.isUndefined(t)?e.getStackNode():t,e.params.destructCollector&&(e.params.collector?e.params.collector.destruct(t):cm.find("Com.Collector",null,null,function(e){e.destruct(t)})),e}}),cm.define("Com.AbstractContainer",{extend:"Com.AbstractController",events:["onOpen","onOpenEnd","onClose","onOpenPlaceholder","onOpenPlaceholderEnd","onClosePlaceholder","onRenderControllerStart","onRenderControllerProcess","onRenderController","onRenderControllerEnd","onRenderPlaceholderStart","onRenderPlaceholderProcess","onRenderPlaceholderEnd","onRenderPlaceholderViewStart","onRenderPlaceholderViewProcess","onRenderPlaceholderViewEnd"],params:{embedStructure:"none",controllerEvents:!0,constructor:null,params:{},placeholder:!1,placeholderConstructor:null,placeholderParams:{},destructOnClose:!0,openOnConstruct:!1},strings:{title:"Container",close:"Close",save:"Save",help:""}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.AbstractContainer",function(e,t,n,a){n.construct=function(){var e=this;e.isOpen=!1,e.targetNode=null,e.openHandler=e.open.bind(e),e.closeHandler=e.close.bind(e),e.afterOpenControllerHandler=e.afterOpenController.bind(e),e.afterOpenControllerEndHandler=e.afterOpenControllerEnd.bind(e),e.afterCloseControllerHandler=e.afterCloseController.bind(e),e.afterOpenPlaceholderHandler=e.afterOpenPlaceholder.bind(e),e.afterOpenPlaceholderEndHandler=e.afterOpenPlaceholderEnd.bind(e),e.afterClosePlaceholderHandler=e.afterClosePlaceholder.bind(e),a.prototype.construct.apply(e,arguments)},n.onDestructProcess=function(){this.destructPlaceholder(),this.destructController()},n.validateParams=function(){var e=this;e.triggerEvent("onValidateParamsStart"),e.triggerEvent("onValidateParams"),e.triggerEvent("onValidateParamsProcess"),e.params.params.node=e.params.node,e.params.params.container=e.params.container,e.triggerEvent("onValidateParamsEnd")},n.open=function(e){e&&cm.preventDefault(e);return this.params.placeholder?this.openPlaceholder():this.openController(),this},n.close=function(e){e&&cm.preventDefault(e);return this.params.placeholder?this.closePlaceholder():this.closeController(),this},n.getController=function(){return this.components.controller},n.getPlaceholder=function(){return this.components.placeholder},n.render=function(){var e=this;e.nodes.button?e.setTarget(e.nodes.button):e.setTarget(e.params.node),e.params.openOnConstruct&&e.open()},n.setTarget=function(e){var t=this;return t.targetNode&&(cm.removeEvent(t.targetNode,"click",t.openHandler),t.targetNode=null),cm.isNode(e)&&(t.targetNode=e,cm.addEvent(e,"click",t.openHandler)),t},n.renderController=function(){var t=this;cm.getConstructor(t.params.constructor,function(e){t.triggerEvent("onRenderControllerStart",arguments),t.renderControllerView(),t.components.controller=t.constructController(e),t.triggerEvent("onRenderControllerProcess",t.components.controller),t.renderControllerEvents(),t.triggerEvent("onRenderController",t.components.controller),t.triggerEvent("onRenderControllerEnd",t.components.controller)})},n.renderControllerView=function(){},n.constructController=function(e){var t=this;return new e(cm.merge(t.params.params,{opener:t,container:t.params.placeholder?t.nodes.placeholder.content:t.params.container,content:t.params.params.content||t.params.content}))},n.renderControllerEvents=function(){var e=this;e.components.controller.addEvent("onOpen",e.afterOpenControllerHandler),e.components.controller.addEvent("onOpenEnd",e.afterOpenControllerEndHandler),e.components.controller.addEvent("onClose",e.afterCloseControllerHandler)},n.destructController=function(){this.components.controller&&this.components.controller.destruct&&this.components.controller.destruct()},n.openController=function(){var e=this;e.components.controller&&!e.components.controller.isDestructed||e.renderController(),e.components.controller&&e.components.controller.open?e.components.controller.open():e.afterOpenController()},n.closeController=function(){this.components.controller&&this.components.controller.close?this.components.controller.close():this.afterCloseController()},n.afterOpenController=function(){this.isOpen=!0,this.triggerEvent("onOpen",this.components.controller)},n.afterOpenControllerEnd=function(){this.isOpen=!0,this.triggerEvent("onOpenEnd",this.components.controller)},n.afterCloseController=function(){var e=this;e.isOpen=!1,e.params.destructOnClose&&e.destructController(),e.triggerEvent("onClose",e.components.controller)},n.renderPlaceholder=function(){var t=this;cm.getConstructor(t.params.placeholderConstructor,function(e){t.triggerEvent("onRenderPlaceholderStart",arguments),t.renderPlaceholderView(),t.components.placeholder=t.constructPlaceholder(e),t.renderPlaceholderButtons(),t.triggerEvent("onRenderPlaceholderProcess",t.components.placeholder),t.renderPlaceholderEvents(),t.triggerEvent("onRenderPlaceholderEnd",t.components.placeholder)})},n.constructPlaceholder=function(e){return new e(cm.merge(this.params.placeholderParams,{opener:this,content:this.nodes.placeholder}))},n.renderPlaceholderView=function(){var e=this;e.triggerEvent("onRenderPlaceholderViewStart"),e.nodes.placeholder={},e.nodes.placeholder.title=cm.textNode(e.lang("title")),e.nodes.placeholder.content=cm.node("div",{class:"com__container__content"}),e.nodes.placeholder.help=e.lang("help"),e.triggerEvent("onRenderPlaceholderViewProcess"),e.triggerEvent("onRenderPlaceholderViewEnd")},n.renderPlaceholderButtons=function(){this.components.placeholder.addButton({name:"close",label:this.lang("close"),style:"button-primary",callback:this.closeHandler})},n.renderPlaceholderEvents=function(){var e=this;e.components.placeholder.addEvent("onOpen",e.afterOpenPlaceholderHandler),e.components.placeholder.addEvent("onOpenEnd",e.afterOpenPlaceholderEndHandler),e.components.placeholder.addEvent("onClose",e.afterClosePlaceholderHandler)},n.destructPlaceholder=function(){this.components.placeholder&&this.components.placeholder.destruct&&this.components.placeholder.destruct()},n.openPlaceholder=function(){var e=this;e.components.placeholder&&!e.components.placeholder.isDestructed||e.renderPlaceholder(),e.components.placeholder&&e.components.placeholder.open?e.components.placeholder.open():e.afterOpenPlaceholder()},n.closePlaceholder=function(){this.components.placeholder&&this.components.placeholder.close?this.components.placeholder.close():this.afterClosePlaceholder()},n.afterOpenPlaceholder=function(){this.openController(),this.constructCollector(),this.triggerEvent("onOpenPlaceholder",this.components.placeholder)},n.afterOpenPlaceholderEnd=function(){this.afterOpenControllerEnd(),this.triggerEvent("onOpenPlaceholderEnd",this.components.placeholder)},n.afterClosePlaceholder=function(){var e=this;e.closeController(),e.params.destructOnClose&&(e.destructPlaceholder(),e.destructCollector()),e.triggerEvent("onClosePlaceholder",e.components.placeholder)}}),cm.define("Com.AbstractInput",{extend:"Com.AbstractController",events:["onSet","onSelect","onInput","onChange","onClear","onReset","onDisable","onEnable","onRenderContent","onRenderContentStart","onRenderContentProcess","onRenderContentEnd"],params:{embedStructure:"replace",renderStructure:!0,renderHiddenContent:!0,renderStructureContent:!0,hiddenType:"hidden",value:"",defaultValue:"",isValueOption:!1,id:"",title:"",placeholder:"",autocomplete:null,ariaLabel:"",disabled:!1,className:"",contentClassName:"",adaptive:!0,ui:!0,size:"full",justify:"left",required:!1,minLength:0,maxLength:0,min:0,max:0,setHiddenInput:!0,setContentInput:!0}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.AbstractInput",function(e,t,n,a){n.construct=function(e){var t=this;t.nodes={},t.components={},t.previousValue=null,t.value=null,t.valueText=null,t.valueOption=null,t.rawValue=null,t.tempRawValue=null,t.disabled=!1,t.setHandler=t.set.bind(t),t.getHandler=t.get.bind(t),t.clearHandler=t.clear.bind(t),t.enableHandler=t.enable.bind(t),t.disableHandler=t.disable.bind(t),t.clearEventHandler=t.clearEvent.bind(t),t.setActionHandler=t.setAction.bind(t),t.selectActionHandler=t.selectAction.bind(t),t.afterRenderHandler=t.afterRender.bind(t),t.addEvent("onAfterRender",t.afterRenderHandler),a.prototype.construct.apply(t,arguments)},n.set=function(e,t){return t=!!cm.isUndefined(t)||t,this.selectAction(e,t),this.setAction(e,t),this.changeAction(t),this},n.get=function(){return this.value},n.getText=function(){return this.valueText},n.getRaw=function(){return this.rawValue},n.reset=n.clear=function(e){var t=this;return t.isDestructed||((e=!!cm.isUndefined(e)||e)&&t.triggerEvent("onClear"),e&&t.triggerEvent("onReset"),t.set(t.params.defaultValue,e)),t},n.enable=function(){var e=this;return e.disabled&&(e.disabled=!1,cm.removeClass(e.nodes.container,"disabled"),cm.removeClass(e.nodes.contentContainer,"disabled"),e.triggerEvent("onEnable")),e},n.disable=function(){var e=this;return e.disabled||(e.disabled=!0,cm.addClass(e.nodes.container,"disabled"),cm.addClass(e.nodes.contentContainer,"disabled"),e.triggerEvent("onDisable")),e},n.clearEvent=function(e){return cm.preventDefault(e),this.clear(),this},n.validateParams=function(){var e=this;return e.triggerEvent("onValidateParamsStart"),cm.isNode(e.params.node)&&(e.params.id=e.params.node.getAttribute("id")||e.params.id,e.params.title=e.params.node.getAttribute("title")||e.params.title,e.params.name=e.params.node.getAttribute("name")||e.params.name,e.params.disabled=e.params.node.disabled||e.params.node.readOnly||e.params.disabled,e.params.required=e.params.node.required||e.params.required,e.params.minLength=e.params.node.getAttribute("minlength")||e.params.minLength,e.params.maxLength=e.params.node.getAttribute("maxlength")||e.params.maxLength,e.params.min=e.params.node.getAttribute("min")||e.params.min,e.params.max=e.params.node.getAttribute("max")||e.params.max,e.params.placeholder=e.params.node.getAttribute("placeholder")||e.params.placeholder,e.params.autocomplete=e.params.node.getAttribute("autocomplete")||e.params.autocomplete,e.params.ariaLabel=e.params.node.getAttribute("aria-label")||e.params.ariaLabel),e.triggerEvent("onValidateParams"),e.triggerEvent("onValidateParamsProcess"),e.validateParamsValue(),e.triggerEvent("onValidateParamsEnd"),e},n.validateParamsValue=function(){var e,t,n=this;cm.isNode(n.params.node)&&(e=n.params.node.getAttribute("data-value"),t=n.params.node.getAttribute("value"),cm.isEmpty(t)&&(t=n.params.node.value),n.params.isValueOption&&!cm.isEmpty(e)&&(t=cm.parseJSON(e)),n.params.value=cm.isEmpty(t)?n.params.value:t),n.params.value=cm.isEmpty(n.params.value)?n.params.defaultValue:n.params.value},n.afterRender=function(){var e=this;return e.set(e.params.value,!1),e.params.disabled&&e.disable(),e},n.renderView=function(){var e=this;return e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__input"}),e.nodes.hiddenContainer=e.renderHiddenContent(),e.nodes.hidden=e.nodes.hiddenContent.input,e.params.renderHiddenContent&&cm.appendChild(e.nodes.hiddenContainer,e.nodes.container),cm.appendChild(e.nodes.contentContainer,e.nodes.container),e.params.renderStructureContent&&(e.nodes.contentContainer=e.renderContent(),cm.appendChild(e.nodes.contentContainer,e.nodes.container)),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd"),e},n.renderHiddenContent=function(){var e={};switch(this.nodes.hiddenContent=e,this.params.hiddenType){case"textarea":e.container=e.input=cm.node("textarea",{class:"display-none"});break;case"hidden":default:e.container=e.input=cm.node("input",{type:"hidden"})}return e.container},n.renderContent=function(){var e=this,t={};return e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"input__content"}),e.triggerEvent("onRenderContent"),e.triggerEvent("onRenderContentProcess"),e.triggerEvent("onRenderContentEnd"),t.container},n.setAttributes=function(){var t=this;return a.prototype.setAttributes.apply(t,arguments),t.setHiddenAttributes(),cm.isNode(t.params.node)&&cm.forEach(t.params.node.attributes,function(e){/^data-(?!node|element|config)/.test(e.name)&&t.nodes.container.setAttribute(e.name,e.value)}),t.params.title&&t.nodes.container.setAttribute("title",t.lang(t.params.title)),t.params.adaptive&&cm.addClass(t.nodes.container,"is-adaptive"),cm.isEmpty(t.params.size)||cm.addClass(t.nodes.container,["size",t.params.size].join("-")),cm.isEmpty(t.params.justify)||cm.addClass(t.nodes.container,["pull",t.params.justify].join("-")),cm.addClass(t.nodes.content.container,t.params.contentClassName),t},n.setHiddenAttributes=function(){var t=this;t.nodes.hidden.required=t.params.required,!cm.isEmpty(t.params.minLength)&&0<t.params.minLength&&(t.nodes.hidden.minlength=t.params.minLength),!cm.isEmpty(t.params.maxLength)&&0<t.params.maxLength&&(t.nodes.hidden.maxlength=t.params.maxLength),!cm.isEmpty(t.params.min)&&0<t.params.min&&(t.nodes.hidden.min=t.params.min),!cm.isEmpty(t.params.max)&&0<t.params.max&&(t.nodes.hidden.max=t.params.max),cm.isNode(t.params.node)&&cm.forEach(t.params.node.attributes,function(e){/^data-(?!node|element|config)/.test(e.name)&&t.nodes.hidden.setAttribute(e.name,e.value)}),cm.isEmpty(t.params.name)||t.nodes.hidden.setAttribute("name",t.params.name)},n.validateValue=function(e){return e=this.validateValueHelper(e),e=cm.isEmpty(e)?this.validateValueHelper(this.params.defaultValue):e},n.validateValueHelper=function(e){return this.params.isValueOption&&!cm.isEmpty(e)&&(cm.isObject(e)?(e.value=cm.isEmpty(e.value)?e.text:e.value,e.text=cm.isEmpty(e.text)?e.value:e.text):e={value:e,text:e}),e},n.saveValue=function(e){var t=this;return t.rawValue=t.tempRawValue,t.previousValue=cm.clone(t.value),t.params.isValueOption?(t.value=e.value,t.valueText=e.text,t.valueOption=e):(t.value=e,t.valueText=e),t.params.setHiddenInput&&t.saveHiddenValue(t.value),t.params.setContentInput&&t.setData(t.valueText),t},n.saveHiddenValue=function(e){cm.isEmpty(e)?this.nodes.hidden.value="":cm.isObject(e)||cm.isArray(e)?this.nodes.hidden.value=cm.stringifyJSON(e):this.nodes.hidden.value=e},n.saveRawValue=function(e){this.tempRawValue=e},n.setData=function(e){},n.selectData=function(e){},n.selectAction=function(e,t){var n=this;return t=!!cm.isUndefined(t)||t,e=n.validateValue(e),n.saveRawValue(e),n.selectData(e),t&&n.triggerEvent("onSelect",e),t&&n.triggerEvent("onInput",e),n},n.setAction=function(e,t){var n=this;return t=!!cm.isUndefined(t)||t,e=n.validateValue(e),n.saveRawValue(e),n.saveValue(e),t&&n.triggerEvent("onSet",n.value),n},n.changeAction=function(e){var t=this;return(e=!!cm.isUndefined(e)||e)&&cm.stringifyJSON(t.value)!==cm.stringifyJSON(t.previousValue)&&t.triggerEvent("onChange",t.value),t}}),cm.define("Com.AbstractFileManager",{extend:"Com.AbstractController",events:["onSelect","onComplete","onGet","onRenderHolderStart","onRenderHolderProcess","onRenderHolderEnd","onRenderContentStart","onRenderContentProcess","onRenderContentEnd"],params:{embedStructure:"replace",controllerEvents:!0,max:0,lazy:!1,fullSize:!1,showStats:!0,statsConstructor:"Com.FileStats",statsParams:{embedStructure:"append",toggleBox:!1,inline:!0}}},function(e){var t=this;t.nodes={},t.components={},t.items=[],t.isMultiple=!1,Com.AbstractController.apply(t,arguments)}),cm.getConstructor("Com.AbstractFileManager",function(e,t,n,a){n.construct=function(){this.completeHandler=this.complete.bind(this),a.prototype.construct.apply(this,arguments)},n.validateParams=function(){return this.isMultiple=!this.params.max||1<this.params.max,this},n.get=function(){return this.triggerEvent("onGet",this.items),this},n.load=function(){return this.isLoaded||this.renderController(),this},n.complete=function(){return this.triggerEvent("onComplete",this.items),this},n.renderView=function(){var e=this;return e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__file-manager"},e.nodes.inner=cm.node("div",{class:"inner"},e.renderHolder(),e.renderContent())),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd"),e},n.renderHolder=function(){var e={};return this.triggerEvent("onRenderHolderStart"),e.container=cm.node("div",{class:"com__file-manager__holder"},e.inner=cm.node("div",{class:"inner"})),this.triggerEvent("onRenderHolderProcess"),this.nodes.holder=e,this.triggerEvent("onRenderHolderEnd"),e.container},n.renderContent=function(){var e={};return this.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"com__file-manager__content"}),this.triggerEvent("onRenderContentProcess"),this.nodes.content=e,this.triggerEvent("onRenderContentEnd"),e.container},n.renderViewModel=function(){var t=this;return t.params.showStats?cm.getConstructor(t.params.statsConstructor,function(e){t.components.stats=new e(cm.merge(t.params.statsParams,{container:t.nodes.content.container}))}):cm.remove(t.nodes.content.container),t.params.lazy||t.renderController(),t},n.renderController=function(){return this},n.setAttributes=function(){return a.prototype.setAttributes.apply(this,arguments),this.params.fullSize&&cm.addClass(this.nodes.container,"is-fullsize"),this},n.processFiles=function(e){var t,n=this,a=[];return cm.isArray(e)?a=e.map(function(e){return n.convertFile(e)}):cm.isObject(e)&&a.push(n.convertFile(e)),n.params.max?a.length?(t=Math.min(n.params.max,a.length),n.items=a.slice(0,t)):n.items=[]:n.items=a,n.triggerEvent("onSelect",n.items),n},n.convertFile=function(e){return e}}),cm.define("Com.AbstractFileManagerContainer",{extend:"Com.AbstractContainer",events:["onComplete","onGet"],params:{constructor:"Com.AbstractFileManager",params:{embedStructure:"append"},placeholder:!0,placeholderConstructor:"Com.DialogContainer",placeholderParams:{renderButtons:!0,params:{width:900}}},strings:{title_single:"Please select file",title_multiple:"Please select files",close:"Cancel",save:"Select"}},function(e){Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("Com.AbstractFileManagerContainer",function(e,t,n){var a=n._inherit;n.construct=function(){var e=this;return e.validateParamsEndHandler=e.validateParamsEnd.bind(e),e.renderControllerProcessHandler=e.renderControllerProcess.bind(e),e.getHandler=e.get.bind(e),e.selectHandler=e.select.bind(e),e.addEvent("onValidateParamsEnd",e.validateParamsEndHandler),e.addEvent("onRenderControllerProcess",e.renderControllerProcessHandler),a.prototype.construct.apply(e,arguments),e},n.get=function(e){e&&cm.preventDefault(e);return this.components.controller&&this.components.controller.get&&this.components.controller.get(),this},n.complete=function(e){e&&cm.preventDefault(e);return this.components.controller&&this.components.controller.complete&&this.components.controller.complete(),this},n.validateParamsEnd=function(){var e=this;e.setLangs({title:!e.params.params.max||1<e.params.params.max?e.lang("title_multiple"):e.lang("title_single")})},n.renderControllerEvents=function(){var n=this;return a.prototype.renderControllerEvents.apply(n,arguments),n.components.controller.addEvent("onGet",function(e,t){n.afterGet(t)}),n.components.controller.addEvent("onComplete",function(e,t){n.afterComplete(t)}),n},n.renderPlaceholderButtons=function(){var e=this;return e.components.placeholder.addButton({name:"close",label:e.lang("close"),style:"button-transparent",callback:e.closeHandler}),e.components.placeholder.addButton({name:"save",label:e.lang("save"),style:"button-primary",callback:e.completeHandler}),e},n.afterGet=function(e){return this.triggerEvent("onGet",e),this},n.afterComplete=function(e){return this.triggerEvent("onComplete",e),this.close(),this}}),cm.define("Com.AbstractFormField",{extend:"Com.AbstractController",events:["onShow","onHide","onFocus","onBlur","onValidate","onChange","onInput","onSelect","onReset","onRequestStart","onRequestEnd","onRequestSuccess","onRequestError","onRequestAbort"],params:{renderStructure:!0,embedStructureOnRender:!0,removeOnDestruct:!1,controllerEvents:!0,renderStructureField:!0,renderStructureContent:!0,renderError:!0,renderErrorMessage:!0,form:!1,outputValueType:"auto",inputValueType:"auto",value:null,defaultValue:null,dataValue:null,isOptionValue:!1,setHiddenValue:!0,minLength:0,maxLength:0,min:0,max:0,type:!1,label:"",help:null,helpType:"tooltip",icon:!1,placeholder:"",autocomplete:null,showPlaceholderAbove:!1,title:"",hint:"",messagePosition:"content",visible:!0,disabled:!1,renderName:!1,options:[],constraints:[],required:!1,requiredAsterisk:!0,validate:!1,constructor:!1,constructorParams:{removeOnDestruct:!1,formData:!0},preload:!1,responseKey:"data",ajax:{type:"json",method:"get"},"Com.HelpBubble":{renderStructure:!0,embedStructureOnRender:!0}},strings:{required:"This field is required.",too_short:"Value should be at least %count% characters.",too_long:"Value should be less than %count% characters.","*":"*"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.AbstractFormField",function(e,t,n,a){n.onConstructStart=function(){var e=this;e.attributeName=null,e.isVisible=null,e.isAjax=!1,e.isProcess=!1,e.isPreloaded=!1,e.isFocus=!1,e.nodeTagName=null,e.focusHandler=e.focus.bind(e),e.blurHandler=e.blur.bind(e),e.focusEventHandler=e.focusEvent.bind(e),e.blurEventHandler=e.blurEvent.bind(e),e.inputEventHandler=e.inputEvent.bind(e),e.selectEventHandler=e.selectEvent.bind(e),e.changeEventHandler=e.changeEvent.bind(e),e.resetEventHandler=e.resetEvent.bind(e)},n.onConstructEnd=function(){var e=this;e.isAjax&&(e.ajaxHandler=e.callbacks.request(e,cm.clone(e.params.ajax)))},n.onDestruct=function(){var e=this;e.isAjax&&e.ajaxHandler.abort(),e.controller&&cm.isFunction(e.controller.destruct)&&e.controller.destruct()},n.onValidateParams=function(){var e=this;e.validateParamsValue(),e.attributeName=e.params.formName+"["+e.params.name+"]",e.params.required&&e.params.requiredAsterisk&&!cm.isEmpty(e.params.placeholder)&&(e.params.placeholder=[e.params.placeholder,e.lang("*")].join(" ")),e.params.constructorParams.id=e.params.id,e.params.constructorParams.name=e.params.name,e.params.constructorParams.visibleName=e.params.visibleName,e.params.constructorParams.renderName=e.params.renderName,e.params.constructorParams.options=cm.isEmpty(e.params.options)?e.params.constructorParams.options:e.params.options,e.params.constructorParams.value=cm.isEmpty(e.params.dataValue)?e.params.value:e.params.dataValue,e.params.constructorParams.defaultValue=e.params.defaultValue,e.params.constructorParams.required=e.params.required,e.params.constructorParams.validate=e.params.validate,e.params.constructorParams.disabled=e.params.disabled,e.params.constructorParams.minLength=e.params.minLength,e.params.constructorParams.maxLength=e.params.maxLength,e.params.constructorParams.min=e.params.min,e.params.constructorParams.max=e.params.max,e.params.constructorParams.placeholder=e.params.showPlaceholderAbove?"":e.params.placeholder,e.params.constructorParams.autocomplete=e.params.autocomplete,e.params.constructorParams.title=e.params.title,e.params.constructorParams.ajax=e.params.ajax,e.params["Com.HelpBubble"].title=e.params.label,e.params["Com.HelpBubble"].content=e.params.help,e.params["Com.HelpBubble"].name=e.params.name,e.params["Com.HelpBubble"].type=e.params.helpType,e.components.form=e.params.form,e.nodeTagName=e.params.node.tagName.toLowerCase(),!e.params.preload||cm.isEmpty(e.params.ajax)||cm.isEmpty(e.params.ajax.url)||(e.isAjax=!0)},n.validateParamsValue=function(){var e=this;e.params.value=e.validateParamsValueHelper(e.params.value),e.params.defaultValue=e.validateParamsValueHelper(e.params.defaultValue),e.params.value=cm.isEmpty(e.params.value)?e.params.defaultValue:e.params.value,e.params.dataValue=cm.isEmpty(e.params.dataValue)?e.params.isOptionValue?e.params.value:null:e.params.dataValue},n.validateParamsValueHelper=function(e){return this.params.isValueOption&&!cm.isEmpty(e)&&(cm.isObject(e)?(e.value=cm.isEmpty(e.value)?e.text:e.value,e.text=cm.isEmpty(e.text)?e.value:e.text):e={value:e,text:e}),e},n.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.params.renderStructureField&&e.renderFiled(),e.params.renderStructureContent&&(e.nodes.contentContainer=e.renderContent()),e.params.renderStructureField?cm.insertFirst(e.nodes.contentContainer,e.nodes.value):e.params.renderStructureContent&&(e.nodes.container=e.nodes.contentContainer),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd")},n.renderFiled=function(){var e=this;if(e.nodes.container=cm.node("dl",{class:"pt__field"},e.nodes.label=cm.node("dt"),e.nodes.value=cm.node("dd")),!e.nodes.messages)switch(e.params.messagePosition){case"label":e.nodes.messages=e.nodes.label;break;case"content":case"value":e.nodes.messages=e.nodes.value}cm.isEmpty(e.params.label)||(e.nodes.labelText=cm.node("label",{for:e.attributeName,innerHTML:e.params.label}),cm.appendChild(e.nodes.labelText,e.nodes.label)),e.params.required&&e.params.requiredAsterisk&&(e.nodes.required=cm.node("span",{class:"required"},e.lang("*")),cm.appendChild(e.nodes.required,e.nodes.label)),cm.isEmpty(e.params.hint)||e.renderHint(e.params.hint)},n.renderContent=function(){var e=this,t={};return(e.nodes.content=t).container=cm.node("div",{class:"pt__field__content"},t.input=e.params.node),e.params.icon&&(t.field=cm.node("div",{class:"pt__input"},t.input,t.icon=cm.node("div",{class:e.params.icon})),cm.addEvent(t.icon,"click",e.focusHandler),cm.appendChild(t.field,t.container)),e.params.showPlaceholderAbove&&!cm.isEmpty(e.params.placeholder)&&(t.placeholder=cm.node("label",{class:"placeholder",for:e.attributeName},cm.node("span",{innerHTML:e.params.placeholder})),cm.appendChild(t.placeholder,t.container),cm.addClass(t.container,"is-placeholder-above")),cm.isEmpty(e.params.options)||e.renderOptions(e.params.options),t.container},n.renderOptions=function(e){var t,n=this;switch(n.nodeTagName){case"select":cm.forEach(e,function(e){t=cm.node("option",{value:e.value,disabled:e.disabled,innerHTML:e.text}),cm.appendChild(t,n.nodes.content.input)}),cm.setSelect(n.nodes.content.input,n.params.value)}},n.setAttributes=function(){var e,t=this;if(a.prototype.setAttributes.apply(t,arguments),cm.isEmpty(t.attributeName)||t.nodes.content.input.setAttribute("id",t.attributeName),cm.isEmpty(t.params.name)||t.nodes.content.input.setAttribute("name",t.params.name),!cm.isEmpty(t.params.value)&&"unset"!==t.params.inputValueType)switch(e=t.params.isOptionValue?t.params.value.value:cm.isObject(t.params.value)||cm.isArray(t.params.value)?cm.stringifyJSON(t.params.value):t.params.value,t.nodeTagName){case"select":cm.setSelect(t.nodes.content.input,e);break;default:t.nodes.content.input.setAttribute("value",e)}cm.isEmpty(t.params.dataValue)||(e=cm.isObject(t.params.dataValue)||cm.isArray(t.params.dataValue)?cm.stringifyJSON(t.params.dataValue):t.params.dataValue,t.nodes.content.input.setAttribute("data-value",e)),cm.isEmpty(t.params.placeholder)||t.params.showPlaceholderAbove||(t.nodes.content.input.setAttribute("placeholder",t.params.placeholder),cm.isEmpty(t.params.label)&&cm.isEmpty(t.params.title)&&t.nodes.content.input.setAttribute("aria-label",t.params.placeholder)),cm.isEmpty(t.params.autocomplete)||t.nodes.content.input.setAttribute("autocomplete",t.params.autocomplete),cm.isEmpty(t.params.title)||t.nodes.content.input.setAttribute("title",t.params.title),t.params.disabled&&t.nodes.content.input.setAttribute("disabled","disabled"),t.params.visible?t.show(!1):t.hide(!1)},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),cm.isEmpty(t.params.help)||cm.getConstructor("Com.HelpBubble",function(e){t.components.help=new e(cm.merge(t.params["Com.HelpBubble"],{container:t.nodes.label}))}),t.isAjax&&!t.isPreloaded||t.renderController()},n.renderController=function(){var t=this;t.params.constructor&&cm.getConstructor(t.params.constructor,function(e){t.components.controller=new e(cm.merge(t.params.constructorParams,{node:t.nodes.content.input,form:t.components.form,formField:t})),t.renderControllerEvents(),t.togglePlaceholder()})},n.renderControllerEvents=function(){var e=this;e.components.controller.addEvent("onFocus",e.focusEventHandler),e.components.controller.addEvent("onBlur",e.blurEventHandler),e.components.controller.addEvent("onSelect",e.selectEventHandler),e.components.controller.addEvent("onInput",e.inputEventHandler),e.components.controller.addEvent("onChange",e.changeEventHandler),e.components.controller.addEvent("onReset",e.resetEventHandler)},n.togglePlaceholder=function(){var e=this;e.params.showPlaceholderAbove&&(e.isFocus||!cm.isEmpty(e.getText())?cm.addClass(e.nodes.content.placeholder,"pull-top"):cm.removeClass(e.nodes.content.placeholder,"pull-top"))},n.focusEvent=function(e,t){this.isFocus=!0,this.togglePlaceholder(),this.triggerEvent("onFocus",t)},n.blurEvent=function(e,t){this.isFocus=!1,this.togglePlaceholder(),this.triggerEvent("onBlur",t)},n.inputEvent=function(e,t){this.triggerEvent("onInput",t)},n.selectEvent=function(e,t){this.triggerEvent("onSelect",t)},n.changeEvent=function(e,t){this.togglePlaceholder(),this.triggerEvent("onChange",t)},n.resetEvent=function(e,t){this.togglePlaceholder(),this.triggerEvent("onReset",t)},n.set=function(e,t){return this.components.controller&&cm.isFunction(this.components.controller.set)&&this.components.controller.set(e,t),this},n.get=function(e){var t=this;switch(e=cm.isUndefined(e)?t.params.outputValueType:e){case"raw":return t.getRaw();case"text":return t.getText();default:return t.components.controller&&cm.isFunction(t.components.controller.get)?t.components.controller.get():null}},n.getRaw=function(){return this.components.controller&&cm.isFunction(this.components.controller.getRaw)?this.components.controller.getRaw():this.get()},n.getText=function(){return this.components.controller&&cm.isFunction(this.components.controller.getText)?this.components.controller.getText():this.get()},n.reset=function(){return this.components.controller&&cm.isFunction(this.components.controller.reset)&&this.components.controller.reset(),this},n.validateValue=function(){var e,t,n=this,a={field:n,form:n.components.form,valid:!0,message:null,value:n.get()};return cm.isEmpty(a.value)?(n.params.required?(a.valid=!1,a.message=n.lang("required")):a.valid=!0,a):n.params.minLength&&a.value.length<n.params.minLength?(a.valid=!1,a.message=n.lang("too_short",{"%count%":n.params.minLength}),a):n.params.maxLength&&a.value.length>n.params.maxLength?(a.valid=!1,a.message=n.lang("too_long",{"%count%":n.params.maxLength}),a):!cm.isEmpty(n.params.constraints)&&(t=cm.clone(a),e=n.validateConstraints(t))?e:n.components.controller&&cm.isFunction(n.components.controller.validate)?n.components.controller.validate(a):a},n.validate=function(){var e,t=this;return!t.params.required&&!t.params.validate||((e=t.validateValue()).valid?t.clearError():t.renderError(e.message),t.triggerEvent("onValidate",e),e.valid)},n.addConstraint=function(e){return cm.isFunction(e)&&(this.params.constraints=cm.arrayAdd(this.params.constraints,e)),this},n.removeConstraint=function(e){return cm.isFunction(e)&&(this.params.constraints=cm.arrayRemove(this.params.constraints,e)),this},n.validateConstraints=function(t){var n;return!!this.params.constraints.some(function(e){return!!cm.isFunction(e)&&!(n=e(t)).valid})&&n},n.renderHint=function(e,t){var n,a=this;return t=cm.merge({className:null},t),a.clearHint(),a.nodes.hints=cm.node("ul",{class:"pt__field__hint"},n=cm.node("li",{innerHTML:e})),cm.isEmpty(t.className)||cm.addClass(n,t.className),a.params.renderError&&a.nodes.errors&&cm.inDOM(a.nodes.errors)?cm.insertBefore(a.nodes.hints,a.nodes.errors):cm.appendChild(a.nodes.hints,a.nodes.messages),a},n.clearHint=function(){return cm.remove(this.nodes.hints),this},n.renderError=function(e,t){var n,a=this;return t=cm.merge({className:"error"},t),a.clearError(),a.params.renderError&&(cm.addClass(a.nodes.container,"error"),a.params.renderErrorMessage&&!cm.isEmpty(e)&&(a.nodes.errors=cm.node("ul",{class:"pt__field__error pt__field__hint"},n=cm.node("li",{innerHTML:e})),cm.isEmpty(t.className)||cm.addClass(n,t.className),cm.insertLast(a.nodes.errors,a.nodes.messages))),a},n.clearError=function(){return cm.removeClass(this.nodes.container,"error"),cm.remove(this.nodes.errors),this},n.show=function(e){var t=this;return e=!!cm.isUndefined(e)||e,cm.isBoolean(t.isVisible)&&t.isVisible||(t.isVisible=!0,cm.removeClass(t.nodes.container,"is-hidden"),e&&t.triggerEvent("onShow",t.get())),t},n.hide=function(e){var t=this;return e=!!cm.isUndefined(e)||e,cm.isBoolean(t.isVisible)&&!t.isVisible||(t.isVisible=!1,cm.addClass(t.nodes.container,"is-hidden"),e&&t.triggerEvent("onHide",t.get())),t},n.enable=function(){return this.components.controller&&cm.isFunction(this.components.controller.enable)&&this.components.controller.enable(),this},n.disable=function(){return this.components.controller&&cm.isFunction(this.components.controller.disable)&&this.components.controller.disable(),this},n.focus=function(){return this.components.controller&&cm.isFunction(this.components.controller.focus)&&this.components.controller.focus(),this},n.blur=function(){return this.components.controller&&cm.isFunction(this.components.controller.blur)&&this.components.controller.blur(),this},n.setRequired=function(){return this.params.required=!0,this},n.unsetRequired=function(){return this.params.required=!1,this},n.getController=function(){return this.components.controller},n.getName=function(){return this.params.name},n.getContainer=function(){return this.nodes.container},n.callbacks.prepare=function(e,t){return t.url=cm.strReplace(t.url,{"%baseUrl%":cm._baseUrl}),t.params=cm.objectReplace(t.params,{"%baseUrl%":cm._baseUrl}),t},n.callbacks.request=function(t,n){return n=t.callbacks.prepare(t,n),cm.ajax(cm.merge(n,{onStart:function(){t.callbacks.start(t,n)},onSuccess:function(e){t.callbacks.response(t,n,e)},onError:function(){t.callbacks.error(t,n)},onAbort:function(){t.callbacks.abort(t,n)},onEnd:function(e){t.callbacks.end(t,n,e)}}))},n.callbacks.start=function(e,t){e.isProcess=!0,e.triggerEvent("onRequestStart")},n.callbacks.end=function(e,t){e.isProcess=!1,e.isPreloaded=!0,e.renderController(),e.triggerEvent("onRequestEnd")},n.callbacks.response=function(e,t,n){cm.isEmpty(n)||(n=e.callbacks.filter(e,t,n)),cm.isEmpty(n)?e.callbacks.error(e,t):e.callbacks.success(e,e.callbacks.convert(e,n))},n.callbacks.filter=function(e,t,n){var a=[],o=cm.objectPath(e.params.responseKey,n);return o&&!cm.isEmpty(o)&&(a=o),a},n.callbacks.convert=function(t,e){return e.map(function(e){return t.callbacks.convertItem(t,e)})},n.callbacks.convertItem=function(e,t){return cm.isEmpty(t)?null:cm.isObject(t)?(cm.isUndefined(t.value)&&(t.value=t.text),t):{text:t,value:t}},n.callbacks.success=function(e,t){e.renderOptions(t),e.triggerEvent("onRequestSuccess",t)},n.callbacks.error=function(e,t){e.triggerEvent("onRequestError")},n.callbacks.abort=function(e,t){e.triggerEvent("onRequestAbort")}}),cm.define("Com.AbstractInputContainer",{extend:"Com.AbstractController",events:["onRenderControllerStart","onRenderControllerProcess","onRenderController","onRenderControllerEnd","onSelect","onChange","onReset"],params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,constructor:"Com.AbstractInput",params:{}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.AbstractInputContainer",function(e,t,n,a){n.construct=function(){var e=this;e.resetHandler=e.reset.bind(e),e.enableHandler=e.enable.bind(e),e.disableHandler=e.disable.bind(e),a.prototype.construct.apply(e,arguments)},n.onValidateParams=function(){this.components.formField=this.params.formField,this.components.form=this.params.form},n.renderViewModel=function(){return this.renderController(),this},n.renderController=function(){var t,n=this;cm.getConstructor(n.params.constructor,function(e){n.triggerEvent("onRenderControllerStart"),t=n.validateControllerParams(),n.components.controller=new e(t),n.triggerEvent("onRenderControllerProcess",n.components.controller),n.renderControllerEvents(),n.triggerEvent("onRenderController",n.components.controller),n.triggerEvent("onRenderControllerEnd",n.components.controller)})},n.validateControllerParams=function(){return cm.merge(this.params.params,{node:this.params.node,value:this.params.value,defaultValue:this.params.defaultValue})},n.renderControllerEvents=function(){var n=this;return n.components.controller.addEvent("onSelect",function(e,t){n.triggerEvent("onSelect",t)}),n.components.controller.addEvent("onChange",function(e,t){n.triggerEvent("onChange",t)}),n.components.controller.addEvent("onReset",function(e,t){n.triggerEvent("onReset",t)}),n},n.set=function(e){return this.components.controller&&cm.isFunction(this.components.controller.set)&&this.components.controller.set(e),this},n.get=function(){return this.components.controller&&cm.isFunction(this.components.controller.get)&&this.components.controller.get()},n.getRaw=function(){return this.components.controller&&cm.isFunction(this.components.controller.getRaw)&&this.components.controller.getRaw()||this.get()},n.reset=function(){return this.components.controller&&cm.isFunction(this.components.controller.reset)&&this.components.controller.reset()},n.enable=function(){return this.components.controller&&cm.isFunction(this.components.controller.enable)&&this.components.controller.enable(),this},n.disable=function(){return this.components.controller&&cm.isFunction(this.components.controller.disable)&&this.components.controller.disable(),this}}),cm.define("Com.AbstractRange",{extend:"Com.AbstractInput",params:{renderStructure:!0,embedStructureOnRender:!0,controllerEvents:!0,redrawOnRender:!0,className:"com__range",theme:"theme--arrows",min:0,max:100,value:0,range:!1,direction:"horizontal",showCounter:!0,draggableConstructor:"Com.AbstractRangeDrag",draggableParams:{}}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.AbstractRange",function(e,t,n,a){n.onConstructStart=function(){this.components.draggable=[],this.sort="asc"},n.onRedraw=function(){this.setData()},n.onValidateParamsEnd=function(){var e=this;e.sort=e.params.min>e.params.max?"asc":"desc",e.targetDraggable=!e.params.range,e.params.draggableParams.theme=e.params.theme,e.params.draggableParams.direction=e.params.direction,e.params.draggableParams.targetDraggable=e.targetDraggable,e.params.draggableParams.min=e.params.min,e.params.draggableParams.max=e.params.max},n.renderViewModel=function(){a.prototype.renderViewModel.apply(this,arguments),this.renderDraggable(),this.params.range&&this.renderDraggable()},n.renderContent=function(){var e=this,t={};switch(e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"com__range__content"},t.range=cm.node("div",{class:"pt__range"},t.inner=cm.node("div",{class:"inner"},t.range=cm.node("div",{class:"range"},t.rangeContent=e.renderRangeContent())))),e.triggerEvent("onRenderContentProcess"),cm.addClass(t.rangeContent,"range-helper"),cm.addClass(t.container,e.params.theme),cm.addClass(t.range,e.params.theme),cm.addClass(t.rangeContent,e.params.theme),e.targetDraggable&&cm.addClass(t.range,"is-draggable"),e.params.direction){case"horizontal":cm.addClass(t.container,"is-horizontal"),cm.addClass(t.range,"is-horizontal"),cm.addClass(t.rangeContent,"is-horizontal");break;case"vertical":cm.addClass(t.container,"is-vertical"),cm.addClass(t.range,"is-vertical"),cm.addClass(t.rangeContent,"is-vertical")}return e.triggerEvent("onRenderContentEnd"),t.container},n.renderRangeContent=function(){var e={};return(this.nodes.rangeContent=e).container=cm.node("div",{class:"range__content"}),e.container},n.renderDraggable=function(){var n=this;cm.getConstructor(n.params.draggableConstructor,function(e){n.components.draggable.push(new e(cm.merge(n.params.draggableParams,{node:n.nodes.content.inner,events:{onStart:function(){n.setEditing()},onStop:function(){n.unsetEditing()},onSelect:function(e,t){n.setValues(),n.selectAction(n.tempRawValue.join("-"),!0)},onSet:function(e,t){n.setValues(),n.set(n.tempRawValue.join("-"),!0)}}})))})},n.setValues=function(){var t=this;t.tempRawValue=[],cm.forEach(t.components.draggable,function(e){t.tempRawValue.push(e.get())}),t.tempRawValue=cm.arraySort(t.tempRawValue,!1,t.sort)},n.validateValue=function(e){var n=this,a=e.toString().split("-");return cm.forEach(a,function(e,t){n.params.max>n.params.min?a[t]=Math.min(Math.max(parseFloat(e),n.params.min),n.params.max):a[t]=Math.max(Math.min(parseFloat(e),n.params.min),n.params.max)}),n.values=cm.arraySort(a,!1,n.sort),a.join("-")},n.saveRawValue=function(e){var t=this;t.tempRawValue=e.toString().split("-"),t.tempRawValue=cm.arrayParseFloat(t.tempRawValue),t.tempRawValue=cm.arraySort(t.tempRawValue,!1,t.sort)},n.setData=function(){var n=this;cm.isEmpty(n.tempRawValue)||cm.forEach(n.components.draggable,function(e,t){e.set(n.tempRawValue[t],!1)})},n.setEditing=function(){return cm.addClass(this.nodes.content.container,"is-editing"),cm.addClass(this.nodes.content.range,"is-editing"),cm.addClass(this.nodes.content.rangeContent,"is-editing"),this},n.unsetEditing=function(){return cm.removeClass(this.nodes.content.container,"is-editing"),cm.removeClass(this.nodes.content.range,"is-editing"),cm.removeClass(this.nodes.content.rangeContent,"is-editing"),this}}),cm.define("Com.AbstractRangeDrag",{extend:"Com.AbstractController",events:["onStart","onStop","onSet","onSelect"],params:{renderStructure:!0,embedStructureOnRender:!0,embedStructure:"append",controllerEvents:!0,direction:"horizontal",showCounter:!0,targetDraggable:!0,draggableConstructor:"Com.Draggable",draggableParams:{}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.AbstractRangeDrag",function(e,t,n,o){n.onValidateParams=function(){this.params.draggableParams.direction=this.params.direction},n.renderView=function(){var e=this;switch(e.nodes.container=cm.node("div",{class:"drag"},e.nodes.content=e.renderDragContent(name)),cm.addClass(e.nodes.content,e.params.theme),e.params.direction){case"horizontal":cm.addClass(e.nodes.content,"is-horizontal");break;case"vertical":cm.addClass(e.nodes.content,"is-vertical")}},n.renderViewModel=function(){var a=this;o.prototype.renderViewModel.apply(a,arguments),cm.getConstructor(a.params.draggableConstructor,function(e){a.components.draggable=new e(cm.merge(a.params.draggableParams,{target:a.params.targetDraggable?a.params.node:null,node:a.nodes.container,limiter:a.params.node,events:{onStart:function(){switch(a.params.direction){case"horizontal":cm.addClass(document.body,"cm__cursor--col-resize");break;case"vertical":cm.addClass(document.body,"cm__cursor--row-resize")}a.showCounter(),a.triggerEvent("onStart")},onStop:function(){switch(a.params.direction){case"horizontal":cm.removeClass(document.body,"cm__cursor--col-resize");break;case"vertical":cm.removeClass(document.body,"cm__cursor--row-resize")}a.hideCounter(),a.triggerEvent("onStop")},onSelect:function(e,t){var n=a.getDraggable(t);a.selectAction(n,!0)},onSet:function(e,t){var n=a.getDraggable(t);a.set(n,!0)}}}))})},n.renderDragContent=function(){var e=this,t={};return(e.nodes.dragContent=t).container=cm.node("div",{class:"drag__content"}),e.nodes.counter=e.renderCounter(name),e.params.showCounter&&cm.appendChild(e.nodes.counter,t.container),t.container},n.getDraggable=function(e){var t,n,a=this,o=a.components.draggable.getDimensions(),r=a.params.max-a.params.min;switch(a.params.direction){case"horizontal":t=r/o.limiter.absoluteWidth*e.left,n=Math.round(t)+a.params.min;break;case"vertical":t=r/o.limiter.absoluteHeight*e.top,n=Math.round(t)+a.params.min}return n},n.setDraggable=function(e){var t,n=this,a={top:0,left:0},o=n.components.draggable.getDimensions(),r=e-n.params.min,s=n.params.max-n.params.min;switch(n.params.direction){case"horizontal":t=o.limiter.absoluteWidth/s*r,a.left=Math.round(t);break;case"vertical":t=o.limiter.absoluteHeight/s*r,a.top=Math.round(t)}n.components.draggable.setPosition(a,!1)},n.renderCounter=function(){var e={};return(this.nodes.counterContent=e).container=e.inner=cm.node("div",{class:"counter"}),e.container},n.showCounter=function(){return cm.addClass(this.nodes.counter,"is-show"),this},n.hideCounter=function(){return cm.removeClass(this.nodes.counter,"is-show"),this},n.setCounter=function(e){this.nodes.counterContent.inner.innerHTML=e},n.get=function(){var e=this.components.draggable.get();return this.getDraggable(e)},n.selectAction=function(e,t){return t=!!cm.isUndefined(t)||t,this.setCounter(e),t&&this.triggerEvent("onSelect",e),this},n.set=function(e,t){return t=!!cm.isUndefined(t)||t,this.setDraggable(e),this.setCounter(e),t&&this.triggerEvent("onSet",e),this}}),cm.define("Com.Form",{modules:["Params","Events","Langs","DataConfig","DataNodes","Storage","Callbacks","Stack","Structure"],events:["onRenderStart","onRender","onValidate","onError","onAbort","onSuccess","onSendStart","onSend","onSendEnd","onSet","onChange","onInput","onClear","onReset"],params:{node:cm.node("div"),container:null,name:"",renderStructure:!0,embedStructure:"append",removeOnDestruct:!0,renderButtons:!0,renderButtonsSeparator:!0,buttonsAlign:"right",renderNames:!1,showLoader:!0,loaderCoverage:"fields",showNotifications:!0,showSuccessNotification:!1,showValidationNotification:!1,showValidationMessages:!0,responseKey:"data",responseErrorsKey:"errors",responseMessageKey:"message",responseCodeKey:"code",validate:!1,validateOnChange:!1,validateOnInput:!1,sendEmptyFields:!1,sendOnlyChangedFields:!1,data:{},ajax:{type:"json",method:"post",formData:!0,url:"",params:""},"Com.Notifications":{},overlayConstructor:"Com.Overlay",overlayParams:{position:"absolute",autoOpen:!1,removeOnClose:!0,lazy:!0}},strings:{form_error:"Form is not filled correctly.",server_error:"An unexpected error has occurred. Please try again later.",success_message:"Form successfully sent"}},function(e){var c=this;c.nodes={},c.components={},c.fields={},c.buttons={},c.constraints=[],c.ajaxHandler=null,c.isAjax=!1,c.isProcess=!1;function t(t){if(t=cm.merge({name:"",label:"",class:"",spinner:!1,spinnerClass:"",action:"submit",handler:function(){}},t),!c.buttons[t.name]){switch(t.node=cm.node("button",{name:t.name,class:["button",t.class].join(" ")},t.labelNode=cm.node("div",{class:"label is-show"},t.label)),t.spinner&&(t.spinnerNode=cm.node("div",{class:["icon",t.spinnerClass].join(" ")}),cm.appendChild(t.spinnerNode,t.node),cm.addClass(t.node,"button-spinner")),t.action){case"submit":t.node.type="submit",cm.addClass(t.node,"button-primary"),cm.addEvent(t.node,"click",function(e){cm.preventDefault(e),c.isProcess?c.abort():c.send()});break;case"reset":t.node.type="reset",cm.addClass(t.node,"button-secondary"),cm.addEvent(t.node,"click",function(e){cm.preventDefault(e),c.isProcess||c.reset()});break;case"clear":cm.addClass(t.node,"button-secondary"),cm.addEvent(t.node,"click",function(e){cm.preventDefault(e),c.isProcess||c.clear()});break;case"custom":default:cm.addEvent(t.node,"click",function(e){cm.preventDefault(e),cm.isFunction(t.handler)&&t.handler(c,t,e)})}cm.appendChild(t.node,c.nodes.buttonsHolder),c.buttons[t.name]=t}}function n(){cm.forEach(c.buttons,function(e){c.isProcess?e.spinner&&(cm.replaceClass(e.labelNode,"is-show","is-hide"),cm.replaceClass(e.spinnerNode,"is-hide","is-show")):e.spinner&&(cm.replaceClass(e.labelNode,"is-hide","is-show"),cm.replaceClass(e.spinnerNode,"is-show","is-hide"))})}var a=function(){c.params.buttonsAlign=cm.inArray(["left","center","right","justify"],c.params.buttonsAlign)?c.params.buttonsAlign:"right",c.params.loaderCoverage=cm.inArray(["fields","all"],c.params.loaderCoverage)?c.params.loaderCoverage:"all",c.isAjax=c.params.ajax&&!cm.isEmpty(c.params.ajax.url)},o=function(){var t;c.params.renderStructure&&(c.nodes.container=cm.node("div",{class:"com__form"},c.nodes.fieldsContainer=cm.node("div",{class:"com__form__fields"},c.nodes.fields=cm.node("div",{class:"inner"}))),c.nodes.notifications=cm.node("div",{class:"com__form__notifications"}),c.nodes.buttonsSeparator=cm.node("hr"),c.nodes.buttonsContainer=cm.node("div",{class:"com__form__buttons"},c.nodes.buttons=cm.node("div",{class:"pt__buttons is-adaptive"},c.nodes.buttonsHolder=cm.node("div",{class:"inner"}))),cm.addClass(c.nodes.buttons,["pull",c.params.buttonsAlign].join("-")),c.params.renderButtonsSeparator&&cm.insertFirst(c.nodes.buttonsSeparator,c.nodes.buttonsContainer),c.params.renderButtons&&cm.appendChild(c.nodes.buttonsContainer,c.nodes.container),cm.insertFirst(c.nodes.notifications,c.nodes.container),c.embedStructure(c.nodes.container)),cm.getConstructor("Com.Notifications",function(e,t){c.components.notifications=new e(cm.merge(c.params[t],{container:c.nodes.notifications})),c.components.notifications.addEvent("onAdd",function(){cm.addClass(c.nodes.notifications,"is-show",!0)}),c.components.notifications.addEvent("onRemove",function(){0===c.components.notifications.getLength()&&cm.removeClass(c.nodes.notifications,"is-show",!0)})}),c.params.showLoader&&cm.getConstructor(c.params.overlayConstructor,function(e){switch(c.params.loaderCoverage){case"fields":t=c.nodes.fieldsContainer;break;case"all":default:t=c.nodes.container}c.components.loader=new e(cm.merge(c.params.overlayParams,{container:t}))})},r=function(t){cm.getConstructor(t.fieldConstructor,function(e){t.fieldController=t.controller=new e(t),t.inputController=t.constructorController=cm.isFunction(t.fieldController.getController)&&t.fieldController.getController(),t.fieldController.addEvent("onBlur",function(e){c.params.validate&&c.params.validateOnChange&&(e.params.required||e.params.validate)&&t.fieldController.validate()}),t.fieldController.addEvent("onChange",function(e){c.params.validate&&c.params.validateOnChange&&(e.params.required||e.params.validate)&&t.fieldController.validate(),c.triggerEvent("onChange")}),t.fieldController.addEvent("onInput",function(e){c.params.validate&&c.params.validateOnInput&&(e.params.required||e.params.validate)&&t.fieldController.validate(),c.triggerEvent("onInput")}),t.originValue=t.fieldController.get(),c.fields[t.name]=t})},s=function(t){var n;return!!c.constraints.some(function(e){return!!cm.isFunction(e)&&!(n=e(t)).valid})&&n};c.callbacks.prepare=function(e,t){return(t=e.callbacks.beforePrepare(e,t)).url=cm.strReplace(t.url,{"%baseUrl%":cm._baseUrl}),t.params=cm.objectReplace(t.params,{"%baseUrl%":cm._baseUrl}),t.params=cm.merge(t.params,e.get("sendPath")),t=e.callbacks.afterPrepare(e,t)},c.callbacks.beforePrepare=function(e,t){return t},c.callbacks.afterPrepare=function(e,t){return t},c.callbacks.request=function(t,n){return n=t.callbacks.prepare(t,n),t.callbacks.clearError(t),cm.ajax(cm.merge(n,{onStart:function(){t.callbacks.start(t,n)},onSuccess:function(e){t.callbacks.response(t,n,e)},onError:function(e){t.callbacks.error(t,n,e)},onAbort:function(){t.callbacks.abort(t,n)},onEnd:function(e){t.callbacks.end(t,n,e)}}))},c.callbacks.start=function(e,t){e.isProcess=!0,cm.addClass(e.nodes.container,"is-submitting"),n(),e.params.showLoader&&e.showLoader(),e.triggerEvent("onSendStart")},c.callbacks.end=function(e,t){e.isProcess=!1,cm.removeClass(e.nodes.container,"is-submitting"),n(),e.params.showLoader&&e.hideLoader(),e.triggerEvent("onSendEnd")},c.callbacks.response=function(e,t,n){var a,o;cm.isEmpty(n)?e.callbacks.error(e,t):(a=cm.objectSelector(e.params.responseErrorsKey,n),o=cm.objectSelector(e.params.responseKey,n),cm.isEmpty(a)?e.callbacks.success(e,o):e.callbacks.error(e,t,n))},c.callbacks.error=function(e,t,n){var a,o,r;cm.isEmpty(n)||(a=cm.objectSelector(e.params.responseErrorsKey,n),o=cm.objectSelector(e.params.responseMessageKey,n),r=cm.objectSelector(e.params.responseCodeKey,n)),e.callbacks.renderError(e,a,o),e.triggerEvent("onError",{response:n,errors:a,message:o,code:r})},c.callbacks.success=function(e,t){e.params.showNotifications&&e.params.showSuccessNotification&&e.callbacks.renderNotification(e,{label:e.lang("success_message"),type:"success"}),e.triggerEvent("onSuccess",t)},c.callbacks.abort=function(e,t){e.triggerEvent("onAbort")},c.callbacks.clearError=function(e){e.clearNotification(),cm.forEach(e.fields,function(e){e.controller.clearError()})},c.callbacks.renderError=function(e,t,n){var a,o=!cm.isEmpty(n)&&cm.isString(n),r=o?n:e.lang("form_error");e.callbacks.clearError(e),cm.isArray(t)||cm.isObject(t)?(a=e.callbacks.renderErrorMessages(e,t),e.params.showNotifications&&e.callbacks.renderNotification(e,{label:r,type:"danger",messages:a,collapsed:!0})):o?e.params.showNotifications&&e.callbacks.renderNotification(e,{label:r,type:"danger"}):e.params.showNotifications&&e.callbacks.renderNotification(e,{label:e.lang("server_error"),type:"danger"})},c.callbacks.renderErrorMessages=function(n,e){var a,o,r,s=[];return cm.forEach(e,function(e,t){o=e&&e.field?e.field:t,a=n.getField(o),cm.isObject(e)?cm.isArray(e.message)?cm.forEach(e.message,function(e){r=n.lang(e),s.push(r),a&&a.controller.renderError(r)}):cm.isEmpty(e.message)||(r=n.lang(e.message),s.push(r),a&&a.controller.renderError(r)):cm.isEmpty(e)||(r=n.lang(e),s.push(r),a&&a.controller.renderError(r))}),s},c.callbacks.renderNotification=function(e,t){cm.addClass(e.nodes.notifications,"is-show",!0),e.components.notifications.add(t)},c.destruct=function(){return c._isDestructed||(c._isDestructed=!0,cm.forEach(c.fields,function(e){e.controller.destruct()}),c.removeFromStack(),c.params.removeOnDestruct&&cm.remove(c.nodes.container)),c},c.add=function(e,t){var n,a,o;return n=e,a=t,o=Com.FormFields.get(n),a=cm.merge({originValue:null,form:c,formName:c.params.name,system:!1,send:!0,name:"",sendPath:null,label:"",required:!1,validate:!1,options:[],container:c.nodes.fields,renderName:null,renderErrorMessage:c.params.showValidationMessages},a),(a=cm.merge(cm.clone(o,!0),a)).fieldConstructor=cm.isEmpty(a.fieldConstructor)?"Com.FormField":a.fieldConstructor,a.value=c.params.data[a.name]||a.value,a.dataValue=c.params.data[a.dataName]||a.dataValue,a.renderName=cm.isBoolean(a.renderName)?a.renderName:c.params.renderNames,o&&!c.fields[a.name]&&r(a),c},c.addButton=function(e){return t(e),c},c.addButtons=function(e){return cm.isArray(e)&&cm.forEach(e,function(e){t(e)}),c},c.addSeparator=function(e){var t;return t=e,t=cm.merge({node:cm.node("hr"),container:c.nodes.fields},t),cm.appendChild(t.node,t.container),c},c.addConstraint=function(e){return cm.isFunction(e)&&cm.arrayAdd(c.constraints,e),c},c.removeConstraint=function(e){return cm.isFunction(e)&&cm.arrayRemove(c.constraints,e),c},c.appendChild=function(e){return cm.appendChild(e,c.nodes.fields),c},c.getField=function(e){return c.fields[e]},c.setFieldParams=function(e,t){var n=c.getField(e);return n&&(n=cm.merge(n,t),c.fields[e]=n),c},c.removeField=function(e){var t,n;return t=e,(n=c.getField(t))&&(n.fieldController&&cm.isFunction(n.fieldController.destruct)&&n.fieldController.destruct(),delete c.fields[t]),c},c.get=function(n){var a,o,r,s,i={};return n=cm.inArray(["all","fields","send","sendPath","system"],n)?n:"fields",a=function(e,t){r=e.controller.get(),c.params.sendOnlyChangedFields&&(r=cm.getDiffCompare(e.originValue,r)),cm.isUndefined(r)||!c.params.sendEmptyFields&&cm.isEmpty(r)||(i[t]=r)},o=function(e,t){r=e.controller.get(),c.params.sendOnlyChangedFields&&(r=cm.getDiffCompare(e.originValue,r)),cm.isUndefined(r)||!c.params.sendEmptyFields&&cm.isEmpty(r)||(cm.isEmpty(e.sendPath)?i[t]=r:(s=cm.objectFormPath(e.sendPath,r),i=cm.merge(i,s)))},cm.forEach(c.fields,function(e,t){switch(n){case"all":a(e,t);break;case"fields":e.system||a(e,t);break;case"send":e.send&&!e.system&&a(e,t);break;case"sendPath":e.send&&!e.system&&o(e,t);break;case"system":e.system&&a(e,t)}}),i},c.getAll=function(){return c.get("all")},c.set=function(n,a){var o,r;return cm.forEach(n,function(e,t){(o=c.fields[t])&&!o.system&&(r=n[o.dataName]||e,c.fields[t].controller.set(r,a))}),c.triggerEvent("onSet"),c},c.clear=function(){return cm.forEach(c.fields,function(e){e.controller.destruct()}),c.fields={},cm.clearNode(c.nodes.fields),cm.forEach(c.buttons,function(e){cm.remove(e.node)}),c.buttons={},cm.clearNode(c.nodes.buttonsHolder),c.clearError(),c.triggerEvent("onClear"),c},c.reset=function(){return cm.forEach(c.fields,function(e){e.controller.reset()}),c.clearError(),c.triggerEvent("onReset"),c},c.validate=function(){var n,e,t,a,o=(a={form:c,valid:!0,message:null},cm.forEach(c.fields,function(e,t){n=e.controller.getParams(),e.field&&!e.system&&(n.required||n.validate)&&cm.isFunction(e.controller.validate)&&!e.controller.validate()&&(a.message=c.lang("form_error"),a.valid=!1)}),cm.isEmpty(c.constraints)||(t=cm.clone(a),(e=s(t))&&(a=cm.merge(a,e))),a);return c.clearNotification(),o.valid||c.params.showNotifications&&c.params.showValidationNotification&&c.renderNotification({label:o.message,type:"danger"}),c.triggerEvent("onValidate",o),o},c.send=function(){var e={valid:!0};return c.params.validate&&(e=c.validate()),e.valid&&(c.isAjax?c.ajaxHandler=c.callbacks.request(c,cm.clone(c.params.ajax)):(c.clearError(c),c.triggerEvent("onSendStart",c.get()),c.triggerEvent("onSend",c.get()),c.triggerEvent("onSendEnd",c.get()))),c},c.abort=function(){return c.ajaxHandler&&c.ajaxHandler.abort&&c.ajaxHandler.abort(),c},c.setAction=function(e,t,n){switch(t=cm.inArray(["raw","update","current"],t)?t:"current"){case"raw":c.params.ajax=cm.merge(c._raw.params.ajax,e);break;case"current":c.params.ajax=cm.merge(c.params.ajax,e);break;case"update":c.params.ajax=cm.merge(c._update.params.ajax,e)}return n&&(c._update.params.ajax=cm.clone(c.params.ajax)),c.isAjax=c.params.ajax&&!cm.isEmpty(c.params.ajax.url),c},c.renderNotification=function(e){return c.callbacks.renderNotification(c,e),c},c.clearNotification=function(){return cm.removeClass(c.nodes.notifications,"is-show",!0),c.components.notifications.clear(),c},c.renderError=function(e,t){return c.callbacks.renderError(c,e,t),c},c.clearError=function(){return c.callbacks.clearError(c),c},c.showLoader=function(e){return c.components.loader&&c.components.loader.open(e),c},c.hideLoader=function(e){return c.components.loader&&c.components.loader.close(e),c},c.getName=function(){return c.params.name},c.getContainer=function(){return c.nodes.container},c.getButtonsContainer=function(){return c.nodes.buttonsContainer},c.renderComponent(),c.setParams(e),c.convertEvents(c.params.events),c.getDataNodes(c.params.node),c.getDataConfig(c.params.node),c.callbacksProcess(),c.addToStack(c.params.node),c.triggerEvent("onRenderStart"),a(),o(),c.addToStack(c.nodes.container),c.triggerEvent("onRender")}),Com.FormFields=function(){var n={};return{add:function(e,t){n[e]=cm.merge({node:cm.node("div"),fieldConstructor:null,constructor:null,type:e,field:!0,system:!1},t)},get:function(e){return n[e]?cm.clone(n[e],!0):null}}}(),cm.define("Com.FormField",{modules:["Params","Events","DataConfig","Stack","Callbacks"],events:["onRender"],params:{node:cm.node("div"),container:cm.node("div"),form:!1,name:"",value:null,dataValue:null,type:!1,label:"",help:null,placeholder:"",visible:!0,options:[],className:"",constructor:!1,constructorParams:{formData:!0},"Com.HelpBubble":{renderStructure:!0}}},function(e){var n=this;n.nodes={},n.components={},n.form=null,n.controller=null,n.value=null;var t=function(){n.params.constructor&&cm.getConstructor(n.params.constructor,function(e){n.params.constructor=e}),n.params.constructorParams.node=n.params.node,n.params.constructorParams.name=n.params.name,n.params.constructorParams.options=n.params.options,n.params.constructorParams.value=n.params.dataValue||n.params.value,n.params["Com.HelpBubble"].content=n.params.help,n.params["Com.HelpBubble"].name=n.params.name,n.form=n.params.form},a=function(){n.nodes=n.callbacks.render(n)||{},n.params.container.appendChild(n.nodes.container),n.callbacks.construct(n)};n.callbacks.construct=function(e){e.controller=e.callbacks.controller(e,e.params.constructorParams)},n.callbacks.controller=function(e,t){if(e.params.constructor)return new e.params.constructor(t)},n.callbacks.render=function(t){var n={};return n.container=cm.node("dl",{class:"pt__field"},n.label=cm.node("dt",cm.node("label",t.params.label)),n.value=cm.node("dd",t.params.node)),t.params.visible||cm.addClass(n.container,"is-hidden"),cm.addClass(n.container,t.params.className),cm.isEmpty(t.params.name)||t.params.node.setAttribute("name",t.params.name),cm.isEmpty(t.params.value)||t.params.node.setAttribute("value",t.params.value),cm.isEmpty(t.params.dataValue)||t.params.node.setAttribute("data-value",JSON.stringify(t.params.dataValue)),cm.isEmpty(t.params.placeholder)||t.params.node.setAttribute("placeholder",t.params.placeholder),cm.isEmpty(t.params.help)||cm.getConstructor("Com.HelpBubble",function(e){t.components.help=new e(cm.merge(t.params["Com.HelpBubble"],{container:n.label}))}),n},n.callbacks.clearError=function(e){cm.removeClass(e.nodes.container,"error"),cm.remove(e.nodes.errors)},n.callbacks.renderError=function(e,t){e.callbacks.clearError(e),cm.addClass(e.nodes.container,"error"),e.nodes.errors=cm.node("ul",{class:"pt__field__error pt__field__hint"},cm.node("li",{class:"error"},t)),cm.appendChild(e.nodes.errors,e.nodes.value)},n.callbacks.set=function(e,t){return e.controller&&cm.isFunction(e.controller.set)&&e.controller.set(t),t},n.callbacks.get=function(e){return e.controller&&cm.isFunction(e.controller.get)?e.controller.get():null},n.callbacks.reset=function(e){e.controller&&cm.isFunction(e.controller.reset)&&e.controller.reset()},n.callbacks.destruct=function(e){e.controller&&cm.isFunction(e.controller.destruct)&&e.controller.destruct()},n.set=function(e){return n.value=n.callbacks.set(n,e),n},n.get=function(){return n.value=n.callbacks.get(n),n.value},n.reset=function(){return n.callbacks.reset(n),n},n.destruct=function(){return n.callbacks.destruct(n),n.removeFromStack(),n},n.renderError=function(e,t){return n.callbacks.renderError(n,e,t),n},n.clearError=function(){return n.callbacks.clearError(n),n},n.setParams(e),n.convertEvents(n.params.events),n.getDataConfig(n.params.node),n.callbacksProcess(),t(),a(),n.addToStack(n.params.node),n.triggerEvent("onRender")}),Com.FormFields.add("empty",{field:!1,fieldConstructor:"Com.AbstractFormField"}),Com.FormFields.add("buttons",{node:cm.node("div",{class:"pt__buttons pull-right"}),field:!1,system:!0,callbacks:{render:function(e){var t={};return t.container=e.params.node,t.inner=cm.node("div",{class:"inner"}),cm.appendChild(t.inner,t.container),t},controller:function(t){var n,a={};return cm.forEach(t.params.options,function(e){switch(n=cm.node("button",e.text),e.value){case"submit":n.type="submit",cm.addClass(n,"button-primary"),cm.addEvent(n,"click",function(e){cm.preventDefault(e),t.form.send()});break;case"reset":n.type="reset",cm.addClass(n,"button-secondary"),cm.addEvent(n,"click",function(e){cm.preventDefault(e),t.form.reset()});break;case"clear":cm.addClass(n,"button-secondary"),cm.addEvent(n,"click",function(e){cm.preventDefault(e),t.form.clear()})}a[e.value]=n,t.params.node.appendChild(n)}),a}}}),cm.define("Com.TabsetHelper",{extend:"Com.AbstractController",events:["onTabShowStart","onTabShow","onTabShowProcess","onTabShowEnd","onTabHideStart","onTabHide","onTabHideProcess","onTabHideEnd","onTabRemoveStart","onTabRemove","onTabRemoveEnd","onLabelTarget","onRequestStart","onRequestEnd","onRequestError","onRequestSuccess","onRequestAbort","onContentRenderStart","onContentRender","onContentRenderEnd"],params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,renderTabView:!1,setInitialTab:!1,setInitialTabImmediately:!0,active:null,items:[],targetEvent:"click",toggleOnHashChange:!1,showLoader:!0,responseKey:"data",responseHTML:!0,cache:!1,ajax:{type:"json",method:"get",url:"",params:""},overlayConstructor:"Com.Overlay",overlayParams:{position:"absolute",lazy:!0,autoOpen:!1,removeOnClose:!0}},strings:{server_error:"An unexpected error has occurred. Please try again later."}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.TabsetHelper",function(e,t,o){var n=o._inherit;o.construct=function(){var e=this;e.nodes={container:cm.node("div"),labels:[],tabs:[],select:cm.node("select")},e.ajaxHandler=null,e.isAjax=!1,e.isProcess=!1,e.targetEvent=null,e.current=!1,e.previous=!1,e.items={},e.itemsList=[],e.hashChangeHandler=e.hashChange.bind(e),n.prototype.construct.apply(e,arguments)},o.validateParams=function(){var e=this;switch(e.triggerEvent("onValidateParamsStart"),cm.isEmpty(e.params.ajax.url)||(e.isAjax=!0),e.params.targetEvent){case"hover":e.targetEvent="mouseover";break;case"click":default:e.targetEvent="click"}e.triggerEvent("onValidateParams"),e.triggerEvent("onValidateParamsProcess"),e.triggerEvent("onValidateParamsEnd")},o.onSetEvents=function(){return this.params.toggleOnHashChange&&cm.addEvent(window,"hashchange",this.hashChangeHandler),this},o.onUnsetEvents=function(){return this.params.toggleOnHashChange&&cm.removeEvent(window,"hashchange",this.hashChangeHandler),this},o.onConstructEnd=function(){this.setInitialTab()},o.renderViewModel=function(){var t=this;return n.prototype.renderViewModel.apply(t,arguments),t.processTabs(t.nodes.tabs,t.nodes.labels),cm.forEach(t.params.items,function(e){t.renderTab(e)}),t.processSelect(t.nodes.select),cm.getConstructor(t.params.overlayConstructor,function(e){t.components.loader=new e(t.params.overlayParams)}),t},o.processTab=function(e,t){var n=cm.merge(this.getNodeDataConfig(e.container),this.getNodeDataConfig(t.container)),a=cm.merge(n,{tab:e,label:t});this.addTab(a)},o.processTabs=function(e,n){var a,o,r,s=this,t=e.length?e:n,i=[];return cm.forEach(t,function(e,t){a=n[t],o=cm.merge(s.getNodeDataConfig(e.container),s.getNodeDataConfig(a.container)),r=cm.merge(o,{tab:e,label:a}),i.push(r)}),s.addTabs(i),s},o.renderTab=function(e){var t=this;return e=cm.merge({index:t.itemsList.length,id:"",title:"",content:null,tab:{container:cm.node("li"),inner:cm.node("div")},label:{container:cm.node("li"),link:cm.node("a")},menu:{container:cm.node("li"),link:cm.node("a")},constructor:!1,constructorParams:{},constructorEventName:"onLoadEnd",className:"",cache:null,ajax:{},isHidden:!1,isShow:!1,isAjax:!1,isCached:!1},e),cm.isBoolean(e.cache)||(e.cache=t.params.cache),t.params.renderTabView&&t.renderTabView(e),cm.isEmpty(e.ajax.url)||(e.isAjax=!0),cm.isEmpty(e.className)||(cm.addClass(e.label.container,e.className),cm.addClass(e.menu.container,e.className),cm.addClass(e.tab.container,e.className)),cm.isEmpty(e.id)||t.items[e.id]||(t.itemsList.push(e),(t.items[e.id]=e).isHidden&&(cm.addClass(e.label.container,"hidden"),cm.addClass(e.menu.container,"hidden"),cm.addClass(e.tab.container,"hidden")),t.renderTabTarget(e,e.label.container),t.renderTabTarget(e,e.menu.container)),t},o.renderTabTarget=function(e,t){var n=this;n.targetEvent&&cm.addEvent(t,n.targetEvent,function(){n.triggerEvent("onLabelTarget",e),n.params.toggleOnHashChange?window.location.hash=e.id:n.setTab(e.id)})},o.renderTabView=function(e){},o.removeTab=function(e){var t=this,n=t.items[e];return n&&(t.triggerEvent("onTabRemove",n),n.id===t.current&&t.setByIndex(0),cm.remove(n.tab.container),cm.remove(n.label.container),t.itemsList=cm.arrayRemove(t.itemsList,n),delete t.items[n.id],t.triggerEvent("onTabRemove",n),t.triggerEvent("onTabRemoveEnd",n)),t},o.setTab=function(e){var t=this,n=t.items[e];return n&&t.current!==e&&(t.triggerEvent("onTabShowStart",n),t.unsetTab(t.current),t.previous=t.current,t.current=e,n.isShow=!0,t.triggerEvent("onTabShowProcess",n),!t.previous&&t.params.setInitialTabImmediately&&(cm.addClass(n.tab.container,"is-immediately"),cm.addClass(n.label.container,"is-immediately"),setTimeout(function(){cm.removeClass(n.tab.container,"is-immediately"),cm.removeClass(n.label.container,"is-immediately")},5)),cm.addClass(n.tab.container,"active",!0),cm.addClass(n.label.container,"active",!0),cm.setSelect(t.nodes.select,t.current),t.refreshTab(t.current)),t},o.unsetTab=function(e){var t=this,n=t.items[e];return n&&(t.isProcess&&t.abort(),t.triggerEvent("onTabHideStart",n),n.isShow=!1,t.triggerEvent("onTabHideProcess",n),cm.removeClass(n.tab.container,"active"),cm.removeClass(n.label.container,"active"),t.triggerEvent("onTabHide",n),t.triggerEvent("onTabHideEnd",n)),t},o.refreshTab=function(e){var t=this,n=t.items[e],a={};n.constructor?n.controller?n.controller.refresh&&n.controller.refresh():cm.getConstructor(n.constructor,function(e){a[n.constructorEventName]=function(){t.tabShowEnd(n,{})},n.controller=new e(cm.merge(n.constructorParams,{container:n.tab.inner,events:a}))}):n.isAjax&&(!n.cache||n.cache&&!n.isCached)?t.ajaxHandler=o.callbacks.request(t,{config:cm.merge(t.params.ajax,n.ajax)},n):t.tabShowEnd(n,{})},o.unsetHead=function(){var e=this.items[this.current];return e&&cm.removeClass(e.label.container,"active"),this},o.getInitialTab=function(){var e,t=this;return cm.isEmpty(t.itemsList)||cm.isEmpty(t.items)?null:t.params.toggleOnHashChange&&(e=window.location.hash.slice(1),t.isValidTab(e))?e:(e=t.params.active,t.isValidTab(e)?e:t.itemsList[0].id)},o.setInitialTab=function(){var e=this,t=e.params.setInitialTab?e.getInitialTab():e.params.active;e.isValidTab(t)&&e.setTab(t)},o.isValidTab=function(e){return!!this.getTab(e)},o.tabShowEnd=function(e,t){e.id===this.current&&(cm.customEvent.trigger(e.tab.container,"redraw",{direction:"child",self:!1}),this.triggerEvent("onTabShow",e,t),this.triggerEvent("onTabShowEnd",e,t))},o.processSelect=function(e){var t=this;cm.addEvent(e,"change",function(){t.setTab(e.value)})},o.hashChange=function(){var e=decodeURIComponent(window.location.hash.slice(1));this.isValidTab(e)&&this.setTab(e)},o.callbacks.prepare=function(e,t,n){return t.config=e.callbacks.beforePrepare(e,t,n),t.config.url=cm.strReplace(t.config.url,{"%tab%":n.id,"%baseUrl%":cm._baseUrl}),t.config.params=cm.objectReplace(t.config.params,{"%tab%":n.id,"%baseUrl%":cm._baseUrl}),t.config=e.callbacks.afterPrepare(e,t,n),t.config},o.callbacks.beforePrepare=function(e,t,n){return t.config},o.callbacks.afterPrepare=function(e,t,n){return t.config},o.callbacks.request=function(t,n,a){return(n=cm.merge({response:null,config:null,data:null},n)).config=t.callbacks.prepare(t,n,a),cm.ajax(cm.merge(n.config,{onStart:function(){o.callbacks.start(t,n,a)},onSuccess:function(e){n.response=e,o.callbacks.response(t,n,a)},onError:function(){o.callbacks.error(t,n,a)},onAbort:function(){o.callbacks.abort(t,n,a)},onEnd:function(){o.callbacks.end(t,n,a)}}))},o.callbacks.start=function(e,t,n){e.isProcess=!0,e.params.showLoader&&e.components.loader.embed(n.tab.container).open(),e.triggerEvent("onRequestStart",n,t)},o.callbacks.end=function(e,t,n){e.isProcess=!1,e.params.showLoader&&e.components.loader.close(),e.triggerEvent("onRequestEnd",n,t)},o.callbacks.filter=function(e,t,n){var a,o=cm.objectSelector(e.params.responseKey,t.response);return o&&!cm.isEmpty(o)&&(a=o),a},o.callbacks.response=function(e,t,n){cm.isEmpty(t.response)||(t.data=o.callbacks.filter(e,t,n)),cm.isEmpty(t.data)?o.callbacks.error(e,t,n):o.callbacks.success(e,t,n)},o.callbacks.error=function(e,t,n){o.callbacks.renderError(e,t,n),e.triggerEvent("onRequestError",n,t)},o.callbacks.success=function(e,t,n){o.callbacks.render(e,t,n),e.triggerEvent("onRequestSuccess",n,t)},o.callbacks.abort=function(e,t,n){e.triggerEvent("onRequestAbort",n,t)},o.callbacks.render=function(e,t,n){n.data=t.data,n.isCached=!0,e.triggerEvent("onContentRenderStart",n,t),o.callbacks.renderContent(e,t,n),e.triggerEvent("onContentRender",n,t),e.triggerEvent("onContentRenderEnd",n,t),e.tabShowEnd(n,t)},o.callbacks.renderContent=function(e,t,n){var a;e.params.responseHTML&&(a=cm.strToHTML(t.data),cm.clearNode(n.tab.inner),cm.appendNodes(a,n.tab.inner))},o.callbacks.renderError=function(e,t,n){e.params.responseHTML&&(cm.clearNode(n.tab.inner),n.tab.inner.appendChild(cm.node("div",{class:"cm__empty"},e.lang("server_error"))))},o.set=function(e){return this.items[e]&&this.setTab(e),this},o.setByIndex=function(e){var t=this.itemsList[e];return t&&this.setTab(t.id),this},o.unset=function(){var e=this;return e.unsetTab(e.current),e.params.toggleOnHashChange&&(window.location.hash=""),e.current=null,e.previous=null,e},o.get=function(){return this.current},o.refresh=function(){return cm.isUndefined(this.current)||this.refreshTab(this.current),this},o.addTab=function(e){return this.renderTab(e),this},o.addTabs=function(e){var t=this;return cm.forEach(e,function(e){t.renderTab(e)}),t},o.getTab=function(e){return e&&this.items[e]?this.items[e]:null},o.getTabs=function(){return this.items},o.getCurrentTab=function(){return this.items[this.current]},o.getTabsCount=function(){return this.itemsList.length},o.isTabEmpty=function(e){var t=this.getTab(e);return!(t&&t.tab.inner.childNodes.length)},o.abort=function(){return this.ajaxHandler&&this.ajaxHandler.abort&&this.ajaxHandler.abort(),this}}),cm.define("Com.ScrollPagination",{extend:"Com.AbstractController",events:["onRebuild","onStart","onAbort","onError","onEmpty","onPageRender","onPageRenderEnd","onPageShow","onPageHide","onEnd","onFinalize","onSetCount","onButtonShow","onButtonHide"],params:{controllerEvents:!0,renderStructure:!1,embedStructureOnRender:!1,embedStructure:"append",clearOnRebuild:!1,resizeEvent:!0,scrollEvent:!0,scrollNode:window,scrollIndent:"Math.max(%scrollHeight% / 2, 600)",disabled:!1,data:[],count:0,perPage:0,startPage:1,startPageToken:"",pageCount:0,useToken:!1,autoSend:!0,showButton:!0,showLoader:!0,loaderDelay:"cm._config.loadDelay",setDelay:"cm._config.loadDelay",stopOnESC:!0,pageTag:"div",pageAttributes:{class:"com__scroll-pagination__page"},responseCountKey:"count",responseTokenKey:"token",responseKey:"data",responseErrorsKey:"errors",responseHTML:!1,ajax:{type:"json",method:"get",url:"",params:""}},strings:{load_more:"Load More",server_error:"An unexpected error has occurred. Please try again later."}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.ScrollPagination",function(classConstructor,className,classProto,classInherit){classProto.construct=function(){var e=this;e.nodes={container:cm.node("div"),scroll:null,bar:cm.node("div"),barHolder:cm.node("div"),content:cm.node("div"),pages:cm.node("div"),button:cm.node("div"),loader:cm.node("div")},e.pages={},e.ajaxHandler=null,e.loaderDelay=null,e.setDelay=null,e.currentAction=null,e.isAjax=!1,e.isProcess=!1,e.isFinalize=!1,e.isButton=!1,e.isDisabled=!1,e.page=null,e.pageToken=null,e.currentPage=null,e.previousPage=null,e.nextPage=null,e.pageCount=0,e.keyDownEventHandler=e.keyDownEvent.bind(e),e.setHandler=e.set.bind(e),classInherit.prototype.construct.apply(e,arguments)},classProto.onConstructEnd=function(){this.params.autoSend&&this.set()},classProto.validateParams=function(){var e=this;e.triggerEvent("onValidateParamsStart"),e.triggerEvent("onValidateParams"),e.triggerEvent("onValidateParamsProcess"),e.isDisabled=e.params.disabled,e.nodes.scroll&&(e.params.scrollNode=e.nodes.scroll),cm.isEmpty(e.params.ajax.url)?e.params.showLoader=!1:e.isAjax=!0,0===e.params.pageCount&&e.params.perPage&&e.params.count?e.pageCount=Math.ceil(e.params.count/e.params.perPage):e.pageCount=e.params.pageCount,e.setToken(e.params.startPage,e.params.startPageToken),e.nextPage=e.params.startPage,e.triggerEvent("onValidateParamsEnd")},classProto.onScroll=function(){var t=this;t.checkForRequest()&&t.set(),cm.forEach(t.pages,function(e){t.isPageVisible(e)})},classProto.onRedraw=function(){var t=this;cm.forEach(t.pages,function(e){t.isPageVisible(e)})},classProto.renderView=function(){var e=this;e.nodes.container=cm.node("div",{class:"com__scroll-pagination"},e.nodes.content=cm.node("div",{class:"com__scroll-pagination__content"},e.nodes.pages=cm.node("div",{class:"com__scroll-pagination__pages"})),e.nodes.bar=cm.node("div",{class:"com__scroll-pagination__bar"},e.nodes.button=cm.node("div",{class:"button button-primary"},e.lang("load_more")),e.nodes.loader=cm.node("div",{class:"button button-clear has-icon has-icon has-icon-small"},cm.node("div",{class:"icon small loader"}))))},classProto.renderViewModel=function(){var t=this;classInherit.prototype.renderViewModel.apply(t,arguments),t.resetStyles(),cm.addEvent(t.nodes.button,"click",function(e){e=cm.getEvent(e),cm.preventDefault(e),t.set()}),t.params.stopOnESC&&cm.addEvent(window,"keydown",t.keyDownEventHandler)},classProto.resetStyles=function(){var e=this;e.params.showButton&&"none"!==e.params.showButton?e.callbacks.showButton(e):e.callbacks.hideButton(e),cm.addClass(e.nodes.loader,"is-hidden")},classProto.keyDownEvent=function(e){var t=this;cm.handleKey(e,"escape",function(){cm.isProcess||cm.isFinalize||"none"===t.params.showButton||t.callbacks.showButton(t)})},classProto.checkForRequest=function(){var that=this,scrollRect=cm.getRect(that.params.scrollNode),pagesRect=cm.getRect(that.nodes.pages),scrollIndent;return!(that.isDisabled||cm.isProcess||that.isFinalize||that.isButton||that.checkForButton())&&(scrollIndent=eval(cm.strReplace(that.params.scrollIndent,{"%scrollHeight%":scrollRect.bottom-scrollRect.top})),pagesRect.bottom-scrollRect.bottom<=scrollIndent)},classProto.checkForButton=function(){return!0===this.params.showButton||"once"===this.params.showButton&&this.params.startPage===this.page},classProto.callbacks.prepare=function(e,t){return(t=e.callbacks.beforePrepare(e,t)).url=cm.strReplace(t.url,{"%perPage%":e.params.perPage,"%limit%":e.params.perPage,"%page%":e.page,"%offset%":(e.page-1)*e.params.perPage,"%token%":e.pageToken,"%baseUrl%":cm._baseUrl}),t.params=cm.objectReplace(t.params,{"%perPage%":e.params.perPage,"%limit%":e.params.perPage,"%page%":e.page,"%offset%":(e.page-1)*e.params.perPage,"%token%":e.pageToken,"%baseUrl%":cm._baseUrl}),t=e.callbacks.afterPrepare(e,t)},classProto.callbacks.beforePrepare=function(e,t){return t},classProto.callbacks.afterPrepare=function(e,t){return t},classProto.callbacks.request=function(t,n){return n=t.callbacks.prepare(t,n),t.currentAction=n,cm.ajax(cm.merge(n,{onStart:function(){t.callbacks.start(t)},onSuccess:function(e){t.callbacks.response(t,n,e)},onError:function(){t.callbacks.error(t,n)},onAbort:function(){t.callbacks.abort(t,n)},onEnd:function(){t.callbacks.end(t)}}))},classProto.callbacks.filter=function(e,t,n){var a=[],o=cm.objectPath(e.params.responseErrorsKey,n),r=cm.objectPath(e.params.responseKey,n),s=cm.objectPath(e.params.responseCountKey,n),i=cm.objectPath(e.params.responseTokenKey,n);return cm.isEmpty(o)&&(cm.isEmpty(r)||(a=!e.params.responseHTML&&e.params.perPage?r.slice(0,e.params.perPage):r),s&&e.setCount(s),i&&e.setToken(e.nextPage,i),e.params.useToken&&!i&&e.callbacks.finalize(e)),a},classProto.callbacks.response=function(e,t,n){e.setPage(),n=n&&e.callbacks.filter(e,t,n),cm.isEmpty(n)?(e.triggerEvent("onEmpty"),e.callbacks.finalize(e)):e.callbacks.render(e,n)},classProto.callbacks.error=function(e,t){e.callbacks.finalize(e),e.triggerEvent("onError")},classProto.callbacks.abort=function(e,t){e.triggerEvent("onAbort")},classProto.callbacks.data=function(e,t){var n,a,o,r;e.callbacks.start(e),e.setPage(),cm.isEmpty(t)?e.callbacks.render(e,t):0===e.params.perPage?(e.callbacks.render(e,t),e.callbacks.finalize(e)):0<e.params.perPage&&(n=t.length,a=(e.page-1)*e.params.perPage,o=e.page*e.params.perPage,n<=a?e.callbacks.finalize(e):(r=t.slice(a,Math.min(o,n)),e.callbacks.render(e,r)),n<=o&&e.callbacks.finalize(e)),e.callbacks.end(e)},classProto.callbacks.renderContainer=function(e,t){return cm.node(e.params.pageTag,e.params.pageAttributes)},classProto.callbacks.render=function(e,t){var n=cm.getScrollTop(e.params.scrollNode),a={page:e.page,token:e.pageToken,pages:e.nodes.pages,container:cm.node(e.params.pageTag),data:t,isVisible:!1};e.page===e.params.startPage&&e.clear(),a.container=e.callbacks.renderContainer(e,a),e.pages[e.page]=a,e.triggerEvent("onPageRender",a),e.callbacks.renderPage(e,a),cm.appendChild(a.container,e.nodes.pages),cm.addClass(a.container,"is-loaded",!0),cm.setScrollTop(e.params.scrollNode,n),e.triggerEvent("onPageRenderEnd",a),e.isPageVisible(a)},classProto.callbacks.renderPage=function(e,t){var n;e.params.responseHTML&&(n=cm.strToHTML(t.data),cm.appendNodes(n,t.container))},classProto.callbacks.start=function(e){e.isProcess=!0,e.params.showLoader&&(e.isButton?(cm.addClass(e.nodes.button,"is-hidden"),cm.removeClass(e.nodes.loader,"is-hidden")):e.loaderDelay=setTimeout(function(){cm.removeClass(e.nodes.loader,"is-hidden"),cm.removeClass(e.nodes.bar,"is-hidden")},e.params.loaderDelay)),e.triggerEvent("onStart")},classProto.callbacks.end=function(e){e.isProcess=!1,e.loaderDelay&&clearTimeout(e.loaderDelay),cm.addClass(e.nodes.loader,"is-hidden"),0<e.pageCount&&e.pageCount===e.currentPage&&e.callbacks.finalize(e),e.callbacks.toggleButton(e),e.triggerEvent("onEnd"),e.checkForRequest()&&(e.setDelay=setTimeout(e.setHandler,e.params.setDelay))},classProto.callbacks.finalize=function(e){e.isFinalize||(e.isFinalize=!0,e.callbacks.hideButton(e),e.triggerEvent("onFinalize"))},classProto.callbacks.toggleButton=function(e){!e.isFinalize&&e.checkForButton()?e.callbacks.showButton(e):e.callbacks.hideButton(e)},classProto.callbacks.showButton=function(e){e.isButton=!0,cm.removeClass(e.nodes.button,"is-hidden"),cm.removeClass(e.nodes.bar,"is-hidden"),cm.removeClass(e.nodes.barHolder,"is-hidden"),e.triggerEvent("onButtonShow")},classProto.callbacks.hideButton=function(e){e.isButton=!1,cm.addClass(e.nodes.button,"is-hidden"),cm.addClass(e.nodes.bar,"is-hidden"),cm.addClass(e.nodes.barHolder,"is-hidden"),e.triggerEvent("onButtonHide")},classProto.rebuild=function(e){var t=this;return t.isProcess&&t.abort(),t.pages={},t.page=null,t.pageToken=null,t.currentPage=null,t.previousPage=null,t.nextPage=null,t.pageCount=0,t.isFinalize=!1,cm.isEmpty(e)||t.setParams(e),t.validateParams(),t.resetStyles(),t.params.clearOnRebuild&&t.clear(),t.triggerEvent("onRebuild"),t.set(),t},classProto.clear=function(){return cm.clearNode(this.nodes.pages),this},classProto.set=function(){var e,t=this;return t.setDelay&&clearTimeout(t.setDelay),t.isProcess||t.isFinalize||(t.page=t.nextPage,t.pageToken=t.pages[t.page]?t.pages[t.page].token:"",t.isAjax?(e=cm.clone(t.params.ajax),t.ajaxHandler=t.callbacks.request(t,e)):t.callbacks.data(t,t.params.data)),t},classProto.setToken=function(e,t){return this.pages[e]||(this.pages[e]={}),this.pages[e].token=t,this},classProto.setCount=function(e){var t=this;return cm.isUndefined(e)||(e=parseInt(e.toString())),cm.isNumber(e)&&e!==t.params.count&&(t.params.count=e,0===t.params.pageCount&&t.params.count&&t.params.perPage?t.pageCount=Math.ceil(t.params.count/t.params.perPage):t.pageCount=t.params.pageCount,0<t.pageCount&&t.pageCount===t.currentPage&&t.callbacks.finalize(t),t.triggerEvent("onSetCount",e)),t},classProto.setAction=function(e,t,n,a){var o=this;switch(t=cm.inArray(["raw","update","current"],t)?t:"current",n=!cm.isUndefined(n)&&n,a=!!cm.isUndefined(a)||a,t){case"raw":o.params.ajax=cm.merge(o._raw.params.ajax,e);break;case"current":o.params.ajax=cm.merge(o.params.ajax,e);break;case"update":o.params.ajax=cm.merge(o._update.params.ajax,e)}return n&&(o._update.params.ajax=cm.clone(o.params.ajax)),a&&o.rebuild(),o},classProto.getAction=function(){return this.params.ajax},classProto.getCurrentAction=function(){return this.currentAction},classProto.setPage=function(){var e=this;return e.previousPage=e.currentPage,e.currentPage=e.nextPage,e.nextPage++,e},classProto.isPageVisible=function(e,t){if(e.container){t=cm.isUndefined(t)?cm.getRect(this.params.scrollNode):t;var n=cm.getRect(e.container);return cm.inRange(n.top,n.bottom,t.top,t.bottom)?e.isVisible||(e.isVisible=!0,cm.removeClass(e.container,"is-hidden"),cm.triggerEvent("onPageShow",e)):e.isVisible&&(e.isVisible=!1,cm.addClass(e.container,"is-hidden"),cm.triggerEvent("onPageHide",e)),e.isVisible}return!1},classProto.abort=function(){return this.ajaxHandler&&this.ajaxHandler.abort&&this.ajaxHandler.abort(),this},classProto.disable=function(){return this.isDisabled=!0,this},classProto.enable=function(){return this.isDisabled=!1,this},classProto.embedButton=function(e){this.nodes.barHolder=e,cm.appendChild(this.nodes.bar,e)},classProto.isParent=function(e,t){return cm.isParent(this.nodes.container,e,t)}}),cm.define("Com.Calendar",{modules:["Params","Events","Langs","DataConfig","Stack"],events:["onRender","onDayOver","onDayOut","onDayClick","onMonthRender"],params:{node:cm.node("div"),name:"",className:"",startYear:1950,endYear:"current + 10",renderMonthOnInit:!0,startWeekDay:0,renderSelectsInBody:!0},strings:{daysAbbr:["S","M","T","W","T","F","S"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]}},function(params){var that=this,nodes={selects:{}},selects={},today=new Date,current={year:today.getFullYear(),month:today.getMonth()},previous={},next={},init=function(){that.setParams(params),that.convertEvents(that.params.events),that.getDataConfig(that.params.node),validateParams(),render(),setMiscEvents(),that.params.renderMonthOnInit&&renderView(),that.addToStack(nodes.container),that.triggerEvent("onRender")},validateParams=function(){/current/.test(that.params.startYear)&&(that.params.startYear=eval(cm.strReplace(that.params.startYear,{current:(new Date).getFullYear()}))),/current/.test(that.params.endYear)&&(that.params.endYear=eval(cm.strReplace(that.params.endYear,{current:(new Date).getFullYear()})))},render=function(){var t;nodes.container=cm.Node("div",{class:"com__calendar"},cm.Node("div",{class:"selects"},nodes.months=cm.Node("select",{class:"select months"}),nodes.years=cm.Node("select",{class:"select years"})),cm.Node("table",cm.Node("thead",nodes.days=cm.Node("tr")),nodes.dates=cm.Node("tbody"))),cm.isEmpty(that.params.className)||cm.addClass(nodes.container,that.params.className),cm.forEach(7,function(e){t=6<(t=e+that.params.startWeekDay)?Math.abs(6-(t-1)):t,nodes.days.appendChild(cm.Node("th",that.lang("daysAbbr")[t]))}),that.lang("months").forEach(function(e,t){nodes.months.appendChild(cm.Node("option",{value:t},e))});for(var e=that.params.endYear;e>=that.params.startYear;e--)nodes.years.appendChild(cm.Node("option",{value:e},e));that.params.node.appendChild(nodes.container)},setMiscEvents=function(){selects.years=new Com.Select({node:nodes.years,renderInBody:that.params.renderSelectsInBody}).set(current.year).addEvent("onChange",renderView),selects.months=new Com.Select({node:nodes.months,renderInBody:that.params.renderSelectsInBody}).set(current.month).addEvent("onChange",renderView)},renderView=function(e){var t;e=void 0===e||e,today=new Date,t=new Date(selects.years.get(),selects.months.get(),1),current=getMonthData(t),(t=new Date(current.year,current.month,1)).setMonth(current.month-1),previous=getMonthData(t),(t=new Date(current.year,current.month,1)).setMonth(current.month+1),next=getMonthData(t),cm.clearNode(nodes.dates),cm.forEach(6,renderRow),e&&that.triggerEvent("onMonthRender",current)},renderRow=function(e){var t=current.startWeekDay-that.params.startWeekDay,n=7*(e-1)+1-(0<t?t-7:t),a=nodes.dates.appendChild(cm.Node("tr"));cm.forEach(7,function(){renderCell(a,n),n++})},renderCell=function(e,t){var n,a,o;e.appendChild(n=cm.Node("td")),t<=0?(n.appendChild(a=cm.Node("div",previous.dayCount+t)),cm.addClass(n,"out"),cm.addEvent(a,"click",that.prevMonth)):t>current.dayCount?(n.appendChild(a=cm.Node("div",t-current.dayCount)),cm.addClass(n,"out"),cm.addEvent(a,"click",that.nextMonth)):(n.appendChild(a=cm.Node("div",t)),cm.addClass(n,"in"),o={container:n,node:a,day:t,month:current.month,year:current.year,date:new Date(current.year,current.month,t),isWeekend:!1,isToday:!1},today.getFullYear()==current.year&&today.getMonth()==current.month&&t==today.getDate()&&(o.isToday=!0,cm.addClass(n,"today")),/0|6/.test(new Date(current.year,current.month,t).getDay())&&(o.isWeekend=!0,cm.addClass(n,"weekend")),cm.addEvent(a,"mouseover",function(){that.triggerEvent("onDayOver",o)}),cm.addEvent(a,"mouseout",function(){that.triggerEvent("onDayOut",o)}),cm.addEvent(a,"click",function(){that.triggerEvent("onDayClick",o)}),current.days[t]=o)},getMonthData=function(e){var t={year:e.getFullYear(),month:e.getMonth(),days:{},startWeekDay:e.getDay()};return t.dayCount=32-new Date(t.year,t.month,32).getDate(),t};that.getFullYear=function(){return current.year},that.getMonth=function(){return current.month},that.set=function(e,t,n){return n=void 0===n||n,e>=that.params.startYear&&e<=that.params.endYear&&0<=t&&t<=11&&(selects.years.set(e,!1),selects.months.set(t,!1),renderView(n)),that},that.clear=function(e){e=void 0===e||e;var t=new Date;return selects.years.set(t.getFullYear(),!1),selects.months.set(t.getMonth(),!1),renderView(e),that},that.renderMonth=function(){return renderView(),that},that.getCurrentMonth=function(){return current},that.nextMonth=function(){return next.year<=that.params.endYear&&(selects.years.set(next.year,!1),selects.months.set(next.month,!1),renderView()),that},that.prevMonth=function(){return previous.year>=that.params.startYear&&(selects.years.set(previous.year,!1),selects.months.set(previous.month,!1),renderView()),that},that.selectDay=function(e){e&&current.year==e.getFullYear()&&current.month==e.getMonth()&&cm.addClass(current.days[e.getDate()].container,"selected")},that.unSelectDay=function(e){e&&current.year==e.getFullYear()&&current.month==e.getMonth()&&cm.removeClass(current.days[e.getDate()].container,"selected")},that.getNodes=function(e){return nodes[e]||nodes},init()}),cm.define("Com.CalendarEvents",{modules:["Params","Structure","Stack","DataConfig","Langs"],params:{node:cm.node("div"),container:null,embedStructure:"append",name:"",data:{},format:"cm._config.displayDateFormat",startYear:1950,endYear:(new Date).getFullYear()+10,startWeekDay:0,target:"_blank","Com.Tooltip":{className:"com__calendar-events__tooltip"}},strings:{daysAbbr:["S","M","T","W","T","F","S"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]}},function(e){var o=this;o.nodes={},o.components={};var t=function(){o.nodes.container=cm.node("div",{class:"com__calendar-events"}),o.components.calendar=new Com.Calendar({node:o.nodes.container,renderMonthOnInit:!1,startYear:o.params.startYear,endYear:o.params.endYear,startWeekDay:o.params.startWeekDay,langs:o.params.langs}),o.components.tooltip=new Com.Tooltip(o.params["Com.Tooltip"]),o.embedStructure(o.nodes.container)},n=function(){o.components.calendar.addEvent("onDayOver",r).addEvent("onMonthRender",a).renderMonth()},a=function(e,n){var t,a;(t=o.params.data[n.year])&&(t=t[n.month+1])&&cm.forEach(t,function(e,t){(a=n.days[t])&&cm.addClass(a.container,"active")})},r=function(e,t){var n,a={};(n=o.params.data[t.year])&&(n=n[t.month+1])&&(n=n[t.day])&&(a.content=cm.node("div",{class:"pt__listing com__calendar-events__listing"},a.list=cm.node("ul",{class:"list"})),cm.forEach(n,function(e){a.list.appendChild(cm.node("li",cm.node("a",{href:e.url,target:o.params.target},e.title)))}),o.components.tooltip.setTarget(t.node).setTitle(cm.dateFormat(t.date,o.params.format,o.lang())).setContent(a.content).show())};o.addData=function(e){return o.params.data=cm.merge(o.params.data,e),o.components.calendar.renderMonth(),o},o.replaceData=function(e){return o.params.data=e,o.components.calendar.renderMonth(),o},o.setParams(e),o.getDataConfig(o.params.node),t(),n(),o.addToStack(o.nodes.container)}),cm.define("Com.CollapsibleLayout",{modules:["Params","Events","DataConfig","DataNodes","Storage"],events:["onRender","onCollapseLeft","onExpandLeft","onCollapseRight","onExpandRight"],params:{node:cm.Node("div"),remember:!1}},function(e){var n=this;n.nodes={leftButton:cm.Node("div"),leftContainer:cm.Node("div"),rightButton:cm.Node("div"),rightContainer:cm.Node("div")},n.isLeftCollapsed=!1,n.isRightCollapsed=!1;var t=function(){var e,t;cm.addEvent(n.nodes.leftButton,"click",o),cm.addEvent(n.nodes.rightButton,"click",a),n.isLeftCollapsed=cm.isClass(n.params.node,"is-sidebar-left-collapsed"),n.isRightCollapsed=cm.isClass(n.params.node,"is-sidebar-right-collapsed"),n.params.remember&&(e=n.storageRead("isLeftCollapsed"),t=n.storageRead("isRightCollapsed"),n.isLeftCollapsed=null!==e?e:n.isLeftCollapsed,n.isRightCollapsed=null!==t?t:n.isRightCollapsed),cm.inDOM(n.nodes.leftContainer)&&"none"!=cm.getStyle(n.nodes.leftContainer,"display")||(n.isLeftCollapsed=!0),cm.inDOM(n.nodes.rightContainer)&&"none"!=cm.getStyle(n.nodes.rightContainer,"display")||(n.isRightCollapsed=!0),n.isLeftCollapsed?n.collapseLeft(!0):n.expandLeft(!0),n.isRightCollapsed?n.collapseRight(!0):n.expandRight(!0),n.triggerEvent("onRender")},a=function(){n.isRightCollapsed?n.expandRight():n.collapseRight()},o=function(){n.isLeftCollapsed?n.expandLeft():n.collapseLeft()};n.collapseLeft=function(e){return n.isLeftCollapsed=!0,e&&cm.addClass(n.params.node,"is-immediately"),cm.replaceClass(n.params.node,"is-sidebar-left-expanded","is-sidebar-left-collapsed",!0),e&&cm.removeClass(n.params.node,"is-immediately"),n.params.remember&&n.storageWrite("isLeftCollapsed",!0),n.triggerEvent("onCollapseLeft"),n},n.expandLeft=function(e){return n.isLeftCollapsed=!1,e&&cm.addClass(n.params.node,"is-immediately"),cm.replaceClass(n.params.node,"is-sidebar-left-collapsed","is-sidebar-left-expanded",!0),setTimeout(function(){e&&cm.removeClass(n.params.node,"is-immediately")},5),n.params.remember&&n.storageWrite("isLeftCollapsed",!1),n.triggerEvent("onExpandLeft"),n},n.collapseRight=function(e){return n.isRightCollapsed=!0,e&&cm.addClass(n.params.node,"is-immediately"),cm.replaceClass(n.params.node,"is-sidebar-right-expanded","is-sidebar-right-collapsed",!0),setTimeout(function(){e&&cm.removeClass(n.params.node,"is-immediately")},5),n.params.remember&&n.storageWrite("isRightCollapsed",!0),n.triggerEvent("onCollapseRight"),n},n.expandRight=function(e){return n.isRightCollapsed=!1,e&&cm.addClass(n.params.node,"is-immediately"),cm.replaceClass(n.params.node,"is-sidebar-right-collapsed","is-sidebar-right-expanded",!0),e&&cm.removeClass(n.params.node,"is-immediately"),n.params.remember&&n.storageWrite("isRightCollapsed",!1),n.triggerEvent("onExpandRight"),n},n.setParams(e),n.convertEvents(n.params.events),n.getDataNodes(n.params.node),n.getDataConfig(n.params.node),t()}),cm.define("Com.Collector",{modules:["Params","Events","DataConfig","Stack"],events:["onRenderStart","onRender","onAdd","onRemove","onConstructStart","onConstruct","onDestructStart","onDestruct"],params:{node:"document.body",name:"",attribute:"data-element",autoInit:!1}},function(e){var l=this;l.isChanged=!1,l.stackList=[],l.stackNodes={};function a(e,t){var n=[];return e.getAttribute(l.params.attribute)===t&&n.push(e),n=n.concat(cm.clone(cm.getByAttr(l.params.attribute,t,e)))}function d(e,t){var n=(n=a(e,t)).filter(function(e){return!cm.inArray(l.stackNodes[t],e)});return l.stackNodes[t]=l.stackNodes[t].concat(n),n}function m(e,t){var n;return a(e,t).filter(function(e){return(n=cm.inArray(l.stackNodes[t],e))&&l.stackNodes[t].splice(l.stackNodes[t].indexOf(e),1),n})}function u(){l.isChanged&&l.stackList.sort(function(e,t){return e.priority-t.priority}),l.isChanged=!1}var t=function(){l.params.autoInit&&cm.forEach(cm._defineStack,function(t){l.add(t.prototype._name.full,function(e){new t({node:e})},null,t.prototype.params.collectorPriority)})};l.add=function(e,t,n,a){var o;return e&&(l.stackNodes[e]||(l.stackNodes[e]=[]),o={name:e,priority:a||0,construct:t,destruct:n},!cm.isUndefined(a)&&cm.isNumber(a)?l.stackList.splice(a,0,o):l.stackList.push(o),l.isChanged=!0,l.triggerEvent("onAdd",o)),l},l.remove=function(t,n,a){return t&&(cm.isUndefined(n)?l.stackList=l.stackList.filter(function(e){return!(e.name===t)}):l.stackList=l.stackList.filter(function(e){return!(e.name===t&&e.construct===n&&e.destruct===a)}),l.isChanged=!0,l.triggerEvent("onRemove",{name:t})),l},l.construct=function(e,t){var n,a,o,r,s,i,c=Date.now();return e=e||document.body,l.triggerEvent("onConstructStart",{node:e,name:t}),u(),t?(s=d(e,r=t),i=l.stackList.filter(function(e){return e.name===r}),cm.forEach(i,function(t){cm.forEach(s,function(e){t.construct&&t.construct(e,t.priority)})})):(n=e,a={},o=l.stackList.slice(0),cm.forEach(l.stackNodes,function(e,t){a[t]=d(n,t)}),cm.forEach(o,function(t){cm.forEach(a[t.name],function(e){t.construct&&t.construct(e,t.priority)})})),l.triggerEvent("onConstruct",{node:e,name:t}),cm.errorLog({type:"common",name:"Com.Collector",message:["Construct time",Date.now()-c,"ms."].join(" ")}),l},l.destruct=function(e,t){var n,a,o,r,s,i,c,d=Date.now();return e=e||null,l.triggerEvent("onDestructStart",{node:e,name:t}),u(),t?(r=e,s=t,i={},c=l.stackList.filter(function(e){return e.name===s}),cm.isNode(r)?(i=m(r,s),cm.forEach(c,function(t){cm.forEach(i,function(e){t.destruct&&t.destruct(e,t.priority)})})):cm.isWindow(window)&&(cm.forEach(c,function(t){cm.forEach(l.stackNodes[t.name],function(e){t.destruct&&t.destruct(e,t.priority)})}),l.stackNodes[s]=[])):(n=e,a={},o=l.stackList.slice(0),cm.isNode(n)?(cm.forEach(l.stackNodes,function(e,t){a[t]=m(n,t)}),cm.forEach(o,function(t){cm.forEach(a[t.name],function(e){t.destruct&&t.destruct(e,t.priority)})})):cm.isWindow(window)&&(cm.forEach(o,function(t){cm.forEach(l.stackNodes[t.name],function(e){t.destruct&&t.destruct(e,t.priority)})}),cm.forEach(l.stackNodes,function(e,t){l.stackNodes[t]=[]}))),l.triggerEvent("onDestruct",{node:e,name:t}),cm.errorLog({type:"common",name:"Com.Collector",message:["Destruct time",Date.now()-d,"ms."].join(" ")}),l},l.setParams(e),l.convertEvents(l.params.events),l.getDataConfig(l.params.node),l.addToStack(l.params.node),l.triggerEvent("onRenderStart"),t(),l.addToStack(l.params.node),l.triggerEvent("onRender")}),Com.Elements.Columns={},Com.GetColumns=function(e){return Com.Elements.Columns[e]||null},cm.define("Com.Columns",{modules:["Params","Events","DataConfig","Stack"],required:["Com.Draggable"],events:["onRenderStart","onRender","onAdd","onRemove","onChange","onResize","enableEditing","disableEditing","enableEditable","disableEditable"],params:{columns:!1,node:cm.node("div"),container:!1,name:"",renderStructure:!1,minColumnWidth:48,data:[],isEditing:!0,customEvents:!0}},function(e){var r,s=this,i={};s.isEditing=null,s.pointerType=null,s.items=[],s.chassis=[];function c(){var t=(100/s.items.length).toFixed(2);cm.forEach(s.items,function(e){e.width=[t,"%"].join(""),e.container.style.width=e.width,e.rulerCounter.innerHTML=e.width}),s.triggerEvent("onResize",s.items),s.triggerEvent("onChange",s.items)}function o(){cm.forEach(s.chassis,function(e){cm.remove(e.container)}),s.chassis=[],h()}function d(){cm.forEach(s.chassis,function(e){f(e)})}var t=function(){cm.isNode(s.params.columns)&&(s.params.node=s.params.columns)},n=function(){s.params.renderStructure?l():s.params.node&&a(),s.params.customEvents&&(cm.customEvent.add(i.container,"redraw",function(){s.redraw()}),cm.customEvent.add(i.container,"enableEditable",function(){s.enableEditing()}),cm.customEvent.add(i.container,"disableEditable",function(){s.disableEditing()}))},a=function(){var e;i.container=s.params.node,i.inner=cm.getByAttr("data-com__columns","inner",i.container)[0],i.holder=cm.getByAttr("data-com__columns","holder",i.container)[0],e=(e=cm.clone(cm.getByAttr("data-com__columns","column",i.holder)||[])).filter(function(t){var n=!0;return cm.forEach(e,function(e){cm.isParent(e,t)&&(n=!1)}),n}),cm.forEach(e,m)},l=function(){i.container=cm.Node("div",{class:"com__columns"},i.inner=cm.Node("div",{class:"inner"},i.holder=cm.Node("div",{class:"container"}))),cm.forEach(s.params.data,u),s.params.container&&s.params.container.appendChild(i.container)},m=function(e){var t={container:e,inner:cm.getByAttr("data-com__columns","column-inner",e)[0]||cm.Node("div"),width:e.style.width};p(t),s.items.push(t)},u=function(e,t){return(e=cm.merge({width:"0%"},e)).container=cm.Node("div",{class:"com__column"},e.inner=cm.Node("div",{class:"inner"})),p(e),s.items.push(e),i.holder.appendChild(e.container),t&&s.triggerEvent("onAdd",e),e},p=function(e){e.rulerContainer=cm.Node("div",{class:"com__columns__ruler"},e.ruler=cm.Node("div",{class:"pt__ruler is-horizontal is-small"},cm.Node("div",{class:"line line-top"}),e.rulerCounter=cm.Node("div",{class:"counter"},e.width),cm.Node("div",{class:"line line-bottom"}))),cm.insertFirst(e.rulerContainer,e.inner)},h=function(){s.chassis=[];var e=s.items.length-1;cm.forEach(e,g)},g=function(e){var t={index:e};t.container=cm.Node("div",{class:"com__columns__chassis"},t.drag=cm.Node("div",{class:"pt__drag is-horizontal"},cm.Node("div",{class:"line"}),cm.Node("div",{class:"drag"},cm.Node("div",{class:"icon draggable"})))),f(t),s.chassis.push(t),cm.addEvent(t.container,"touchstart",function(e){v(e,t)}),cm.addEvent(t.container,"mousedown",function(e){v(e,t)}),i.inner.appendChild(t.container)},f=function(e){var t=i.holder.offsetWidth/100,n=e.index,a=((cm.getRealX(s.items[n].container)-cm.getRealX(i.holder)+s.items[n].container.offsetWidth)/t).toFixed(2);e.container.style.left=[a,"%"].join("")},v=function(e,t){if(cm.preventDefault(e),!e.button&&!r)if(s.pointerType=e.type,e.ctrlKey||e.metaKey)y(),c(),d();else{cm.hideSpecialTags();var n=s.chassis.indexOf(t),a=s.items[n],o=s.items[n+1];switch(r={index:n,offset:cm.getRealX(i.holder),ratio:i.holder.offsetWidth/100,chassis:t,left:{column:a,offset:cm.getRealX(a.container)},right:{column:o,offset:cm.getRealX(o.container)+o.container.offsetWidth}},cm.addClass(i.container,"is-active"),cm.addClass(r.chassis.drag,"is-active"),cm.addClass(r.left.column.ruler,"is-active"),cm.addClass(r.right.column.ruler,"is-active"),cm.addClass(document.body,"pt__drag__body--horizontal"),s.pointerType){case"mousedown":cm.addEvent(window,"mousemove",b),cm.addEvent(window,"mouseup",C);break;case"touchstart":cm.addEvent(window,"touchmove",b),cm.addEvent(window,"touchend",C)}}},b=function(e){cm.preventDefault(e);var t=cm.getEventClientPosition(e),n=e.shiftKey?0:2,a=t.left-r.left.offset,o=r.right.offset-t.left;a>s.params.minColumnWidth&&o>s.params.minColumnWidth&&(r.left.column.width=[(a/r.ratio).toFixed(n),"%"].join(""),r.right.column.width=[(o/r.ratio).toFixed(n),"%"].join(""),r.left.column.container.style.width=r.left.column.width,r.right.column.container.style.width=r.right.column.width,r.chassis.container.style.left=[((t.left-r.offset)/r.ratio).toFixed(n),"%"].join(""),r.left.column.rulerCounter.innerHTML=r.left.column.width,r.right.column.rulerCounter.innerHTML=r.right.column.width),s.triggerEvent("onChange",s.items)},C=function(){switch(cm.removeClass(i.container,"is-active"),cm.removeClass(r.chassis.drag,"is-active"),cm.removeClass(r.left.column.ruler,"is-active"),cm.removeClass(r.right.column.ruler,"is-active"),cm.removeClass(document.body,"pt__drag__body--horizontal"),s.pointerType){case"mousedown":cm.removeEvent(window,"mousemove",b),cm.removeEvent(window,"mouseup",C);break;case"touchstart":cm.removeEvent(window,"touchmove",b),cm.removeEvent(window,"touchend",C)}r=null,cm.showSpecialTags(),s.triggerEvent("onResize",s.items)},y=function(){cm.addEvent(window,"contextmenu",w),cm.addEvent(window,"mouseup",E)},E=function(){cm.removeEvent(window,"contextmenu",w),cm.removeEvent(window,"mouseup",E)},w=function(e){cm.preventDefault(e)};s.enableEditing=function(){return cm.isBoolean(s.isEditing)&&s.isEditing||(s.isEditing=!0,cm.addClass(i.container,"is-editing is-editable"),s.redraw(),s.triggerEvent("enableEditing"),s.triggerEvent("enableEditable")),s},s.disableEditing=function(){return cm.isBoolean(s.isEditing)&&!s.isEditing||(s.isEditing=!1,cm.removeClass(i.container,"is-editing is-editable"),s.triggerEvent("disableEditing"),s.triggerEvent("disableEditable")),s},s.redraw=function(){return d(),s},s.setColumnsCount=function(e){var t,n,a=s.items.length;if(!e||a===e)return s;if(a<e)cm.forEach(e-a,function(){u({},!0)});else for(;s.items.length>e;)t=!0,n=s.items.pop(),cm.remove(n.container),t&&s.triggerEvent("onRemove",n);return c(),o(),s},s.get=function(){return s.items},s.setParams(e),t(),s.convertEvents(s.params.events),s.getDataConfig(s.params.node),s.triggerEvent("onRenderStart"),n(),h(),s.params.isEditing&&s.enableEditing(),s.addToStack(i.container),s.triggerEvent("onRender")}),cm.define("Com.ColumnsHelper",{modules:["Params","Events","Langs","DataConfig","DataNodes","Callbacks","Stack"],events:["onRender","onChange","onResize","onDragStart","onDragMove","onDragStop","enableEditing","disableEditing","enableEditable","disableEditable"],params:{node:cm.node("div"),name:"",items:[],showDrag:!0,minColumnWidth:48,isEditing:!0,customEvents:!0,ajax:{type:"json",method:"post",url:"",params:""}}},function(e){var r=this;r.items=[],r.chassis=[],r.current=null,r.pointerType=null,r.isEditing=null,r.isRendered=!1,r.isAjax=!1,r.isProcess=!1,r.ajaxHandler=null;var t=function(){cm.isEmpty(r.params.ajax.url)||(r.isAjax=!0)},n=function(){a(),cm.addEvent(window,"resize",function(){r.redraw()}),r.params.customEvents&&(cm.customEvent.add(r.params.node,"redraw",function(){r.redraw()}),cm.customEvent.add(r.params.node,"enableEditable",function(){r.enableEditing()}),cm.customEvent.add(r.params.node,"disableEditable",function(){r.disableEditing()})),r.params.isEditing&&r.enableEditing()},a=function(){r.isEditing&&!r.isRendered&&(r.items=[],r.chassis=[],cm.forEach(r.params.items,function(e,t){r.items.push({container:e}),t<r.params.items.length-1&&o(t)}),r.isRendered=!0)},o=function(e){var t={index:e};t.container=cm.node("div",{class:"com__columns__chassis"},t.inner=cm.node("div",{class:"pt__drag is-horizontal"},cm.node("div",{class:"line"}))),r.params.showDrag?t.inner.appendChild(cm.node("div",{class:"drag"},cm.node("div",{class:"icon draggable"}))):t.inner.appendChild(cm.node("div",{class:"helper"})),s(t),r.chassis.push(t),cm.addEvent(t.container,"touchstart",function(e){i(e,t)}),cm.addEvent(t.container,"mousedown",function(e){i(e,t)}),r.params.node.appendChild(t.container)},s=function(e){var t=r.params.node.offsetWidth/100,n=e.index,a=((cm.getRealX(r.items[n].container)-cm.getRealX(r.params.node)+r.items[n].container.offsetWidth)/t).toFixed(2);e.container.style.left=[a,"%"].join("")},i=function(e,t){if(cm.preventDefault(e),!e.button&&!r.current){r.pointerType=e.type,r.isProcess&&r.abort(),cm.hideSpecialTags();var n=r.chassis.indexOf(t),a=r.items[n],o=r.items[n+1];switch(r.current={index:n,offset:cm.getRealX(r.params.node),ratio:r.params.node.offsetWidth/100,chassis:t,left:{column:a,offset:cm.getRealX(a.container)},right:{column:o,offset:cm.getRealX(o.container)+o.container.offsetWidth}},cm.addClass(r.params.node,"is-chassis-active"),cm.addClass(r.current.chassis.inner,"is-active"),cm.addClass(document.body,"pt__drag__body--horizontal"),r.pointerType){case"mousedown":cm.addEvent(window,"mousemove",c),cm.addEvent(window,"mouseup",d);break;case"touchstart":cm.addEvent(window,"touchmove",c),cm.addEvent(window,"touchend",d)}return r.triggerEvent("onDragStart",r.current),!0}},c=function(e){cm.preventDefault(e);var t=cm.getEventClientPosition(e),n=t.left-r.current.left.offset,a=r.current.right.offset-t.left;n>r.params.minColumnWidth&&a>r.params.minColumnWidth&&(r.current.left.column.width=[(n/r.current.ratio).toFixed(2),"%"].join(""),r.current.right.column.width=[(a/r.current.ratio).toFixed(2),"%"].join(""),r.current.left.column.container.style.width=r.current.left.column.width,r.current.right.column.container.style.width=r.current.right.column.width,r.current.chassis.container.style.left=[((t.left-r.current.offset)/r.current.ratio).toFixed(2),"%"].join("")),r.triggerEvent("onChange",r.items),r.triggerEvent("onDragMove",r.current)},d=function(){var e;switch(cm.removeClass(r.params.node,"is-chassis-active"),cm.removeClass(r.current.chassis.inner,"is-active"),cm.removeClass(document.body,"pt__drag__body--horizontal"),r.pointerType){case"mousedown":cm.removeEvent(window,"mousemove",c),cm.removeEvent(window,"mouseup",d);break;case"touchstart":cm.removeEvent(window,"touchmove",c),cm.removeEvent(window,"touchend",d)}cm.showSpecialTags(),r.triggerEvent("onResize",r.items),r.triggerEvent("onDragStop",r.current),r.current=null,r.isAjax&&(e=cm.clone(r.params.ajax),r.ajaxHandler=r.callbacks.request(r,e))};r.callbacks.prepare=function(e,t){var n=[];return cm.forEach(e.items,function(e){n.push(e.width)}),t.url=cm.strReplace(t.url,{"%items%":n}),t.params=cm.objectReplace(t.params,{"%items%":n}),t},r.callbacks.request=function(e,t){return t=e.callbacks.prepare(e,t),cm.ajax(cm.merge(t,{onStart:function(){e.callbacks.start(e)},onEnd:function(){e.callbacks.end(e)}}))},r.callbacks.start=function(e){e.isProcess=!0},r.callbacks.end=function(e){e.isProcess=!1},r.enableEditing=function(){return"boolean"==typeof r.isEditing&&r.isEditing||(r.isEditing=!0,a(),r.triggerEvent("enableEditing"),r.triggerEvent("enableEditable")),r},r.disableEditing=function(){return"boolean"==typeof r.isEditing&&!r.isEditing||(r.isEditing=!1,cm.forEach(r.chassis,function(e){cm.remove(e.container)}),r.items=[],r.chassis=[],r.isRendered=!1,r.triggerEvent("disableEditing"),r.triggerEvent("disableEditable")),r},r.abort=function(){return r.ajaxHandler&&r.ajaxHandler.abort&&r.ajaxHandler.abort(),r},r.redraw=function(){return r.isEditing&&cm.forEach(r.chassis,function(e){s(e)}),r},r.setParams(e),r.convertEvents(r.params.events),r.getDataNodes(r.params.node),r.getDataConfig(r.params.node),r.callbacksProcess(),t(),n(),r.addToStack(r.params.node),r.triggerEvent("onRender")}),cm.define("Com.Dialog",{modules:["Params","Events","Langs","DataConfig","Stack"],events:["onRenderStart","onRender","onOpenStart","onOpen","onOpenEnd","onCloseStart","onClose","onCloseEnd"],params:{container:"document.body",name:"",size:"auto",width:700,height:"auto",minHeight:0,maxHeight:"auto",position:"fixed",indentY:24,indentX:24,animate:!1,theme:"theme-light",className:"",content:cm.node("div"),contentValign:"top",scroll:!0,showTitle:!0,title:"",titleOverflow:!1,titleReserve:!0,closeButtonOutside:!1,closeButton:!0,closeOnBackground:!0,buttons:!1,showHelp:!1,help:"",helpConstructor:"Com.Tooltip",helpParams:{hold:!0,targetEvent:"click",hideOnReClick:!0,className:"com__dialog__tooltip",animate:"drop-bottom-left",width:"targetWidth -16",top:8,left:8,position:"absolute",duration:"cm._config.animDuration"},openTime:null,duration:"cm._config.animDuration",autoOpen:!0,appendOnRender:!1,removeOnClose:!0,destructOnRemove:!1,documentScroll:!1,icons:{closeInside:"icon default linked",closeOutside:"icon default linked",helpInside:"icon help linked",helpOutside:"icon help linked"}},strings:{closeTitle:"Close",close:"",helpTitle:"Help",help:""}},function(e){var p,h=this,g={};h.components={},h.isOpen=!1,h.isFocus=!1,h.isRemoved=!1,h.isDestructed=!1,h.isMaximize=!1,h.openInterval=null,h.resizeInterval=null,h.originalSize={},h.maximizeSize={width:"100%",height:"100%",minHeight:0,maxHeight:"auto",indentX:0,indentY:0};function t(){/full|fullscreen/.test(h.params.size)||cm.getPageSize("winWidth")<=cm._config.screenTabletPortrait?h.maximize():h.restore()}var n=function(){h.params.duration=cm.getTransitionDurationFromLESS("ComDialog-Duration",h.params.duration)},a=function(){void 0!==h.params.openTime&&null!==h.params.openTime&&(h.params.duration=h.params.openTime),h.params.showTitle||(h.params.titleReserve=!1)},o=function(){g.container=cm.Node("div",{class:"com__dialog"},g.bg=cm.Node("div",{class:"bg"}),g.window=cm.Node("div",{class:"com__dialog__window window"},g.windowInner=cm.Node("div",{class:"inner"}))),h.params.appendOnRender&&h.params.container.appendChild(g.container),g.container.style.position=h.params.position,g.window.style.width=h.params.width+"px",cm.addClass(g.container,h.params.theme),cm.addClass(g.window,h.params.theme),cm.addClass(g.container,h.params.className),h.params.animate&&(cm.addClass(g.container,"is-animate"),cm.addClass(g.window,"is-animate")),"full"===h.params.size&&(cm.addClass(g.container,"is-full"),cm.addClass(g.window,"is-full")),h.params.titleReserve&&(cm.addClass(g.container,"is-title-reserve"),cm.addClass(g.window,"is-title-reserve")),h.params.closeButtonOutside&&(g.bg.appendChild(g.closeOutside=cm.Node("div",{class:h.params.icons.closeOutside,title:h.lang("closeTitle")},h.lang("close"))),cm.addEvent(g.closeOutside,"click",u)),h.params.closeButton&&(cm.addClass(g.container,"has-close-inside"),cm.addClass(g.window,"has-close-inside"),g.window.appendChild(g.closeInside=cm.Node("div",{class:h.params.icons.closeInside,title:h.lang("closeTitle")},h.lang("close"))),cm.addEvent(g.closeInside,"click",u)),h.params.closeOnBackground&&(cm.addClass(g.container,"has-close-background"),cm.addEvent(g.bg,"click",u)),h.params.showHelp&&g.window.appendChild(g.helpInside=cm.Node("div",{class:h.params.icons.helpInside,title:h.lang("helpTitle")},h.lang("help"))),r(h.params.title),s(h.params.content),i(h.params.buttons),c(h.params.help),cm.addEvent(g.container,"mouseover",function(e){var t=cm.getEventTarget(e);cm.isParent(g.container,t,!0)&&(h.isFocus=!0)}),cm.addEvent(g.container,"mouseout",function(e){var t=cm.getRelatedTarget(e);cm.isParent(g.container,t,!0)||(h.isFocus=!1)}),animFrame(l)},r=function(e){h.params.showTitle?(cm.removeClass(g.container,"has-no-title"),cm.removeClass(g.window,"has-no-title"),cm.remove(g.title),g.title=cm.Node("div",{class:"title"}),cm.isEmpty(e)||(cm.isNode(e)?cm.appendChild(e,g.title):cm.appendChild(cm.textNode(e),g.title),h.params.titleOverflow&&cm.addClass(g.title,"cm__text-overflow")),cm.insertFirst(g.title,g.windowInner)):(cm.addClass(g.container,"has-no-title"),cm.addClass(g.window,"has-no-title"))},s=function(e){g.descr||(g.descr=cm.Node("div",{class:"descr"},g.scroll=cm.Node("div",{class:"scroll"},g.inner=cm.Node("div",{class:"inner com__dialog__inner"}))),h.params.scroll||cm.addClass(g.scroll,"is-no-scroll"),cm.inArray(["top","center","bottom"],h.params.contentValign)&&cm.addClass(g.scroll,["is-valign",h.params.contentValign].join("-")),g.title?cm.insertAfter(g.descr,g.title):g.buttons?cm.insertBefore(g.descr,g.buttons):cm.insertLast(g.descr,g.windowInner)),cm.isNode(e)&&cm.clearNode(g.inner).appendChild(e)},i=function(e){cm.isNode(e)&&(cm.remove(g.buttons),g.buttons=cm.Node("div",{class:"buttons"},e),cm.insertLast(g.buttons,g.windowInner))},c=function(e){h.params.showHelp&&(g.help||(g.help=cm.node("div",{class:"com__dialog__help"}),cm.getConstructor(h.params.helpConstructor,function(e){h.components.help=new e(cm.merge(h.params.helpParams,{target:g.helpInside,content:g.help,positionTarget:g.descr,container:g.container,holdTarget:g.container}))})),cm.clearNode(g.help),cm.isNode(e)?cm.appendChild(e,g.help):g.help.innerHTML=e)},d=function(){l(),C(),h.resizeInterval=setTimeout(d,h.params.resizeInterval)},l=function(){var e,t=cm.getNodeOffset(g.container),n=t.inner.height-2*h.params.indentY,a=t.inner.width-2*h.params.indentX,o=g.window.offsetHeight,r=g.window.offsetWidth,s=g.inner.offsetHeight,i=n-(g.title&&g.title.offsetHeight||0)-(g.buttons&&g.buttons.offsetHeight||0)-cm.getIndentY(g.windowInner)-cm.getIndentY(g.descr),c=n-i,d=a,l="auto"===h.params.maxHeight?i:/%/.test(h.params.maxHeight)?n/100*parseFloat(h.params.maxHeight)-c:(/px/.test(h.params.maxHeight)&&(h.params.maxHeight=parseFloat(h.params.maxHeight)),h.params.maxHeight-c),m="auto"===h.params.minHeight?0:/%/.test(h.params.minHeight)?n/100*parseFloat(h.params.minHeight)-c:(/px/.test(h.params.minHeight)&&(h.params.minHeight=parseFloat(h.params.minHeight)),h.params.minHeight-c),u="auto"===h.params.height?s<m?m:l<s?l:s:/%/.test(h.params.height)?n/100*parseFloat(h.params.height)-c:(/px/.test(h.params.height)&&(h.params.height=parseFloat(h.params.height)),h.params.height-c);u=Math.min(Math.max(u,m,0),i),e=/%/.test(h.params.width)?a/100*parseFloat(h.params.width):(/px/.test(h.params.width)&&(h.params.width=parseFloat(h.params.width)),h.params.width),e=Math.min(e,d),o===u+c&&p===s||((p=s)<=u?cm.removeClass(g.scroll,"is-scroll"):h.params.scroll&&cm.addClass(g.scroll,"is-scroll"),g.scroll.style.height=[u,"px"].join("")),r!==e&&(g.window.style.width=[e,"px"].join(""))},m=function(e){e={onEnd:function(){}},h.isOpen||(h.isOpen=!0,h.isFocus=!0,h.isRemoved=!1,cm.inDOM(g.container)||h.params.container.appendChild(g.container),g.container.style.display="block",t(),d(),h.params.documentScroll||cm.addClass(cm.getDocumentHtml(),"cm__scroll--none"),cm.addEvent(window,"keydown",b),cm.addEvent(window,"resize",v),cm.addClass(g.container,"is-open",!0),cm.addClass(g.window,"is-open",!0),h.openInterval&&clearTimeout(h.openInterval),h.openInterval=setTimeout(function(){e.onEnd(),h.triggerEvent("onOpen"),h.triggerEvent("onOpenEnd")},h.params.duration),h.triggerEvent("onOpenStart"))},u=function(e){e={onEnd:function(){}},h.isOpen&&(h.isOpen=!1,h.isFocus=!1,cm.removeEvent(window,"keydown",b),cm.removeEvent(window,"resize",v),cm.removeClass(g.container,"is-open",!0),cm.removeClass(g.window,"is-open",!0),h.openInterval&&clearTimeout(h.openInterval),h.openInterval=setTimeout(function(){C(),h.params.documentScroll||cm.removeClass(cm.getDocumentHtml(),"cm__scroll--none"),g.container.style.display="none",h.params.removeOnClose&&f(),e.onEnd(),h.triggerEvent("onClose"),h.triggerEvent("onCloseEnd")},h.params.duration),h.triggerEvent("onCloseStart"))},f=function(e){h.isRemoved||(h.isRemoved=!0,(e||h.params.destructOnRemove)&&h.destruct(),cm.remove(g.container))},v=function(e){t()},b=function(e){cm.isKey(e,"escape")&&h.isFocus&&u()},C=function(){h.resizeInterval&&clearTimeout(h.resizeInterval),h.resizeInterval=null};h.set=function(e,t,n){return r(e),s(t),i(n),h},h.setTitle=function(e){return r(e),h},h.setContent=function(e){return s(e),h},h.setButtons=function(e){return i(e),h},h.open=function(){return m(),h},h.close=function(){return u(),h},h.setWidth=function(e){return h.params.width=e,h},h.setHeight=function(e){return h.params.height=e,h},h.setMinHeight=function(e){return h.params.minHeight=e,h},h.setMaxHeight=function(e){return h.params.maxHeight=e,h},h.maximize=function(){return h.isMaximize||(h.isMaximize=!0,cm.forEach(h.maximizeSize,function(e,t){h.originalSize[t]=h.params[t],h.params[t]=e}),cm.addClass(g.container,"is-fullscreen"),cm.addClass(g.window,"is-fullscreen")),h},h.restore=function(){return h.isMaximize&&(h.isMaximize=!1,cm.forEach(h.originalSize,function(e,t){h.params[t]=e}),cm.removeClass(g.container,"is-fullscreen"),cm.removeClass(g.window,"is-fullscreen")),h},h.remove=function(e){return h.isOpen?u({onEnd:function(){!e&&h.params.removeOnClose||f(e)}}):f(e),h},h.destruct=function(){return h.isDestructed||(h.isDestructed=!0,cm.customEvent.trigger(g.container,"destruct",{direction:"child",self:!1}),h.removeFromStack(),h.remove(!0)),h},h.isOwnNode=function(e){return cm.isParent(g.window,e,!0)},h.getNodes=function(e){return g[e]||g},n(),h.setParams(e),h.convertEvents(h.params.events),h.getDataConfig(h.params.content),a(),h.triggerEvent("onRenderStart"),o(),h.addToStack(g.container),h.triggerEvent("onRender"),h.params.autoOpen&&m()}),cm.define("Com.DialogContainer",{extend:"Com.AbstractContainer",params:{constructor:"Com.Dialog",container:"document.body",destructOnClose:!1,renderButtons:!1,renderTitle:!0,renderHelp:!1,justifyButtons:"right",params:{destructOnRemove:!1,autoOpen:!1}},strings:{close:"Close"}},function(e){this.buttons={},Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("Com.DialogContainer",function(e,t,n,a){n.onConstructStart=function(){this.buttons={}},n.onValidateParams=function(){var e=this;cm.isObject(e.params.content)&&(e.params.params.title=e.params.content.title||e.params.params.title,e.params.params.content=e.params.content.content||e.params.params.content,e.params.params.buttons=e.params.content.buttons||e.params.params.buttons,e.params.params.help=e.params.content.help||e.params.params.help),e.params.params.showTitle=e.params.renderTitle,e.params.params.showHelp=e.params.renderHelp},n.constructController=function(e){var t=this;return new e(cm.merge(t.params.params,{opener:t,container:t.params.container,title:t.nodes.title||t.params.params.title||t.params.title,content:t.nodes.content||t.params.params.content||t.params.content,buttons:t.nodes.buttons||t.params.params.buttons||t.params.buttons,help:t.nodes.help||t.params.params.help||t.params.help}))},n.renderControllerView=function(){return this.params.renderButtons&&this.renderButtonsView(),this},n.renderControllerEvents=function(){var e=this;e.components.controller.addEvent("onOpenStart",e.afterOpenControllerHandler),e.components.controller.addEvent("onOpenEnd",e.afterOpenControllerEndHandler),e.components.controller.addEvent("onCloseEnd",e.afterCloseControllerHandler)},n.renderButtonsView=function(){var t=this;return t.nodes.buttons=cm.node("div",{class:"pt__buttons"},t.nodes.buttonsHolder=cm.node("div",{class:"inner"})),cm.addClass(t.nodes.buttons,["pull",t.params.justifyButtons].join("-")),cm.forEach(t.buttons,function(e){t.renderButton(e)}),t},n.addButton=function(e){return(e=cm.merge({name:"",label:"",style:"button-primary",embed:!1,callback:function(){}},e)).node=cm.node("button",{class:["button",e.style].join(" ")},e.label),cm.addEvent(e.node,"click",e.callback),this.buttons[e.name]=e,this.nodes.buttonsHolder&&(e.embed=!0,cm.appendChild(e.node,this.nodes.buttonsHolder)),e},n.renderButton=function(e){var t=this;return!(e=t.getButton(e.name)?t.getButton(e.name):t.addButton(e)).embed&&t.nodes.buttonsHolder&&(e.embed=!0,cm.appendChild(e.node,t.nodes.buttonsHolder)),t},n.getButton=function(e){return this.buttons[e]}}),cm.define("Com.Draganddrop",{modules:["Params","Events"],events:["onRender","onInit","onDragStart","onDrop","onRemove","onReplace"],params:{container:cm.Node("div"),chassisTag:"div",draggableContainer:"document.body",scroll:!0,scrollNode:window,scrollSpeed:1,renderTemporaryAria:!1,useCSSAnimation:!0,useGracefulDegradation:!0,dropDuration:400,moveDuration:200,direction:"both",limit:!1,highlightAreas:!0,highlightChassis:!1,animateRemove:!0,removeNode:!0,classes:{area:null}}},function(e){var m,u,p,h,g,f,v,b=this,t={},o={},i=[],d=[],l=[],C=[],r=!1,s=!1,n=!1;b.pointerType=null;function a(e){cm.forEach(e,j)}function c(e){e.dimensions.y1=cm.getRealY(e.node),e.dimensions.y2=e.dimensions.y1+e.dimensions.height,e.dimensions.innerY1=e.dimensions.y1+e.dimensions.padding.top,e.dimensions.innerY2=e.dimensions.innerY1+e.dimensions.innerHeight,e.dimensions.absoluteY1=e.dimensions.y1-e.dimensions.margin.top,e.dimensions.absoluteY2=e.dimensions.y2+e.dimensions.margin.bottom}function y(e){cm.forEach(e,c)}var E,w=function(){b.params.dropDuration=cm.getTransitionDurationFromLESS("PtDnD-DropDuration",b.params.dropDuration),b.params.moveDuration=cm.getTransitionDurationFromLESS("PtDnD-MoveDuration",b.params.moveDuration)},S=function(e,t){var n;cm.inArray(d,e)||((n=cm.merge({node:e,styleObject:cm.getStyleObject(e),type:!1,isLocked:!1,isTemporary:!1,isSystem:!1,isRemoveZone:!1,draggableInChildNodes:!0,cloneDraggable:!1,items:[],chassis:[],dimensions:{}},t)).type=n.node.getAttribute("data-block-type"),cm.addClass(n.node,"pt__dnd-area"),cm.addClass(n.node,b.params.classes.area),n.isLocked?cm.addClass(n.node,"is-locked"):cm.addClass(n.node,"is-available"),k(n),d.push(n.node),i.push(n))},k=function(t){var e;t.items=[],t.draggableInChildNodes?(e=t.node.childNodes,cm.forEach(e,function(e){e.tagName&&"draggable"==e.getAttribute("data-com-draganddrop")&&t.items.push(_(e,t,{}))})):(e=cm.getByAttr("data-com-draganddrop","draggable",t.node),cm.forEach(e,function(e){t.items.push(_(e,t,{}))}))},_=function(e,t,n){var a=cm.merge({node:e,styleObject:cm.getStyleObject(e),type:!1,chassis:{top:null,bottom:null},dimensions:{offsetX:0,offsetY:0}},n);return a.area=t,a.anim=new cm.Animation(a.node),a.type=a.node.getAttribute("data-block-type"),x(a),l.push(a),a},x=function(t){var e;t.drag=cm.getByAttr("data-com-draganddrop","drag",t.node)[0],t["drag-bottom"]=cm.getByAttr("data-com-draganddrop","drag-bottom",t.node)[0],e=t.drag||t.node,cm.addEvent(e,"touchstart",function(e){T(e,t)}),cm.addEvent(e,"mousedown",function(e){T(e,t)}),t["drag-bottom"]&&cm.addEvent(t["drag-bottom"],"mousedown",function(e){T(e,t)})},T=function(e,t){if(cm.preventDefault(e),!e.button&&!u){b.pointerType=e.type,cm.hideSpecialTags();var n,a,o=cm.getEventClientPosition(e),r=o.left,s=o.top;switch(m=cm.getPageSize(),b.triggerEvent("onDragStart",{item:t,node:t.node,from:t.area}),C=i.filter(function(e){return!(t.type!=e.type&&!e.isRemoveZone||cm.isParent(t.node,e.node)||e.isLocked)}),b.params.highlightAreas&&z(),j(t),t.dimensions.offsetX=r-t.dimensions.absoluteX1,t.dimensions.offsetY=s-t.dimensions.absoluteY1,(u=t.area.cloneDraggable?N(t):t).node.style.top=0,u.node.style.left=0,u.node.style.width=[u.dimensions.width,"px"].join(""),cm.setCSSTranslate(u.node,[u.dimensions.absoluteX1,"px"].join(""),[u.dimensions.absoluteY1,"px"].join("")),H(u),b.params.draggableContainer&&"selfParent"!==b.params.draggableContainer&&b.params.draggableContainer.appendChild(u.node),cm.addClass(u.node,"pt__dnd-helper"),cm.addClass(u.node,"is-active",!0),V(),I(),cm.forEach(u.area.items,function(e){r>=e.dimensions.absoluteX1&&r<e.dimensions.absoluteX2&&s>=e.dimensions.absoluteY1&&s<=e.dimensions.absoluteY2&&(a=s-(n=e).dimensions.absoluteY1<n.dimensions.absoluteHeight/2?"top":"bottom")}),!n&&u.area.items.length&&(a=s<u.area.dimensions.y1?(n=u.area.items[0],"top"):(n=u.area.items[u.area.items.length-1],"bottom")),(f=n?n.chassis[a]:u.area.chassis[0])&&(cm.addClass(f.node,"is-active"),b.params.highlightChassis&&cm.addClass(f.node,"is-highlight"),f.node.style.height=[u.dimensions.absoluteHeight,"px"].join("")),g=u.area,p=n,h=a,b.params.limit&&(j(g),g.node.style.minHeight=g.dimensions.height+"px"),cm.addClass(g.node,"is-active"),cm.addClass(document.body,"pt__dnd-body"),b.pointerType){case"mousedown":cm.addEvent(window,"mousemove",P),cm.addEvent(window,"mouseup",R);break;case"touchstart":cm.addEvent(window,"touchmove",P),cm.addEvent(window,"touchend",R)}}},P=function(e){cm.preventDefault(e);var t,n,a,o,r,s=cm.getEventClientPosition(e),i=s.left,c=s.top,d=c-u.dimensions.offsetY,l=i-u.dimensions.offsetX;switch(b.params.direction){case"both":t=[l,"px"].join(""),n=[d,"px"].join("");break;case"vertical":t=[u.dimensions.absoluteX1,"px"].join(""),n=b.params.limit?d<u.area.dimensions.y1?[u.area.dimensions.y1,"px"].join(""):d+u.dimensions.absoluteHeight>u.area.dimensions.y2?[u.area.dimensions.y2-u.dimensions.absoluteHeight,"px"].join(""):[d,"px"].join(""):[d,"px"].join("");break;case"horizontal":t=[l,"px"].join(""),n=[u.dimensions.absoluteY1,"px"].join("")}cm.setCSSTranslate(u.node,t,n),b.params.scroll&&(c+48>m.winHeight?W(1):W(c-48<0?-1:0)),B(),cm.forEach(C,function(e){i>=e.dimensions.x1&&i<e.dimensions.x2&&c>=e.dimensions.y1&&c<=e.dimensions.y2&&(!a||e.dimensions.width<a.dimensions.width||e.dimensions.height<a.dimensions.height)&&(a=e)}),a?cm.forEach(a.items,function(e){i>=e.dimensions.absoluteX1&&i<e.dimensions.absoluteX2&&c>=e.dimensions.absoluteY1&&c<=e.dimensions.absoluteY2&&(r=c-(o=e).dimensions.absoluteY1<o.dimensions.absoluteHeight/2?"top":"bottom")}):a=g,!o&&a.items.length&&(r=c<a.dimensions.innerY1?(o=a.items[0],"top"):(o=a.items[a.items.length-1],"bottom")),f&&cm.removeClass(f.node,"is-active is-highlight"),p&&o&&p.chassis[h]!=o.chassis[r]?(M(p.chassis[h],0,b.params.moveDuration),f=o.chassis[r]):!p&&o?(M(g.chassis[0],0,b.params.moveDuration),f=o.chassis[r]):p&&!o?(M(p.chassis[h],0,b.params.moveDuration),f=a.chassis[0]):p||o||g==a||(M(g.chassis[0],0,b.params.moveDuration),f=a.chassis[0]),f&&(cm.addClass(f.node,"is-active"),b.params.highlightChassis&&cm.addClass(f.node,"is-highlight"),M(f,u.dimensions.absoluteHeight,b.params.moveDuration)),g&&g!=a&&(cm.removeClass(g.node,"is-active"),v=g),g=a,p=o,h=r,v&&v.isTemporary&&g.isRemoveZone||cm.addClass(g.node,"is-active")},R=function(e){var t;switch(cm.removeClass(document.body,"pt__dnd-body"),b.pointerType){case"mousedown":cm.removeEvent(window,"mousemove",P),cm.removeEvent(window,"mouseup",R);break;case"touchstart":cm.removeEvent(window,"touchmove",P),cm.removeEvent(window,"touchend",R)}j(u),u.node.style.width=[g.dimensions.innerWidth-u.dimensions.margin.left-u.dimensions.margin.right,"px"].join(""),t=u.node.offsetHeight+u.dimensions.margin.top+u.dimensions.margin.bottom,u.node.style.width=[u.dimensions.width,"px"].join(""),p?(t!=p.chassis[h].node.offsetHeight&&M(p.chassis[h],t,b.params.dropDuration),A(u,g,{target:p.node,append:"top"==h?"before":"after",index:g.items.indexOf(p)+("top"==h?0:1),top:["top"==h?p.dimensions.absoluteY1:p.dimensions.absoluteY2,"px"].join(""),onStop:F})):g.isRemoveZone||g.isTemporary?D(u,{onStop:F}):(M(g.chassis[0],t,b.params.dropDuration),A(u,g,{onStop:F})),f&&cm.removeClass(f.node,"is-active is-highlight"),g&&(b.params.limit&&(g.node.style.minHeight=""),cm.removeClass(g.node,"is-active")),b.params.highlightAreas&&z(),cm.showSpecialTags()},N=function(e){var t=e.node.cloneNode(!0),n=b.params.renderTemporaryAria?i[0]:e.area,a=_(t,n,{});return a.dimensions=cm.clone(e.dimensions),n.items.push(a),a},A=function(e,t,n){(n=cm.merge({target:t.node,append:"child",index:0,width:[t.dimensions.innerWidth,"px"].join(""),top:[t.dimensions.innerY1-e.dimensions.margin.top,"px"].join(""),left:[t.dimensions.innerX1-e.dimensions.margin.left,"px"].join(""),onStart:function(){},onStop:function(){}},n)).onStart(),cm.addClass(e.node,"is-drop",!0),e.node.style.width=n.width,cm.setCSSTranslate(e.node,n.left,n.top),setTimeout(function(){switch(n.append){case"child":cm.appendChild(e.node,n.target);break;case"before":cm.insertBefore(e.node,n.target);break;case"after":cm.insertAfter(e.node,n.target);break;case"first":cm.insertFirst(e.node,n.target)}cm.removeClass(e.node,"pt__dnd-helper is-drop is-active",!0),e.node.style.left="auto",e.node.style.top="auto",e.node.style.width="auto",cm.setCSSTranslate(u.node,"auto","auto"),t.items.splice(n.index,0,e),b.triggerEvent("onDrop",{item:e,node:e.node,to:t,from:e.area,index:n.index}),e.area=t,n.onStop()},b.params.dropDuration)},D=function(t,e){function n(){b.params.removeNode&&cm.remove(r),l=l.filter(function(e){return e!=t}),H(t),e.noEvent||b.triggerEvent("onRemove",{item:t,node:t.node,from:t.area}),e.onStop()}var a,o,r;(e=cm.merge({isCurrent:t===u,isInDOM:cm.inDOM(t.node),onStart:function(){},onStop:function(){}},e)).onStart(),e.isInDOM&&b.params.animateRemove?(a=e.isCurrent?(r=t.node,o=t.anim,{left:[-(t.dimensions.absoluteWidth+50),"px"].join(""),opacity:0}):(r=cm.wrap(cm.Node("div",{class:"pt__dnd-removable"}),t.node),o=new cm.Animation(r),{height:"0px",opacity:0}),o.go({duration:b.params.dropDuration,anim:"smooth",style:a,onStop:n})):(r=t.node,n())},H=function(t){t.area.items=t.area.items.filter(function(e){return e!=t})},F=function(){L(),v=g=p=u=!1},I=function(){var a;cm.forEach(i,function(n){n.isLocked||(n.items.length||(a=O(),cm.appendChild(a.node,n.node),n.chassis.push(a)),cm.forEach(n.items,function(e,t){0===t&&(a=O(),cm.insertBefore(a.node,e.node),n.chassis.push(a)),a=O(),cm.insertAfter(a.node,e.node),n.chassis.push(a),e.chassis.top=n.chassis[t],e.chassis.bottom=n.chassis[t+1]}))})},O=function(){var e=cm.Node(b.params.chassisTag,{class:"pt__dnd-chassis"});return{node:e,anim:new cm.Animation(e),isShow:!1}},L=function(){cm.forEach(i,function(e){cm.forEach(e.chassis,function(e){cm.remove(e.node)}),e.chassis=[]})},M=function(e,t,n){var a;t=[t,"px"].join(""),b.params.useCSSAnimation||s?(!s&&(a=cm.getSupportedStyle("transition-duration"))&&(e.node.style[a]=[n,"ms"].join("")),e.node.style.height=t):e.anim.go({style:{height:t},anim:"smooth",duration:n})},j=function(e){e.dimensions=cm.extend(e.dimensions,cm.getFullRect(e.node,e.styleObject))},V=function(){a(i),cm.forEach(i,function(e){a(e.items)})},B=function(){var e,t,n=U();n[0].dimensions.y1!=cm.getRealY(n[0].node)&&(t=0,f&&(cm.addClass(f.node,"is-immediately"),t=f.node.offsetHeight,f.node.style.height=0),y(i),cm.forEach(i,function(e){y(e.items)}),f&&t&&(f.node.style.height=[t,"px"].join(""),e=f,setTimeout(function(){cm.removeClass(e.node,"is-immediately")},5)))},U=function(){return i.filter(function(e){return!e.isTemporary&&!e.isSystem})},z=function(){C&&(n?(n=!1,cm.forEach(C,function(e){cm.removeClass(e.node,"is-highlight")})):(n=!0,cm.forEach(C,function(e){cm.addClass(e.node,"is-highlight")})))},W=function(e){var t,n,a={};0==e?(r=!1,o.scroll.stop()):e<0&&!r?(r=!0,n=cm.getScrollTop(b.params.scrollNode)*b.params.scrollSpeed,cm.isWindow(b.params.scrollNode)?a.docScrollTop=0:a.scrollTop=0,o.scroll.go({style:a,duration:n,onStop:function(){r=!1}})):0<e&&!r&&(r=!0,t=cm.getScrollHeight(b.params.scrollNode)-m.winHeight,cm.isWindow(b.params.scrollNode)?a.docScrollTop=t:a.scrollTop=t,n=t*b.params.scrollSpeed,o.scroll.go({style:a,duration:n,onStop:function(){r=!1}}))};b.getArea=function(t){var n;return cm.forEach(i,function(e){e.node===t&&(n=e)}),n},b.registerArea=function(e,t){return cm.isNode(e)&&e.tagName&&S(e,t||{}),b},b.updateArea=function(e){var t=b.getArea(e);return t&&k(t),b},b.removeArea=function(t,e){return cm.isNode(t)&&cm.inArray(d,t)&&(d=d.filter(function(e){return e!=t}),i=i.filter(function(e){return e.node!=t})),b},b.getDraggable=function(t){var n;return cm.forEach(l,function(e){e.node===t&&(n=e)}),n},b.getDraggableList=function(){return l},b.registerDraggable=function(e,t,n){var a,o,r,s,i=[],c=b.getDraggable(e);return c?x(c):cm.inArray(d,t)&&(e.setAttribute("data-com-draganddrop","draggable"),(a=b.getArea(t)).draggableInChildNodes?(s=a.node.childNodes,cm.forEach(s,function(e){e.tagName&&"draggable"==e.getAttribute("data-com-draganddrop")&&i.push(e)})):i=cm.getByAttr("data-com-draganddrop","draggable",a.node),r=i.indexOf(e),o=_(e,a,n||{}),a.items.splice(r,0,o)),b},b.replaceDraggable=function(t,e,n){var a,o,r,s,i,c;return cm.forEach(l,function(e){e.node===t&&(a=e)}),a&&(r=a.area,s=r.items.indexOf(a),i=cm.wrap(cm.Node("div",{class:"pt__dnd-removable",style:"height: 0px;"}),e),c=new cm.Animation(i),cm.insertAfter(i,t),D(a,n),c.go({style:{height:[cm.getRealHeight(i,"offset",0),"px"].join(""),opacity:1},duration:300,anim:"simple",onStop:function(){cm.insertAfter(e,i),cm.remove(i),o=_(e,r),r.items.splice(s,0,o),b.triggerEvent("onReplace",{item:o,node:o.node,to:o.to})}})),b},b.removeDraggable=function(t,e){var n;return cm.forEach(l,function(e){e.node===t&&(n=e)}),n&&D(n,e||{}),b},b.getOrderingNodes=function(){var t,n=[],e=U();return cm.forEach(e,function(e){t={area:e.node,items:[]},cm.forEach(e.items,function(e){t.items.push(e.node)}),n.push(t)}),1==e.length?t.items:n},b.getOrderingIDs=function(){var n,t={},e=U();return cm.forEach(e,function(e){n={},cm.forEach(e.items,function(e,t){if(!e.id)throw new Error('Attribute "data-id" not specified on item node.');n[e.id]=t}),t[e.id]=n}),1==e.length?n:t},w(),b.setParams(e),b.convertEvents(b.params.events),b.params.container&&(b.params.useGracefulDegradation&&(cm.is("IE")&&cm.isVersion()<9||cm.isMobile())&&(s=!0),o.scroll=new cm.Animation(b.params.scrollNode),b.params.renderTemporaryAria&&(t.temporaryArea=cm.Node("div"),S(t.temporaryArea,{isTemporary:!0})),E=cm.getByAttr("data-com-draganddrop","area",b.params.container),cm.forEach(E,function(e){S(e,{})}),b.triggerEvent("onInit",{}),b.triggerEvent("onRender",{}))}),cm.define("Com.Draggable",{modules:["Params","Events","Langs","DataConfig"],events:["onRender","onStart","onMove","onStop","onSet","onSelect"],params:{node:cm.node("div"),target:!1,limiter:!1,minY:!1,direction:"both",alignNode:!1}},function(e){var n=this;n.startX=0,n.startY=0,n.nodeStartX=0,n.nodeStartY=0,n.isProcess=!1,n.pointerType=null,n.dimensions={target:{}},n.position=null;var t=function(){n.params.target||(n.params.target=n.params.node)},a=function(){n.getDimensions(),cm.addEvent(n.params.target,"touchstart",function(e){o(e)}),cm.addEvent(n.params.target,"mousedown",function(e){o(e)})},o=function(e){if(cm.preventDefault(e),!e.button&&!n.isProcess){n.isProcess=!0,n.pointerType=e.type,cm.hideSpecialTags();var t=cm.getEventClientPosition(e);switch(n.startX=t.left,n.startY=t.top,n.getDimensions(),n.nodeStartX=cm.getStyle(n.params.node,"left",!0),n.nodeStartY=cm.getStyle(n.params.node,"top",!0),i(t,"onSelect"),n.pointerType){case"mousedown":cm.addEvent(window,"mousemove",r),cm.addEvent(window,"mouseup",s);break;case"touchstart":cm.addEvent(window,"touchmove",r),cm.addEvent(window,"touchend",s)}n.triggerEvent("onStart")}},r=function(e){cm.preventDefault(e);var t=cm.getEventClientPosition(e);i(t,"onSelect"),n.triggerEvent("onMove")},s=function(e){cm.preventDefault(e),n.isProcess=!1;var t=cm.getEventClientPosition(e);switch(i(t,"onSet"),n.pointerType){case"mousedown":cm.removeEvent(window,"mousemove",r),cm.removeEvent(window,"mouseup",s);break;case"touchstart":cm.removeEvent(window,"touchmove",r),cm.removeEvent(window,"touchend",s)}cm.showSpecialTags(),n.triggerEvent("onStop")},i=function(e,t){e=cm.merge({left:0,top:0},e),n.params.node===n.params.target?(e.left+=n.nodeStartX-n.startX,e.top+=n.nodeStartY-n.startY):(e.left-=n.dimensions.target.absoluteX1,e.top-=n.dimensions.target.absoluteY1),e.left=Math.round(e.left),e.top=Math.round(e.top),e=c(e),n.position=e,n.triggerEvent(t,n.position)},c=function(e){switch(e=cm.merge({left:0,top:0,nodeTop:0,nodeLeft:0},e),n.params.limiter&&(e.top<0?e.top=0:e.top>n.dimensions.limiter.absoluteHeight&&(e.top=n.dimensions.limiter.absoluteHeight),e.left<0?e.left=0:e.left>n.dimensions.limiter.absoluteWidth&&(e.left=n.dimensions.limiter.absoluteWidth)),!isNaN(n.params.minY)&&e.top<n.params.minY&&(e.top=n.params.minY),e.nodeTop=e.top,e.nodeLeft=e.left,n.params.alignNode&&(e.nodeTop-=n.dimensions.node.absoluteHeight/2,e.nodeLeft-=n.dimensions.node.absoluteWidth/2),n.params.direction){case"vertical":n.params.node.style.top=[e.nodeTop,"px"].join("");break;case"horizontal":n.params.node.style.left=[e.nodeLeft,"px"].join("");break;default:n.params.node.style.top=[e.nodeTop,"px"].join(""),n.params.node.style.left=[e.nodeLeft,"px"].join("")}return e};n.getDimensions=function(){return n.dimensions.target=cm.getFullRect(n.params.target),n.dimensions.node=cm.getFullRect(n.params.node),n.dimensions.limiter=cm.getFullRect(n.params.limiter),n.dimensions},n.setPosition=function(e,t){return e=cm.merge({left:0,top:0},e),t=!!cm.isUndefined(t)||t,e=c(e),n.position=e,t&&(n.triggerEvent("onSelect",n.position),n.triggerEvent("onSet",n.position)),n},n.get=function(){return n.position},n.setParams(e),n.convertEvents(n.params.events),n.getDataConfig(n.params.node),t(),a(),n.triggerEvent("onRender")}),cm.define("Com.FileDropzone",{extend:"Com.AbstractController",events:["onDrop","onSelect"],params:{embedStructure:"append",target:null,rollover:!0,max:0,_height:128,_duration:"cm._config.animDuration","Com.FileReader":{}},strings:{drop_single:"drop file here",drop_multiple:"drop files here"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.FileDropzone",function(e,t,n,a){n.construct=function(){var e=this;e.dragInterval=null,e.isShow=!0,e.isHighlighted=!1,e.dragOverHandler=e.dragOver.bind(e),e.dragDropHandler=e.dragDrop.bind(e),e.showDropzoneHandler=e.showDropzone.bind(e),e.hideDropzoneHandler=e.hideDropzone.bind(e),e.onGetLESSVariablesProcessHandler=e.onGetLESSVariablesProcess.bind(e),e.setEventsProcessHander=e.setEventsProcess.bind(e),e.unsetEventsProcessHander=e.unsetEventsProcess.bind(e),e.addEvent("onGetLESSVariablesProcess",e.onGetLESSVariablesProcessHandler),e.addEvent("onSetEventsProcess",e.setEventsProcessHander),e.addEvent("onUnsetEventsProcess",e.unsetEventsProcessHander),a.prototype.construct.apply(e,arguments)},n.validateParams=function(){var e=this;e.setLangs({drop:!e.params.max||1<e.params.max?e.lang("drop_multiple"):e.lang("drop_single")})},n.onGetLESSVariablesProcess=function(){var e=this;e.params.height||(e.params.height=cm.getLESSVariable("ComFileDropzone-Height",e.params._height,!0)),e.params.duration||(e.params.duration=cm.getTransitionDurationFromLESS("ComFileDropzone-Duration",e.params._duration))},n.setEventsProcess=function(){cm.addEvent(window,"dragover",this.dragOverHandler),cm.addEvent(window,"drop",this.dragDropHandler)},n.unsetEventsProcess=function(){cm.removeEvent(window,"dragover",this.dragOverHandler),cm.removeEvent(window,"drop",this.dragDropHandler)},n.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__file-dropzone"},cm.node("div",{class:"inner"},cm.node("div",{class:"title"},cm.node("div",{class:"label"},e.lang("drop")),cm.node("div",{class:"icon cm-i cm-i__circle-arrow-down"})))),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd")},n.renderViewModel=function(){var e=this;e.params.rollover?(cm.addClass(e.nodes.container,"is-hidden"),e.components.animation=new cm.Animation(e.params.container)):(cm.removeClass(e.nodes.container,"is-hidden"),e.params.height&&(e.params.container.style.height=e.params.height+"px"))},n.dragOver=function(e){var t=this,n=cm.getEventTarget(e);cm.preventDefault(e),t.show(),t.showDropzone(),t.dragInterval&&clearTimeout(t.dragInterval),t.dragInterval=setTimeout(t.hideDropzoneHandler,100),cm.isParent(t.nodes.container,n,!0)?cm.addClass(t.nodes.container,"is-highlight"):cm.removeClass(t.nodes.container,"is-highlight")},n.dragDrop=function(e){var t=this,n=cm.getEventTarget(e);cm.isParent(t.nodes.container,n,!0)&&(cm.stopPropagation(e),cm.preventDefault(e),e.dataTransfer&&(e.dataTransfer.files&&e.dataTransfer.files.length?t.processFiles(e.dataTransfer.files):cm.fileFromDataTransfer(e,function(e){t.processFiles([e])}))),t.dragInterval&&clearTimeout(t.dragInterval),t.hide(),t.hideDropzone()},n.processFiles=function(t){var n=this,a=[],e=n.params.max?Math.min(t.length,n.params.max):t.length;cm.forEach(e,function(e){a.push(t[e]),n.triggerEvent("onDrop",t[e])}),a.length&&n.triggerEvent("onSelect",a)},n.show=function(){this.isShow||(this.isShow=!0,cm.replaceClass(this.nodes.container,"is-hidden","is-show"))},n.hide=function(){this.isShow&&(this.isShow=!1,cm.replaceClass(this.nodes.container,"is-show","is-hidden"))},n.showDropzone=function(){var e,t=this;t.isHighlighted||(t.isHighlighted=!0,cm.addClass(t.nodes.container,"is-highlight"),t.params.rollover&&(cm.addClass(t.params.container,"is-dragging"),cm.addClass(t.params.target,"is-hidden"),cm.removeClass(t.nodes.container,"is-hidden"),e=Math.max(t.params.height,t.params.target.offsetHeight),t.components.animation.go({style:{height:e+"px"},duration:t.params.duration,anim:"smooth"})))},n.hideDropzone=function(){var e,t=this;t.isHighlighted&&(t.isHighlighted=!1,cm.removeClass(t.nodes.container,"is-highlight"),t.params.rollover&&(cm.removeClass(t.params.container,"is-dragging"),cm.removeClass(t.params.target,"is-hidden"),cm.addClass(t.nodes.container,"is-hidden"),e=t.params.target.offsetHeight,t.components.animation.go({style:{height:e+"px"},duration:t.params.duration,anim:"smooth",onStop:function(){t.params.container.style.height="auto"}})))}}),cm.define("Com.FileReader",{modules:["Params","Events","Langs"],events:["onConstruct","onConstructStart","onConstructEnd","onValidateParams","onRenderStart","onRender","onReadStart","onReadProcess","onReadSuccess","onReadError","onReadEnd"],params:{file:null}},function(e){this.construct(e)}),cm.getConstructor("Com.FileReader",function(e,t,n){n.construct=function(e){var t=this;return t.isDestructed=!1,t.nodes={},t.components={},t.triggerEvent("onConstructStart"),t.setParams(e),t.convertEvents(t.params.events),t.render(),t.triggerEvent("onConstruct"),t.triggerEvent("onConstructEnd"),t},n.render=function(){var e=this;return e.triggerEvent("onRenderStart"),e.read(e.params.file),e.triggerEvent("onRender"),e},n.read=function(e,t){var n,a,o=this;return t=cm.isFunction(t)?t:function(){},cm.isFileReader&&cm.isFile(e)&&(o.triggerEvent("onReadStart",e),n=o.validate(e),o.triggerEvent("onReadProcess",n),a=new FileReader,cm.addEvent(a,"load",function(e){n.value=e.target.result,t(n),o.triggerEvent("onReadSuccess",n),o.triggerEvent("onReadEnd",n)}),cm.addEvent(a,"error",function(e){n.error=e,t(n),o.triggerEvent("onReadError",n),o.triggerEvent("onReadEnd",n)}),a.readAsDataURL(e)),o},n.validate=function(e){var t,n={_type:"file",value:null,error:null,name:"",size:0,url:null,type:null};return cm.isFile(e)?(n.file=e,n.type=e.type,n.name=e.name,n.size=e.size,n.url=window.URL.createObjectURL(e)):cm.isObject(e)?((n=cm.merge(n,e)).name=cm.isEmpty(n.name)?n.value:n.name,n.url=cm.isEmpty(n.url)?n.value:n.url):cm.isEmpty(e)||(t=cm.parseJSON(e),n=cm.isObject(t)?this.validate(t):this.validate({value:e})),n}}),cm.define("Com.FileStats",{extend:"Com.AbstractController",params:{mfu:0,umf:0,quote:0,usage:0},strings:{stats:"Statistics",mfu:"You can upload up to %mfu% files at a time.",umf:"Max file size: %umf%.",quote:"Total storage: %quote%.",usage:"Storage used: %usage%.",quote_unlimited:"Unlimited"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.FileStats",function(e,t,n){n._inherit;n.renderView=function(){var e=this,t={"%mfu%":e.params.mfu,"%umf%":e.params.umf,"%quote%":e.params.quote,"%usage%":e.params.usage};return t["%quote%"]=0===parseFloat(t["%quote%"])?e.lang("quote_unlimited"):t["%quote%"]+" Mb",t["%usage%"]=t["%usage%"]+" Mb",e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__file-stats"},e.nodes.content=cm.node("div",{class:"pt__line-info"},cm.node("div",{class:"icon small info"}),cm.node("div",{class:"item"},e.lang("mfu",t)),cm.node("div",{class:"item"},e.lang("umf",t)),cm.node("div",{class:"item"},e.lang("quote",t)),cm.node("div",{class:"item"},e.lang("usage",t)))),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd"),e}}),cm.define("Com.FormStepsLoader",{modules:["Params","Events","Langs","DataConfig","DataNodes","Callbacks","Stack"],events:["onRenderStart","onRender","onError","onAbort","onSuccess","onSendStart","onSendEnd","onProcessEnd"],params:{node:cm.Node("div"),name:"",animateDuration:"cm._config.animDuration",showLoader:!0,loaderDelay:"cm._config.loadDelay",responseKey:"data",responseHTML:!0,ajax:{type:"json",method:"POST",url:"",params:{request:"%request%",response:"%response%"}},"Com.Overlay":{position:"absolute",autoOpen:!1,removeOnClose:!0}},strings:{server_error:"An unexpected error has occurred. Please try again later."}},function(e){var n=this;n.nodes={container:cm.node("div"),request:{container:cm.node("div"),inner:cm.node("div")},buttons:{send:cm.node("div")},response:{container:cm.node("div"),inner:cm.node("div")}},n.components={},n.animations={},n.ajaxHandler=null,n.isProcess=!1,n.isRendering=!1,n.loaderDelay=null;var t=function(){n.params["Com.Overlay"].container=n.nodes.container},a=function(){cm.getConstructor("Com.Overlay",function(e,t){n.components.loader=new e(n.params[t])}),n.animations.response=new cm.Animation(n.nodes.response.container),cm.addEvent(n.nodes.buttons.send,"click",n.send)};n.callbacks.prepare=function(e,t){return(t=e.callbacks.beforePrepare(e,t)).url=cm.strReplace(t.url,{"%baseUrl%":cm._baseUrl}),t.params=cm.objectReplace(t.params,{"%baseUrl%":cm._baseUrl,"%request%":cm.getFDO(e.nodes.request.inner),"%response%":cm.getFDO(e.nodes.response.inner)}),t=e.callbacks.afterPrepare(e,t)},n.callbacks.beforePrepare=function(e,t){return t},n.callbacks.afterPrepare=function(e,t){return t},n.callbacks.request=function(t,n){return n=t.callbacks.prepare(t,n),cm.ajax(cm.merge(n,{onStart:function(){t.callbacks.start(t)},onSuccess:function(e){t.callbacks.response(t,n,e)},onError:function(){t.callbacks.error(t,n)},onAbort:function(){t.callbacks.abort(t,n)},onEnd:function(){t.callbacks.end(t)}}))},n.callbacks.filter=function(e,t,n){var a,o=cm.objectSelector(e.params.responseKey,n);return o&&!cm.isEmpty(o)&&(a=o),a},n.callbacks.start=function(e,t){e.isProcess=!0,e.params.showLoader&&(e.loaderDelay=setTimeout(function(){e.components.loader&&!e.components.loader.isOpen&&e.components.loader.open()},e.params.loaderDelay)),e.triggerEvent("onSendStart")},n.callbacks.end=function(e,t){e.isProcess=!1,e.params.showLoader&&(e.loaderDelay&&clearTimeout(e.loaderDelay),e.components.loader&&e.components.loader.isOpen&&e.components.loader.close()),e.triggerEvent("onSendEnd"),e.triggerEvent("onProcessEnd",e.nodes.response.inner)},n.callbacks.response=function(e,t,n){cm.isEmpty(n)||(n=e.callbacks.filter(e,t,n)),cm.isEmpty(n)?e.callbacks.error(e,t):e.callbacks.success(e,n)},n.callbacks.error=function(e,t){e.callbacks.renderError(e,t),e.triggerEvent("onError")},n.callbacks.success=function(e,t){e.callbacks.render(e,t),e.triggerEvent("onSuccess",t)},n.callbacks.abort=function(e,t){e.triggerEvent("onAbort")},n.callbacks.renderTemporary=function(e){return cm.node("div",{class:"form__temporary"})},n.callbacks.render=function(e,t){var n,a;if(e.params.responseHTML){if(e.isRendering=!0,a=e.callbacks.renderTemporary(e),n=cm.strToHTML(t),!cm.isEmpty(n))if(cm.isNode(n))a.appendChild(n);else for(;n.length;)cm.isNode(n[0])?a.appendChild(n[0]):cm.remove(n[0]);e.callbacks.append(e,a)}},n.callbacks.renderError=function(e,t){var n;e.params.responseHTML&&(e.isRendering=!0,(n=e.callbacks.renderTemporary(e)).appendChild(cm.node("div",{class:"cm__empty"},e.lang("server_error"))),e.callbacks.append(e,n))},n.callbacks.append=function(t,e){var n;t.nodes.response.temporary||(t.nodes.response.temporary=t.callbacks.renderTemporary(t),cm.forEach(t.nodes.response.inner.childNodes,function(e){cm.appendChild(e,t.nodes.response.temporary)}),cm.appendChild(t.nodes.response.temporary,t.nodes.response.inner)),cm.removeClass(t.nodes.response.temporary,"is-show",!0),cm.appendChild(e,t.nodes.response.inner),cm.addClass(e,"is-show",!0),cm.removeClass(t.nodes.response.container,"is-loaded",!0),cm.addClass(t.nodes.response.container,"is-show",!0),n=e.offsetHeight,t.animations.response.go({style:{height:[n,"px"].join("")},duration:t.params.animateDuration,anim:"smooth",onStop:function(){t.nodes.response.container.style.height="",cm.remove(t.nodes.response.temporary),cm.addClass(t.nodes.response.container,"is-loaded",!0),t.nodes.response.temporary=e,t.isRendering=!1}})},n.send=function(){return n.isProcess&&n.abort(),n.isProcess||n.isRendering||(n.ajaxHandler=n.callbacks.request(n,cm.clone(n.params.ajax))),n},n.abort=function(){return n.ajaxHandler&&n.ajaxHandler.abort&&n.ajaxHandler.abort(),n},n.setParams(e),n.convertEvents(n.params.events),n.getDataNodes(n.params.node),n.getDataConfig(n.params.node),n.callbacksProcess(),t(),n.addToStack(n.params.node),n.triggerEvent("onRenderStart"),a(),n.triggerEvent("onRender")}),cm.define("Com.Gallery",{modules:["Params","Events","Langs","DataConfig","DataNodes"],events:["onRenderStart","onRender","onSet","onChange","onItemLoad","onItemSet"],params:{container:cm.Node("div"),node:cm.Node("div"),data:[],duration:500,showCaption:!0,showArrowTitles:!1,autoplay:!0,zoom:!0,icons:{prev:"icon default prev",next:"icon default next",zoom:"icon cm-i default zoom"},"Com.Zoom":{autoOpen:!1,removeOnClose:!0,documentScroll:!0}}},function(e){var a=this,o=[],r={};a.components={},a.current=null,a.previous=null,a.isProcess=!1,a.nodes={items:[]};var t=function(){a.nodes.container=cm.Node("div",{class:"com__gallery"},a.nodes.holder=cm.Node("div",{class:"holder"}),a.nodes.bar=cm.Node("div",{class:"com__gallery-controls is-full"},cm.Node("div",{class:"inner"},a.nodes.prev=cm.Node("div",{class:"bar-arrow prev"},cm.Node("div",{class:a.params.icons.prev})),a.nodes.next=cm.Node("div",{class:"bar-arrow next"},cm.Node("div",{class:a.params.icons.next})),a.nodes.zoom=cm.Node("div",{class:"bar-zoom"},cm.Node("div",{class:a.params.icons.zoom})))),a.nodes.loader=cm.Node("div",{class:"loader"},cm.Node("div",{class:"bg"}),cm.Node("div",{class:"icon small loader centered"}))),a.params.showArrowTitles&&(a.nodes.next.setAttribute("title",a.lang("Next")),a.nodes.prev.setAttribute("title",a.lang("Previous"))),a.params.zoom?cm.getConstructor("Com.Zoom",function(e){a.components.zoom=new e(a.params["Com.Zoom"]),cm.addEvent(a.nodes.zoom,"click",g)}):cm.remove(a.nodes.zoom),cm.addEvent(a.nodes.next,"click",p),cm.addEvent(a.nodes.prev,"click",h),r.loader=new cm.Animation(a.nodes.loader),a.params.container.appendChild(a.nodes.container)},n=function(){o.length<2?(a.nodes.next.style.display="none",a.nodes.prev.style.display="none"):(a.nodes.next.style.display="",a.nodes.prev.style.display="")},s=function(t){t=cm.merge({index:o.length,isLoad:!1,type:null,nodes:{},src:"",title:"",mime:""},t),/\.(jpg|png|gif|jpeg|bmp|tga|svg|webp|tiff)$/gi.test(t.src)||/^data:image/gi.test(t.src)||/^image/gi.test(t.mime)||"image"===t.type?t.type="image":t.type="iframe",t.link||(t.link=cm.node("a")),t.nodes.container=cm.Node("div",{class:"pt__image is-centered"},t.nodes.inner=cm.Node("div",{class:"inner"})),"image"===t.type?t.nodes.inner.appendChild(t.nodes.content=cm.Node("img",{class:"descr",alt:t.title,title:t.title})):t.nodes.inner.appendChild(t.nodes.content=cm.Node("iframe",{class:"descr",allowfullscreen:!0})),a.params.showCaption&&!cm.isEmpty(t.title&&"image"===t.type)&&t.nodes.inner.appendChild(cm.Node("div",{class:"title"},cm.Node("div",{class:"inner"},t.title))),t.anim=new cm.Animation(t.nodes.container),cm.addEvent(t.link,"click",function(e){e=cm.getEvent(e),cm.preventDefault(e),i(t.index)},!0,!0),o.push(t)},i=function(e){var t,n;a.isProcess||(a.isProcess=!0,t=o[e],n=o[a.current],a.triggerEvent("onSet",{current:t,previous:n}),e!==a.current?(a.triggerEvent("onChange",{current:t,previous:n}),("image"===t.type?c:d)(e,t,n)):a.isProcess=!1)},c=function(e,t,n){cm.replaceClass(a.nodes.bar,"is-partial","is-full"),(t.isLoad?u:l)(e,t,n)},d=function(e,t,n){cm.replaceClass(a.nodes.bar,"is-full","is-partial"),a.nodes.holder.appendChild(t.nodes.container),l(e,t,n)},l=function(e,t,n){a.nodes.loader.style.display="block",r.loader.go({style:{opacity:1},anim:"smooth",duration:a.params.duration}),cm.addEvent(t.nodes.content,"load",function(){t.isLoad=!0,m(),u(e,t,n)}),cm.addEvent(t.nodes.content,"error",function(){t.isLoad=!1,m(),u(e,t,n)}),t.nodes.content.src=t.src},m=function(){r.loader.go({style:{opacity:0},anim:"smooth",duration:a.params.duration,onStop:function(){a.nodes.loader.style.display="none"}})},u=function(e,t,n){a.previous=a.current,a.current=e,a.triggerEvent("onItemLoad",t),n&&(n.nodes.container.style.zIndex=1,t.nodes.container.style.zIndex=2),"image"===t.type&&a.nodes.holder.appendChild(t.nodes.container),t.anim.go({style:{opacity:1},anim:"smooth",duration:a.params.duration,onStop:function(){n&&(cm.setOpacity(n.nodes.container,0),cm.remove(n.nodes.container)),a.triggerEvent("onItemSet",t),a.isProcess=!1}})},p=function(){i(a.current===o.length-1?0:a.current+1)},h=function(){i(0===a.current?o.length-1:a.current-1)},g=function(){a.components.zoom.set(o[a.current].src).open()};a.set=function(e){return!isNaN(e)&&o[e]&&i(e),a},a.next=function(){return p(),a},a.prev=function(){return h(),a},a.getCount=function(){return o.length},a.stop=function(){return a.isProcess=!1,a},a.clear=function(){return!cm.isEmpty(a.current)&&o[a.current]&&cm.remove(o[a.current].nodes.container),a.current=null,a.previous=null,o=[],a},a.add=function(e){return e=cm.merge({link:cm.node("a"),src:"",title:""},e),s(e),a},a.collect=function(e){var t;return cm.isNode(e)&&(t=cm.getNodes(e),cm.isEmpty(t.items)||(cm.forEach(t.items,a.collectItem),n())),a},a.collectItem=function(e){return e.link||(e.link=cm.node("a")),(e=cm.merge({src:e.link.getAttribute("href")||"",title:e.link.getAttribute("title")||""},e)).container&&(e=cm.merge(a.getNodeDataConfig(e.container),e)),s(e),a},a.setParams(e),a.convertEvents(a.params.events),a.getDataNodes(a.params.node,a.params.nodesDataMarker,!1),a.getDataConfig(a.params.node),a.triggerEvent("onRenderStart"),t(),cm.forEach(a.nodes.items,a.collectItem),cm.forEach(a.params.data,s),n(),a.triggerEvent("onRender")}),cm.define("Com.GalleryLayout",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onChange"],params:{node:cm.Node("div"),barDirection:"horizontal",hasBar:!0,"Com.Gallery":{},"Com.Scroll":{step:25,time:25}}},function(e){var r=this,s={},t=[];r.nodes={inner:cm.Node("div"),"preview-inner":cm.Node("div"),"bar-inner":cm.Node("div"),"bar-items":[]};var n=function(){s.scroll=new Com.Scroll(cm.merge(r.params["Com.Scroll"],{nodes:r.nodes.ComScroll})),s.gallery=new Com.Gallery(cm.merge(r.params["Com.Gallery"],{container:r.nodes["preview-inner"],data:t})).addEvent("onChange",o).set(0)},a=function(){cm.forEach(r.nodes["bar-items"],function(e){e.title=e.link&&e.link.getAttribute("title")||"",e.src=e.link&&e.link.getAttribute("href")||"",t.push(e)})},o=function(e,t){var n,a,o=t.current;r.params.hasBar&&(t.previous&&cm.removeClass(t.previous.container,"active"),cm.addClass(o.container,"active"),"vertical"==r.params.barDirection?(a=o.container.offsetTop-r.nodes.inner.offsetHeight/2+o.container.offsetHeight/2,s.scroll.scrollY(a)):(n=o.container.offsetLeft-r.nodes.inner.offsetWidth/2+o.container.offsetWidth/2,s.scroll.scrollX(n))),r.triggerEvent("onChange",t)};r.setParams(e),r.convertEvents(r.params.events),r.getDataNodes(r.params.node,r.params.nodesDataMarker,!1),r.getDataConfig(r.params.node),r.triggerEvent("onRenderStart"),a(),n(),r.addToStack(r.params.node),r.triggerEvent("onRender")}),cm.define("Com.GalleryPopup",{extend:"Com.AbstractController",events:["onOpen","onOpenEnd","onClose","onChange"],params:{controllerEvents:!0,renderStructure:!0,embedStructure:"append",embedStructureOnRender:!1,removeOnDestruct:!1,size:"fullscreen",aspectRatio:"auto",theme:"theme-black",showCounter:!0,showTitle:!0,showZoom:!0,autoPlay:!1,data:[],openOnSelfClick:!1,placeholderConstructor:"Com.Dialog",placeholderParams:{width:"700",scroll:!1,autoOpen:!1,titleOverflow:!0,closeOnBackground:!0,className:"com__gallery-popup"},galleryConstructor:"Com.Gallery",galleryParams:{showCaption:!1}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.GalleryPopup",function(e,t,n,a){n.onConstructStart=function(){var e=this;e.openHandler=e.open.bind(e),e.closeHandler=e.close.bind(e),e.nextHandler=e.next.bind(e),e.prevHandler=e.prev.bind(e),e.keyPressEventHandler=e.keyPressEvent.bind(e),e.changeEventHandler=e.changeEvent.bind(e)},n.onConstructEnd=function(){this.addToStack(this.params.node)},n.onValidateParams=function(){var e=this;e.params.galleryParams.zoom=e.params.showZoom,e.params.galleryParams.autoplay=e.params.autoPlay,e.params.placeholderParams.theme=e.params.theme,e.params.placeholderParams.size=e.params.size,"fullscreen"===e.params.size&&(e.params.placeholderParams.documentScroll=!1)},n.onDestruct=function(){var e=this;e.components.dialog&&cm.isFunction(e.components.dialog.destruct)&&e.components.dialog.destruct(),e.components.gallery&&cm.isFunction(e.components.gallery.destruct)&&e.components.gallery.destruct()},n.renderView=function(){var e=this;e.nodes.container=cm.node("div",{class:"com__gallery-preview"},e.nodes.galleryContainer=cm.node("div",{class:"inner"})),"auto"!==e.params.aspectRatio&&cm.addClass(e.nodes.container,["cm__aspect",e.params.aspectRatio].join("-"))},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),cm.getConstructor(t.params.placeholderConstructor,function(e){t.components.dialog=new e(cm.merge(t.params.placeholderParams,{content:t.nodes.container})),t.components.dialog.addEvent("onOpen",function(){cm.addEvent(window,"keydown",t.keyPressEventHandler),t.triggerEvent("onOpen")}),t.components.dialog.addEvent("onClose",function(){t.components.gallery.stop(),cm.removeEvent(window,"keydown",t.keyPressEventHandler),t.triggerEvent("onClose")})}),cm.getConstructor(t.params.galleryConstructor,function(e){t.components.gallery=new e(cm.merge(t.params.galleryParams,{node:t.params.node,container:t.nodes.galleryContainer,data:t.params.data})),t.components.gallery.addEvent("onChange",t.changeEventHandler),t.components.gallery.addEvent("onSet",function(){t.components.dialog.open()})}),t.params.openOnSelfClick&&cm.addEvent(t.params.node,"click",t.openHandler)},n.changeEvent=function(e,t){var n,a=this;a.params.showCounter&&(n=[t.current.index+1,a.components.gallery.getCount()].join("/")),a.params.showTitle&&(a.params.showCounter?cm.isEmpty(t.current.title)||(n=[n,t.current.title].join(" - ")):n=t.current.title),(a.params.showCounter||a.params.showTitle)&&a.components.dialog.setTitle(n),a.triggerEvent("onChange",t)},n.keyPressEvent=function(e){var t=this;cm.handleKey(e,"left",function(){t.components.dialog.isFocus&&t.prev()}),cm.handleKey(e,"right",function(){t.components.dialog.isFocus&&t.next()})},n.open=function(){return this.set(0),this},n.close=function(){return this.components.dialog.close(),this},n.set=function(e){return this.components.gallery.set(e),this},n.next=function(){return this.components.gallery.next(),this},n.prev=function(){return this.components.gallery.prev(),this},n.add=function(e){return this.components.gallery.add(e),this},n.collect=function(e){return this.components.gallery.collect(e),this},n.collectItem=function(e){return this.components.gallery.collectItem(e),this},n.clear=function(){return this.components.gallery.clear(),this}}),cm.define("Com.GalleryPopupContainer",{extend:"Com.AbstractContainer",params:{constructor:"Com.GalleryPopup",destructOnClose:!1,data:{},params:{}}},function(e){Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("Com.GalleryPopupContainer",function(e,t,n,a){n.constructController=function(e){return new e(cm.merge(this.params.params,{data:[this.params.data]}))},n.set=function(e){var t=this;return t.params.data=e,t.components.controller&&(t.components.controller.clear(),t.components.controller.add(e),t.components.controller.set(0)),t}}),cm.define("Com.GalleryScrollPagination",{extend:"Com.ScrollPagination",params:{renderStructure:!0,embedStructureOnRender:!0,pageTag:"ul",gridClass:null,columns:4,indent:"12px",adaptive:!0}},function(e){Com.ScrollPagination.apply(this,arguments)}),cm.getConstructor("Com.GalleryScrollPagination",function(e,t,n,a){n.setAttributes=function(){var e=this;a.prototype.setAttributes.apply(e,arguments),cm.addClass(e.nodes.pages,"pt__grid"),cm.addClass(e.nodes.pages,["col",e.params.columns].join("-")),cm.addClass(e.nodes.pages,["indent",e.params.indent].join("-")),cm.addClass(e.nodes.pages,e.params.gridClass),e.params.adaptive?cm.addClass(e.nodes.pages,"is-adaptive"):cm.addClass(e.nodes.pages,"is-not-adaptive")}}),cm.define("Com.Geocoder",{extend:"Com.AbstractController",events:["onLoad"],params:{controllerEvents:!0,renderStructure:!1,embedStructureOnRender:!1,apiKey:"",apiLink:"https://maps.googleapis.com/maps/api/js?key=%key%"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Geocoder",function(e,t,n,a){n.onConstructStart=function(){this.loadScriptEndHanlder=this.loadScriptEnd.bind(this)},n.onValidateParams=function(){this.apiLink=cm.strReplace(this.params.apiLink,{"%key%":this.params.apiKey})},n.renderViewModel=function(){a.prototype.renderViewModel.apply(this,arguments),cm.loadScript({path:"google.maps",src:this.apiLink,callback:this.loadScriptEndHanlder})},n.loadScriptEnd=function(e){this.components.geocoder=new e.Geocoder,this.triggerEvent("onLoad")},n.get=function(e,t,n){var a=this,o=arguments;a.components.geocoder?a.process.apply(a,o):cm.loadScript({path:"google.maps",src:a.apiLink,callback:function(){a.process.apply(a,o)}})},n.process=function(e,n,a){this.components.geocoder.geocode(e,function(e,t){"OK"===t?cm.isFunction(n)&&n(e,t):cm.isFunction(a)&&a(t)})}}),cm.define("Com.Geolocation",{extend:"Com.AbstractController",events:["onComplete","onRequest","onSuccess","onError"],params:{controllerEvents:!0,renderStructure:!1,embedStructureOnRender:!1,autoRequest:!0,apiKey:"",apiLink:"https://maps.googleapis.com/maps/api/js?key=%key%",useGeocoder:!1,geocodeConstructor:"Com.Geocoder",geocoderParams:{},default:{},options:{enableHighAccuracy:!1,maximumAge:3e4,timeout:27e3}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Geolocation",function(e,t,n,a){n.onValidateParams=function(){this.params.geocoderParams.apiLink=this.params.apiLink,this.params.geocoderParams.apiKey=this.params.apiKey},n.renderViewModel=function(){var t=this;return a.prototype.renderViewModel.apply(t,arguments),t.params.useGeocoder&&cm.getConstructor(t.params.geocodeConstructor,function(e){t.components.geocoder=new e(t.params.geocoderParams)}),t.params.autoRequest&&t.request(),t},n.request=function(){var t,n=this;n.triggerEvent("onRequest"),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t={lat:e.coords.latitude,lng:e.coords.longitude},n.process(t,"success")},function(){n.process(n.params.default,"error")},n.params.options):n.process(n.params.default,"error")},n.process=function(e,t){var n=this;n.params.useGeocoder?n.geocodeLocation(e):(n.triggerEvent("onComplete",e,null,t),"success"===t?n.triggerEvent("onSuccess",e):n.triggerEvent("onError",e))},n.geocodeLocation=function(t){var n=this;n.components.geocoder.get({location:t},function(e){n.triggerEvent("onComplete",t,e,"success"),n.triggerEvent("onSuccess",t,e)},function(){n.triggerEvent("onComplete",t,null,"error"),n.triggerEvent("onError",t)})}}),cm.define("Com.Glossary",{modules:["Params","Events","DataConfig","DataNodes"],require:["Com.Tooltip"],events:["onRender"],params:{node:cm.Node("div"),showTitle:!0,"Com.Tooltip":{className:"com__glossary__tooltip",targetEvent:"hover"}}},function(e){var t=this;t.components={},t.nodes={container:cm.Node("div"),title:cm.Node("div"),content:cm.Node("div")};var n=function(){t.components.tooltip=new Com.Tooltip(cm.merge(t.params["Com.Tooltip"],{target:t.nodes.container,content:t.nodes.content,title:t.params.showTitle?t.nodes.title.cloneNode(!0):""})),t.triggerEvent("onRender",{})};t.setParams(e),t.convertEvents(t.params.events),t.getDataNodes(t.params.node),t.getDataConfig(t.params.node),n()}),cm.define("Com.Gridlist",{modules:["Params","Events","Langs","Structure","DataConfig","Callbacks","Stack"],events:["onSort","onCheckAll","onUnCheckAll","onCheck","onUnCheck","onRender","onRenderStart","onRenderEnd","onLoadEnd","onColumnsChange","onColumnsResize"],params:{node:cm.node("div"),container:null,embedStructure:"append",customEvents:!0,name:"",uniqueKey:"id",data:[],cols:[],actions:[],actionsGroups:[],sort:!0,sortBy:"id",orderBy:"ASC",childsBy:!1,showCounter:!1,showBulkActions:!0,showTitle:!1,textOverflow:!1,className:"",dateFormat:"cm._config.dateTimeFormat",visibleDateFormat:"cm._config.dateTimeFormat",pagination:!0,perPage:25,responseKey:"data",responseCountKey:"count",ajax:{type:"json",method:"get",url:"",params:""},columns:{editable:!1,local:!1,ajax:{type:"json",method:"post",url:"",params:""}},statuses:["active","success","danger","warning"],icons:{arrow:{desc:"icon arrow desc",asc:"icon arrow asc"}},"Com.GridlistHelper":{customEvents:!1},"Com.Pagination":{renderStructure:!0,embedStructureOnRender:!0,animateSwitch:!0,animatePrevious:!0},"Com.Toolbar":{embedStructure:"append"},"Com.Menu":{left:"-(selfWidth-targetWidth)"}},strings:{counter:"Count: %count%",check_all:"Check all",uncheck_all:"Uncheck all",empty:"No items",actions:"Actions"}},function(e){var c=this;c.nodes={},c.components={},c.rows=[],c.checked=[],c.actions=[],c.isAjax=!1,c.isCheckedAll=!1,c.sortBy=null,c.orderBy="ASC",c.isActionsDisabled=!0;function n(){c.isActionsDisabled&&(c.isActionsDisabled=!1,cm.forEach(c.actions,function(e){e.permanent||c.components.toolbar&&c.components.toolbar.enableButton(e.name,e.group)}))}function a(){c.isActionsDisabled||(c.isActionsDisabled=!0,cm.forEach(c.actions,function(e){e.permanent||c.components.toolbar&&c.components.toolbar.disableButton(e.name,e.group)}))}var t=function(){c.sortBy=c.params.sortBy,c.orderBy=c.params.orderBy,c.params.data=c.callbacks.filter(c,c.params.data),cm.isEmpty(c.params.ajax.url)?c.params["Com.Pagination"].count=c.params.data.length:(c.isAjax=!0,c.params.pagination=!0,c.params["Com.Pagination"].ajax=c.params.ajax,c.params["Com.Pagination"].responseCountKey=c.params.responseCountKey,c.params["Com.Pagination"].responseKey=c.params.responseKey),c.params["Com.Pagination"].perPage=c.params.perPage,c.params["Com.GridlistHelper"].columns=c.params.columns},o=function(){c.nodes.container=cm.node("div",{class:"com__gridlist"}),cm.addClass(c.nodes.container,c.params.className),c.embedStructure(c.nodes.container),c.params.showBulkActions&&c.params.actions.length&&s(),r(),c.params.customEvents&&cm.customEvent.add(c.params.node,"redraw",function(){c.redraw()})},r=function(){c.isAjax?m():cm.isEmpty(c.params.data)?h(c.nodes.container):(c.params.showCounter&&p(c.params.data.length),c.params.sort&&N(),c.params.pagination?m():g(1,c.params.data,c.nodes.container))},s=function(){var n={};n.container=cm.node("div",{class:"pt__gridlist__toolbar"}),cm.getConstructor("Com.Toolbar",function(e,t){c.components.toolbar=new e(cm.merge(c.params[t],{container:n.container})),i()}),cm.forEach(c.params.actions,l),cm.appendChild(n.container,c.nodes.container),c.nodes.bulk=n},i=function(){cm.isEmpty(c.params.actionsGroups)?d({name:"bulk",position:"left"}):cm.forEach(c.params.actionsGroups,d)},d=function(e){var t=cm.merge({name:"",position:"left"},e);c.components.toolbar.addGroup(t)},l=function(e){var t=cm.merge({group:"bulk",name:"",label:"",title:"",disabled:!0,permanent:!1,type:"primary",attr:{},preventDefault:!0,constructor:!1,constructorParams:{},callback:function(){}},e);cm.isEmpty(t.name)&&(t.name=t.label),t.permanent&&(t.disabled=!1),c.components.toolbar.addButton(t),c.actions.push(t)},m=function(){cm.getConstructor("Com.Pagination",function(e,t){c.components.pagination=new e(cm.merge(c.params[t],{container:c.nodes.container,callbacks:{afterPrepare:function(e,t){return c.callbacks.paginationAfterPrepare(c,e,t)}},events:{onPageRender:function(e,t){u(t)},onPageRenderEnd:function(e,t){c.redraw(),c.triggerEvent("onLoadEnd",{page:t})},onSetCount:function(e,t){c.params.showCounter&&p(t)}}}))})},u=function(e){var t,n,a;c.isAjax?(cm.isEmpty(e.data)||(e.data=c.callbacks.filter(c,e.data)),cm.isEmpty(e.data)?h(e.container):g(e.page,e.data,e.container)):(t=c.params.perPage*(e.page-1),n=Math.min(c.params.perPage*e.page,c.params.data.length),a=c.params.data.slice(t,n),g(e.page,a,e.container))},p=function(e){c.nodes.counter||(c.nodes.counter=cm.node("div",{class:"pt__gridlist__counter"}),cm.insertFirst(c.nodes.counter,c.nodes.container)),c.nodes.counter.innerHTML=cm.strReplace(c.lang("counter"),{"%count%":e})},h=function(e){c.nodes.empty=cm.node("div",{class:"cm__empty"},c.lang("empty")),cm.appendChild(c.nodes.empty,e)},g=function(n,e,t){c.triggerEvent("onRenderStart",{container:t,page:n,data:e}),R(),c.nodes.table=cm.node("div",{class:"pt__gridlist"},cm.node("table",cm.node("thead",c.nodes.title=cm.node("tr")),c.nodes.content=cm.node("tbody"))),cm.forEach(c.params.cols,v),cm.forEach(e,function(e,t){b(c.rows,e,t+(n-1))}),cm.appendChild(c.nodes.table,t),f(e),c.triggerEvent("onRenderEnd",{container:t,page:n,data:e,rows:c.rows})},f=function(){c.params.columns.editable&&cm.getConstructor("Com.GridlistHelper",function(e,t){c.components.helper=new e(cm.merge(c.params[t],{node:c.nodes.table,events:{onColumnsChange:function(e,t){c.triggerEvent("onColumnsChange",t)},onColumnsResize:function(e,n){cm.forEach(c.params.cols,function(e,t){n[t]&&n[t].width&&(e.width=n[t].width)}),c.triggerEvent("onColumnsResize",c.params.cols)}}}))})},v=function(e,t){if((e=c.params.cols[t]=cm.merge({_component:null,width:"auto",access:!0,type:"text",key:"",title:"",sort:c.params.sort,sortKey:"",class:"",target:"_blank",rel:"",textOverflow:null,showTitle:null,titleText:"",altText:"",urlKey:!1,links:[],actions:[],preventDefault:!0,onClick:!1,onRender:!1},e)).nodes={},e.showTitle=cm.isBoolean(e.showTitle)?e.showTitle:c.params.showTitle,e.textOverflow=cm.isBoolean(e.textOverflow)?e.textOverflow:c.params.textOverflow,e.access){switch(c.nodes.title.appendChild(e.nodes.container=cm.node("th",e.nodes.inner=cm.node("div",{class:"inner"}))),/%|px|auto/.test(e.width)?e.nodes.container.style.width=e.width:e.nodes.container.style.width=parseFloat(e.width)+"px",e.type){case"checkbox":cm.addClass(e.nodes.container,"control"),e.nodes.inner.appendChild(e.nodes.checkbox=cm.node("input",{type:"checkbox",title:c.lang("check_all")})),e.nodes.checkbox.checked=c.isCheckedAll,cm.addEvent(e.nodes.checkbox,"click",function(){c.isCheckedAll?c.unCheckAll():c.checkAll()}),c.nodes.checkbox=e.nodes.checkbox;break;default:e.nodes.inner.appendChild(cm.node("span",e.title))}e.sort&&!/icon|empty|actions|links|checkbox/.test(e.type)&&(cm.addClass(e.nodes.container,"sort"),e.sortKey!==c.sortBy&&e.key!==c.sortBy||e.nodes.inner.appendChild(cm.node("div",{class:c.params.icons.arrow[c.orderBy.toLowerCase()]})),cm.addEvent(e.nodes.inner,"click",function(){c.sortBy=cm.isEmpty(e.sortKey)?e.key:e.sortKey,c.orderBy="ASC"===c.orderBy?"DESC":"ASC",c.isAjax||N(),c.params.pagination?c.components.pagination.rebuild():g(1,c.params.data,c.nodes.container)}))}},b=function(e,t,n){var a={i:n,index:t[c.params.uniqueKey],data:t,childs:[],isChecked:!1,status:t._status||!1,nodes:{cols:[]},cells:[]};c.nodes.content.appendChild(a.nodes.container=cm.node("tr")),cm.forEach(c.params.cols,function(e){a.cells.push(C(e,a))}),c.params.childsBy&&cm.forEach(t[c.params.childsBy],function(e,t){b(a.childs,e,t)}),e.push(a)},C=function(t,n){var a={nodes:{}};if(t.access){switch(a.data=cm.objectPath(t.key,n.data),a.text=cm.isEmpty(a.data)?"":a.data,a.title=cm.isEmpty(t.titleText)?a.text:t.titleText,n.nodes.container.appendChild(a.nodes.container=cm.node("td")),t.textOverflow?(a.nodes.inner=cm.node("div",{class:"inner"}),a.nodes.container.appendChild(a.nodes.inner)):a.nodes.inner=a.nodes.container,t.type){case"number":E(t,n,a);break;case"date":w(t,n,a);break;case"icon":S(t,n,a);break;case"url":k(t,n,a);break;case"checkbox":_(t,n,a);break;case"links":x(t,n,a);break;case"actions":T(t,n,a);break;case"empty":break;default:y(t,n,a)}n.status&&H(n,n.status),t.showTitle&&(a.nodes.node?a.nodes.node.title=a.title:a.nodes.inner.title=a.title),cm.isFunction(t.onClick)&&cm.addEvent(a.nodes.node||a.nodes.inner,"click",function(e){t.preventDefault&&cm.preventDefault(e),t.onClick(c,{nodes:a.nodes,col:t,row:n,cell:a})}),cm.isFunction(t.onRender)&&t.onRender(c,{nodes:a.nodes,col:t,row:n,cell:a})}return a},y=function(e,t,n){cm.isNode(n.text)?cm.appendChild(n.text,n.nodes.inner):n.nodes.inner.innerHTML=n.text},E=function(e,t,n){n.nodes.inner.innerHTML=cm.splitNumber(n.text)},w=function(e,t,n){c.params.dateFormat!==c.params.visibleDateFormat?n.nodes.inner.innerHTML=cm.parseFormatDateTime(n.text,c.params.dateFormat,c.params.visibleDateFormat):n.nodes.inner.innerHTML=n.text},S=function(e,t,n){n.nodes.inner.appendChild(n.nodes.node=cm.node("div",{class:e.class})),cm.addClass(n.nodes.node,"icon linked inline")},k=function(e,t,n){n.text=cm.decode(n.text),n.href=e.urlKey&&t.data[e.urlKey]?cm.decode(t.data[e.urlKey]):n.text,n.nodes.inner.appendChild(n.nodes.node=cm.node("a",{target:e.target,rel:e.rel,href:n.href},cm.isEmpty(e.altText)?n.text:e.altText))},_=function(e,t,n){cm.addClass(n.nodes.container,"control"),n.nodes.inner.appendChild(n.nodes.node=cm.node("input",{type:"checkbox"})),t.nodes.checkbox=n.nodes.node,t.data._checked&&A(t,!1),cm.addEvent(n.nodes.node,"click",function(){(t.isChecked?D:A)(t,!0)})},x=function(e,t,o){o.nodes.links=[],o.nodes.inner.appendChild(o.nodes.node=cm.node("div",{class:["pt__links",e.class].join(" ")},o.nodes.linksList=cm.node("ul"))),cm.forEach(e.links,function(n){var a;n=cm.merge({label:"",attr:{},events:{}},n),cm.forEach(t.data,function(e,t){n.attr=cm.replaceDeep(n.attr,new RegExp([cm.strWrap(t,"%"),cm.strWrap(t,"%25")].join("|"),"g"),e)}),o.nodes.linksList.appendChild(cm.node("li",a=cm.node("a",n.attr,n.label))),cm.forEach(n.events,function(e,t){cm.addEvent(a,t,e)}),o.nodes.links.push(a)})},T=function(t,n,a){var o,r;a.nodes.actions=[],a.nodes.node=cm.node("div",{class:["pt__links","pull-right",t.class].join(" ")},cm.node("ul",a.nodes.componentNode=cm.node("li",{class:"com__menu","data-node":"ComMenu:{}:button"},cm.node("a",{class:"label"},c.lang("actions")),cm.node("span",{class:"cm-i__chevron-down xx-small inline"}),cm.node("div",{class:"pt__menu","data-node":"ComMenu.target"},a.nodes.actionsList=cm.node("ul",{class:"pt__menu-dropdown"}))))),cm.forEach(t.actions,function(e){(e=cm.merge({name:"",label:"",attr:{},events:{},preventDefault:null,constructor:!1,constructorParams:{},callback:function(){}},e)).preventDefault=cm.isBoolean(e.preventDefault)?e.preventDefault:t.preventDefault,r=!cm.isArray(a.data)||cm.isEmpty(e.name),o=cm.isArray(a.data)&&cm.inArray(a.data,e.name),(r||o)&&P(t,n,a,e)}),a.nodes.actions.length&&cm.appendChild(a.nodes.node,a.nodes.inner)},P=function(e,t,n,a){cm.forEach(t.data,function(e,t){a.attr=cm.replaceDeep(a.attr,new RegExp([cm.strWrap(t,"%"),cm.strWrap(t,"%25")].join("|"),"g"),e)}),n.nodes.actionsList.appendChild(cm.node("li",a.node=cm.node("a",a.attr,a.label))),cm.getConstructor("Com.Menu",function(e,t){n.component=new e(cm.merge(c.params[t],{node:n.nodes.componentNode}))}),a.constructor?cm.getConstructor(a.constructor,function(e){a.controller=new e(cm.merge(a.constructorParams,{node:a.node,data:t.data,rowItem:t,cellItem:n,actionItem:a})),a.controller.addEvent("onRenderControllerEnd",function(){n.component.hide(!1)})}):cm.addEvent(a.node,"click",function(e){a.preventDefault&&cm.preventDefault(e),n.component.hide(!1),a.callback(e,a,t)}),n.nodes.actions.push(a.node)},R=function(){c.unCheckAll(),c.rows=[],c.checked=[],c.params.pagination||cm.remove(c.nodes.table)},N=function(){var n,a,o,r,s,i;cm.forEach(c.params.cols,function(e){e.key==c.sortBy&&(n=e)}),c.params.data.sort(function(e,t){switch(a=e[c.sortBy],o=t[c.sortBy],n.type){case"html":return r=cm.getTextNodesStr(cm.strToHTML(a)),s=cm.getTextNodesStr(cm.strToHTML(o)),i=r<s?-1:s<r?1:0,"ASC"==c.orderBy?i:-1*i;case"date":return r=cm.parseDate(a,c.params.dateFormat),s=cm.parseDate(o,c.params.dateFormat),"ASC"==c.orderBy?r-s:s-r;case"number":return i=a-o,"ASC"==c.orderBy?i:-1*i;default:return r=a?a.toLowerCase():"",s=o?o.toLowerCase():"",i=r<s?-1:s<r?1:0,"ASC"==c.orderBy?i:-1*i}}),c.triggerEvent("onSort",{sortBy:c.sortBy,orderBy:c.orderBy})},A=function(e,t){e.isChecked||(e.nodes.checkbox&&(e.nodes.checkbox.checked=!0),e.isChecked=!0,e.data._checked=!0,e.status&&cm.removeClass(e.nodes.container,e.status),cm.addClass(e.nodes.container,"active"),c.checked.push(e),(c.checked.length?n:a)(),t&&c.triggerEvent("onCheck",e))},D=function(e,t){e.isChecked&&(e.nodes.checkbox&&(e.nodes.checkbox.checked=!1),e.isChecked=!1,e.data._checked=!1,cm.removeClass(e.nodes.container,"active"),e.status&&cm.addClass(e.nodes.container,e.status),cm.arrayRemove(c.checked,e),(c.checked.length?n:a)(),t&&c.triggerEvent("onUnCheck",e))},H=function(e,t){e.status=t,e.data._status=t,cm.removeClass(e.nodes.container,c.params.statuses.join(" ")),e.isChecked?cm.addClass(e.nodes.container,"active"):cm.inArray(c.params.statuses,t)&&cm.addClass(e.nodes.container,t)};c.callbacks.filter=function(e,t){return t},c.callbacks.paginationAfterPrepare=function(e,t,n){return n.url=cm.strReplace(n.url,{"%sortBy%":e.sortBy,"%orderBy%":e.orderBy}),n.params=cm.objectReplace(n.params,{"%sortBy%":e.sortBy,"%orderBy%":e.orderBy}),n},c.rebuild=function(){return c.components.pagination&&c.components.pagination.rebuild(),c},c.redraw=function(){return c.components.helper&&c.components.helper.redraw(),c},c.setAction=function(e,t,n){return c.components.pagination&&c.components.pagination.setAction(e,t,n),c},c.getAction=function(){return c.components.pagination&&c.components.pagination.getAction()||{}},c.getCurrentAction=function(){return c.components.pagination&&c.components.pagination.getCurrentAction()||{}},c.abort=function(){return c.components.pagination&&c.components.pagination.abort(),c},c.check=function(t){return cm.forEach(c.rows,function(e){e.index==t&&A(e,!0)}),c},c.unCheck=function(t){return cm.forEach(c.rows,function(e){e.index==t&&D(e,!0)}),c},c.checkAll=function(){return c.nodes.checkbox&&(c.nodes.checkbox.checked=!0),cm.forEach(c.rows,function(e){A(e)}),c.isCheckedAll||(c.isCheckedAll=!0,c.triggerEvent("onCheckAll")),c},c.unCheckAll=function(){return c.nodes.checkbox&&(c.nodes.checkbox.checked=!1),cm.forEach(c.rows,function(e){D(e)}),c.isCheckedAll&&(c.isCheckedAll=!1,c.triggerEvent("onUnCheckAll")),c},c.getChecked=function(){return c.checked},c.getCheckedData=function(){var t=[];return cm.forEach(c.checked,function(e){t.push(e.data)}),t},c.getCheckedIndexes=function(){var t=[];return cm.forEach(c.checked,function(e){t.push(e.data[c.params.uniqueKey])}),t},c.setRowStatus=function(t,n){return cm.forEach(c.rows,function(e){e.index==t&&H(e,n)}),c},c.clearRowStatus=function(n){return cm.forEach(c.rows,function(e){var t;e.index==n&&((t=e).status=null,t.data._status=null,cm.removeClass(t.nodes.container,c.params.statuses.join(" ")))}),c},c.getRowsByStatus=function(t){var n=[];return cm.forEach(c.rows,function(e){e.status==t&&n.push(e)}),n},c.getToolbar=function(){return c.components.toolbar},c.setParams(e),c.convertEvents(c.params.events),c.getDataConfig(c.params.node),c.callbacksProcess(),t(),o(),c.addToStack(c.nodes.container),c.triggerEvent("onRender")}),cm.define("Com.GridlistFilter",{extend:"Com.AbstractController",events:["onRenderContentStart","onRenderContent","onRenderContentProcess","onRenderContentEnd"],params:{controllerEvents:!0,renderStructure:!0,renderStructureContent:!0,embedStructureOnRender:!0,embedStructure:"append",controller:null,minLength:0,delay:"cm._config.requestDelay",action:{}},strings:{placeholder:"Type query..."}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.GridlistFilter",function(e,t,n){var a=n._inherit;n.construct=function(){var e=this;return e.requestDelay=null,e.inputEventHandler=e.inputEvent.bind(e),a.prototype.construct.apply(e,arguments),e},n.renderView=function(){var e=this;return e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__gridlist__filter"}),cm.appendChild(e.nodes.contentContainer,e.nodes.container),e.params.renderStructureContent&&(e.nodes.contentContainer=e.renderContent(),cm.appendChild(e.nodes.contentContainer,e.nodes.container)),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd"),e},n.renderViewModel=function(){var e=this;return a.prototype.renderViewModel.apply(e,arguments),e.params.controller&&(e.components.controller=e.params.controller),e},n.renderContent=function(){var e=this,t={};return e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"pt__input"},t.input=cm.node("input",{type:"search",autocomplete:"off",placeholder:e.lang("placeholder")}),t.icon=cm.node("div",{class:"icon icon svg__search"})),e.triggerEvent("onRenderContent"),e.triggerEvent("onRenderContentProcess"),cm.addEvent(t.input,"input",e.inputEventHandler),e.triggerEvent("onRenderContentEnd"),t.container},n.inputEvent=function(){var e=this,t=e.nodes.content.input.value,n=cm.clone(e.params.action);e.requestDelay&&clearTimeout(e.requestDelay),e.components.controller&&e.components.controller.abort(),t.length>=e.params.minLength&&(e.requestDelay=setTimeout(function(){e.callbacks.request(e,{config:n,query:t})},e.params.delay))},n.callbacks.prepare=function(e,t){return t.config=e.callbacks.beforePrepare(e,t),t.config=cm.objectReplace(t.config,{"%query%":t.query}),t.config=e.callbacks.afterPrepare(e,t),t.config},n.callbacks.beforePrepare=function(e,t){return t.config},n.callbacks.afterPrepare=function(e,t){return t.config},n.callbacks.request=function(e,t){(t=cm.merge({response:null,data:null,config:null,query:""},t)).config=e.callbacks.prepare(e,t),e.components.controller&&e.components.controller.setAction({params:t.config})},n.reset=function(){return this.nodes.content.input.value="",this.inputEvent(),this}}),cm.define("Com.GridlistHelper",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRender","onColumnsChange","onColumnsResize","enableEditing","disableEditing","enableEditable","disableEditable"],params:{node:cm.Node("div"),name:"",isEditing:!0,customEvents:!0,columns:{isEditing:!1,customEvents:!1,showDrag:!1,ajax:{type:"json",method:"post",url:"",params:""}}}},function(e){var n=this;n.nodes={container:cm.node("div"),thead:cm.node("thead"),items:[]},n.components={},n.isEditing=null;var t=function(){n.nodes.container=n.params.node},a=function(){n.nodes.thead=n.nodes.container.getElementsByTagName("thead")[0]||n.nodes.thead,n.nodes.items=n.nodes.thead.getElementsByTagName("th"),cm.getConstructor("Com.ColumnsHelper",function(e){n.components.columns=new e(cm.merge(n.params.columns,{node:n.nodes.container,items:n.nodes.items,events:{onDragStart:function(){cm.addClass(n.nodes.container,"is-active")},onDragStop:function(){cm.removeClass(n.nodes.container,"is-active")},onChange:function(e,t){n.triggerEvent("onColumnsChange",t)},onResize:function(e,t){n.triggerEvent("onColumnsResize",t)}}}))}),n.params.customEvents&&(cm.customEvent.add(n.params.node,"redraw",function(){n.redraw()}),cm.customEvent.add(n.params.node,"enableEditable",function(){n.enableEditing()}),cm.customEvent.add(n.params.node,"disableEditable",function(){n.disableEditing()})),n.params.isEditing&&n.enableEditing()};n.enableEditing=function(){return"boolean"==typeof n.isEditing&&n.isEditing||(n.isEditing=!0,cm.addClass(n.params.node,"is-editing is-editable"),n.components.columns&&n.components.columns.enableEditing(),n.triggerEvent("enableEditing"),n.triggerEvent("enableEditable")),n},n.disableEditing=function(){return"boolean"==typeof n.isEditing&&!n.isEditing||(n.isEditing=!1,cm.removeClass(n.params.node,"is-editing is-editable"),n.components.columns&&n.components.columns.disableEditing(),n.triggerEvent("disableEditing"),n.triggerEvent("disableEditable")),n},n.redraw=function(){return n.components.columns&&n.components.columns.redraw(),n},n.setParams(e),n.convertEvents(n.params.events),n.getDataNodes(n.params.node),n.getDataConfig(n.params.node),t(),a(),n.addToStack(n.nodes.container),n.triggerEvent("onRender")}),cm.define("Com.HelpBubble",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,title:null,content:cm.node("span"),type:"tooltip",showIcon:!0,showLabel:!1,tooltipConstructor:"Com.Tooltip",tooltipParams:{className:"com__help-bubble__tooltip"},containerConstructor:"Com.DialogContainer",containerParams:{renderTitle:!0,destructOnClose:!0}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.HelpBubble",function(e,t,n,a){n.onDestruct=function(){var e=this;e.components.container&&cm.isFunction(e.components.container.destruct)&&e.components.container.destruct(),e.components.tooltip&&cm.isFunction(e.components.tooltip.destruct)&&e.components.tooltip.destruct()},n.renderView=function(){var e=this;e.nodes.container=cm.node("span",{class:"com__help-bubble"},e.nodes.button=cm.node("a",{class:"com__help-bubble__title"}),e.nodes.content=cm.node("span",{class:"com__help-bubble__content"})),e.params.showIcon&&(e.nodes.icon=cm.node("span",{class:"icon default linked"}),cm.appendChild(e.nodes.icon,e.nodes.button)),e.params.showLabel&&(e.nodes.label=cm.node("span",{class:"label"},e.params.title),cm.appendChild(e.nodes.label,e.nodes.button)),e.set(e.params.content)},n.renderViewModel=function(){var t=this;switch(a.prototype.renderViewModel.apply(t,arguments),t.params.type){case"container":cm.getConstructor(t.params.containerConstructor,function(e){t.components.container=new e(cm.merge(t.params.containerParams,{node:t.nodes.button,title:t.params.title,content:t.nodes.content}))});break;default:cm.getConstructor(t.params.tooltipConstructor,function(e){t.components.tooltip=new e(t.params.tooltipParams),t.components.tooltip.setTarget(t.nodes.button).setContent(t.nodes.content)})}},n.set=function(e){return cm.clearNode(this.nodes.content),cm.isString(e)||cm.isNumber(e)?this.nodes.content.innerHTML=e:cm.appendNodes(e,this.nodes.content),this}}),cm.define("Com.ImageBox",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,customEvents:!0,animated:!1,effect:"none",zoom:!1,scrollNode:window,"Com.GalleryPopup":{showCounter:!1}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.ImageBox",function(e,t,n,a){n.onConstructStart=function(){var e=this;e.nodes={item:{},buttons:{preview:cm.node("div")}},e.dimensions={},e.pageDimensions={},e.isProcessed=!1,e.animProcessHandler=e.animProcess.bind(e)},n.onRedraw=function(){this.params.animated&&(this.animRestore(),this.animProcess())},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),t.params.animated&&(cm.addClass(t.params.node,"cm-animate"),cm.addClass(t.params.node,["pre",t.params.effect].join("-")),cm.addEvent(t.params.scrollNode,"scroll",t.animProcessHandler),t.animProcess()),t.params.zoom&&(cm.getConstructor("Com.GalleryPopup",function(e){t.components.popup=new e(t.params["Com.GalleryPopup"])}),t.components.popup.collectItem(t.nodes.item),cm.addEvent(t.nodes.buttons.preview,"click",t.components.popup.openHandler)),cm.customEvent.add(t.params.node,"redraw",function(){t.redraw()})},n.getDimensions=function(){this.dimensions=cm.getRect(this.params.node)},n.getPageDimensions=function(){this.pageDimensions=cm.getPageSize()},n.animProcess=function(){var e=this;e.isProcessed||(e.getDimensions(),e.getPageDimensions(),e.dimensions.height<e.pageDimensions.winHeight?0<=e.dimensions.top&&e.dimensions.bottom<=e.pageDimensions.winHeight&&e.animSet():(e.dimensions.top<0&&e.dimensions.bottom>=e.pageDimensions.winHeight/2||e.dimensions.bottom>e.pageDimensions.winHeight&&e.dimensions.top<=e.pageDimensions.winHeight/2)&&e.animSet())},n.animSet=function(){this.isProcessed=!0,cm.addClass(this.params.node,["animated",this.params.effect].join(" "))},n.animRestore=function(){this.isProcessed=!1,cm.removeClass(this.params.node,["animated",this.params.effect].join(" "))}}),cm.define("Com.ImagePreviewContainer",{extend:"Com.AbstractContainer",params:{constructor:"Com.GalleryPopup",params:{showCounter:!1,showTitle:!0},placeholder:!1}},function(e){this.item={},Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("Com.ImagePreviewContainer",function(e,t,n,a){n.onRenderControllerProcess=function(){return this.setController(),this},n.set=function(e){return this.clear(),this.setData(e),this.setController(),this},n.clear=function(){return this.components.controller&&this.components.controller.clear(),this},n.setData=function(e){return this.item={src:e.url,mime:e.mime||e.type,title:e.name},this},n.setController=function(){return this.components.controller&&this.components.controller.add(this.item),this}}),cm.define("Com.Menu",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRender"],params:{node:cm.Node("div"),name:"",event:"hover",top:"targetHeight",left:0,minWidth:"targetWidth","Com.Tooltip":{className:"com__menu-tooltip",targetEvent:"hover",hideOnReClick:!0,theme:null,hold:!0}}},function(e){var t=this;t.nodes={button:cm.Node("div"),target:cm.Node("div")},t.components={};var n=function(){t.params["Com.Tooltip"].targetEvent=t.params.event,t.params["Com.Tooltip"].top=t.params.top,t.params["Com.Tooltip"].left=t.params.left,t.params["Com.Tooltip"].minWidth=t.params.minWidth},a=function(){cm.getConstructor("Com.Tooltip",function(e){t.components.tooltip=new e(cm.merge(t.params["Com.Tooltip"],{target:t.nodes.container||t.nodes.button,content:t.nodes.target,events:{onShowStart:function(){cm.addClass(t.params.node,"active"),cm.addClass(t.nodes.button,"active")},onHideStart:function(){cm.removeClass(t.params.node,"active"),cm.removeClass(t.nodes.button,"active")}}}))})};t.show=function(){return t.components.tooltip&&t.components.tooltip.show(),t},t.hide=function(){return t.components.tooltip&&t.components.tooltip.hide(),t},t.setParams(e),t.convertEvents(t.params.events),t.getDataNodes(t.params.node),t.getDataConfig(t.params.node),n(),a(),t.addToStack(t.params.node),t.triggerEvent("onRender")}),cm.define("Com.MultiField",{extend:"Com.AbstractController",events:["onItemAdd","onItemAddEnd","onItemRemove","onItemRemoveEnd","onItemShow","onItemShowEnd","onItemHide","onItemHideEnd","onItemProcess","onItemProcessEnd","onItemSort","onItemIndexChange"],params:{renderStructure:!1,embedStructure:"append",embedStructureOnRender:!1,mode:"create",sortable:!0,showControls:!0,showList:!0,renderItems:0,max:0,template:null,templateAttributeReplace:!1,templateAttribute:"name",duration:"cm._config.animDurationShort",theme:"",icons:{drag:"icon drag linked",add:"icon add linked",remove:"icon remove linked"},"Com.Sortable":{process:!1}},strings:{add:"Add",remove:"Remove"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.MultiField",function(e,t,n,o){n.construct=function(){var e=this;e.nodes={container:cm.node("div"),content:cm.node("div"),toolbar:{container:cm.node("div"),add:cm.node("div"),buttons:[]},items:[]},e.components={},e.items=[],e.buttons=[],e.isToolbarVisible=!0,o.prototype.construct.apply(e,arguments)},n.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__multifield"}),e.nodes.content=cm.node("div",{class:"com__multifield__content"}),e.params.showList&&cm.appendChild(e.nodes.content,e.nodes.container),e.params.showControls&&(e.nodes.toolbarContainer=e.renderToolbarView(),cm.appendChild(e.nodes.toolbarContainer,e.nodes.container)),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd")},n.renderToolbarView=function(){var t=this,e={};return e.container=cm.node("div",{class:"com__multifield__toolbar"},e.content=cm.node("div",{class:"com__multifield__item"},e.add=cm.node("div",{class:t.params.icons.add,title:t.lang("add")}))),"create"===t.params.mode?cm.addEvent(e.add,"click",function(e){cm.preventDefault(e),t.renderItem()}):cm.remove(t.nodes.toolbar.add),(t.nodes.toolbarView=e).container},n.renderViewModel=function(){var e,a=this;o.prototype.renderViewModel.apply(a,arguments),a.params.sortable&&cm.getConstructor("Com.Sortable",function(e,t){a.components.sortable=new e(a.params[t]),a.components.sortable.addEvent("onSort",function(e,t){var n=a.items.find(function(e){return e.container===t.node});n&&a.sortItem(n,t.index)}),a.components.sortable.addGroup(a.nodes.content)}),a.params.renderStructure||a.processCollectedView(),"create"===a.params.mode&&(e=Math.max(a.params.renderItems-a.items.length,0),cm.forEach(e,function(e){a.renderItem()}))},n.processCollectedView=function(){var t=this;t.nodes.toolbarContainer=t.nodes.toolbar.container,"create"===t.params.mode?cm.addEvent(t.nodes.toolbar.add,"click",function(e){cm.preventDefault(e),t.renderItem()}):(cm.remove(t.nodes.toolbar.add),cm.forEach(t.nodes.toolbar.buttons,function(e){t.processButtons(e)})),cm.forEach(t.nodes.items,function(e){t.processItem(e)})},n.setAttributes=function(){o.prototype.setAttributes.apply(this,arguments),cm.addClass(this.nodes.container,this.params.theme)},n.processButtons=function(n){var a=this;n=cm.merge({id:null,visible:null},n),n=cm.merge(n,a.getNodeDataConfig(n.container)),cm.addEvent(n.container,"click",function(e){cm.preventDefault(e);var t=a.getItemById(n.id);t&&!t.visible&&a.showItem(t)}),a.buttons.push(n)},n.toggleToolbarVisibility=function(e){var t,n=this;n.params.showControls&&((t=n.getButtonById(e.id))&&!e.visible&&n.showButton(t),"create"===n.params.mode?0<n.params.max&&n.items.length===n.params.max?n.hideToolbar():n.showToolbar():n.isAllItemsVisible()?n.hideToolbar():n.showToolbar(),t&&e.visible&&n.hideButton(t))},n.showButton=function(e){e.visible=!0,cm.removeClass(e.container,"is-hidden")},n.hideButton=function(e){e.visible=!1,cm.addClass(e.container,"is-hidden")},n.showToolbar=function(){var e=this;return e.isToolbarVisible||(e.isToolbarVisible=!0,e.nodes.toolbarContainer.style.overflow="hidden",cm.transition(e.nodes.toolbarContainer,{properties:{height:e.nodes.toolbarContainer.scrollHeight+"px",opacity:1},duration:e.params.duration,easing:cm._config.motionSmooth,clear:!0,onStop:function(){e.nodes.toolbarContainer.style.overflow=""}})),e},n.hideToolbar=function(){var e=this;return e.isToolbarVisible&&(e.isToolbarVisible=!1,e.nodes.toolbarContainer.style.overflow="hidden",cm.transition(e.nodes.toolbarContainer,{properties:{height:"0px",opacity:0},duration:e.params.duration,easing:cm._config.motionSmooth})),e},n.renderItem=function(e,t){var n=this;(0===n.params.max||n.items.length<n.params.max)&&(e=cm.merge({id:null,showControls:null,sortable:null,visible:null},e),t=cm.merge({triggerEvents:!0,immediately:!1,callback:function(){}},t),cm.isBoolean(e.showControls)||(e.showControls=n.params.showControls),cm.isBoolean(e.sortable)||(e.sortable=n.params.sortable),e.container=cm.node("div",{class:"com__multifield__item","data-node":"items:[]:container"},e.content=e.field=cm.node("div",{class:"field","data-node":"field"})),n.renderItemTemplate(n.params.template,e),n.params.showControls&&e.showControls&&(e.remove=cm.node("div",{class:n.params.icons.remove,title:n.lang("remove"),"data-node":"remove"}),cm.appendChild(e.remove,e.container)),n.params.sortable&&e.sortable&&(e.drag=cm.node("div",{class:n.params.icons.drag,"data-node":"drag"}),n.params.showControls?cm.insertFirst(e.drag,e.container):cm.appendChild(e.drag,e.container)),cm.appendChild(e.container,n.nodes.content),t.triggerEvents&&n.triggerEvent("onItemAdd",e),n.processItem(e,{triggerEvents:t.triggerEvents,immediately:t.immediately,callback:function(){t.triggerEvents&&n.triggerEvent("onItemAddEnd",e),t.callback(e)}}))},n.processItem=function(t,e){var n=this;t=cm.merge({id:null,fieldForEnable:null,showControls:null,sortable:null,visible:null},t),e=cm.merge({triggerEvents:!0,immediately:!1,callback:function(){}},e),t=cm.merge(t,n.getNodeDataConfig(t.container)),cm.isBoolean(t.showControls)||(t.showControls=n.params.showControls),cm.isBoolean(t.sortable)||(t.sortable=n.params.sortable),cm.isBoolean(t.visible)||(t["field-hidden-visible"]&&!cm.isEmpty(t["field-hidden-visible"].value)?t.visible="1"===t["field-hidden-visible"].value:t.visible=!0),n.params.showControls&&t.showControls?cm.addEvent(t.remove,"click",function(e){cm.preventDefault(e),"create"===n.params.mode?n.deleteItem(t):n.hideItem(t)}):cm.remove(t.remove),n.params.sortable&&t.sortable?n.components.sortable.addItem(t.container,n.nodes.content):cm.remove(t.drag),n.items.push(t),n.resetIndexes(),e.triggerEvents&&n.triggerEvent("onItemProcess",t),t.visible?n.showItem(t,{triggerEvents:!0,immediately:e.immediately,callback:function(){e.triggerEvents&&n.triggerEvent("onItemProcessEnd",t),e.callback(t)}}):n.hideItem(t,{triggerEvents:!0,immediately:e.immediately,callback:function(){e.triggerEvents&&n.triggerEvent("onItemProcessEnd",t),e.callback(t)}})},n.deleteItem=function(e,t){var n=this;t=cm.merge({triggerEvents:!0,callback:function(){}},t),n.params.sortable&&e.sortable&&n.components.sortable.removeItem(e.container),n.items.splice(n.items.indexOf(e),1),n.resetIndexes(),t.triggerEvents&&n.triggerEvent("onItemRemove",e),n.hideItem(e,{triggerEvents:t.triggerEvents,callback:function(){cm.remove(e.container),t.triggerEvents&&n.triggerEvent("onItemRemoveEnd",e),t.callback(e)}})},n.hideItem=function(e,t){var n=this;t=cm.merge({triggerEvents:!0,immediately:!1,callback:function(){}},t),e.visible=!1,e["field-hidden-visible"]&&(e["field-hidden-visible"].value=0),t.triggerEvents&&n.triggerEvent("onItemHide",e),n.hideItemVisibility(e,{triggerEvents:t.triggerEvents,immediately:t.immediately,callback:function(){t.triggerEvents&&n.triggerEvent("onItemHideEnd",e),t.callback(e)}}),n.toggleToolbarVisibility(e)},n.hideItemVisibility=function(e,t){t=cm.merge({callback:function(){},immediately:!1,triggerEvents:!0},t),e.container.style.overflow="hidden",e.container.style.height=e.container.scrollHeight+"px",cm.transition(e.container,{immediately:t.immediately,properties:{height:"0px",opacity:0},duration:this.params.duration,easing:cm._config.motionSmooth,onStop:function(){t.callback(e)}})},n.showItem=function(e,t){var n=this;t=cm.merge({triggerEvents:!0,immediately:!1,callback:function(){}},t),e.visible=!0,e["field-hidden-visible"]&&(e["field-hidden-visible"].value=1),t.triggerEvents&&n.triggerEvent("onItemShow",e),n.showItemVisibility(e,{triggerEvents:t.triggerEvents,immediately:t.immediately,callback:function(){t.triggerEvents&&n.triggerEvent("onItemShowEnd",e),t.callback(e)}}),n.toggleToolbarVisibility(e)},n.showItemVisibility=function(e,t){t=cm.merge({triggerEvents:!0,immediately:!1,callback:function(){}},t),e.container.style.overflow="hidden",e.container.style.height="0px",cm.transition(e.container,{immediately:t.immediately,properties:{height:e.container.scrollHeight+"px",opacity:1},duration:this.params.duration,easing:cm._config.motionSmooth,clear:!0,onStop:function(){t.callback(e)}})},n.sortItem=function(e,t){var n=this;n.items.splice(n.items.indexOf(e),1),n.items.splice(t,0,e),n.resetIndexes(),n.triggerEvent("onItemSort",e)},n.resetIndexes=function(){var n=this;cm.forEach(n.items,function(e,t){e.index!==t&&(e.previousIndex=e.index,e.index=t,n.params.templateAttributeReplace&&cm.processDataAttributes(e.field,n.params.templateAttribute,{"%index%":t}),e["field-hidden-index"]&&(e["field-hidden-index"].value=t),n.triggerEvent("onItemIndexChange",e))})},n.setTemplate=function(e){return this.params.template=e,this},n.renderItemTemplate=function(e,t){var n;cm.isEmpty(e)||(n=cm.isString(e)?cm.strToHTML(e):cm.clone(e,!0),cm.appendNodes(n,t.field))},n.clear=function(){var t=this;return cm.forEach(t.items,function(e){t.deleteItem(e)}),t},n.addItem=function(e,t){return this.renderItem(e,t),this},n.removeItem=function(e,t){var n=this;return cm.isNumber(e)&&n.items[e]?n.deleteItem(n.items[e],t):cm.inArray(n.items,e)&&n.deleteItem(e,t),n},n.getItem=function(e){return this.items[e]?this.items[e]:null},n.getItemById=function(t){if(!cm.isEmpty(t))return this.items.find(function(e){return e.id===t})},n.getItems=function(){return this.items},n.getButtonById=function(t){if(!cm.isEmpty(t))return this.buttons.find(function(e){return e.id===t})},n.getButtons=function(){return this.buttons},n.isAllItemsVisible=function(){var e=this.items.filter(function(e){return e.visible});return this.items.length===e.length}}),cm.define("Com.Notifications",{extend:"Com.AbstractController",events:["onAdd","onRemove"],params:{renderStructure:!0,embedStructureOnRender:!0,embedStructure:"append",icon:"icon small remove linked","Com.ToggleBox":{toggleTitle:!1,className:null,duration:"cm._config.animDuration"}},strings:{close:"Close",more:"Read more"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Notifications",function(e,t,n,a){n.construct=function(){this.items=[],a.prototype.construct.apply(this,arguments)},n.renderView=function(){this.nodes.container=cm.node("div",{class:"com__notifications"},this.nodes.list=cm.node("ul"))},n.clear=function(){for(;this.items.length;)this.remove(this.items[0]);return this},n.add=function(t){var n=this;return(t=cm.merge({label:"",type:"warning",messages:[],collapsed:!0,nodes:{}},t)).nodes.container=cm.node("li",{class:t.type},t.nodes.close=cm.node("div",{class:n.params.icon,title:n.lang("close")}),t.nodes.descr=cm.node("div",{class:"descr"}),t.nodes.messages=cm.node("div",{class:"messages"},t.nodes.messagesList=cm.node("ul"))),cm.isNode(t.label)||cm.isTextNode(t.label)||(t.label=cm.node("div",{innerHTML:t.label})),cm.appendChild(t.label,t.nodes.descr),cm.isEmpty(t.messages)||(t.nodes.button=cm.node("a",{class:"more"},n.lang("more")),cm.insertFirst(t.nodes.button,t.nodes.descr),cm.forEach(t.messages,function(e){cm.appendChild(cm.node("li",e),t.nodes.messagesList)}),cm.getConstructor("Com.ToggleBox",function(e){t.controller=new e(cm.merge(n.params["Com.ToggleBox"],{nodes:{container:t.nodes.container,button:t.nodes.button,target:t.nodes.messages}}))})),cm.addEvent(t.nodes.close,"click",function(){n.remove(t)}),cm.appendChild(t.nodes.container,n.nodes.list),n.items.push(t),n.triggerEvent("onAdd",t),n},n.remove=function(e){return cm.remove(e.nodes.container),cm.arrayRemove(this.items,e),this.triggerEvent("onRemove",e),this},n.getLength=function(){return this.items.length}}),cm.define("Com.OldBrowserAlert",{modules:["Params","Events","Langs","Storage","Stack"],events:["onRender"],params:{name:"default",remember:!0,versions:{IE:10,FF:31,Chrome:40,Safari:6,Opera:26}},strings:{title:"Thank you for visiting our site!",descr:"It seems that you are using an outdated browser <b>(%browser% %version%)</b>. As a result, we cannot provide you with the best user experience while visiting our site. Please upgrade your <b>%browser%</b> to version <b>%minimum_version%</b> or above, or use another standards based browser such as Firefox, Chrome or Safari, by clicking on the icons below.",continue:"Skip for now"}},function(e){var n=this,a=Com.UA.get();n.nodes={},n.components={};var t=function(){cm.forEach(n.params.versions,function(e,t){Com.UA.is(t)&&Com.UA.isVersion()<e&&(n.params.langs.descr=n.lang("descr",{"%browser%":a.full_name,"%version%":a.full_version,"%minimum_version%":e}),n.params.remember&&(!n.params.remember||n.storageRead("isShow"))||o())})},o=function(){n.nodes.container=cm.Node("div",{class:"com__oldbrowser-alert"},cm.Node("div",{class:"b-descr"},cm.Node("p",{innerHTML:n.lang("descr")})),cm.Node("ul",{class:"b-browsers"},cm.Node("li",cm.Node("a",{class:"icon linked chrome",title:"Google Chrome",href:"http://www.google.com/chrome/",target:"_blank"})),cm.Node("li",cm.Node("a",{class:"icon linked firefox",title:"Mozilla Firefox",href:"http://www.mozilla.com/",target:"_blank"})),cm.Node("li",cm.Node("a",{class:"icon linked safari",title:"Apple Safari",href:"http://www.apple.com/safari/",target:"_blank"})),cm.Node("li",cm.Node("a",{class:"icon linked msie",title:"Microsoft Internet Explorer",href:"http://ie.microsoft.com/",target:"_blank"}))),cm.Node("div",{class:"form"},cm.Node("div",{class:"btn-wrap pull-center"},n.nodes.button=cm.Node("input",{type:"button",value:n.lang("continue")})))),cm.getConstructor("Com.Dialog",function(e){n.components.dialog=new e({title:n.lang("title"),content:n.nodes.container,autoOpen:!1,width:500,events:{onClose:function(){n.params.remember&&n.storageWrite("isShow",!0)}}}),cm.addEvent(n.nodes.button,"click",n.components.dialog.close),n.components.dialog.open()})};n.setParams(e),n.convertEvents(n.params.events),n.addToStack(),t(),n.triggerEvent("onRender")}),cm.define("Com.Overlay",{modules:["Params","Events","Langs","Stack"],events:["onRender","onOpenStart","onOpen","onOpenEnd","onCloseStart","onClose","onCloseEnd"],params:{name:"",container:"document.body",appendMode:"appendChild",theme:"default",className:"",position:"fixed",lazy:!1,delay:"cm._config.loadDelay",showSpinner:!0,showContent:!0,autoOpen:!0,autoClose:!1,removeOnClose:!0,destructOnRemove:!1,duration:"cm._config.animDurationLong"}},function(e){var o=this;o.nodes={},o.currentTheme=null,o.isDestructed=!1,o.isOpen=!1,o.isShowSpinner=!1,o.isShowContent=!1,o.openInterval=null,o.delayInterval=null;function n(){o.triggerEvent("onOpen").triggerEvent("onOpenEnd")}function r(){o.triggerEvent("onClose").triggerEvent("onCloseEnd"),o.params.removeOnClose&&o.remove()}function t(e,t){o.isOpen=!0,t=cm.isFunction(t)?t:function(){},e&&cm.addClass(o.nodes.container,"is-immediately"),cm.inDOM(o.nodes.container)||cm[o.params.appendMode](o.nodes.container,o.params.container),o.triggerEvent("onOpenStart"),cm.addClass(o.nodes.container,"is-open",!0),o.openInterval&&clearTimeout(o.openInterval),o.openInterval=e?setTimeout(function(){cm.removeClass(o.nodes.container,"is-immediately"),n(),t()},5):setTimeout(function(){n(),t()},o.params.duration+5)}var a=function(){o.params.duration=cm.getTransitionDurationFromLESS("PtOverlay-Duration",o.params.duration)},s=function(){o.params.position=cm.inArray(["static","relative","absolute","fixed"],o.params.position)?o.params.position:"fixed"},i=function(){o.nodes.container=cm.Node("div",{class:"com__overlay pt__overlay"},o.nodes.spinner=cm.Node("div",{class:"overlay__spinner"}),o.nodes.content=cm.Node("div",{class:"overlay__content"})),cm.addClass(o.nodes.container,o.params.className),o.nodes.container.style.position=o.params.position,o.params.showSpinner&&o.showSpinner(),o.params.showContent&&o.showContent(),o.setTheme(o.params.theme)};o.open=function(e){return o.isOpen||(o.params.lazy&&!e?(o.delayInterval&&clearTimeout(o.delayInterval),o.delayInterval=setTimeout(function(){t(e)},o.params.delay)):t(e)),o},o.close=function(e,t){var n,a;return o.openInterval&&clearTimeout(o.openInterval),o.delayInterval&&clearTimeout(o.delayInterval),o.isOpen&&(n=e,a=t,o.isOpen=!1,a=cm.isFunction(a)?a:function(){},n&&cm.addClass(o.nodes.container,"is-immediately"),o.triggerEvent("onCloseStart"),cm.removeClass(o.nodes.container,"is-open"),o.openInterval&&clearTimeout(o.openInterval),o.openInterval=n?setTimeout(function(){cm.removeClass(o.nodes.container,"is-immediately"),r(),a()},5):setTimeout(function(){r(),a()},o.params.duration+5)),o},o.toggle=function(){o.isOpen?o.hide():o.show()},o.remove=function(){return o.isOpen?o.close(function(){o.params.removeOnClose||o.remove()}):(o.params.destructOnRemove&&o.destruct(),cm.remove(o.nodes.container)),o},o.setTheme=function(e){return o.currentTheme&&cm.removeClass(o.nodes.container,["theme",o.currentTheme].join("-")),e&&cm.addClass(o.nodes.container,["theme",e].join("-")),o.currentTheme=e,o},o.showSpinner=function(){return o.isShowSpinner=!0,cm.addClass(o.nodes.spinner,"is-show"),o},o.hideSpinner=function(){return o.isShowSpinner=!1,cm.removeClass(o.nodes.spinner,"is-show"),o},o.setContent=function(e){return cm.isNode(e)&&o.nodes.content.appendChild(e),o},o.showContent=function(){return o.isShowContent=!0,cm.addClass(o.nodes.content,"is-show"),o},o.hideContent=function(){return o.isShowContent=!1,cm.removeClass(o.nodes.content,"is-show"),o},o.embed=function(e){return cm.isNode(e)&&(o.params.container=e),o},o.destruct=function(){return o.isDestructed||(o.isDestructed=!0,o.removeFromStack(),cm.remove(o.nodes.container)),o},o.getNodes=function(e){return o.nodes[e]||o.nodes},a(),o.setParams(e),o.convertEvents(o.params.events),s(),i(),o.addToStack(o.nodes.container),o.triggerEvent("onRender"),o.params.autoOpen&&o.open()}),cm.define("Com.Pagination",{extend:"Com.AbstractController",events:["onRebuild","onStart","onAbort","onError","onPageRender","onPageRenderEnd","onPageSwitched","onEnd","onSetCount"],params:{controllerEvents:!0,renderStructure:!1,embedStructureOnRender:!1,embedStructure:"append",scrollNode:window,data:[],count:0,perPage:0,startPage:1,startPageToken:"",pageCount:0,autoSend:!0,showLoader:!0,loaderDelay:"cm._config.loadDelay",barPosition:"bottom",barAlign:"left",barCountLR:3,barCountM:1,switchManually:!1,animateSwitch:!1,animateDuration:"cm._config.animDuration",animatePrevious:!1,pageTag:"div",pageAttributes:{class:"com__pagination__page"},responseCountKey:"count",responseKey:"data",responseErrorsKey:"errors",responseHTML:!1,cache:!0,ajax:{type:"json",method:"get",url:"",params:""},overlayConstructor:"Com.Overlay",overlayParams:{lazy:!0,position:"absolute",autoOpen:!1,removeOnClose:!0}},strings:{prev:"Previous",next:"Next",server_error:"An unexpected error has occurred. Please try again later."}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Pagination",function(e,t,n,a){n.construct=function(){var e=this;e.nodes={container:cm.node("div"),content:cm.node("div"),pages:cm.node("div"),bar:[]},e.components={},e.animations={},e.pages={},e.ajaxHandler=null,e.currentAction=null,e.isAjax=!1,e.isProcess=!1,e.isRendering=!1,e.page=null,e.pageToken=null,e.currentPage=null,e.previousPage=null,e.pageCount=0,e.nextHanlder=e.next.bind(e),e.prevHanlder=e.prev.bind(e),a.prototype.construct.apply(e,arguments)},n.onConstructEnd=function(){this.params.autoSend&&this.set(this.params.startPage)},n.getLESSVariables=function(){this.params.animateDuration=cm.getTransitionDurationFromLESS("ComPagination-Duration",this.params.animateDuration)},n.validateParams=function(){var e=this;e.triggerEvent("onValidateParamsStart"),e.triggerEvent("onValidateParams"),e.triggerEvent("onValidateParamsProcess"),cm.isEmpty(e.params.ajax.url)?(cm.isEmpty(e.params.data)||(e.params.count=e.params.data.length),e.params.showLoader=!1):e.isAjax=!0,0===e.params.pageCount&&e.params.count&&e.params.perPage?e.pageCount=Math.ceil(e.params.count/e.params.perPage):e.pageCount=e.params.pageCount,e.setToken(e.params.startPage,e.params.startPageToken),e.triggerEvent("onValidateParamsEnd")},n.renderView=function(){var e=this;e.nodes.container=cm.node("div",{class:"com__pagination"},e.nodes.content=cm.node("div",{class:"com__pagination__content"},e.nodes.pages=cm.node("div",{class:"com__pagination__pages"}))),/top|both/.test(e.params.barPosition)&&e.nodes.bar.push(e.callbacks.renderBar(e,{align:e.params.barAlign,position:"top"})),/bottom|both/.test(e.params.barPosition)&&e.nodes.bar.push(e.callbacks.renderBar(e,{align:e.params.barAlign,position:"bottom"}))},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),t.resetStyles(),cm.getConstructor(t.params.overlayConstructor,function(e){t.components.loader=new e(cm.merge(t.params.overlayParams,{container:t.nodes.content}))}),t.params.animateSwitch&&cm.addClass(t.nodes.container,"is-animated"),t.animations.content=new cm.Animation(t.nodes.content)},n.resetStyles=function(){cm.clearNode(this.nodes.pages)},n.callbacks.prepare=function(e,t){return(t=e.callbacks.beforePrepare(e,t)).url=cm.strReplace(t.url,{"%perPage%":e.params.perPage,"%limit%":e.params.perPage,"%page%":e.page,"%offset%":(e.page-1)*e.params.perPage,"%token%":e.pageToken,"%baseUrl%":cm._baseUrl}),t.params=cm.objectReplace(t.params,{"%perPage%":e.params.perPage,"%limit%":e.params.perPage,"%page%":e.page,"%offset%":(e.page-1)*e.params.perPage,"%token%":e.pageToken,"%baseUrl%":cm._baseUrl}),t=e.callbacks.afterPrepare(e,t)},n.callbacks.beforePrepare=function(e,t){return t},n.callbacks.afterPrepare=function(e,t){return t},n.callbacks.request=function(t,n){return n=t.callbacks.prepare(t,n),t.currentAction=n,cm.ajax(cm.merge(n,{onStart:function(){t.callbacks.start(t)},onSuccess:function(e){t.callbacks.response(t,n,e)},onError:function(){t.callbacks.error(t,n)},onAbort:function(){t.callbacks.abort(t,n)},onEnd:function(){t.callbacks.end(t)}}))},n.callbacks.filter=function(e,t,n){var a=[],o=cm.objectPath(e.params.responseErrorsKey,n),r=cm.objectPath(e.params.responseKey,n),s=cm.objectPath(e.params.responseCountKey,n);return cm.isEmpty(o)&&(cm.isEmpty(r)||(a=r),cm.isEmpty(s)||e.setCount(s)),a},n.callbacks.response=function(e,t,n){e.setPage(),n=n&&e.callbacks.filter(e,t,n),e.callbacks.render(e,n)},n.callbacks.error=function(e,t){e.triggerEvent("onError"),e.callbacks.response(e,t)},n.callbacks.abort=function(e,t){e.triggerEvent("onAbort")},n.callbacks.data=function(e,t){var n,a,o,r;e.callbacks.start(e),e.setPage(),cm.isEmpty(t)||0===e.params.perPage?e.callbacks.render(e,t):0<e.params.perPage&&(n=t.length,a=(e.page-1)*e.params.perPage,o=e.page*e.params.perPage,a<n&&(r=t.slice(a,Math.min(o,n)),e.callbacks.render(e,r))),e.callbacks.end(e)},n.callbacks.cached=function(e,t){e.callbacks.start(e),e.setPage(),e.callbacks.render(e,t),e.callbacks.end(e)},n.callbacks.renderContainer=function(e,t){return cm.node(e.params.pageTag,e.params.pageAttributes)},n.callbacks.render=function(e,t){e.isRendering=!0;var n={page:e.page,token:e.pageToken,pages:e.nodes.pages,container:cm.node(e.params.pageTag),data:t,total:e.getCount(),isVisible:!0,isRendered:!0,isError:!t};n.container=e.callbacks.renderContainer(e,n),e.pages[e.page]=n,e.triggerEvent("onPageRender",n),n.data?e.callbacks.renderPage(e,n):e.callbacks.renderError(e,n),cm.appendChild(n.container,e.nodes.pages),cm.addClass(n.container,"is-visible",!0),e.triggerEvent("onPageRenderEnd",n),e.params.switchManually||e.callbacks.switchPage(e,n)},n.callbacks.renderPage=function(e,t){var n;e.params.responseHTML&&(n=cm.strToHTML(t.data),cm.appendNodes(n,t.container))},n.callbacks.renderError=function(e,t){e.params.responseHTML&&t.container.appendChild(cm.node("div",{class:"cm__empty"},e.lang("server_error")))},n.callbacks.switchPage=function(e,t){var n=cm.getRect(e.nodes.content),a=cm.getRect(t.container);e.previousPage&&e.callbacks.hidePage(e,e.pages[e.previousPage]),e.params.animateSwitch?(e.nodes.content.style.overflow="hidden",e.nodes.content.style.height=[n.height,"px"].join(""),e.animations.content.go({style:{height:[a.height,"px"].join("")},duration:e.params.animateDuration,anim:"smooth",onStop:function(){e.nodes.content.style.overflow="visible",e.nodes.content.style.height="auto",e.isRendering=!1,e.triggerEvent("onPageSwitched",t)}})):(e.isRendering=!1,e.triggerEvent("onPageSwitched",t))},n.callbacks.hidePage=function(e,t){t.isVisible=!1,e.params.animateSwitch?e.params.animatePrevious?(cm.removeClass(t.container,"is-visible"),setTimeout(function(){cm.remove(t.container)},e.params.animateDuration)):setTimeout(function(){cm.remove(t.container),cm.removeClass(t.container,"is-visible")},e.params.animateDuration):(cm.remove(t.container),cm.removeClass(t.container,"is-visible"))},n.callbacks.renderBar=function(e,t){t=cm.merge({align:"left",position:"bottom"},t);var n={};switch(n.container=cm.node("div",{class:"com__pagination__bar"},n.items=cm.node("ul")),cm.addClass(n.container,["pull",t.align].join("-")),t.position){case"top":cm.insertFirst(n.container,e.nodes.container);break;case"bottom":cm.insertLast(n.container,e.nodes.container)}return n},n.callbacks.rebuildBars=function(t){cm.forEach(t.nodes.bar,function(e){t.callbacks.rebuildBar(t,e)})},n.callbacks.rebuildBar=function(e,t){cm.clearNode(t.items),e.pageCount<2?cm.addClass(t.container,"is-hidden"):(cm.removeClass(t.container,"is-hidden"),e.callbacks.renderBarItems(e,t))},n.callbacks.renderBarItems=function(t,n){var a=!1;t.callbacks.renderBarArrow(t,n,{text:"<",title:t.lang("prev"),className:"prev",callback:t.prevHanlder}),cm.forEach(t.pageCount,function(e){++e===t.page?(t.callbacks.renderBarItem(t,n,{page:e,isActive:!0}),a=!0):e<=t.params.barCountLR||t.currentPage&&e>=t.page-t.params.barCountM&&e<=t.page+t.params.barCountM||e>t.pageCount-t.params.barCountLR?(a=!0,t.callbacks.renderBarItem(t,n,{page:e,isActive:!1})):a&&(a=!1,t.callbacks.renderBarPoints(t,n,{}))}),t.callbacks.renderBarArrow(t,n,{text:">",title:t.lang("next"),className:"next",callback:t.nextHanlder})},n.callbacks.renderBarArrow=function(e,t,n){(n=cm.merge({text:"",title:"",className:"",callback:function(){}},n)).container=cm.node("li",{class:n.className},n.link=cm.node("a",{title:n.title},n.text)),cm.addEvent(n.link,"click",function(e){e=cm.getEvent(e),cm.preventDefault(e),n.callback()}),t.items.appendChild(n.container)},n.callbacks.renderBarPoints=function(e,t,n){(n=cm.merge({text:"...",className:"points"},n)).container=cm.node("li",{class:n.className},n.text),t.items.appendChild(n.container)},n.callbacks.renderBarItem=function(t,e,n){(n=cm.merge({page:null,isActive:!1},n)).container=cm.node("li",n.link=cm.node("a",n.page)),n.isActive&&cm.addClass(n.container,"active"),cm.addEvent(n.link,"click",function(e){e=cm.getEvent(e),cm.preventDefault(e),t.set(n.page)}),e.items.appendChild(n.container)},n.callbacks.start=function(e){e.isProcess=!0,e.params.showLoader&&e.components.loader&&e.components.loader.open(),cm.addClass(e.nodes.container,"is-loading"),e.triggerEvent("onStart")},n.callbacks.end=function(e){e.isProcess=!1,e.params.showLoader&&e.components.loader&&e.components.loader.close(),cm.removeClass(e.nodes.container,"is-loading"),e.triggerEvent("onEnd")},n.rebuild=function(e){var t=this;return t.isProcess&&t.abort(),t.pages={},t.page=null,t.pageToken=null,t.currentPage=null,t.previousPage=null,t.pageCount=0,cm.isEmpty(e)||t.setParams(e),t.validateParams(),t.resetStyles(),t.triggerEvent("onRebuild"),t.set(t.params.startPage),t},n.set=function(e){var t,n=this;return n.isProcess&&n.abort(),n.pageCount&&!(e<=n.pageCount)||n.isProcess||n.isRendering||(n.page=e,n.pageToken=n.pages[n.page]?n.pages[n.page].token:"",n.callbacks.rebuildBars(n),n.currentPage&&e===n.currentPage||(n.params.cache&&n.pages[n.page]&&n.pages[n.page].isRendered?n.callbacks.cached(n,n.pages[n.page].data):n.isAjax?(t=cm.clone(n.params.ajax),n.ajaxHandler=n.callbacks.request(n,t)):n.callbacks.data(n,n.params.data))),n},n.next=function(){return this.set(this.pageCount===this.currentPage?1:this.currentPage+1),this},n.prev=function(){return this.set(this.currentPage-1||this.pageCount),this},n.setToken=function(e,t){return this.pages[e]||(this.pages[e]={}),this.pages[e].token=t,this},n.setCount=function(e){var t=this;return cm.isUndefined(e)||(e=parseInt(e.toString())),cm.isNumber(e)&&e!==t.params.count&&(t.params.count=e,0===t.params.pageCount&&t.params.count&&t.params.perPage?t.pageCount=Math.ceil(t.params.count/t.params.perPage):t.pageCount=t.params.pageCount,t.callbacks.rebuildBars(t),t.triggerEvent("onSetCount",e)),t},n.getCount=function(){return this.params.count},n.setAction=function(e,t,n){var a=this;switch(t=cm.inArray(["raw","update","current"],t)?t:"current"){case"raw":a.params.ajax=cm.merge(a._raw.params.ajax,e);break;case"current":a.params.ajax=cm.merge(a.params.ajax,e);break;case"update":a.params.ajax=cm.merge(a._update.params.ajax,e)}return n&&(a._update.params.ajax=cm.clone(a.params.ajax)),a.rebuild(),a},n.getAction=function(){return this.params.ajax},n.getCurrentAction=function(){return this.currentAction},n.setPage=function(){return this.previousPage=this.currentPage,this.currentPage=this.page,this},n.abort=function(){return this.ajaxHandler&&this.ajaxHandler.abort&&this.ajaxHandler.abort(),this},n.isOwnNode=n.isParent=function(e,t){return cm.isParent(this.nodes.container,e,t)}}),cm.define("Com.Palette",{modules:["Params","Events","Langs","Structure","DataConfig","Stack"],require:["tinycolor"],events:["onRenderStart","onRender","onDraw","onSet","onSelect","onChange"],params:{node:cm.node("div"),container:null,name:"",embedStructure:"replace",value:"transparent",defaultValue:"rgb(255, 255, 255)",setOnInit:!0,"Com.TintRange":{direction:"vertical",theme:"theme--arrows",setHiddenInput:!1},"Com.OpacityRange":{direction:"vertical",theme:"theme--arrows",setHiddenInput:!1}},strings:{new:"new",previous:"previous",select:"Select",hue:"Hue",opacity:"Opacity",hex:"HEX"}},function(e){var t,r=this;r.nodes={},r.components={},r.value=null,r.previousValue=null;var n=function(){r.nodes.container=cm.node("div",{class:"com__palette"},r.nodes.inner=cm.node("div",{class:"inner"},cm.node("div",{class:"b-palette"},r.nodes.paletteZone=cm.node("div",{class:"inner"},r.nodes.paletteDrag=cm.node("div",{class:"drag"}),r.nodes.paletteCanvas=cm.node("canvas",{width:"100%",height:"100%"}))),cm.node("div",{class:"b-range",title:r.lang("hue")},r.nodes.tintZone=cm.node("div",{class:"inner"})),cm.node("div",{class:"b-range b-opacity",title:r.lang("opacity")},r.nodes.opacityZone=cm.node("div",{class:"inner"})),cm.node("div",{class:"b-stuff"},cm.node("div",{class:"inner"},cm.node("div",{class:"b-preview-color"},cm.node("div",{class:"b-title"},r.lang("new")),cm.node("div",{class:"b-colors"},r.nodes.previewNew=cm.node("div",{class:"b-color"}),r.nodes.previewPrev=cm.node("div",{class:"b-color"})),cm.node("div",{class:"b-title"},r.lang("previous"))),cm.node("div",{class:"b-bottom"},cm.node("div",{class:"b-preview-inputs"},r.nodes.inputHEX=cm.node("input",{type:"text",title:r.lang("hex")})),cm.node("div",{class:"b-buttons"},r.nodes.buttonSelect=cm.node("div",{class:"button button-primary is-wide"},r.lang("select")))))))),t=r.nodes.paletteCanvas.getContext("2d"),cm.addEvent(r.nodes.inputHEX,"input",o),cm.addEvent(r.nodes.inputHEX,"keypress",i),cm.addEvent(r.nodes.buttonSelect,"click",c),r.embedStructure(r.nodes.container)},a=function(){r.components.paletteDrag=new Com.Draggable({target:r.nodes.paletteZone,node:r.nodes.paletteDrag,limiter:r.nodes.paletteZone,events:{onSelect:function(e,t){var n=e.getDimensions();r.value.v=cm.toFixed((100-100/n.limiter.absoluteHeight*t.top)/100,2),r.value.s=cm.toFixed(100/n.limiter.absoluteWidth*t.left/100,2),0===r.value.a&&(r.value.a=1),l(),s()}}}),cm.getConstructor("Com.TintRange",function(e,t){r.components.tint=new e(cm.merge(r.params[t],{container:r.nodes.tintZone})),r.components.tint.addEvent("onSelect",function(e,t){r.value.h=t,0===r.value.a&&(r.value.a=1),l(),s(),v()})}),cm.getConstructor("Com.OpacityRange",function(e,t){r.components.opacity=new e(cm.merge(r.params[t],{container:r.nodes.opacityZone})),r.components.opacity.addEvent("onSelect",function(e,t){r.value.a=cm.toFixed(t/100,2),l()})})},s=function(){var e=r.get(),t=cm.toFixed(100*r.value.a,0);r.components.opacity.setColor(e),r.components.opacity.set(t,!1),r.components.opacity.redraw()},o=function(){var e=r.nodes.inputHEX.value,t=cm.removeSpaces(e),t=(/^#/.test(t)?"":"#")+t;t=cm.reduceText(t,7,!1),r.nodes.inputHEX.value=t,d(t,!0,{setInput:!1})},i=function(e){var t;13==(e=cm.getEvent(e)).keyCode&&(t=r.nodes.inputHEX.value,d(t,!0),c())},c=function(){m(),r.triggerEvent("onSelect",r.value),f()},d=function(e,t,n){cm.isEmpty(e)?e=r.params.defaultValue:"transparent"==e&&(e={h:360,s:0,v:1,a:0}),r.value=tinycolor(e).toHsv(),r.redraw(!0,n),t&&r.triggerEvent("onSet",r.value)},l=function(){p(),g(),u(),r.triggerEvent("onSet",r.value)},m=function(){r.value?r.previousValue=cm.clone(r.value):cm.isEmpty(r.params.value)?r.previousValue=tinycolor(r.params.defaultValue).toHsv():r.previousValue=tinycolor(r.params.value).toHsv(),h()},u=function(){tinycolor(cm.clone(r.value)).isDark()?cm.replaceClass(r.nodes.paletteDrag,"is-light","is-dark"):cm.replaceClass(r.nodes.paletteDrag,"is-dark","is-light")},p=function(){var e=tinycolor(cm.clone(r.value));r.nodes.previewNew.style.backgroundColor=e.toHslString()},h=function(){var e=tinycolor(cm.clone(r.previousValue));r.nodes.previewPrev.style.backgroundColor=e.toHslString()},g=function(){var e=tinycolor(cm.clone(r.value));r.nodes.inputHEX.value=e.toHexString()},f=function(){JSON.stringify(r.value)===JSON.stringify(r.previousValue)&&r.triggerEvent("onChange",r.value)},v=function(){var e;t.rect(0,0,100,100),t.fillStyle="hsl("+r.value.h+", 100%, 50%)",t.fill(),e=t.createLinearGradient(0,0,100,0),(t.fillStyle=e).addColorStop(0,"rgba(255, 255, 255, 1)"),e.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillRect(0,0,100,100),e=t.createLinearGradient(0,0,0,100),(t.fillStyle=e).addColorStop(0,"rgba(0, 0, 0, 0)"),e.addColorStop(1,"rgba(0, 0, 0, 1)"),t.fillRect(0,0,100,100)};r.set=function(e,t,n){return t=!!cm.isUndefined(t)||t,n=cm.isUndefined(t)?{}:n,d(e,t,n),m(),r},r.get=function(e){var t=tinycolor(cm.clone(r.value));switch(e){case"rgb":t=t.toRgbString();break;case"hsl":t=t.toHslString();break;case"hsv":case"hsb":t=t.toHsvString();break;case"hex":default:t=t.toHexString()}return t},r.getRaw=function(e){var t=tinycolor(cm.clone(r.value));switch(e){case"hsl":t=t.toHsl()}return t},r.redraw=function(e,t){var n,a,o;return e=!!cm.isUndefined(e)||e,t=cm.isUndefined(e)?{}:t,t=cm.merge({setInput:!0},t),s(),n=cm.toFixed(r.value.h,0),r.components.tint.set(n,!1),r.components.tint.redraw(),a=r.components.paletteDrag.getDimensions(),o={left:a.limiter.absoluteWidth/100*(100*r.value.s),top:a.limiter.absoluteHeight-a.limiter.absoluteHeight/100*(100*r.value.v)},r.components.paletteDrag.setPosition(o,!1),p(),u(),v(),t.setInput&&g(),e&&r.triggerEvent("onDraw"),r},r.isLight=function(){return tinycolor(cm.clone(r.value)).isLight()},r.isDark=function(){return tinycolor(cm.clone(r.value)).isDark()},r.setParams(e),r.convertEvents(r.params.events),r.getDataConfig(r.params.node),r.addToStack(r.params.node),r.triggerEvent("onRenderStart"),n(),a(),r.addToStack(r.nodes.container),r.triggerEvent("onRender"),r.params.setOnInit&&r.set(r.params.value,!1)}),cm.define("Com.Request",{modules:["Params","Events","Langs","Stack","Structure"],events:["onRenderStart","onRender","onStart","onEnd","onError","onAbort","onSuccess","onContentRenderStart","onContentRender","onContentRenderEnd"],params:{node:cm.node("div"),container:null,name:"",embedStructure:"append",wrapContent:!0,swapContentOnError:!0,renderContentOnSuccess:!0,className:"",autoSend:!1,responseKey:"data",responseErrorsKey:"errors",responseMessageKey:"message",responseCodeKey:"code",responseHTML:!0,responseHTMLKey:"data",responseStatusKey:"data.success",responseContainer:null,ajax:{type:"json",method:"get",url:"",params:"",formData:!1},variables:{},showOverlay:!0,animateDuration:"cm._config.animDuration",overlayContainer:"document.body",overlayConstructor:"Com.Overlay",overlayParams:{lazy:!0,autoOpen:!1,removeOnClose:!0,showSpinner:!0,showContent:!1,position:"absolute",theme:"light"}},strings:{server_error:"An unexpected error has occurred. Please try again later."}},function(e){var t=this;t.nodes={},t.animations={},t.components={},t.requestData={},t.responceData=null,t.responceDataFiltered=null,t.responceDataHTML=null,t.responceDataStatus=null,t.isProcess=!1,t.isError=!1,t.isRendering=!1,t.construct(e)}),cm.getConstructor("Com.Request",function(e,t,n){n.construct=function(e){var t=this;return t.destructHandler=t.destruct.bind(t),t.requestHandler=t.request.bind(t),t.setParams(e),t.convertEvents(t.params.events),t.addToStack(t.params.node),t.triggerEvent("onRenderStart"),t.render(),t.addToStack(t.nodes.container),t.triggerEvent("onRender"),t.params.autoSend&&t.send(),t},n.destruct=function(){return this.isDestructed||(this.isDestructed=!0,this.components.overlay&&this.components.overlay.destruct(),this.removeFromStack()),this},n.send=function(){return this.isProcess&&this.abort(),this.isProcess||this.isRendering||this.request(),this},n.render=function(){var t=this;return t.renderView(),t.params.wrapContent&&cm.isNode(t.params.container)&&cm.appendNodes(t.params.container.childNodes,t.nodes.inner),t.setAttributes(),t.params.responseHTML?t.params.overlayParams.container=t.params.overlayParams.container||t.params.overlayContainer||t.nodes.container||document.body:t.params.overlayParams.container=t.params.overlayParams.container||t.params.overlayContainer||document.body,t.params.showOverlay&&cm.getConstructor(t.params.overlayConstructor,function(e){t.components.overlay=new e(t.params.overlayParams)}),t.embedStructure(t.nodes.container),t},n.renderView=function(){return this.nodes.container=cm.node("div",{class:"com__request"},this.nodes.inner=cm.node("div",{class:"inner"})),this},n.setAttributes=function(){return cm.addClass(this.nodes.container,this.params.className),this.animations.container=new cm.Animation(this.nodes.container),this},n.setAction=function(e,t,n){switch(t=cm.inArray(["raw","update","current"],t)?t:"current"){case"raw":this.params.ajax=cm.merge(this._raw.params.ajax,e);break;case"current":this.params.ajax=cm.merge(this.params.ajax,e);break;case"update":this.params.ajax=cm.merge(this._update.params.ajax,e)}return n&&(this._update.params.ajax=cm.clone(this.params.ajax)),this},n.setVariables=function(e,t,n){switch(t=cm.inArray(["raw","update","current"],t)?t:"current"){case"raw":this.params.variables=cm.merge(this._raw.params.variables,e);break;case"current":this.params.variables=cm.merge(this.params.variables,e);break;case"update":this.params.variables=cm.merge(this._update.params.variables,e)}return n&&(this._update.params.variables=cm.clone(this.params.variables)),this},n.request=function(){var t=this;return t.prepare(),t.components.ajax=cm.ajax(cm.merge(t.requestData,{onStart:function(){t.start()},onSuccess:function(e){t.responceData=e,t.response()},onError:function(e){t.responceData=e,t.error()},onAbort:function(){t.aborted()},onEnd:function(){t.end()}})),t},n.prepare=function(){var e=this;return e.isError=!1,e.responceData=null,e.responceDataFiltered=null,e.responceDataHTML=null,e.responceDataStatus=null,e.requestData=cm.clone(e.params.ajax),e.requestData.url=cm.strReplace(e.requestData.url,e.params.variables),e.requestData.params=cm.objectReplace(e.requestData.params,e.params.variables),e},n.abort=function(){return this.components.ajax&&this.components.ajax.abort&&this.components.ajax.abort(),this},n.start=function(){return this.isProcess=!0,this.params.showOverlay&&this.components.overlay&&this.components.overlay.open(),this.triggerEvent("onStart"),this},n.end=function(){return this.isProcess=!1,this.params.showOverlay&&this.components.overlay&&this.components.overlay.close(),this.triggerEvent("onEnd"),this},n.filter=function(){var e,t=this,n=cm.objectPath(t.params.responseErrorsKey,t.responceData),a=cm.objectPath(t.params.responseKey,t.responceData),o=cm.objectPath(t.params.responseStatusKey,t.responceData);cm.isEmpty(n)&&(e=cm.isEmpty(t.params.responseHTMLKey)?cm.objectPath(t.params.responseKey,t.responceData):cm.objectPath(t.params.responseHTMLKey,t.responceData),t.responceDataFiltered=cm.isEmpty(a)?[]:a,t.responceDataHTML=cm.isEmpty(e)?"":e,t.responceDataStatus=!cm.isEmpty(o)&&o)},n.response=function(){return cm.isEmpty(this.responceData)||this.filter(),!cm.isEmpty(this.responceDataFiltered)||this.responceDataStatus?this.success():this.error(),this},n.error=function(){var e,t,n,a=this;return a.isError=!0,cm.isEmpty(a.responceData)||(e=cm.objectSelector(a.params.responseErrorsKey,a.responceData),t=cm.objectSelector(a.params.responseMessageKey,a.responceData),n=cm.objectSelector(a.params.responseCodeKey,a.responceData)),a.renderError(),a.triggerEvent("onError",{response:a.responceData,status:a.responceDataStatus,filtered:a.responceDataFiltered,html:a.responceDataHTML,errors:e,message:t,code:n}),a},n.success=function(){var e=this;return e.isError=!1,(!e.responceDataStatus||e.responceDataStatus&&e.params.renderContentOnSuccess)&&e.renderResponse(),e.triggerEvent("onSuccess",{response:e.responceData,status:e.responceDataStatus,filtered:e.responceDataFiltered,html:e.responceDataHTML}),e},n.aborted=function(){return cm.triggerEvent("onAbort"),this},n.renderTemporary=function(e){var t=cm.node("div",{class:"com__request__temporary"});return e&&cm.addClass(t,"is-show"),t},n.renderResponse=function(){var e;return this.params.responseHTML&&(e=cm.strToHTML(this.responceDataHTML),this.renderContent(e)),this},n.renderContent=function(e){var t,n=this;return cm.isNode(n.params.responseContainer)?(n.triggerEvent("onContentRenderStart",e),cm.clearNode(n.params.responseContainer),cm.appendNodes(e,n.params.responseContainer),n.triggerEvent("onContentRender",e),n.triggerEvent("onContentRenderEnd",e)):cm.isNode(n.params.container)?(t=n.renderTemporary(!1),cm.appendNodes(e,t),n.appendResponse(t)):(n.triggerEvent("onContentRenderStart",e),n.triggerEvent("onContentRender",e),n.triggerEvent("onContentRenderEnd",e)),n},n.renderError=function(){var e,t,n=this;return n.params.responseHTML&&(t=cm.node("div",{class:"cm__empty"},n.lang("server_error")),cm.isNode(n.params.responseContainer)?(n.triggerEvent("onContentRenderStart",t),n.params.swapContentOnError?(cm.clearNode(n.params.responseContainer),cm.appendChild(t,n.params.responseContainer)):(cm.remove(n.nodes.error),n.nodes.error=t,cm.insertFirst(n.nodes.error,n.params.responseContainer)),n.triggerEvent("onContentRender",t),n.triggerEvent("onContentRenderEnd",t)):cm.isNode(n.params.container)?(e=n.renderTemporary(),cm.appendChild(t,e),n.params.swapContentOnError?n.appendResponse(e):n.appendError(e)):(n.triggerEvent("onContentRenderStart",t),n.triggerEvent("onContentRender",t),n.triggerEvent("onContentRenderEnd",t))),n},n.appendError=function(e){var t=this;return t.isRendering=!0,t.triggerEvent("onContentRenderStart",e),cm.remove(t.nodes.error),t.nodes.error=e,cm.addClass(t.nodes.error,"is-show"),t.nodes.temporary?cm.insertFirst(t.nodes.error,t.nodes.temporary):cm.insertFirst(t.nodes.error,t.nodes.inner),cm.addClass(t.nodes.container,"is-show is-loaded",!0),t.isRendering=!1,t.triggerEvent("onContentRender",e),t.triggerEvent("onContentRenderEnd",e),t},n.appendResponse=function(e){var t,n=this;return n.isRendering=!0,n.triggerEvent("onContentRenderStart",e),n.nodes.temporary||(n.nodes.temporary=n.renderTemporary(!1),cm.appendNodes(n.nodes.inner.childNodes,n.nodes.temporary),cm.appendChild(n.nodes.temporary,n.nodes.inner),cm.customEvent.trigger(n.nodes.temporary,"destruct",{direction:"child",self:!1})),cm.removeClass(n.nodes.temporary,"is-show",!0),cm.appendChild(e,n.nodes.inner),cm.addClass(e,"is-show",!0),cm.removeClass(n.nodes.container,"is-loaded",!0),cm.addClass(n.nodes.container,"is-show",!0),n.triggerEvent("onContentRender",n.nodes.temporary),t=e.offsetHeight,n.animations.container.go({style:{height:[t,"px"].join("")},duration:n.params.animateDuration,anim:"smooth",onStop:function(){cm.remove(n.nodes.temporary),n.nodes.temporary=e,n.nodes.container.style.height="",cm.addClass(n.nodes.container,"is-loaded",!0),n.isRendering=!1,n.triggerEvent("onContentRenderEnd",n.nodes.temporary)}}),n}}),cm.define("Com.Router",{extend:"Com.AbstractController",events:["onChange"],params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,customEvents:!0,route:null,addLeadPoint:!0}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.Router",function(e,t,n,a){n.onConstructStart=function(){var e=this;e.routes={},e.routesBinds={},e.dataStorage={},e.current=null,e.previous=null,e.windowClickEventHandler=e.windowClickEvent.bind(e),e.popstateEventHandler=e.popstateEvent.bind(e),e.hashchangeEventHandler=e.hashchangeEvent.bind(e)},n.onSetEvents=function(){cm.addEvent(window,"click",this.windowClickEventHandler),cm.addEvent(window,"popstate",this.popstateEventHandler),cm.addEvent(window,"hashchange",this.hashchangeEventHandler)},n.onUnsetEvents=function(){cm.removeEvent(window,"click",this.windowClickEventHandler),cm.removeEvent(window,"popstate",this.popstateEventHandler),cm.removeEvent(window,"hashchange",this.hashchangeEventHandler)},n.windowClickEvent=function(e){var t;e.button||e.metaKey||e.ctrlKey||(t=cm.getEventTarget(e),t=this.getTargetLink(t),cm.isTagName(t,"a")&&(cm.preventDefault(e),this.processLink(t)))},n.getTargetLink=function(e){return!!cm.isElementNode(e)&&(("a"===e.tagName.toLowerCase()&&"_blank"!==e.target&&-1!==this.prepareUrl(e.href).indexOf(this.prepareBaseUrl())||!!(e=this.getTargetLink(e.parentNode)))&&e)},n.popstateEvent=function(e){var t=e.state;t&&this.processRoute(t)},n.hashchangeEvent=function(e){var t=this,n=null;cm.isEmpty(window.location.hash)||(n=window.location.hash.slice(1)),t.current.hash=n,t.current.state.hash=n,t.current.href=cm.isEmpty(n)?t.current.location:[t.current.location,t.current.hash].join("#"),t.current.state.href=t.current.href,window.history.replaceState(t.current.state,"",t.current.state.href)},n.processLink=function(e){var t=e.getAttribute("href");cm.isEmpty(t)||(t=this.prepareRoute(t),this.pushRoute(t[0],t[1]))},n.pushRoute=function(e,t,n){var a;cm.isEmpty(e)&&(e=this.current.route),(a={route:e,hash:t,location:this.prepareHref(e),match:[],params:cm.merge({pushState:!0,replaceState:!1},n)}).href=cm.isEmpty(a.hash)?a.location:[a.location,a.hash].join("#"),a.data=this.getStorageData(a.route,a,a.params.data),cm.setBodyScrollTop(0),a.params.replaceState?window.history.replaceState(a,"",a.location):a.params.pushState&&window.history.pushState(a,"",a.location),this.processRoute(a),cm.isEmpty(a.hash)||(window.location.hash=a.hash)},n.processRoute=function(t){var n,a,o,e,r,s=this;s.destructRoute(s.current),cm.forEach(s.routes,function(e){(n=t.route.match(e.regexp))&&(s.checkRoleAccess(e.access)?(o=n,a=e):t.match.push(cm.clone(e)))}),a=a||s.get("error"),(e=cm.merge(a,t)).state=t,o&&(e.captures=s.mapCaptures(e.map,o)),cm.isEmpty(e.redirectTo)||(cm.isObject(e.redirectTo)?cm.forEach(e.redirectTo,function(e,t){s.checkRoleAccess(t)&&(r=e)}):r=e.redirectTo),r?s.redirect(r,e.hash,{captures:e.captures,data:e.data}):s.constructRoute(e)},n.destructRoute=function(e){return(this.previous=e)&&(e.constructor?e.controller&&e.controller.destruct&&e.controller.destruct():(e.onDestruct(e),e.callback(e))),this},n.constructRoute=function(t){var n,a,o=this;return o.current=t,cm.isEmpty(t.constructor)||(cm.isObject(t.constructor)?cm.forEach(t.constructor,function(e,t){o.checkRoleAccess(t)&&(n=e)}):n=t.constructor,cm.isObject(t.constructorParams)?cm.forEach(t.constructorParams,function(e,t){o.checkRoleAccess(t)&&(a=e)}):a=t.constructorParams),n?cm.getConstructor(n,function(e){t.controller=new e(cm.merge(a,{container:o.params.container,route:t})),t.controller.triggerEvent("onConstructComplete")}):(t.onConstruct(t),t.callback(t)),o.triggerEvent("onChange",t),o},n.prepareUrl=function(e){return e=e.replace(new RegExp("^(http|https):"),"").replace(new RegExp("^//www\\."),"//")},n.prepareBaseUrl=function(e){var t=new RegExp("^www.").test(window.location.host),n=this.prepareUrl(cm._baseUrl);return e&&t&&(n=n.replace(new RegExp("^//"),"//www.")),n},n.prepareRoute=function(e){var t=this.prepareBaseUrl();return e=this.prepareUrl(e).replace(new RegExp("^"+t),"").replace(new RegExp("^\\."),""),/^(\/|\.\/)/.test(e)||(e="/"+e),e=e.split("#")},n.prepareHref=function(e){var t=this.prepareBaseUrl(!0);return e=e.replace(new RegExp("^\\."),""),window.location.protocol+t+e},n.prepareExternalHref=function(e,t,n){return e=this.fillCaptures(e,n),cm.isEmpty(t)||(e=[e,t].join("#")),e},n.getMap=function(e){for(var t,n=/({(\w+)})/g,a={},o=0;t=n.exec(e);)o++,t[2]&&(a[o]=t[2]);return a},n.mapCaptures=function(e,n){var a={};return cm.forEach(e,function(e,t){a[e]=n[t]}),a},n.fillCaptures=function(e,n){return cm.isObject(n)&&(e=e.replace(/{(\w+)}/g,function(e,t){return n[t]||""})),e},n.checkRoleAccess=function(e){return!0},n.getStorageData=function(e,t,n){var a={};return t&&(a=cm.merge(a,t.data)),this.dataStorage[e]&&(a=cm.merge(a,this.dataStorage[e]),this.dataStorage={}),a=cm.merge(a,n)},n.embed=function(e){this.params.container=e},n.add=function(t,e){var n=this,a=cm.merge({type:"internal",route:t,originRoute:t,name:null,access:"all",pattern:"([\\s\\S]+?)",regexp:null,map:[],captures:{},href:null,redirectTo:null,data:{},constructor:!1,constructorParams:{},callback:function(){},onConstruct:function(){},onDestruct:function(){}},e);return a.regexp=new RegExp("^"+t.replace(/({\w+})/g,a.pattern)+"$"),a.map=n.getMap(t),cm.isString(a.name)?n.routesBinds[a.name]=t:cm.isArray(a.name)&&cm.forEach(a.name,function(e){n.routesBinds[e]=t}),n.routes[t]=a,n},n.get=function(e){return this.routesBinds[e]&&(e=this.routesBinds[e]),this.routes[e]},n.getURL=function(e,t,n,a){var o=this.get(e);if(o){if("external"===o.type)return e=o.href,this.prepareExternalHref(e,t,n);e=o.route}return e=this.fillCaptures(e,n),this.dataStorage[e]=a,/^(\/|\.\/)/.test(e)||(e="/"+e),this.params.addLeadPoint&&!/^\./.test(e)&&(e="."+e),cm.isEmpty(t)||(e=[e,t].join("#")),e},n.getFullURL=function(e,t,n,a){return this.prepareHref(this.getURL(e,t,n,a))},n.getCurrent=function(){return this.current},n.getPrevious=function(){return this.previous},n.set=function(e,t,n){return this.routesBinds[e]&&(e=this.routesBinds[e]),this.trigger(e,t,n),this},n.setURL=function(e,t,n){return e=this.prepareRoute(e),this.trigger(e[0],t||e[1],n),this},n.summon=function(e,t,n){var a,o;return n=cm.merge({data:{}},n),this.routesBinds[e]&&(e=this.routesBinds[e]),(o=this.routes[e])&&((a=cm.clone(o)).params=cm.merge(a.params,n),a.data=this.getStorageData(a.route,a,n.data),this.destructRoute(this.current),this.constructRoute(a)),this},n.remove=function(e){var t,n=this;return n.routesBinds[e]&&(e=n.routesBinds[e]),(t=n.routes[e])&&(cm.isString(t.name)?delete n.routesBinds[t.name]:cm.isArray(t.name)&&cm.forEach(t.name,function(e){delete n.routesBinds[e]}),delete n.routes[e]),n},n.trigger=function(e,t,n){return this.pushRoute(e,t,n),this},n.redirect=function(e,t,n){var a=this.getURL(e,t,n.captures);return n=cm.merge(n,{pushState:!1,replaceState:!0}),this.setURL(a,t,n),this},n.start=function(e,t,n){return e=cm.isUndefined(e)?this.params.route:e,n=cm.merge({pushState:!1,replaceState:!0},n),cm.isEmpty(e)?this.setURL(window.location.href,t,n):this.set(e,t,n),this}}),Com.Scroll=function(e){var n,t,a,o,r=this,s=cm.merge({node:cm.Node("div"),step:15,time:50,duration:300,nodes:{},events:{}},e),i={onScroll:[],onScrollStart:[],onScrollEnd:[]},c={left:cm.Node("div"),right:cm.Node("div"),up:cm.Node("div"),down:cm.Node("div"),scroll:cm.Node("div")},d=function(){n=new cm.Animation(c.scroll),c.scroll.scrollTop=0,c.scroll.scrollLeft=0,cm.addEvent(c.up,"mousedown",l),cm.addEvent(c.up,"mouseup",h),cm.addEvent(c.up,"mouseout",h),cm.addEvent(c.down,"mousedown",m),cm.addEvent(c.down,"mouseup",h),cm.addEvent(c.down,"mouseout",h),cm.addEvent(c.left,"mousedown",u),cm.addEvent(c.left,"mouseup",h),cm.addEvent(c.left,"mouseout",h),cm.addEvent(c.right,"mousedown",p),cm.addEvent(c.right,"mouseup",h),cm.addEvent(c.right,"mouseout",h)},l=function(){h(),t=setInterval(g,s.time),g()},m=function(){h(),t=setInterval(f,s.time),f()},u=function(){h(),t=setInterval(v,s.time),v()},p=function(){h(),t=setInterval(b,s.time),b()},h=function(){t&&clearInterval(t)},g=function(){a=Math.max(c.scroll.scrollTop-s.step,0),n.go({style:{scrollTop:a},duration:s.time,amim:"simple"})},f=function(){a=Math.min(c.scroll.scrollTop+s.step,c.scroll.scrollHeight-c.scroll.offsetHeight),n.go({style:{scrollTop:a},duration:s.time,amim:"simple"})},v=function(){o=Math.max(c.scroll.scrollLeft-s.step,0),n.go({style:{scrollLeft:o},duration:s.time,amim:"simple"})},b=function(){o=Math.min(c.scroll.scrollLeft+s.step,c.scroll.scrollWidth-c.scroll.offsetWidth),n.go({style:{scrollLeft:o},duration:s.time,amim:"simple"})},C=function(e){cm.forEach(e,function(e,t){i[t]&&"function"==typeof e&&i[t].push(e)})},y=function(e,t){var n;e&&(n={},n=t?cm.getNodes(e)[t]||{}:cm.getNodes(e),c=cm.merge(c,n)),c=cm.merge(c,s.nodes)};r.scrollY=function(e){var t=Math.max(Math.min(e,c.scroll.scrollHeight-c.scroll.offsetHeight),0);return n.go({style:{scrollTop:t},duration:s.duration,amim:"smooth"}),r},r.scrollX=function(e){var t=Math.max(Math.min(e,c.scroll.scrollWidth-c.scroll.offsetWidth),0);return n.go({style:{scrollLeft:t},duration:s.duration,amim:"smooth"}),r},r.addEvent=function(e,t){return i[e]&&"function"==typeof t&&i[e].push(t),r},r.removeEvent=function(e,t){return i[e]&&"function"==typeof t&&(i[e]=i[e].filter(function(e){return e!=t})),r},C(s.events),y(s.node,"ComScroll"),d()},cm.define("Com.Slider",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRender","onChangeStart","onChange","onPause","onStart","enableEditing","disableEditing","enableEditable","disableEditable"],params:{node:cm.node("div"),name:"",customEvents:!0,renderStructure:!1,isEditing:!1,time:500,delay:4e3,slideshow:!0,direction:"forward",pauseOnHover:!0,pauseOnScroll:!0,fadePrevious:!1,buttons:!0,numericButtons:!1,arrows:!0,effect:"fade",transition:"smooth",height:"auto",minHeight:48,hasBar:!1,barDirection:"horizontal","Com.Scroll":{step:25,time:25}}},function(e){var t,n,o=this,r={};o.nodes={container:cm.Node("div"),inner:cm.Node("div"),slides:cm.Node("div"),slidesInner:cm.Node("ul"),next:cm.Node("div"),prev:cm.Node("div"),buttons:cm.Node("ul"),items:[],"layout-inner":cm.Node("div"),"bar-inner":cm.Node("div"),"bar-items":[]},o.anim={},o.items=[],o.itemsLength=0,o.effect=null,o.direction="next",o.current=null,o.previous=null,o.paused=!1,o.pausedOutside=!1,o.isProcess=!1,o.isEditing=null,o.isDestructed=null;function a(){switch(o.params.height){case"max":h();break;case"slide":g()}}function s(){a(),k()}function i(){k()}var c=function(){o.params.time=cm.getTransitionDurationFromLESS("ComSlider-Duration",o.params.time)},d=function(){cm.isNode(o.params.node)&&(o.params.name=o.params.node.getAttribute("name")||o.params.name),o.isEditing=cm.hasClass(o.params.node,"is-editing"),o.params.direction={forward:1,backward:1,random:1}[o.params.direction]?o.params.direction:"forward",o.params.effect=Com.SliderEffects[o.params.effect]?o.params.effect:"fade",o.params.transition={smooth:1,simple:1,acceleration:1,inhibition:1}[o.params.transition]?o.params.transition:"smooth",o.params.height={auto:1,max:1,slide:1}[o.params.height]?o.params.height:"auto",o.params.minHeight&&isNaN(o.params.minHeight)&&(n=_(o.params.minHeight),o.params.minHeight=parseFloat(o.params.minHeight))},l=function(){var e=cm.getSupportedStyle("transition");o.params.renderStructure&&m(),cm.forEach(o.nodes.items,f),o.params.arrows&&(cm.addEvent(o.nodes.next,"click",o.next),cm.addEvent(o.nodes.prev,"click",o.prev)),(!o.params.arrows||o.itemsLength<2)&&(o.nodes.next.style.display="none",o.nodes.prev.style.display="none"),o.params.buttons&&cm.forEach(o.items,b),(!o.params.buttons||o.itemsLength<2)&&(o.nodes.buttons.style.display="none"),o.nodes.inner.style[e]=[o.params.time,"ms"].join(""),/max|slide/.test(o.params.height)&&cm.addClass(o.nodes.container,"is-adaptive-content"),o.params.slideshow&&o.params.pauseOnHover&&(cm.addEvent(o.nodes.container,"mouseover",function(e){e=cm.getEvent(e);var t=cm.getObjToEvent(e);cm.isParent(o.nodes.container,t,!0)||w()}),cm.addEvent(o.nodes.container,"mouseout",function(e){e=cm.getEvent(e);var t=cm.getObjToEvent(e);cm.isParent(o.nodes.container,t,!0)||E()})),k(),o.anim.slides=new cm.Animation(o.nodes.slides),o.anim.slidesInner=new cm.Animation(o.nodes.slidesInner)},m=function(){},u=function(){cm.addEvent(window,"resize",o.redrawHandler),cm.addEvent(window,"scroll",o.scrollHandler),o.params.customEvents&&(cm.customEvent.add(o.params.node,"redraw",o.redrawHandler),cm.customEvent.add(o.params.node,"enableEditable",o.enableEditingHandler),cm.customEvent.add(o.params.node,"disableEditable",o.disableEditingHandler),cm.customEvent.add(o.params.node,"destruct",o.destructHandler))},p=function(){o.params.hasBar&&(o.nodes.ComScroll=cm.getNodes(o.params.node).ComScroll,r.scroll=new Com.Scroll(cm.merge(o.params["Com.Scroll"],{nodes:o.nodes.ComScroll})))},h=function(){var t=0;cm.forEach(o.items,function(e){t=Math.max(t,cm.getRealHeight(e.nodes.container,"offsetRelative")),e.nodes.inner&&(t=Math.max(t,cm.getRealHeight(e.nodes.inner,"offsetRelative")))}),(t="%"===n?Math.max(t,o.nodes.inner.offsetWidth/100*o.params.minHeight):Math.max(t,o.params.minHeight))!==o.nodes.inner.offsetHeight&&(o.nodes.inner.style.height=[t,"px"].join(""))},g=function(){var e,t=0;null!==o.current&&(e=o.items[o.current],t=Math.max(t,cm.getRealHeight(e.nodes.container,"offsetRelative")),e.nodes.inner&&(t=Math.max(t,cm.getRealHeight(e.nodes.inner,"offsetRelative")))),(t="%"===n?Math.max(t,o.nodes.inner.offsetWidth/100*o.params.minHeight):Math.max(t,o.params.minHeight))!==o.nodes.inner.offsetHeight&&(o.nodes.inner.style.height=[t,"px"].join(""))},f=function(e,t){e={index:t,nodes:e},o.params.hasBar&&(e.bar=o.nodes["bar-items"][t],e.bar.title=e.bar.link&&e.bar.link.getAttribute("title")||"",e.bar.src=e.bar.link&&e.bar.link.getAttribute("href")||""),v(e)},v=function(t){t=cm.merge({index:o.items.length,nodes:{container:cm.Node("li"),inner:null}},t),o.params.hasBar&&cm.addEvent(t.bar.link,"click",function(e){e=cm.getEvent(e),cm.preventDefault(e),C(t.index)}),t.anim=new cm.Animation(t.nodes.container),o.items.push(t),o.itemsLength=o.items.length},b=function(e){o.nodes.buttons.appendChild(e.nodes.button=cm.Node("li")),o.params.numericButtons&&(e.nodes.button.innerHTML=e.index+1),cm.addEvent(e.nodes.button,"click",function(){o.direction="next",C(e.index)})},C=function(e){var t,n;o.isProcess||(o.isProcess=!0,o.params.slideshow&&S(),t=o.items[e],n=o.items[o.current],o.previous=o.current,o.current=e,o.triggerEvent("onChangeStart",{current:t,previous:n}),n&&o.params.buttons&&cm.removeClass(n.nodes.button,"active"),o.params.buttons&&cm.addClass(t.nodes.button,"active"),o.params.hasBar&&y(t,n),Com.SliderEffects[o.effect](o,t,n,function(){o.isProcess=!1,o.triggerEvent("onChange",{current:t,previous:n}),cm.customEvent.trigger(t.nodes.container,"redraw",{direction:"child",self:!1})}),a())},y=function(e,t){var n,a;t&&cm.removeClass(t.bar.container,"active"),cm.addClass(e.bar.container,"active"),"vertical"===o.params.barDirection?(a=e.bar.container.offsetTop-o.nodes["layout-inner"].offsetHeight/2+e.bar.container.offsetHeight/2,r.scroll.scrollY(a)):(n=e.bar.container.offsetLeft-o.nodes["layout-inner"].offsetWidth/2+e.bar.container.offsetWidth/2,r.scroll.scrollX(n))},E=function(){o.paused&&!o.pausedOutside&&(o.paused=!1,t=setTimeout(function(){switch(o.params.direction){case"random":C(cm.rand(0,o.items.length-1));break;case"backward":o.prev();break;case"forward":o.next()}},o.params.delay),o.triggerEvent("onStart"))},w=function(){o.paused||(o.paused=!0,t&&clearTimeout(t),o.triggerEvent("onPause"))},S=function(){o.paused||o.pausedOutside||(w(),E())},k=function(){var e;o.params.slideshow&&o.params.pauseOnScroll&&(e=cm.getRect(o.nodes.container),(cm.inRange(0,cm._pageSize.winHeight,e.top,e.bottom)?E:w)())},_=function(e){var t=e.match(/\d+(\D*)/);return t?t[1]:""};o.enableEditing=function(){return"boolean"==typeof o.isEditing&&o.isEditing||(o.isEditing=!0,cm.addClass(o.params.node,"is-editing is-editable"),o.enableEditMode(),o.triggerEvent("enableEditing"),o.triggerEvent("enableEditable")),o},o.disableEditing=function(){return"boolean"==typeof o.isEditing&&!o.isEditing||(o.isEditing=!1,cm.removeClass(o.params.node,"is-editing is-editable"),o.disableEditMode(),o.triggerEvent("disableEditing"),o.triggerEvent("disableEditable")),o},o.destruct=function(){return this.isDestructed||(this.isDestructed=!0,cm.removeEvent(window,"resize",o.redrawHandler),cm.removeEvent(window,"scroll",o.scrollHandler),o.params.customEvents&&(cm.customEvent.remove(o.params.node,"redraw",o.redrawHandler),cm.customEvent.remove(o.params.node,"enableEditable",o.enableEditingHandler),cm.customEvent.remove(o.params.node,"disableEditable",o.disableEditingHandler),cm.customEvent.remove(o.params.node,"destruct",o.destructHandler)),this.removeFromStack()),this},o.redraw=function(){return animFrame(s),o},o.scroll=function(){return animFrame(i),o},o.set=function(e){return o.items[e]&&C(e),o},o.get=function(e){return o.items[e]?o.items[e]:null},o.next=function(){o.direction="next";var e=o.current+1===o.items.length?0:o.current+1;return C(e),o},o.prev=function(){o.direction="prev";var e=0===o.current?o.items.length-1:o.current-1;return C(e),o},o.pause=function(){return o.pausedOutside=!0,w(),o},o.start=function(){return o.pausedOutside=!1,E(),o},o.enableEditMode=function(){o.pause(),cm.addClass(o.nodes.container,"is-editable"),o.setEffect("edit")},o.disableEditMode=function(){o.start(),cm.removeClass(o.nodes.container,"is-editable"),o.restoreEffect()},o.setEffect=function(e){return cm.removeClass(o.nodes.slides,["effect",o.effect].join("-")),o.nodes.slidesInner.scrollLeft=0,cm.forEach(o.items,function(e){e.nodes.container.style.display="",e.nodes.container.style.opacity="",e.nodes.container.style.left="",e.nodes.container.style.zIndex=""}),o.effect=Com.SliderEffects[e]?e:"fade",cm.addClass(o.nodes.slides,["effect",o.effect].join("-")),o.items[0]&&C(0),a(),o},o.restoreEffect=function(){return o.setEffect(o.params.effect),o},o.redrawHandler=o.redraw.bind(o),o.scrollHandler=o.scroll.bind(o),o.destructHandler=o.destruct.bind(o),o.enableEditingHandler=o.enableEditing.bind(o),o.disableEditingHandler=o.disableEditing.bind(o),c(),o.setParams(e),o.convertEvents(o.params.events),o.getDataNodes(o.params.node),o.getDataConfig(o.params.node),d(),l(),p(),u(),o.setEffect(o.params.effect),o.addToStack(o.params.node),o.params.isEditing&&o.enableEditing(),o.triggerEvent("onRender")}),Com.SliderEffects={},Com.SliderEffects.none=function(e,t,n,a){1<e.itemsLength&&n&&t!==n&&(n.nodes.container.style.display="none",n.nodes.container.style.zIndex=1,t.nodes.container.style.zIndex=2,t.nodes.container.style.display="block"),a()},Com.SliderEffects.edit=function(e,t,n,a){1<e.itemsLength&&n&&t!==n&&(n.nodes.container.style.display="none",n.nodes.container.style.zIndex=1,t.nodes.container.style.zIndex=2,t.nodes.container.style.opacity=1,t.nodes.container.style.display="block",t.nodes.container.style.left=0),a()},Com.SliderEffects.fade=function(e,t,n,a){function o(e){e.nodes.container.style.display="none",cm.setOpacity(e.nodes.container,0)}1<e.itemsLength&&n&&t!==n?(n.nodes.container.style.zIndex=1,e.params.fadePrevious?n.anim.go({style:{opacity:0},duration:e.params.time,anim:e.params.transition,onStop:function(){o(n)}}):setTimeout(function(){o(n)},e.params.time),t.nodes.container.style.zIndex=2,t.nodes.container.style.display="block",t.anim.go({style:{opacity:1},duration:e.params.time,anim:e.params.transition,onStop:a})):a()},Com.SliderEffects["fade-out"]=function(e,t,n,a){1<e.itemsLength&&n&&t!==n?(n.nodes.container.style.zIndex=1,n.anim.go({style:{opacity:0},duration:e.params.time,anim:e.params.transition,onStop:function(){var e;(e=n).nodes.container.style.display="none",cm.setOpacity(e.nodes.container,0)}}),t.nodes.container.style.zIndex=2,t.nodes.container.style.display="block",t.anim.go({style:{opacity:1},duration:e.params.time,anim:e.params.transition,onStop:a})):a()},Com.SliderEffects.push=function(e,t,n,a){var o=t.nodes.container.offsetLeft;e.anim.slidesInner.go({style:{scrollLeft:o},duration:e.params.time,anim:e.params.transition,onStop:a})},Com.SliderEffects.pull=function(e,t,n,a){var o;1<e.itemsLength&&n&&t!==n?(o="next"===e.direction?"-100%":"100%",n.nodes.container.style.zIndex=1,n.anim.go({style:{left:o},duration:e.params.time,anim:e.params.transition,onStop:function(){n.nodes.container.style.display="none",n.nodes.container.style.left="100%"}}),t.nodes.container.style.zIndex=2,t.nodes.container.style.display="block","next"===e.direction?t.nodes.container.style.left="100%":"prev"===e.direction&&(t.nodes.container.style.left="-100%"),t.anim.go({style:{left:"0%"},duration:e.params.time,anim:e.params.transition,onStop:a})):a()},Com.SliderEffects["pull-overlap"]=function(e,t,n,a){1<e.itemsLength&&n&&t!==n?(n.nodes.container.style.zIndex=1,setTimeout(function(){n.nodes.container.style.display="none",n.nodes.container.style.left="100%"},e.params.time),t.nodes.container.style.zIndex=2,t.nodes.container.style.display="block","next"===e.direction?t.nodes.container.style.left="100%":"prev"===e.direction&&(t.nodes.container.style.left="-100%"),t.anim.go({style:{left:"0%"},duration:e.params.time,anim:e.params.transition,onStop:a})):a()},Com.SliderEffects["pull-parallax"]=function(e,t,n,a){var o;1<e.itemsLength&&n&&t!==n?(o="next"===e.direction?"-50%":"50%",n.nodes.container.style.zIndex=1,n.anim.go({style:{left:o},duration:e.params.time,anim:e.params.transition,onStop:function(){n.nodes.container.style.display="none",n.nodes.container.style.left="100%"}}),t.nodes.container.style.zIndex=2,t.nodes.container.style.display="block","next"===e.direction?t.nodes.container.style.left="100%":"prev"===e.direction&&(t.nodes.container.style.left="-100%"),t.anim.go({style:{left:"0%"},duration:e.params.time,anim:e.params.transition,onStop:a})):a()},Com.SliderEffects["pull-parallax-css"]=function(e,t,n,a){var o;1<e.itemsLength&&n&&t!==n?(o="next"===e.direction?"-50%":"50%",n.nodes.container.style.zIndex=1,cm.transition(n.nodes.container,{properties:{transform:"translateX("+o+")"},duration:e.params.time,delayOut:30,onStop:function(){n.nodes.container.style.display="none",cm.setCSSTranslate(n.nodes.container,"100%",0,0)}}),t.nodes.container.style.zIndex=2,t.nodes.container.style.display="block","next"===e.direction?cm.setCSSTranslate(t.nodes.container,"100%",0,0):"prev"===e.direction&&cm.setCSSTranslate(t.nodes.container,"-100%",0,0),cm.transition(t.nodes.container,{properties:{transform:"translateX(0%)"},duration:e.params.time,delayOut:30,onStop:a})):a()},Com.SliderEffects.custom=function(e,t,n,a){e.itemsLength&&t!==n?(n&&(cm.addClass(n.nodes.container,"hide",!0),cm.addClass(n.nodes.container,e.direction,!0)),n&&(cm.addClass(t.nodes.container,"show"),cm.addClass(t.nodes.container,e.direction)),cm.addClass(t.nodes.container,"active",!0),cm.removeClass(t.nodes.container,"show",!0),cm.removeClass(t.nodes.container,e.direction,!0),setTimeout(function(){n&&(cm.removeClass(n.nodes.container,e.direction),cm.removeClass(n.nodes.container,"active hide")),a()},e.params.time)):a()},cm.define("Com.Sortable",{modules:["Params","Events","DataConfig","DataNodes"],events:["onRender","onRemove","onStart","onSort"],params:{node:cm.Node("div"),process:!0,"Com.Draganddrop":{draggableContainer:"selfParent",direction:"vertical",limit:!0,scroll:!1,animateRemove:!1,removeNode:!1}}},function(e){var a=this;a.components={},a.nodes={groups:[]};var t=function(){a.components.dd=new Com.Draganddrop(a.params["Com.Draganddrop"]).addEvent("onDragStart",n).addEvent("onRemove",o).addEvent("onDrop",r),a.params.process&&cm.forEach(a.nodes.groups,s),a.triggerEvent("onRender")},n=function(e,t){a.triggerEvent("onStart",t)},o=function(e,t){a.triggerEvent("onRemove",t)},r=function(e,t){a.triggerEvent("onSort",t)},s=function(t){t.container&&(a.addGroup(t.container),t.items&&cm.forEach(t.items,function(e){i(e,t)}))},i=function(e,t){a.addItem(e.container,t.container),e.groups&&cm.forEach(e.groups,s)};a.addGroup=function(e){return a.components.dd.registerArea(e),a},a.removeGroup=function(e){return a.components.dd.removeArea(e),a},a.addItem=function(e,t){var n=cm.getNodes(e);return n.items[0].drag&&n.items[0].drag.setAttribute("data-com-draganddrop","drag"),a.components.dd.registerDraggable(e,t),a},a.removeItem=function(e){return a.components.dd.removeDraggable(e),a},a.setParams(e),a.convertEvents(a.params.events),a.getDataNodes(a.params.node),a.getDataConfig(a.params.node),t()}),cm.define("Com.Spacer",{modules:["Params","Events","DataConfig","Stack"],required:["Com.Draggable"],events:["onRender","onChange","onResize","enableEditing","disableEditing","enableEditable","disableEditable"],params:{node:cm.Node("div"),name:"",height:0,minHeight:0,isEditing:!0,customEvents:!0,"Com.Draggable":{direction:"vertical"}}},function(e){var n=this;n.isEditing=null,n.components={},n.nodes={},n.value=0;var t=function(){cm.isNode(n.params.node)&&(n.params.name=n.params.node.getAttribute("name")||n.params.name),n.params["Com.Draggable"].minY=n.params.minHeight},a=function(){n.nodes.dragContainer=cm.Node("div",{class:"com__spacer__chassis"},n.nodes.drag=cm.Node("div",{class:"pt__drag is-vertical"},cm.Node("div",{class:"line"}),cm.Node("div",{class:"drag"},cm.Node("div",{class:"icon draggable"})))),n.nodes.rulerContainer=cm.Node("div",{class:"com__spacer__ruler"},n.nodes.ruler=cm.Node("div",{class:"pt__ruler is-vertical is-small"},cm.Node("div",{class:"line line-top"}),n.nodes.rulerCounter=cm.Node("div",{class:"counter"}),cm.Node("div",{class:"line line-bottom"}))),n.params.node.appendChild(n.nodes.dragContainer),n.params.node.appendChild(n.nodes.rulerContainer),cm.addEvent(window,"resize",function(){n.redraw()}),n.params.customEvents&&(cm.customEvent.add(n.params.node,"redraw",function(){n.redraw()}),cm.customEvent.add(n.params.node,"enableEditable",function(){n.enableEditing()}),cm.customEvent.add(n.params.node,"disableEditable",function(){n.disableEditing()}))},o=function(){n.components.draggable=new Com.Draggable(cm.merge(n.params["Com.Draggable"],{node:n.nodes.dragContainer,events:{onStart:r,onSelect:function(e,t){n.value=t.top,s()},onStop:i}}))},r=function(){cm.addClass(document.body,"pt__drag__body--vertical"),cm.addClass(n.params.node,"is-active"),cm.addClass(n.nodes.drag,"is-active"),cm.addClass(n.nodes.ruler,"is-active")},s=function(){n.params.node.style.height=[n.value,"px"].join(""),d(),n.triggerEvent("onChange",{height:n.value})},i=function(){cm.removeClass(document.body,"pt__drag__body--vertical"),cm.removeClass(n.params.node,"is-active"),cm.removeClass(n.nodes.drag,"is-active"),cm.removeClass(n.nodes.ruler,"is-active"),n.triggerEvent("onResize",{height:n.value})},c=function(e,t){n.value=Math.max(e,n.params.minHeight),l(),d(),t&&(n.triggerEvent("onChange",{height:n.value}),n.triggerEvent("onResize",{height:n.value}))},d=function(){n.nodes.rulerCounter.innerHTML=[n.value," px"].join("")},l=function(){n.params.node.style.height=[n.value,"px"].join(""),n.nodes.dragContainer.style.top=[n.params.node.offsetHeight,"px"].join("")};n.enableEditing=function(){return"boolean"==typeof n.isEditing&&n.isEditing||(n.isEditing=!0,cm.addClass(n.params.node,"is-editing is-editable"),n.redraw(),n.triggerEvent("enableEditing"),n.triggerEvent("enableEditable")),n},n.disableEditing=function(){return"boolean"==typeof n.isEditing&&!n.isEditing||(n.isEditing=!1,cm.removeClass(n.params.node,"is-editing is-editable"),n.triggerEvent("disableEditing"),n.triggerEvent("disableEditable")),n},n.redraw=function(){return l(),n},n.set=function(e,t){return t=void 0===t||t,isNaN(e)||c(e,t),n},n.get=function(){return n.value},n.setParams(e),n.convertEvents(n.params.events),n.getDataConfig(n.params.node),t(),a(),o(),c(parseFloat(n.params.height),!1),n.params.isEditing&&n.enableEditing(),n.addToStack(n.params.node),n.triggerEvent("onRender")}),Com.Elements.Tabset={},Com.GetTabset=function(e){return Com.Elements.Tabset[e]||null},cm.define("Com.Tabset",{modules:["Params","Events","DataConfig","DataNodes","Stack","Structure"],events:["onRender","onTabShowStart","onTabShow","onTabHideStart","onTabHide"],params:{node:cm.node("div"),container:null,name:"",embedStructure:"replace",toggleOnHashChange:!0,renderOnInit:!0,removeOnDestruct:!0,customEvents:!0,setInitialTab:!0,setInitialTabImmediately:!0,unsetOnReClick:!1,active:null,className:"",adaptive:!0,tabsAlign:"left",tabsPosition:"top",tabsFlexible:!1,tabsWidth:256,showTabs:!0,showTabsTitle:!0,animateSwitch:!0,calculateMaxHeight:!1,animateDuration:"cm._config.animDuration",tabs:[],icons:{menu:"icon default linked"}}},function(e){var a=this;a.nodes={tabs:[]},a.anim={},a.tabs={},a.tabsListing=[],a.active=!1,a.previous=!1,a.isInitial=null,a.isProcess=!1,a.isDestructed=!1,a.isMenuShown=!1;function t(e){if(e&&a.tabs[e])return a.tabs[e]}var n=function(){a.params.animateDuration=cm.getTransitionDurationFromLESS("ComTabset-Duration",a.params.animateDuration),a.params.tabsWidth=cm.getLESSVariable("ComTabset-Column-Width",a.params.tabsWidth,!0)},o=function(){cm.inArray(["top","right","bottom","left"],a.params.tabsPosition)||(a.params.tabsPosition="top"),cm.inArray(["left","center","right","justify"],a.params.tabsAlign)||(a.params.tabsAlign="left"),cm.isNumber(a.params.tabsWidth)&&(a.params.tabsWidth=[a.params.tabsWidth,"px"].join(""))},r=function(){a.params.toggleOnHashChange&&cm.addEvent(window,"hashchange",C),l()},s=function(){a.nodes.container=cm.Node("div",{class:"com__tabset"},a.nodes.content=cm.Node("div",{class:"com__tabset__content"},a.nodes.contentUL=cm.Node("ul"))),a.nodes.headerTitle=cm.Node("div",{class:"com__tabset__head-title"},a.nodes.headerTitleText=cm.Node("div",{class:"com__tabset__head-text"}),a.nodes.headerMenu=cm.Node("div",{class:"com__tabset__head-menu pt__menu is-manual is-hide"},a.nodes.headerMenuButton=cm.Node("div",{class:a.params.icons.menu}),a.nodes.headerMenuUL=cm.Node("ul",{class:"pt__menu-dropdown"}))),a.nodes.headerTabs=cm.Node("div",{class:"com__tabset__head-tabs"},a.nodes.headerUL=cm.Node("ul")),a.params.adaptive&&cm.addClass(a.nodes.container,"is-adaptive"),a.params.animateSwitch&&cm.addClass(a.nodes.content,"is-animated"),cm.addEvent(a.nodes.headerMenuButton,"click",g),/left|right/.test(a.params.tabsPosition)&&(a.nodes.headerTabs.style.width=a.params.tabsWidth,a.nodes.content.style.width=["calc(100% - ",a.params.tabsWidth,")"].join("")),a.params.showTabs&&(cm.insertBefore(a.nodes.headerTitle,a.nodes.content),/bottom|right/.test(a.params.tabsPosition)?cm.insertAfter(a.nodes.headerTabs,a.nodes.content):cm.insertBefore(a.nodes.headerTabs,a.nodes.content)),a.anim.contentUL=new cm.Animation(a.nodes.contentUL),cm.forEach(a.nodes.tabs,function(e){i(cm.merge({content:e.container},a.getNodeDataConfig(e.container)))}),cm.forEach(a.params.tabs,function(e){i(e)}),cm.addClass(a.nodes.container,["is-tabs",a.params.tabsPosition].join("-")),/top|bottom/.test(a.params.tabsPosition)&&cm.addClass(a.nodes.container,["is-tabs-pull",a.params.tabsAlign].join("-")),a.params.tabsFlexible&&cm.addClass(a.nodes.container,"is-tabs-flexible"),cm.isEmpty(a.params.className)||cm.addClass(a.nodes.container,a.params.className),a.params.node.id&&(a.nodes.container.id=a.params.node.id),a.embedStructure(a.nodes.container),Part.Menu&&Part.Menu(),cm.addEvent(window,"resize",S),cm.addEvent(window,"click",k),a.addToStack(a.nodes.container),a.params.customEvents&&cm.customEvent.add(a.nodes.container,"destruct",a.destruct),a.triggerEvent("onRender")},i=function(e){a.tabs[e.id]&&d(a.tabs[e.id]),e=cm.merge({id:"",title:"",content:cm.Node("li"),image:null,isHide:!0,constructor:!1,constructorParams:{},onShowStart:function(e,t){},onShow:function(e,t){},onHideStart:function(e,t){},onHide:function(e,t){}},e),cm.isEmpty(e.image)||cm.isNode(e.image)||(e.image=cm.strReplace(e.image,{"%baseUrl%":cm._baseUrl})),e.tab=c(e,!0),e.menu=c(e,!1),cm.removeClass(e.content,"active"),a.nodes.headerUL.appendChild(e.tab.container),a.nodes.headerMenuUL.appendChild(e.menu.container),a.nodes.contentUL.appendChild(e.content),a.tabsListing.push(e),a.tabs[e.id]=e},c=function(t,e){var n={};return n.container=cm.Node("li",n.a=cm.Node("a",n.title=cm.node("div",{class:"title"},t.title))),e&&(cm.isNode(t.image)?n.image=t.image:cm.isEmpty(t.image)||(n.image=cm.node("div",{class:"image"},cm.node("img",{src:t.image,alt:""}))),n.image&&cm.insertFirst(n.image,n.a),a.params.showTabsTitle&&n.a.setAttribute("title",t.title)),cm.addEvent(n.a,"click",function(e){e=cm.getEvent(e),cm.preventDefault(e),a.params.unsetOnReClick&&a.active===t.id?a.unset():a.params.toggleOnHashChange?window.location.hash=t.id:m(t.id)}),n},d=function(e){e.id===a.active&&a.tabsListing[0]&&m(a.tabsListing[0]),cm.remove(e.tab.container),cm.remove(e.menu.container),cm.remove(e.content),a.tabsListing=cm.arrayRemove(a.tabsListing,e),delete a.tabs[e.id]},l=function(){var e=a.params.setInitialTab?y():a.params.active;E(e)&&m(e)},m=function(e){var t=a.tabs[e];t&&e!==a.active&&!a.isProcess&&(a.isProcess=!0,p(a.active),a.previous=a.active,a.active=e,cm.isBoolean(a.isInitial)?a.isInitial=!1:a.isInitial=!a.previous&&a.params.setInitialTabImmediately&&a.params.setInitialTab,t.isHide=!1,t.onShowStart(a,t),a.triggerEvent("onTabShowStart",t),t.constructor&&(t.controller?t.controller.refresh&&t.controller.refresh():cm.getConstructor(t.constructor,function(e){t.controller=new e(cm.merge(t.constructorParams,{container:t.content}))})),u(t),v())},u=function(e){e.content.style.display="block",cm.addClass(e.tab.container,"active"),cm.addClass(e.menu.container,"active"),cm.addClass(e.content,"active",!0),a.nodes.headerTitleText.innerHTML=e.title,a.isInitial||!a.params.animateSwitch||a.params.calculateMaxHeight?(a.params.calculateMaxHeight&&w(),a.previous&&(a.tabs[a.previous].content.style.display="none"),h()):b()},p=function(e){var t=a.tabs[e];t&&(t.onHideStart(a,t),a.triggerEvent("onTabHideStart",t),t.isHide=!0,cm.removeClass(t.tab.container,"active"),cm.removeClass(t.menu.container,"active"),cm.removeClass(t.content,"active"),t.onHide(a,t),a.triggerEvent("onTabHide",t))},h=function(){var e=a.tabs[a.active];e?(e.onShow(a,e),a.triggerEvent("onTabShow",e),a.isProcess=!1,cm.customEvent.trigger(e.content,"redraw",{direction:"child",self:!1})):a.isProcess=!1},g=function(){(a.isMenuShown?v:f)()},f=function(){a.isMenuShown=!0,cm.replaceClass(a.nodes.headerMenu,"is-hide","is-show")},v=function(){a.isMenuShown=!1,cm.replaceClass(a.nodes.headerMenu,"is-show","is-hide")},b=function(){var e=0,t=0;a.previous&&(e=cm.getRealHeight(a.tabs[a.previous].content,"offsetRelative")),a.active&&(t=cm.getRealHeight(a.tabs[a.active].content,"offsetRelative")),a.nodes.contentUL.style.overflow="hidden",a.nodes.contentUL.style.height=[e,"px"].join(""),a.anim.contentUL.go({style:{height:[t,"px"].join("")},duration:a.params.animateDuration,anim:"smooth",onStop:function(){a.previous&&(a.tabs[a.previous].content.style.display="none"),a.nodes.contentUL.style.overflow="visible",a.nodes.contentUL.style.height="auto",h()}})},C=function(){var e=window.location.hash.slice(1);E(e)&&m(e)},y=function(){var e;return cm.isEmpty(a.tabsListing)||cm.isEmpty(a.tabs)?null:a.params.toggleOnHashChange&&(e=window.location.hash.slice(1),E(e))?e:(e=a.params.active,E(e)?e:a.tabsListing[0].id)},E=function(e){return!!t(e)},w=function(){var t=0;cm.forEach(a.tabs,function(e){t=Math.max(t,cm.getRealHeight(e.content,"offsetRelative"))}),t!==a.nodes.contentUL.offsetHeight&&(a.nodes.contentUL.style.minHeight=[t,"px"].join(""),cm.forEach(a.tabs,function(e){e.content.style.minHeight=[t,"px"].join("")}))},S=function(){a.params.calculateMaxHeight&&w()},k=function(e){var t=cm.getEventTarget(e);cm.isParent(a.nodes.headerMenu,t,!0)||v()};a.render=function(){return r(),a},a.reset=function(){return l(),a},a.destruct=function(){return a.isDestructed||(a.isDestructed=!0,cm.customEvent.trigger(a.nodes.container,"destruct",{direction:"child",self:!1}),a.params.customEvents&&cm.customEvent.remove(a.nodes.container,"destruct",a.destruct),a.params.removeOnDestruct&&a.remove(),a.removeFromStack()),a},a.set=function(e){return E(e)&&m(e),a},a.setByIndex=function(e){var t;return(t=a.tabsListing[e])&&m(t.id),a},a.unset=function(){return a.previous=a.active,a.active=null,p(a.previous),b(),a.previous=null,a.active=null,a.params.toggleOnHashChange&&(window.location.hash=""),a},a.reset=function(){return l(),a},a.get=t,a.getTabs=function(){return a.tabs},a.getActiveTab=function(){return a.tabs[a.active]},a.addTab=function(e){return e&&e.id&&i(e),a},a.addTabs=function(e){return(cm.isArray(e)||cm.isObject(e))&&cm.forEach(e,a.addTab),a},a.removeTab=function(e){return e&&a.tabs[e]&&d(a.tabs[e]),a},a.setEvents=function(e){return e&&(a.tabs=cm.merge(a.tabs,e)),a},a.remove=function(){return cm.removeEvent(window,"hashchange",C),cm.removeEvent(window,"resize",S),cm.removeEvent(window,"click",k),cm.remove(a.nodes.container),a},a.getNodes=function(e){return a.nodes[e]||a.nodes},n(),a.setParams(e),a.convertEvents(a.params.events),a.getDataNodes(a.params.node,a.params.nodesDataMarker,!1),a.getDataConfig(a.params.node),o(),s(),a.params.renderOnInit&&r()}),cm.define("Com.Tabset2",{extend:"Com.TabsetHelper",params:{controllerEvents:!0,renderStructure:!0,embedStructureOnRender:!0,embedStructure:"replace",renderTabView:!0,removeOnDestruct:!0,toggleOnHashChange:!0,targetEvent:"click",items:[],active:null,setInitialTab:!0,setInitialTabImmediately:!0,tabsAlign:"left",tabsPosition:"top",tabsFlexible:!1,tabsWidth:256,showTabs:!0,showTabsTitle:!0,showContent:!0,switchManually:!1,animateSwitch:!0,animateDuration:300,calculateMaxHeight:!1,showLoader:!0,responseKey:"data",responseHTML:!0,cache:!1,ajax:{type:"json",method:"get",url:"",params:""},adaptive:!0,className:"",icons:{menu:"icon default linked"},overlayConstructor:"Com.Overlay",overlayParams:{position:"absolute",lazy:!0,autoOpen:!1,removeOnClose:!0}}},function(e){Com.TabsetHelper.apply(this,arguments)}),cm.getConstructor("Com.Tabset2",function(e,t,n){var a=n._inherit;n.onGetLESSVariablesProcess=function(){this.params.animateDuration=cm.getTransitionDurationFromLESS("ComTabset-Duration",this.params.animateDuration),this.params.tabsWidth=cm.getLESSVariable("ComTabset-Column-Width",this.params.tabsWidth,!0)},n.onValidateParams=function(){return cm.isNode(this.params.node)&&this.collectTabs(),this},n.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.nodes.container=e.nodes.inner=cm.node("div",{class:"com__tabset"}),e.nodes.content=cm.node("div",{class:"com__tabset__content"},e.nodes.contentUL=cm.node("ul")),e.nodes.headerTitle=cm.node("div",{class:"com__tabset__head-title"},e.nodes.headerTitleText=cm.node("div",{class:"com__tabset__head-text"}),cm.node("div",{class:"com__tabset__head-menu pt__menu"},cm.node("div",{class:e.params.icons.menu}),e.nodes.headerMenuUL=cm.node("ul",{class:"pt__menu-dropdown"}))),e.nodes.headerTabs=cm.node("div",{class:"com__tabset__head-tabs"},e.nodes.headerUL=cm.node("ul")),e.triggerEvent("onRenderViewProcess"),e.params.adaptive&&cm.addClass(e.nodes.container,"is-adaptive"),/left|right/.test(e.params.tabsPosition)&&(e.nodes.headerTabs.style.width=e.params.tabsWidth,e.nodes.content.style.width=["calc(100% - ",e.params.tabsWidth,")"].join("")),cm.addClass(e.nodes.container,["is-tabs",e.params.tabsPosition].join("-")),/top|bottom/.test(e.params.tabsPosition)&&cm.addClass(e.nodes.container,["is-tabs-pull",e.params.tabsAlign].join("-")),e.params.tabsFlexible&&cm.addClass(e.nodes.container,"is-tabs-flexible"),e.params.animateSwitch&&cm.addClass(e.nodes.content,"is-animated"),e.params.showContent&&cm.appendChild(e.nodes.content,e.nodes.inner),e.params.showTabs&&(e.params.showContent?(cm.insertBefore(e.nodes.headerTitle,e.nodes.content),/bottom|right/.test(e.params.tabsPosition)?cm.insertAfter(e.nodes.headerTabs,e.nodes.content):cm.insertBefore(e.nodes.headerTabs,e.nodes.content)):(cm.appendChild(e.nodes.headerTitle,e.nodes.inner),cm.appendChild(e.nodes.headerTabs,e.nodes.inner))),e.triggerEvent("onRenderViewEnd")},n.renderViewModel=function(){a.prototype.renderViewModel.apply(this,arguments)},n.collectTabs=function(){var t=this;cm.forEach(t.nodes.tabs,function(e){cm.isNode(e.container)&&(cm.removeClass(e.content,"active"),t.params.items.push(cm.merge({content:e.container},t.getNodeDataConfig(e.container))))})},n.renderTabView=function(e){e.label=this.renderTabLink(e,"label"),e.menu=this.renderTabLink(e,"menu"),e.tab=this.renderTabContent(e),cm.appendChild(e.label.container,this.nodes.headerUL),cm.appendChild(e.menu.container,this.nodes.headerMenuUL),cm.appendChild(e.tab.container,this.nodes.contentUL)},n.renderTabContent=function(e){var t={};return t.container=cm.Node("li",t.inner=cm.Node("div",e.content)),t},n.renderTabLink=function(e,t){var n={};return n.container=cm.Node("li",n.link=cm.Node("a",n.title=cm.node("div",{class:"title"},e.title))),"label"===t&&(cm.isNode(e.image)?n.image=e.image:cm.isEmpty(e.image)||(n.image=cm.node("div",{class:"image"},cm.node("img",{src:e.image,alt:""}))),n.image&&cm.insertFirst(n.image,n.link),this.params.showTabsTitle&&n.link.setAttribute("title",e.title)),n},n.onTabShowProcess=function(e,t){clearTimeout(t.switchInt),e.nodes.headerTitleText.innerHTML=t.title,t.tab.container.style.display="block"},n.onTabShowEnd=function(e,t){var n=e.previous,a=e.items[n];n&&n!==t&&(e.params.animateSwitch?a.switchInt=setTimeout(function(){a.tab.container.style.display="none"},e.params.animateDuration):a.tab.container.style.display="none")},n.reset=function(){return this.setInitialTab(),this}}),cm.define("Com.Timer",{modules:["Params","Events"],events:["onRender","onStart","onTick","onEnd"],params:{count:0}},function(e){var r=this;r.left=0,r.pass=0,r.isProcess=!1;function s(){var e={};return e.d_total=Math.floor(r.left/1e3/60/60/24),e.h_total=Math.floor(r.left/1e3/60/60),e.m_total=Math.floor(r.left/1e3/60),e.s_total=Math.floor(r.left/1e3),e.d=Math.floor(e.d_total),e.h=Math.floor(e.h_total-24*e.d),e.m=Math.floor(e.m_total-24*e.d*60-60*e.h),e.s=Math.floor(e.s_total-24*e.d*60*60-60*e.h*60-60*e.m),e}var t=function(){r.left=r.params.count,r.start()};r.start=function(){var t,n=s(),a=r.left,o=Date.now();return r.isProcess=!0,r.triggerEvent("onStart",n),function e(){r.isProcess&&(t=Date.now(),r.left=Math.max(a-(t-o),0),r.pass=r.params.count-r.left,n=s(),r.triggerEvent("onTick",n),0===r.left?(r.stop(),r.triggerEvent("onEnd",n)):animFrame(e))}(),r},r.stop=function(){return r.isProcess=!1,r},r.setParams(e),r.convertEvents(r.params.events),t(),r.triggerEvent("onRender")}),cm.define("Com.ToggleBox",{modules:["Params","Events","Langs","Structure","DataConfig","DataNodes","Storage","Stack"],events:["onRender","onShowStart","onShow","onHideStart","onHide"],params:{node:cm.node("div"),name:"",renderStructure:!1,embedStructure:"replace",duration:"cm._config.animDurationLong",remember:!1,toggleTitle:!1,container:!1,title:!1,content:!1,className:"has-title-bg is-base is-hide",eventNode:"title"},strings:{show:"Show",hide:"Hide"}},function(e){var n=this;n.nodes={container:cm.node("div"),button:cm.Node("div"),target:cm.Node("div"),title:cm.Node("div")},n.animations={},n.isCollapsed=!1,n.isProcess=!1;function t(){n.isProcess=!1,n.nodes.target.style.opacity=1,n.nodes.target.style.height="auto",n.nodes.target.style.overflow="visible",cm.customEvent.trigger(n.nodes.target,"redraw",{direction:"child",self:!1}),n.triggerEvent("onShow")}function a(){n.isProcess=!1,n.nodes.target.style.opacity=0,n.nodes.target.style.height=0,n.nodes.target.style.display="none",n.triggerEvent("onHide")}var o=function(){n.params.renderStructure&&(n.params.title||(n.params.title="",n.params.toggleTitle=!0))},r=function(){var e;n.params.renderStructure?(n.nodes.container=cm.Node("dl",{class:"com__togglebox"},n.nodes.titleContainer=cm.Node("dt",n.nodes.button=cm.Node("span",{class:"icon default linked"}),n.nodes.title=cm.Node("span",{class:"title"},n.params.title)),n.nodes.target=cm.Node("dd",n.nodes.content=cm.Node("div",{class:"inner"}))),cm.addClass(n.nodes.container,n.params.className),n.embedStructure(n.nodes.container),n.params.content?n.nodes.content.appendChild(n.params.content):n.nodes.content.appendChild(n.params.node),"button"===n.params.eventNode?(cm.addClass(n.nodes.container,"has-hover-icon"),cm.addEvent(n.nodes.button,"click",n.toggle)):cm.addEvent(n.nodes.titleContainer,"click",n.toggle)):cm.addEvent(n.nodes.button,"click",n.toggle),n.animations.target=new cm.Animation(n.nodes.target),n.isCollapsed=cm.isClass(n.nodes.container,"is-hide")||!cm.isClass(n.nodes.container,"is-show"),n.params.remember&&(e=n.storageRead("isCollapsed"),n.isCollapsed=null!==e?e:n.isCollapsed),n.isCollapsed?n.collapse(!0):n.expand(!0)};n.setTitle=function(e){return cm.clearNode(n.nodes.title),cm.isString(e)||cm.isNumber(e)?n.nodes.title.innerHTML=e:cm.appendNodes(e,n.nodes.title),n},n.setContent=function(e){var t=n.nodes.content||n.nodes.target;return cm.clearNode(t),cm.isString(e)||cm.isNumber(e)?t.innerHTML=e:cm.appendNodes(e,t),n},n.toggle=function(){n.isCollapsed?n.expand():n.collapse()},n.expand=function(e){(e||n.isCollapsed)&&(n.isCollapsed=!1,n.isProcess="show",n.triggerEvent("onShowStart"),n.params.remember&&n.storageWrite("isCollapsed",!1),cm.replaceClass(n.nodes.container,"is-hide","is-show"),n.params.toggleTitle&&(n.nodes.title.innerHTML=n.lang("hide")),e?t():(n.nodes.target.style.height="auto",n.nodes.target.style.display="block",cm.customEvent.trigger(n.nodes.target,"redraw",{direction:"child",self:!1}),n.nodes.target.style.height=0,n.nodes.target.style.overflow="hidden",n.nodes.target.style.opacity||(n.nodes.target.style.opacity=0),n.animations.target.go({style:{height:[cm.getRealHeight(n.nodes.target,"offset","current"),"px"].join(""),opacity:1},anim:"smooth",duration:n.params.duration,onStop:t})))},n.collapse=function(e){!e&&n.isHide||(n.isCollapsed=!0,n.isProcess="hide",n.triggerEvent("onHideStart"),n.params.remember&&n.storageWrite("isCollapsed",!0),cm.replaceClass(n.nodes.container,"is-show","is-hide"),n.params.toggleTitle&&(n.nodes.title.innerHTML=n.lang("show")),n.nodes.target.style.overflow="hidden",n.nodes.target.style.opacity||(n.nodes.target.style.opacity=1),e?a():n.animations.target.go({style:{height:"0px",opacity:0},anim:"smooth",duration:n.params.duration,onStop:a}))},n.setParams(e),n.convertEvents(n.params.events),n.getDataNodes(n.params.node),n.getDataConfig(n.params.node),o(),r(),n.addToStack(n.nodes.container),n.triggerEvent("onRender")}),cm.define("Com.Toolbar",{modules:["Params","Events","Langs","Structure","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onProcessEnd"],params:{node:cm.node("div"),container:null,name:"",embedStructure:"append",adaptive:!0}},function(e){var o=this;o.nodes={},o.groups={};var t=function(){o.nodes.container=cm.node("div",{class:"com__toolbar"},o.nodes.toolbar=cm.node("div",{class:"pt__toolbar"},o.nodes.inner=cm.node("div",{class:"inner"},o.nodes.left=cm.node("div",{class:"left"}),o.nodes.right=cm.node("div",{class:"right"})))),o.params.adaptive&&cm.addClass(o.nodes.toolbar,"is-adaptive"),o.embedStructure(o.nodes.container)};o.clear=function(){return cm.forEach(o.groups,function(e){o.removeGroup(e)}),o.triggerEvent("onProcessEnd"),o},o.addGroup=function(e){return e=cm.merge({container:cm.node("ul",{class:"group"}),node:null,adaptive:!0,flex:!1,name:"",position:"left",items:{}},e),o.groups[e.name]||(e.node||(e.node=e.container),e.adaptive&&cm.addClass(e.container,"is-adaptive"),e.flex&&cm.addClass(e.container,"is-flex"),/left|right/.test(e.position)?cm.appendChild(e.container,o.nodes[e.position]):"justify"===e.position&&cm.appendChild(e.container,o.nodes.inner),o.groups[e.name]=e),o.triggerEvent("onProcessEnd"),o},o.getGroup=function(e){return o.groups[e]},o.removeGroup=function(e){var t=cm.isObject(e)?e:o.groups[e];return t&&(cm.remove(t.container),delete o.groups[t.name]),o.triggerEvent("onProcessEnd"),o},o.addField=function(t){var e;return t=cm.merge({container:cm.node("li"),node:null,name:"",size:null,hidden:!1,group:null,constructor:!1,constructorParams:{}},t),(e=o.groups[t.group])&&!e.items[t.name]&&(t.size&&cm.addClass(t.container,t.size),t.hidden&&cm.addClass(t.container,"is-hidden"),t.constructor&&cm.getConstructor(t.constructor,function(e){t.controller=new e(cm.merge(t.constructorParams,{container:t.container}))}),cm.isNode(t.node)&&cm.appendChild(t.node,t.container),cm.appendChild(t.container,e.node),e.items[t.name]=t),o.triggerEvent("onProcessEnd"),o},o.showField=function(e,t){var n=o.getField(e,t);n&&(n.hidden=!1,cm.removeClass(n.container,"is-hidden"))},o.hideField=function(e,t){var n=o.getField(e,t);n&&(n.hidden=!0,cm.addClass(n.container,"is-hidden"))},o.addButton=function(t){var e;return t=cm.merge({container:cm.node("li"),node:null,type:"primary",name:"",label:"",title:"",group:"",disabled:!1,hidden:!1,className:"",attr:{},preventDefault:!0,constructor:!1,constructorParams:{},callback:function(){}},t),cm.isEmpty(t.name)&&(t.name=t.label),(e=o.groups[t.group])&&!e.items[t.name]&&(t.node=cm.node("a",t.attr),cm.addClass(t.node,"button"),cm.addClass(t.node,["button",t.type].join("-")),cm.addClass(t.node,t.className),t.disabled&&cm.addClass(t.node,"button-disabled"),t.hidden&&cm.addClass(t.container,"is-hidden"),t.node.innerHTML=t.label,t.node.title=t.title,t.constructor?cm.getConstructor(t.constructor,function(e){t.controller=new e(cm.merge(t.constructorParams,{node:t.node}))}):cm.addEvent(t.node,"click",function(e){t.preventDefault&&cm.preventDefault(e),t.disabled||t.callback(e,t)}),cm.appendChild(t.node,t.container),cm.appendChild(t.container,e.node),e.items[t.name]=t),o.triggerEvent("onProcessEnd"),o},o.enableButton=function(e,t){var n=o.getButton(e,t);n&&(n.disabled=!1,cm.removeClass(n.node,"button-disabled"))},o.disableButton=function(e,t){var n=o.getButton(e,t);n&&(n.disabled=!0,cm.addClass(n.node,"button-disabled"))},o.showButton=function(e,t){var n=o.getButton(e,t);n&&(n.hidden=!1,cm.removeClass(n.container,"is-hidden"))},o.hideButton=function(e,t){var n=o.getButton(e,t);n&&(n.hidden=!0,cm.addClass(n.container,"is-hidden"))},o.addLabel=function(e){var t;return e=cm.merge({container:cm.node("li",{class:"label"}),node:null,name:"",label:"",size:null,hidden:!1,group:null},e),(t=o.groups[e.group])&&!t.items[e.name]&&(e.node=cm.node("div",{innerHTML:e.label}),e.size&&cm.addClass(e.container,e.size),e.hidden&&cm.addClass(e.container,"is-hidden"),cm.isNode(e.node)&&cm.appendChild(e.node,e.container),cm.appendChild(e.container,t.node),t.items[e.name]=e),o.triggerEvent("onProcessEnd"),o},o.getField=o.getButton=o.getLabel=function(e,t){var n,a;return(a=o.groups[t])&&(n=a.items[e])?n:null},o.removeField=o.removeButton=o.removeLabel=function(e,t){var n,a;return cm.isObject(e)?(n=e,a=o.groups[n.group]):(a=o.groups[t])&&(n=a.items[e]),n&&(cm.remove(n.container),delete a.items[n.name]),o.triggerEvent("onProcessEnd"),o},o.getNodes=function(e){return o.nodes[e]||o.nodes},o.setParams(e),o.convertEvents(o.params.events),o.getDataNodes(o.params.node),o.getDataConfig(o.params.node),o.addToStack(o.params.node),o.triggerEvent("onRenderStart"),t(),o.addToStack(o.nodes.container),o.triggerEvent("onRender")}),cm.define("Com.Tooltip",{modules:["Params","Events","Langs","Stack"],events:["onRender","onShowStart","onShow","onShowEnd","onHideStart","onHide","onHideEnd"],params:{customEvents:!0,name:"",target:cm.node("div"),targetEvent:"hover",hideOnReClick:!1,hideOnSelfClick:!1,hideOnOut:!0,autoHide:!1,autoHideDelay:"cm._config.autoHideDelay",hold:!1,holdTarget:!1,preventClickEvent:!1,positionTarget:!1,top:0,left:0,width:"auto",height:"auto",minWidth:0,adaptiveFrom:null,adaptiveTop:null,adaptiveLeft:null,adaptiveWidth:null,adaptiveHeight:null,scroll:"auto",duration:"cm._config.animDurationShort",delay:0,resizeInterval:5,disabled:!1,position:"absolute",className:"",theme:"theme-default",animate:!1,arrow:!1,adaptive:!0,adaptiveX:!0,adaptiveY:!0,title:"",titleTag:"h3",content:cm.node("div"),container:"document.body"}},function(params){var that=this;that.nodes={},that.animation=null,that.delayInterval=null,that.resizeInterval=null,that.autoHideInterval=null,that.isDestructed=!1,that.isHideProcess=!1,that.isShowProcess=!1,that.isShow=!1,that.isWindowEvent=!1,that.disabled=!1;var init=function(){that.windowEventHandler=windowEvent.bind(that),that.targetEventHandler=targetEvent.bind(that),that.destructHandler=that.destruct.bind(that),that.setParams(params),that.convertEvents(that.params.events),validateParams(),render(),that.addToStack(that.nodes.container),setMiscEvents(),that.triggerEvent("onRender")},validateParams=function(){that.params.adaptive||(that.params.adaptiveX=!1,that.params.adaptiveY=!1),that.params.position=cm.inArray(["absolute","fixed"],that.params.position)?that.params.position:"absolute"},render=function(){that.nodes.container=cm.Node("div",{class:"com__tooltip"},that.nodes.inner=cm.Node("div",{class:"inner"},that.nodes.content=cm.Node("div",{class:"scroll"}))),cm.isString(that.params.scroll)&&cm.addClass(that.nodes.content,["is",that.params.scroll].join("-")),that.nodes.container.style.position=that.params.position,cm.isEmpty(that.params.theme)||cm.addClass(that.nodes.container,that.params.theme),cm.isEmpty(that.params.animate)||cm.addClass(that.nodes.container,["animate",that.params.animate].join("--")),cm.isEmpty(that.params.arrow)||cm.addClass(that.nodes.container,["arrow",that.params.arrow].join("--")),cm.isEmpty(that.params.className)||cm.addClass(that.nodes.container,that.params.className),renderTitle(that.params.title),renderContent(that.params.content),that.params.disabled?that.disable():that.enable()},renderTitle=function(e){cm.remove(that.nodes.title),cm.isEmpty(e)||(that.nodes.title=cm.Node("div",{class:"title"},cm.Node(that.params.titleTag,e)),cm.insertFirst(that.nodes.title,that.nodes.inner))},renderContent=function(e){cm.clearNode(that.nodes.content),e&&that.nodes.content.appendChild(e)},setMiscEvents=function(){that.animation=new cm.Animation(that.nodes.container),that.params.preventClickEvent&&cm.addEvent(that.params.target,"click",function(e){cm.preventDefault(e)}),that.params.hideOnSelfClick&&cm.addEvent(that.nodes.container,"click",function(){that.hide()}),that.params.customEvents&&cm.customEvent.add(that.getStackNode(),"destruct",that.destructHandler),setTargetEvent()},targetEvent=function(){that.disabled||(that.isShow&&"click"===that.params.targetEvent&&that.params.hideOnReClick?hide:show)()},setTargetEvent=function(){var e;switch(that.params.hold&&(e=that.params.holdTarget||that.params.target,cm.appendChild(that.nodes.container,e)),that.params.targetEvent){case"hover":cm.addEvent(that.params.target,"mouseover",that.targetEventHandler,!0);break;case"click":cm.addEvent(that.params.target,"click",that.targetEventHandler,!0)}},removeTargetEvent=function(){switch(that.params.targetEvent){case"hover":cm.removeEvent(that.params.target,"mouseover",that.targetEventHandler);break;case"click":cm.removeEvent(that.params.target,"click",that.targetEventHandler)}},show=function(e){(that.isShow||that.isShowProcess)&&!that.isHideProcess||(that.isShowProcess=!0,setWindowEvent(),clearDelayInterval(),clearAutoHideInterval(),e?showHandler(e):that.params.delay&&!that.isHideProcess?that.delayInterval=setTimeout(showHandler,that.params.delay):showHandler())},showHandler=function(e){that.params.container.appendChild(that.nodes.container),that.nodes.container.style.display="block",resizeHelper(),that.triggerEvent("onShowStart"),cm.replaceClass(that.nodes.container,"id-hide","is-show",!0),e||!that.params.duration?showHandlerEnd():(that.animation.stop(),that.animation.go({style:{opacity:1},duration:that.params.duration,anim:"smooth",onStop:showHandlerEnd}))},showHandlerEnd=function(){that.nodes.container.style.opacity=1,that.isShow=!0,that.isShowProcess=!1,that.isHideProcess=!1,autoHideHandler(),that.triggerEvent("onShow"),that.triggerEvent("onShowEnd")},hide=function(e){!that.isShow&&!that.isShowProcess||that.isHideProcess||(that.isHideProcess=!0,clearDelayInterval(),clearAutoHideInterval(),e?hideHandler(e):that.params.delay&&!that.isShowProcess?that.delayInterval=setTimeout(hideHandler,that.params.delay):hideHandler(!1))},hideHandler=function(e){that.triggerEvent("onHideStart"),cm.replaceClass(that.nodes.container,"is-show","id-hide",!0),e||!that.params.duration?hideHandlerEnd():that.animation.go({style:{opacity:0},duration:that.params.duration,anim:"smooth",onStop:hideHandlerEnd})},hideHandlerEnd=function(){var e;clearResizeInterval(),removeWindowEvent(),that.nodes.container.style.display="none",that.params.hold?(e=that.params.holdTarget||that.params.target,cm.appendChild(that.nodes.container,e)):cm.remove(that.nodes.container),that.isShow=!1,that.isShowProcess=!1,that.isHideProcess=!1,that.triggerEvent("onHide"),that.triggerEvent("onHideEnd")},autoHideHandler=function(){that.params.autoHide&&(clearAutoHideInterval(),that.autoHideInterval=setTimeout(hide,that.params.autoHideDelay))},resizeHelper=function(){resize(),clearResizeInterval(),that.resizeInterval=setTimeout(resizeHelper,that.params.resizeInterval)},resize=function(){var target=that.params.positionTarget||that.params.target,targetWidth=target.offsetWidth,targetHeight=target.offsetHeight,selfHeight=that.nodes.container.offsetHeight,selfWidth=that.nodes.container.offsetWidth,pageSize=cm.getPageSize(),screenWidth=pageSize.winWidth,screenHeight=pageSize.winHeight,scrollTop=cm.getScrollTop(window),scrollLeft=cm.getScrollLeft(window),paramsTop=that.params.top,paramsLeft=that.params.left,paramsWidth=that.params.width,paramsHeight=that.params.height;!cm.isEmpty(that.params.adaptiveFrom)&&that.params.adaptiveFrom>=screenWidth&&(paramsTop=cm.isEmpty(that.params.adaptiveTop)?paramsTop:that.params.adaptiveTop,paramsLeft=cm.isEmpty(that.params.adaptiveLeft)?paramsLeft:that.params.adaptiveLeft,paramsWidth=cm.isEmpty(that.params.adaptiveWidth)?paramsWidth:that.params.adaptiveWidth,paramsHeight=cm.isEmpty(that.params.adaptiveHeight)?paramsHeight:that.params.adaptiveHeight),function(){var width=0,height=0,minWidth=0;"auto"!==that.params.minWidth&&(minWidth=eval(that.params.minWidth.toString().replace("targetWidth",targetWidth).replace("screenWidth",screenWidth).replace("selfWidth",selfWidth)),minWidth=Math.min(screenWidth,minWidth),that.nodes.container.style.minWidth=[minWidth,"px"].join("")),"auto"!==paramsWidth&&(width=eval(paramsWidth.toString().replace("targetWidth",targetWidth).replace("screenWidth",screenWidth).replace("selfWidth",selfWidth)),width=Math.max(minWidth,width),width=Math.min(screenWidth,width),width!==selfWidth&&(that.nodes.container.style.width=[width,"px"].join(""))),"auto"!==paramsHeight&&(height=eval(paramsHeight.toString().replace("targetHeight",targetHeight).replace("screenHeight",screenHeight).replace("selfHeight",selfHeight)),height=Math.min(screenHeight,height),that.nodes.content.style.maxHeight=[height,"px"].join("")),selfWidth=that.nodes.container.offsetWidth,selfHeight=that.nodes.container.offsetHeight}(),function(){var top=cm.getRealY(target),topAdd=eval(paramsTop.toString().replace("targetHeight",targetHeight).replace("screenHeight",screenHeight).replace("selfHeight",selfHeight)),left=cm.getRealX(target),leftAdd=eval(paramsLeft.toString().replace("targetWidth",targetWidth).replace("screenWidth",screenWidth).replace("selfWidth",selfWidth)),positionTop,positionLeft,positionTop=that.params.adaptiveY?Math.max(Math.min(screenHeight<top+topAdd+selfHeight?top-topAdd-selfHeight+targetHeight:top+topAdd,screenHeight-selfHeight),0):top+topAdd,positionLeft=that.params.adaptiveX?Math.max(Math.min(screenWidth<left+leftAdd+selfWidth?left-leftAdd-selfWidth+targetWidth:left+leftAdd,screenWidth-selfWidth),0):left+leftAdd;"absolute"===that.params.position&&(that.params.container===document.body?(positionTop+=scrollTop,positionLeft+=scrollLeft):(positionTop-=cm.getRealY(that.params.container),positionLeft-=cm.getRealX(that.params.container))),positionTop=Math.round(positionTop),positionLeft=Math.round(positionLeft),positionTop!==that.nodes.container.offsetTop&&(that.nodes.container.style.top=[positionTop,"px"].join("")),positionLeft!==that.nodes.container.offsetLeft&&(that.nodes.container.style.left=[positionLeft,"px"].join(""))}()},setWindowEvent=function(){if(that.params.hideOnOut&&!that.isWindowEvent)switch(that.isWindowEvent=!0,that.params.targetEvent){case"hover":cm.addEvent(window,"mousemove",that.windowEventHandler);break;case"click":default:cm.addEvent(window,"mousedown",that.windowEventHandler)}},removeWindowEvent=function(){if(that.params.hideOnOut&&that.isWindowEvent)switch(that.isWindowEvent=!1,that.params.targetEvent){case"hover":cm.removeEvent(window,"mousemove",that.windowEventHandler);break;case"click":default:cm.removeEvent(window,"mousedown",that.windowEventHandler)}},windowEvent=function(e){var t=cm.getEventTarget(e);cm.isParent(that.nodes.container,t,!0)||cm.isParent(that.params.target,t,!0)?show(!0):hide(!1)},clearResizeInterval=function(){that.resizeInterval&&clearTimeout(that.resizeInterval),that.resizeInterval=null},clearDelayInterval=function(){that.delayInterval&&clearTimeout(that.delayInterval),that.delayInterval=null},clearAutoHideInterval=function(){that.autoHideInterval&&clearTimeout(that.autoHideInterval),that.autoHideInterval=null};that.setTitle=function(e){return renderTitle(e),that},that.setContent=function(e){return renderContent(e),that},that.setTarget=function(e){return removeTargetEvent(),that.params.target=e||cm.node("div"),setTargetEvent(),that},that.setContainer=function(e){return cm.isNode(e)&&(that.params.container=e),that},that.show=function(e){return show(e),that},that.hide=function(e){return hide(e),that},that.disable=function(){return that.disabled=!0,that},that.enable=function(){return that.disabled=!1,that},that.scrollToNode=function(e){return cm.isNode(e)&&cm.isParent(that.nodes.content,e)&&(that.nodes.content.scrollTop=e.offsetTop-that.nodes.content.offsetTop),that},that.isOwnNode=function(e){return cm.isParent(that.nodes.container,e,!0)},that.remove=function(){return hide(!0),removeTargetEvent(),that},that.destruct=function(){return that.isDestructed||(that.isDestructed=!0,cm.customEvent.trigger(that.getStackNode(),"destruct",{direction:"child",self:!1}),cm.customEvent.remove(that.getStackNode(),"destruct",that.destructHandler),that.removeFromStack(),that.remove()),that},that.getNodes=function(e){return that.nodes[e]||that.nodes},init()}),Com.UA={hash:{ie:"MSIE",edge:"Edge",opera:"Opera",ff:"Firefox",firefox:"Firefox",webkit:"AppleWebKit",safari:"Safari",chrome:"Chrome",steam:"Steam"},fullname:{Edge:"Microsoft Edge",MSIE:"Microsoft Internet Explorer",Firefox:"Mozilla Firefox",Chrome:"Google Chrome",Safari:"Apple Safari",Opera:"Opera","Opera Mini":"Opera Mini","Opera Mobile":"Opera Mobile","IE Mobile":"Internet Explorer Mobile",Steam:"Valve Steam Game Overlay"},os:{Windows:{"NT 5.0":"2000","NT 5.1":"XP","NT 5.2":"Server 2003","NT 6.0":"Vista","NT 6.1":"7","NT 6.2":"8","NT 6.3":"8.1","NT 10.0":"10"},"Mac OSX":{"10.0":"Cheetah",10.1:"Puma",10.2:"Jaguar",10.3:"Panther",10.4:"Tiger",10.5:"Leopard",10.6:"Snow Leopard",10.7:"Lion",10.8:"Mountain Lion",10.9:"Mavericks","10.10":"Yosemite",10.11:"El Capitan"}},str:navigator.userAgent,get:function(e){var t,n,a={};return-1<(e=e||this.str).indexOf("IEMobile")?(a.browser="IE Mobile",a.hash="ie-mobile",a.engine="Trident",a.type="mobile",a.full_version=e.replace(/^(?:.+)(?:IEMobile)(?:[\s\/]{0,})([0-9\.]{1,})(?:.+)$/,"$1"),t=a.full_version.toString().split("."),a.version=t[0]+(t[1]?"."+t[1].slice(0,1):""),a.short_version=t[0]):-1<e.indexOf("MSIE")||-1<e.indexOf("Trident")?(a.browser="MSIE",a.hash="ie",a.engine="Trident",-1<e.indexOf("MSIE")?a.full_version=e.replace(/^(?:.+)(?:MSIE)(?:[\s\/]{0,})([0-9\.]{1,})(?:.+)$/,"$1"):a.full_version=e.replace(/^(?:.+)(?:rv:)(?:[\s\/]{0,})([0-9\.]{1,})(?:.+)$/,"$1"),t=a.full_version.toString().split("."),a.version=t[0]+(t[1]?"."+t[1].slice(0,1):""),a.short_version=t[0]):-1<e.indexOf("Opera Mobi")?(a.browser="Opera Mobile",a.hash="opera-mobile",a.engine="Presto",a.type="mobile",a.version=a.full_version=-1<e.indexOf("Version")?e.replace(/^(?:.+)(?:Version\/)([0-9\.]{1,})$/,"$1"):"",a.short_version=a.version.split(".")[0]):-1<e.indexOf("Opera Mini")?(a.browser="Opera Mini",a.hash="opera-mini",a.engine="Presto",a.type="mobile",a.full_version=e.replace(/^(?:.+)(?:Opera Mini\/)([0-9\.]{0,})(?:.+)$/,"$1"),t=a.full_version.toString().split("."),a.version=t[0]+(t[1]?"."+t[1].slice(0,1):""),a.short_version=t[0]):-1<e.indexOf("Opera")?(a.browser="Opera",a.hash="opera",a.engine="Presto",a.version=a.full_version=-1<e.indexOf("Version")?e.replace(/^(?:.+)(?:Version\/)([0-9\.]{0,})(?:.{0,})$/,"$1"):e.replace(/^(?:Opera\/)([0-9\.]{1,})\s(?:.+)$/,"$1"),a.short_version=a.version.split(".")[0]):-1<e.indexOf("OPR")?(a.browser="Opera",a.hash="opera",a.engine="Blink",a.full_version=e.replace(/^(?:.+)(?:OPR\/)([0-9\.]{1,})(?:.+)$/,"$1"),t=a.full_version.toString().split("."),a.version=t[0]+(t[1]?"."+t[1]:""),a.short_version=t[0]):-1<e.indexOf("Fennec")?(a.browser="Fennec",a.hash="fennec",a.engine="Gecko",a.type="mobile",a.full_version=e.replace(/^(?:.+)(?:Fennec)(?:[\/]{0,})([0-9\.]{0,})(?:.{0,})$/,"$1"),t=a.full_version.toString().split("."),a.version=t[0]+(t[1]?"."+t[1]:""),a.short_version=t[0]):-1<e.indexOf("Firefox")?(a.browser="Firefox",a.hash="firefox",a.engine="Gecko",a.full_version=e.replace(/^(?:.+)(?:Firefox)(?:[\/]{0,})([0-9\.]{0,})(?:.{0,})$/,"$1"),t=a.full_version.toString().split("."),a.version=t[0]+(t[1]?"."+t[1]:""),a.short_version=t[0]):-1<e.indexOf("Edge")?(a.browser="Edge",a.hash="edge",a.engine="EdgeHTML",a.full_version=e.replace(/^(?:.+)(?:Edge)(?:[\/]{0,})([0-9\.]{0,})(?:.{0,})$/,"$1"),t=a.full_version.toString().split("."),a.version=t[0]+(t[1]?"."+t[1]:""),a.short_version=t[0]):-1<e.indexOf("Valve Steam GameOverlay")?(a.browser="Steam",a.hash="steam",a.engine="AppleWebKit",a.full_version=e.replace(/^(?:.+)(?:Chrome\/)([0-9\.]{1,})(?:.+)$/,"$1"),t=a.full_version.toString().split("."),a.version=t[0]+(t[1]?"."+t[1]:""),a.short_version=t[0]):-1<e.indexOf("Chrome")?(a.browser="Chrome",a.hash="chrome",a.engine="Blink",a.full_version=e.replace(/^(?:.+)(?:Chrome\/)([0-9\.]{1,})(?:.+)$/,"$1"),t=a.full_version.toString().split("."),a.version=t[0]+(t[1]?"."+t[1]:""),a.short_version=t[0]):-1<e.indexOf("Safari")?(a.browser="Safari",a.hash="safari",a.engine="AppleWebKit",a.full_version=-1<e.indexOf("Version")?e.replace(/^(?:.+)(?:Version\/)([0-9\.]{1,})(?:.+)$/,"$1"):"2",t=a.full_version.toString().split("."),a.version=t[0]+(t[1]?"."+t[1]:""),a.short_version=t[0]):a.version=a.browser="unknown",a.full_name=this.fullname[a.browser]?this.fullname[a.browser]:"unknown",a.browser_name=a.full_name+(0<a.version.length&&"unknown"!=a.version?" "+a.version:""),a.engine||(-1<e.indexOf("AppleWebKit")?a.engine="AppleWebKit":-1<e.indexOf("Trident")?a.engine="Trident":-1<e.indexOf("Gecko")?a.engine="Gecko":a.engine="unknown"),-1<e.indexOf("Windows Phone")?(a.os="Windows Phone",a.os_type="mobile",a.os_version=e.replace(/^(?:.+)(?:Windows Phone)(?:[\s]{0,1})([a-zA-Z\s0-9\.]{0,})(?:.+)$/,"$1")):-1<e.indexOf("Windows Phone OS")?(a.os="Windows Phone OS",a.os_type="mobile",a.os_version=e.replace(/^(?:.+)(?:Windows Phone OS)(?:[\s]{0,1})([a-zA-Z\s0-9\.]{0,})(?:.+)$/,"$1")):-1<e.indexOf("Windows CE")?(a.os="Windows Mobile",a.os_type="mobile",a.os_version=""):-1<e.indexOf("Windows")?(a.os="Windows",a.os_version=e.replace(/^(?:.+)(?:Windows)(?:[\s]{0,1})([a-zA-Z\s0-9\.]{0,})(?:.+)$/,"$1")):-1<e.indexOf("Android")?(a.os="Android",a.os_type="mobile",a.os_version=e.replace(/^(?:.+)(?:Android)(?:[\s]{0,})([0-9\.]{0,})(?:.+)$/,"$1")):-1<e.indexOf("Linux")?(a.os="Linux",a.os_version=e.replace(/^(?:.+)(?:Linux)(?:[\s]{0,1})([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1")):-1<e.indexOf("iPhone")?(a.os="iPhone",a.os_type="mobile",a.os_version=e.replace(/^(?:.+)(?:CPU[ iPhone]{0,} OS )([a-zA-Z0-9\._]{0,})(?:.+)$/,"$1").replace(/_/gi,".")):-1<e.indexOf("iPad")?(a.os="iPad",a.os_type="mobile",a.os_version=e.replace(/^(?:.+)(?:CPU[ iPhone]{0,} OS )([a-zA-Z0-9\._]{0,})(?:.+)$/,"$1").replace(/_/gi,".")):-1<e.indexOf("Macintosh")?-1<e.indexOf("Mac OS X")?(a.os="Mac OSX",a.os_version=e.replace(/^(?:.+)(?:Mac OS X)(?:[\s]{0,1})([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1").replace(/_/gi,".")):(a.os="Mac OS",a.os_version="Classic"):-1<e.indexOf("BlackBerry")?(a.os="BlackBerry",a.os_type="mobile",a.os_version=e.replace(/^(?:.{0,})(?:BlackBerry)(?:[\s]{0,})([0-9\.]{0,})(?:.+)$/,"$1")):-1<e.indexOf("FreeBSD")?(a.os="FreeBSD",a.os_version=e.replace(/^(?:.+)(?:FreeBSD )([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1")):-1<e.indexOf("NetBSD")?(a.os="NetBSD",a.os_version=e.replace(/^(?:.+)(?:NetBSD )([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1")):-1<e.indexOf("OpenBSD")?(a.os="OpenBSD",a.os_version=e.replace(/^(?:.+)(?:OpenBSD )([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1")):-1<e.indexOf("SunOS")?(a.os="SunOS",a.os_version=e.replace(/^(?:.+)(?:SunOS )([a-zA-Z0-9\.\s_]{0,})(?:.+)$/,"$1")):a.os=a.os_version="unknown",a.os_name||("unknown"!=a.os?(n=this.os[a.os],a.os_name=a.os+(0<a.os_version.length&&"unknown"!=a.os_version?" "+(n&&n[a.os_version]?n[a.os_version]:a.os_version):"")):a.os_name="unknown"),a},setBrowserClass:function(){var e=Com.UA.get();e.hash&&cm.addClass(document.getElementsByTagName("html")[0],[e.engine.toLowerCase(),e.hash,e.hash+e.short_version].join(" "))},setEngineClass:function(){var e=Com.UA.get();cm.addClass(document.getElementsByTagName("html")[0],e.engine.toLowerCase())},is:function(e){var t=e.replace(/[^0-9\.\,]/g,""),n=this.hash[e.replace(/[0-9\.\,\s]/g,"").toLowerCase()],a=this.get();return!(n!=a.browser||t&&0<t.length&&parseFloat(t)!=parseFloat(a.version))},isVersion:function(){var e=this.get();return parseFloat(e.version)},isMobile:function(){return"mobile"==this.get().os_type}};var is=function(e){return cm.log('Warning. Method "is()" is deprecated. Please use "Com.UA.is()"'),Com.UA.is(e)},isVersion=function(){return cm.log('Warning. Method "isVersion()" is deprecated. Please use "Com.UA.isVersion()"'),Com.UA.isVersion()};cm.define("Com.Zoom",{modules:["Params","Events","DataConfig","Stack"],events:["onRender","onOpenStart","onOpen","onClose","onCloseStart"],params:{node:cm.Node("div"),container:"document.body",name:"",src:"",duration:"cm._config.animDuration",autoOpen:!0,removeOnClose:!0,documentScroll:!1}},function(e){var t,n,a,o,r=this;r.isOpen=!1,r.isLoad=!1,r.nodes={};function s(e){27==(e=cm.getEvent(e)).keyCode&&r.close()}function i(){l(),m()}function c(){m()}var d=function(){r.nodes.container=cm.node("div",{class:"com__zoom"},r.nodes.inner=cm.node("div",{class:"inner"})),cm.addEvent(r.nodes.container,"click",r.close)},l=function(){t=cm.getRect(r.nodes.image),n=cm.getRect(r.nodes.inner),a=(t.width-n.width)/n.width,o=(t.height-n.height)/n.height},m=function(){var e,t;r.isLoad&&(e=-cm._clientPosition.left*a,t=-cm._clientPosition.top*o,cm.setCSSTranslate(r.nodes.image,[e,"px"].join(""),[t,"px"].join("")))};r.set=function(e){return r.isLoad=!1,r.params.src=e,r},r.open=function(){return r.isOpen||(r.isOpen=!0,cm.addEvent(window,"mousemove",c),cm.addEvent(window,"resize",i),cm.addEvent(window,"keydown",s),r.params.documentScroll||cm.addClass(cm.getDocumentHtml(),"cm__scroll--none"),r.nodes.container.style.display="block",cm.inDOM(r.nodes.container)||r.params.container.appendChild(r.nodes.container),r.nodes.image=cm.node("img"),cm.addEvent(r.nodes.image,"load",function(){r.isLoad=!0,l(),m()}),r.nodes.image.src=r.params.src,r.nodes.inner.appendChild(r.nodes.image),cm.transition(r.nodes.container,{properties:{opacity:1},duration:r.params.duration,easing:"ease-in-out",onStop:function(){r.triggerEvent("onOpen")}}),r.triggerEvent("onOpenStart")),r},r.close=function(){return r.isOpen&&(r.isOpen=!1,cm.removeEvent(window,"mousemove",c),cm.removeEvent(window,"resize",i),cm.removeEvent(window,"keydown",s),r.params.documentScroll||cm.removeClass(cm.getDocumentHtml(),"cm__scroll--none"),cm.transition(r.nodes.container,{properties:{opacity:0},duration:r.params.duration,easing:"ease-in-out",onStop:function(){r.nodes.container.style.display="none",r.params.removeOnClose&&cm.remove(r.nodes.container),cm.remove(r.nodes.image),r.triggerEvent("onClose")}}),r.triggerEvent("onCloseStart")),r},r.setParams(e),r.convertEvents(r.params.events),r.getDataConfig(r.params.node),d(),r.addToStack(r.nodes.container),r.triggerEvent("onRender"),r.params.autoOpen&&r.open()}),cm.define("Com.MultipleInput",{extend:"Com.AbstractController",events:["onSet","onSelect","onChange","onClear","onDisable","onEnable","onItemAddStart","onItemAddProcess","onItemAddEnd","onItemAdd","onItemRemoveStart","onItemRemoveProcess","onItemRemoveEnd","onItemRemove","onItemSortStart","onItemSortProcess","onItemSortEnd"],params:{embedStructure:"replace",className:"com__multiple-input",value:[],defaultValue:[],max:0,sortable:!1,showControls:!0,showToolbar:!1,showList:!0,focusInput:!1,duration:"cm._config.animDurationShort",inputConstructor:"Com.AbstractInput",inputParams:{},multiFieldConstructor:"Com.MultiField",multiFieldParams:{embedStructure:"first",renderStructure:!0,embedStructureOnRender:!0,template:!1,templateAttributeReplace:!1}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.MultipleInput",function(e,t,n,a){n.construct=function(e){var t=this;t.nodes={},t.components={},t.items=[],t.isToolbarVisible=!0,t.setHandler=t.set.bind(t),t.getHandler=t.get.bind(t),t.clearHandler=t.clear.bind(t),t.enableHandler=t.enable.bind(t),t.disableHandler=t.disable.bind(t),t.addItemHandler=t.addItem.bind(t),t.removeItemHandler=t.removeItem.bind(t),t.constructProcessHandler=t.constructProcess.bind(t),t.addEvent("onConstructProcess",t.constructProcessHandler),a.prototype.construct.apply(t,arguments)},n.constructProcess=function(){var t=this;cm.forEach(t.nodes.inputs,function(e){t.addItem({input:e.input},!1,!0)}),cm.isArray(t.params.value)&&cm.forEach(t.params.value,function(e){t.addItem({value:e},!1,!0)})},n.validateParams=function(){a.prototype.validateParams.apply(this,arguments),this.params.multiFieldParams.max=this.params.max,this.params.multiFieldParams.sortable=this.params.sortable,this.params.multiFieldParams.showControls=this.params.showControls,this.params.multiFieldParams.showList=this.params.showList},n.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__multiple-input"},e.nodes.inner=cm.node("div",{class:"inner"},e.nodes.holder=cm.node("div",{class:"com__multiple-input__holder"}))),e.params.showToolbar&&(e.nodes.toolbarContainer=e.renderToolbarView(),cm.appendChild(e.nodes.toolbarContainer,e.nodes.holder)),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd")},n.renderToolbarView=function(){var e={};return e.container=cm.node("div",{class:"com__multiple-input__toolbar"}),(this.nodes.toolbar=e).container},n.renderViewModel=function(){a.prototype.renderViewModel.apply(this,arguments),this.renderMultiField()},n.renderMultiField=function(){var t=this;return cm.getConstructor(t.params.multiFieldConstructor,function(e){t.components.multiField=new e(cm.merge(t.params.multiFieldParams,{container:t.nodes.holder})),t.renderMultiFieldEvents()}),t},n.renderMultiFieldEvents=function(){var o=this;return o.components.multiField.addEvent("onItemAdd",function(e,t){o.addItemProcess({},t,!0)}),o.components.multiField.addEvent("onItemRemove",function(e,t){var n=t.index,a=o.items[n];o.removeItemProcess(a,t,!0)}),o.components.multiField.addEvent("onItemSort",function(e,t){var n=t.previousIndex,a=o.items[n];o.sortItemProcess(a,t,!0)}),o},n.renderInputView=function(e){return e.input=cm.node("input",{type:"text"}),e.input},n.addItem=function(t,n,e){var a=this;return n=!!cm.isUndefined(n)||n,(!a.params.max||a.items.length<a.params.max)&&a.components.multiField.addItem({},{triggerEvents:!1,immediately:e,callback:function(e){a.addItemProcess(t,e,n)}}),null},n.addItemProcess=function(t,e,n){var a=this;n=!!cm.isUndefined(n)||n,(t=cm.merge({input:null,container:null,name:a.params.name,value:"",constructor:a.params.inputConstructor,nodes:{}},t)).field=e,t.container=t.field.content,a.items.push(t),a.triggerEvent("onItemAddStart",t),t.input||(t.input=a.renderInputView(t)),cm.appendChild(t.input,t.container),cm.getConstructor(t.constructor,function(e){t.controller=new e(cm.merge(a.params.inputParams,{node:t.input,name:t.name,value:t.value})),a.triggerEvent("onItemAddProcess",t),a.params.focusInput&&t.controller.focus&&t.controller.focus(),n&&(a.triggerEvent("onSelect"),a.triggerEvent("onSet"),a.triggerEvent("onChange"))}),a.toggleToolbarVisibility(),a.triggerEvent("onItemAddEnd",t),a.triggerEvent("onItemAdd",t)},n.removeItem=function(t,n){var a=this;return n=!!cm.isUndefined(n)||n,a.components.multiField.removeItem(t.field,{triggerEvents:!1,callback:function(e){a.removeItemProcess(t,e,n)}}),a},n.removeItemProcess=function(e,t,n){var a=this;n=!!cm.isUndefined(n)||n,a.triggerEvent("onItemRemoveStart",e),a.items=cm.arrayRemove(a.items,e),a.triggerEvent("onItemRemoveProcess",e),e.controller&&e.controller.destruct(),a.triggerEvent("onItemRemoveEnd",e),a.triggerEvent("onItemRemove",e),a.toggleToolbarVisibility(),n&&(a.triggerEvent("onSelect"),a.triggerEvent("onSet"),a.triggerEvent("onChange"))},n.sortItemProcess=function(e,t){var n=t.index;this.triggerEvent("onItemSortStart",e),this.triggerEvent("onItemSortProcess",e),this.items.splice(this.items.indexOf(e),1),this.items.splice(n,0,e),this.triggerEvent("onItemSortEnd",e)},n.toggleToolbarVisibility=function(){return this.params.showToolbar&&(0<this.params.max&&this.items.length===this.params.max?this.hideToolbar():this.showToolbar()),this},n.showToolbar=function(){var e=this,t=0;return e.isToolbarVisible||(e.isToolbarVisible=!0,e.nodes.toolbarContainer.style.height="",t=e.nodes.toolbarContainer.offsetHeight,e.nodes.toolbarContainer.style.height="0px",e.nodes.toolbarContainer.style.overflow="hidden",cm.transition(e.nodes.toolbarContainer,{properties:{height:t+"px",opacity:1},duration:e.params.duration,easing:"ease-in-out",clear:!0,onStop:function(){e.nodes.toolbarContainer.style.overflow="",e.nodes.toolbarContainer.style.height=""}})),e},n.hideToolbar=function(){return this.isToolbarVisible&&(this.isToolbarVisible=!1,this.nodes.toolbarContainer.style.overflow="hidden",cm.transition(this.nodes.toolbarContainer,{properties:{height:"0px",opacity:0},duration:this.params.duration,easing:"ease-in-out"})),this},n.set=function(e,t){var n=this;return t=!!cm.isUndefined(t)||t,cm.forEach(n.items,function(e){n.removeItem(e,!1)}),cm.forEach(e,function(e){n.addItem({value:e},!1)}),t&&(n.triggerEvent("onSelect"),n.triggerEvent("onSet"),n.triggerEvent("onChange")),n},n.get=function(){var t,n=[];return cm.forEach(this.items,function(e){(t=e.controller&&e.controller.get?e.controller.get():null)&&n.push(t)}),n},n.clear=function(e){return(e=!!cm.isUndefined(e)||e)&&this.triggerEvent("onClear"),this.set(this.params.defaultValue,e),this},n.enable=function(){return this.disabled||(this.disabled=!1,cm.removeClass(this.nodes.container,"disabled"),cm.removeClass(this.nodes.content,"disabled"),this.triggerEvent("onEnable")),this},n.disable=function(){return this.disabled&&(this.disabled=!0,cm.addClass(this.nodes.container,"disabled"),cm.addClass(this.nodes.content,"disabled"),this.triggerEvent("onDisable")),this}}),cm.define("Com.BoxTools",{extend:"Com.AbstractInput",params:{controllerEvents:!0,className:"com__box-tools",maxlength:5,units:"px",allowNegative:!1,allowFloat:!1,inputs:[{name:"top",icon:"icon svg__indent-top small linked",iconPosition:"insideRight"},{name:"right",icon:"icon svg__indent-right small linked",iconPosition:"insideRight"},{name:"bottom",icon:"icon svg__indent-bottom small linked",iconPosition:"insideRight"},{name:"left",icon:"icon svg__indent-left small linked",iconPosition:"insideRight"}]},strings:{link:"Link",unlink:"Unlink"}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.BoxTools",function(e,t,n){n._inherit;n.onConstructStart=function(){var e=this;return e.inputs=[],e.rawValue=null,e.isInputsLinked=!1,e.lastInput=null,e.linkInputsHandler=e.linkInputs.bind(e),e.setValuesHandler=e.setValues.bind(e),e},n.onEnable=function(){cm.forEach(this.inputs,function(e){cm.removeClass(e.nodes.inner,"disabled"),e.input.disabled=!1})},n.onDisable=function(){cm.forEach(this.inputs,function(e){cm.addClass(e.nodes.inner,"disabled"),e.input.disabled=!0})},n.renderContent=function(){var e=this,t={};return e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"com__box-tools__content"},cm.node("div",{class:"b-line"},e.renderInput(e.params.inputs[0],0)),cm.node("div",{class:"b-line"},e.renderInput(e.params.inputs[3],3),cm.node("div",{class:"b-link-container"},t.link=cm.node("div",{class:"b-link",title:e.lang("link")},cm.node("div",{class:"icon"}))),e.renderInput(e.params.inputs[1],1)),cm.node("div",{class:"b-line"},e.renderInput(e.params.inputs[2],2))),e.triggerEvent("onRenderContentProcess"),cm.addEvent(t.link,"click",e.linkInputsHandler),e.triggerEvent("onRenderContentEnd"),t.container},n.renderInput=function(n,e){var a=this,t={allowNegative:a.params.allowNegative,allowFloat:a.params.allowFloat};return(n=cm.merge({i:e,icon:"small",iconPosition:"leftInside",name:"",nodes:{}},n)).nodes=a.renderInputContainer(n),n.input=n.nodes.input,a.params.maxlength&&n.input.setAttribute("maxlength",a.params.maxlength),cm.addEvent(n.nodes.icon,"click",function(e){cm.preventDefault(e),n.input.setSelectionRange(0,n.input.value.length),n.input.focus()}),cm.addEvent(n.input,"focus",function(){a.lastInput=n}),cm.addEvent(n.input,"blur",a.setValuesHandler),cm.addEvent(n.input,"keypress",function(e){cm.isKeyCode(e.keyCode,"enter")&&(cm.preventDefault(e),a.setValues(),n.input.blur())}),cm.allowOnlyNumbersInputEvent(n.input,function(e,t){a.inputOnInputEvent(e,t,n)},t),a.inputs.push(n),n.nodes.container},n.inputOnInputEvent=function(e,t,n){return this.isInputsLinked?(this.tempRawValue=[t,t,t,t],this.setInputs()):this.tempRawValue[n.i]=t,this.selectAction(cm.arrayToCSSValues(this.tempRawValue,this.params.units),!0),this},n.renderInputContainer=function(e){var t={};switch(t.container=cm.node("div",{class:"b-container"},t.inner=cm.node("div",{class:"pt__input"},t.input=cm.node("input",{type:"text"}))),cm.isEmpty(e.title)||t.inner.setAttribute("title",e.title),t.icon=cm.node("div",{class:e.icon}),e.iconPosition){case"insideLeft":cm.addClass(t.inner,"is-less-indent"),cm.insertFirst(t.icon,t.inner);break;case"insideRight":cm.addClass(t.inner,"is-less-indent"),cm.insertLast(t.icon,t.inner);break;case"outsideLeft":cm.addClass(t.inner,"is-icon-outside"),cm.insertFirst(t.icon,t.inner);break;case"outsideRight":cm.addClass(t.inner,"is-icon-outside"),cm.insertLast(t.icon,t.inner)}return t},n.setInputs=function(){var t=this;return cm.forEach(t.inputs,function(e){e.input.value=t.tempRawValue[e.i]}),t},n.setValues=function(e){return e=!!cm.isUndefined(e)||e,this.set(cm.arrayToCSSValues(this.tempRawValue,this.params.units),e),this},n.linkInputs=function(){var t,e=this;return e.disabled||(e.isInputsLinked?(e.isInputsLinked=!1,cm.removeClass(e.nodes.content.link,"active"),e.nodes.content.link.title=e.lang("link")):(e.isInputsLinked=!0,cm.addClass(e.nodes.content.link,"active"),e.nodes.content.link.title=e.lang("unlink"),e.lastInput?e.set(e.lastInput.input.value):(t=0,cm.forEach(e.inputs,function(e){t=Math.max(t,parseInt(e.input.value))}),e.set(t)))),e},n.setData=function(){return this.setInputs(),this},n.validateValue=function(e){return cm.arrayToCSSValues(cm.CSSValuesToArray(e),this.params.units)},n.saveRawValue=function(e){this.tempRawValue=cm.CSSValuesToArray(e)}}),cm.define("Com.Autocomplete",{modules:["Params","Events","Langs","DataConfig","Storage","Callbacks","Stack"],require:["Com.Tooltip"],events:["onRenderStart","onRender","onFocus","onBlur","onClear","onReset","onSelect","onChange","onClickSelect","onAbort","onError","onRenderListStart","onRenderListEnd"],params:{input:null,node:cm.node("input",{type:"text"}),target:!1,container:"document.body",name:"",minLength:3,direction:"auto",className:"",delay:"cm._config.requestDelay",clearOnEmpty:!0,showListOnEmpty:!1,listItemNowrap:!1,showLoader:!0,data:[],options:[],value:{},defaultValue:"",showSuggestion:!1,suggestionConstructor:"Com.AbstractContainer",suggestionParams:{},suggestionQueryName:"text",responseKey:"data",preloadData:!1,ajax:{type:"json",method:"get",url:"",params:""},classes:{list:"pt__list",listItem:"pt__list__item"},icons:{search:"icon default linked"},"Com.Tooltip":{hideOnOut:!0,targetEvent:"none",width:"targetWidth",top:"targetHeight + 4"}},strings:{loader:'Searching for <b>"%query%"</b>…',suggestion:'<b>"%query%"</b> not found. Add?'}},function(e){var a=this;a.components={},a.isDestructed=!1,a.ajaxHandler=null,a.isOpen=!1,a.isAjax=!1,a.ajaxParams={},a.requestDelay=null,a.registeredItems=[],a.suggestionItem=null,a.selectedItemIndex=null,a.value=null,a.previousValue=null,a.valueText=null,a.rawValue=null;function o(e){var t=a.registeredItems[a.selectedItemIndex],n=a.registeredItems[e];t&&cm.removeClass(t.container,"active"),n&&(cm.addClass(n.container,"active"),a.components.tooltip.scrollToNode(n.container)),a.selectedItemIndex=e,p(a.selectedItemIndex)}function n(e){var t,n;switch(e.keyCode){case 13:h(),a.hide();break;case 38:(t=a.registeredItems.length)&&(n=null!==a.selectedItemIndex&&0<=a.selectedItemIndex-1?a.selectedItemIndex-1:t-1,o(n));break;case 40:cm.log(a.registeredItems),(t=a.registeredItems.length)&&(n=null!==a.selectedItemIndex&&a.selectedItemIndex+1<t?a.selectedItemIndex+1:0,o(n))}}function r(){var e=a.params.node.value.trim(),t=cm.clone(a.params.ajax),n=a.params.showListOnEmpty&&cm.isEmpty(e)?0:a.params.delay;a.valueText=e,a.requestDelay&&clearTimeout(a.requestDelay),a.selectedItemIndex=null,a.registeredItems=[],a.abort(),a.params.showListOnEmpty||e.length>=a.params.minLength?a.requestDelay=setTimeout(function(){a.params.preloadData&&!cm.isEmpty(a.ajaxParams.data)?a.callbacks.data(a,{data:a.ajaxParams.data,query:e}):a.isAjax?(a.params.showLoader&&(a.callbacks.renderLoader(a,{config:t,query:e}),a.show()),a.ajaxHandler=a.callbacks.request(a,{config:t,query:e})):a.callbacks.data(a,{data:a.params.data,query:e})},n):a.hide()}function s(){a.value!==a.previousValue&&a.triggerEvent("onChange",a.value)}function i(){a.triggerEvent("onFocus",a.value)}function c(){a.isOpen||h(),a.triggerEvent("onBlur",a.value)}function d(){a.params.showListOnEmpty&&r()}function l(){cm.removeEvent(a.params.node,"input",r),cm.removeEvent(a.params.node,"keydown",n),cm.removeEvent(a.params.node,"focus",i),cm.removeEvent(a.params.node,"blur",c),cm.removeEvent(a.params.node,"click",d)}var t=function(){cm.isNode(a.params.input)&&(a.params.node=a.params.input)},m=function(){a.params.target||(a.params.target=a.params.node),a.isAjax=!cm.isEmpty(a.params.ajax.url),a.params.data=cm.merge(a.params.data,a.params.options),a.params.data=a.callbacks.convert(a,a.params.data),a.params.value=cm.isEmpty(a.params.value)?a.params.defaultValue:a.params.value,a.params["Com.Tooltip"].className=["com__ac-tooltip",[a.params.className,"tooltip"].join("__")].join(" ")},u=function(){a.components.tooltip=new Com.Tooltip(cm.merge(a.params["Com.Tooltip"],{container:a.params.container,target:a.params.target,events:{onShowStart:function(){a.isOpen=!0,cm.addEvent(document,"mousedown",f)},onHideStart:function(){a.isOpen=!1,cm.removeEvent(document,"mousedown",f)}}})),a.setInput(a.params.node),cm.isEmpty(a.params.value)||a.set(a.params.value,!1)},p=function(e){var t=a.registeredItems[e];t&&a.setRegistered(t,!0)},h=function(){var e,t;a.requestDelay&&clearTimeout(a.requestDelay),a.abort(),a.params.clearOnEmpty&&(e=g(a.value),t=a.params.node.value,e&&e.text==t||a.clear())},g=function(e){if(a.rawValue&&a.rawValue.value==e)return a.rawValue;var t=a.getRegisteredItem(e);return t?t.data:null},f=function(e){e=cm.getEvent(e);var t=cm.getEventTarget(e);a.isOwnNode(t)||(h(),a.hide())};a.callbacks.prepare=function(e,t){return t.config=e.callbacks.beforePrepare(e,t),t.config.url=cm.strReplace(t.config.url,{"%query%":t.query,"%baseUrl%":cm._baseUrl}),t.config.params=cm.objectReplace(t.config.params,{"%query%":t.query,"%baseUrl%":cm._baseUrl}),t.config=e.callbacks.afterPrepare(e,t),t.config},a.callbacks.beforePrepare=function(e,t){return t.config},a.callbacks.afterPrepare=function(e,t){return t.config},a.callbacks.request=function(t,n){return(n=cm.merge({response:null,data:null,config:null,query:""},n)).config=t.callbacks.prepare(t,n),t.ajaxParams=n,cm.ajax(cm.merge(n.config,{onSuccess:function(e){n.response=e,t.callbacks.response(t,n)},onError:function(){t.callbacks.error(t,n)}}))},a.callbacks.filter=function(e,t){var n=[],a=cm.objectSelector(e.params.responseKey,t.response);return a&&!cm.isEmpty(a)&&(n=a),n},a.callbacks.response=function(e,t){cm.isEmpty(t.response)||(t.data=e.callbacks.filter(e,t)),cm.isEmpty(t.data)||(t.data=e.callbacks.convert(e,t.data)),e.callbacks.render(e,t)},a.callbacks.error=function(e,t){e.hide(),e.triggerEvent("onError")},a.callbacks.data=function(e,t){t.data=e.callbacks.query(e,t),e.callbacks.render(e,t)},a.callbacks.query=function(t,n){var a=[];return cm.forEach(n.data,function(e){t.callbacks.isContain(t,e.text,n.query)&&a.push(e)}),a},a.callbacks.isContain=function(e,t,n){switch(t=t.trim().toLowerCase(),n=n.trim().toLowerCase(),e.params.direction){case"start":return new RegExp("^"+n,"i").test(t);default:return-1<t.indexOf(n)}},a.callbacks.render=function(e,t){t.data.length?(e.callbacks.renderList(e,t),e.show()):e.params.showSuggestion?(e.callbacks.renderListSuggestion(e,t),e.show()):e.hide()},a.callbacks.registerItem=function(e,t,n){n.container=n.nodes.container,cm.addEvent(n.container,"click",function(){e.setRegistered(n,!0),e.triggerEvent("onClickSelect",e.value),e.hide()}),e.registeredItems.push(n)},a.callbacks.embed=function(e,t){e.components.tooltip.setContent(t)},a.destruct=function(){return this.isDestructed||(this.isDestructed=!0,this.callbacks.destructListSuggestion(this,this.suggestionItem),l(),this.removeFromStack()),this},a.set=function(e,t){return t=void 0===t||t,a.rawValue=a.callbacks.convertItem(a,e),a.previousValue=a.value,a.value=cm.isEmpty(a.rawValue)?null:a.rawValue.value,a.valueText=cm.isEmpty(a.rawValue)?"":a.rawValue.text,a.params.node.value=a.valueText,t&&(a.triggerEvent("onSelect",a.value),s()),a},a.setRegistered=function(e,t){return t=void 0===t||t,a.set(e.data,t),a},a.setInput=function(e){var t=a.params.container;return cm.isNode(e)&&(l(),a.params.node=e,"targetParent"===t&&(t=a.params.node.parentNode),a.components.tooltip.setContainer(t),cm.addEvent(a.params.node,"input",r),cm.addEvent(a.params.node,"keydown",n),cm.addEvent(a.params.node,"focus",i),cm.addEvent(a.params.node,"blur",c),cm.addEvent(a.params.node,"click",d)),a},a.setTarget=function(e){return cm.isNode(e)&&(a.params.target=e,a.components.tooltip.setTarget(e)),a},a.get=function(){return a.value},a.getText=function(){return a.valueText},a.getRaw=function(){return a.rawValue},a.getItem=function(t){var n;return t&&cm.forEach(a.params.data,function(e){e.value==t&&(n=e)}),n},a.getRegisteredItem=function(t){var n;return t&&cm.forEach(a.registeredItems,function(e){e.data.value==t&&(n=e)}),n},a.reset=a.clear=function(e){return e=void 0===e||e,a.previousValue=a.value,a.value=null,a.rawValue=null,a.valueText=null,a.params.clearOnEmpty&&(a.params.node.value=""),e&&(a.triggerEvent("onClear",a.value),a.triggerEvent("onReset",a.value),s()),a},a.show=function(){return a.components.tooltip.show(),a},a.hide=function(){return a.components.tooltip.hide(),a},a.abort=function(){return a.ajaxHandler&&a.ajaxHandler.abort&&a.ajaxHandler.abort(),a},a.focus=function(){return a.params.node.focus(),a},a.isOwnNode=function(e){return cm.isParent(a.params.target,e,!0)||a.components.tooltip.isOwnNode(e)},a.renderComponent(),a.setParams(e),t(),a.convertEvents(a.params.events),a.getDataConfig(a.params.node),a.callbacksProcess(),m(),a.addToStack(a.params.node),a.triggerEvent("onRenderStart"),u(),a.addToStack(a.params.node),a.triggerEvent("onRender")}),cm.getConstructor("Com.Autocomplete",function(e,t,n){n._inherit;n.callbacks.convert=function(t,e){return cm.isObject(e)?t.callbacks.convertObject(t,e):e.map(function(e){return t.callbacks.convertItem(t,e)})},n.callbacks.convertItem=function(e,t){return cm.isEmpty(t)?null:cm.isObject(t)?(cm.isUndefined(t.value)&&(t.value=t.text),t):{text:t,value:t}},n.callbacks.convertObject=function(e,t){var n=[];return cm.forEach(t,function(e,t){n.push({text:e,value:t})}),n},n.callbacks.renderList=function(n,a){cm.triggerEvent("onRenderListStart");var o=n.callbacks.renderListStructure(n,a);cm.forEach(a.data,function(e,t){n.callbacks.renderItem(n,a,{data:e,i:t},o.items)}),n.callbacks.embed(n,o.container),cm.triggerEvent("onRenderListEnd")},n.callbacks.renderListStructure=function(e,t){var n={};return n.container=cm.node("div",{class:e.params.classes.list},n.items=cm.node("ul")),n},n.callbacks.renderItem=function(e,t,n,a){n.nodes=e.callbacks.renderItemStructure(e,t,n),e.params.listItemNowrap&&cm.addClass(n.nodes.container,"is-nowrap"),e.value==n.data.value&&(cm.addClass(n.nodes.container,"active"),e.selectedItemIndex=n.i),e.callbacks.registerItem(e,t,n),cm.appendChild(n.nodes.container,a)},n.callbacks.renderItemStructure=function(e,t,n){var a={};return a.container=cm.node("li",{class:e.params.classes.listItem},cm.node("div",{class:"inner"},cm.node("div",{class:"content",innerHTML:n.data.text}))),a},n.callbacks.renderLoader=function(e,t){var n=e.callbacks.renderListStructure(e,t);cm.addClass(n.container,"disabled"),n.item=e.callbacks.renderLoaderItemStructure(e,t),e.params.listItemNowrap&&cm.addClass(n.item.container,"is-nowrap"),cm.appendChild(n.item.container,n.items),e.callbacks.embed(e,n.container)},n.callbacks.renderLoaderItemStructure=function(e,t){var n={};return n.container=cm.node("li",{class:e.params.classes.listItem},cm.node("div",{class:"inner"},cm.node("div",{class:"content"},cm.node("span",{class:"icon small cm-ia__spinner"}),cm.node("span",{innerHTML:e.lang("loader",{"%query%":t.query})})))),n},n.callbacks.renderListSuggestion=function(e,t){var n=e.callbacks.renderListStructure(e,t);n.item=e.callbacks.renderListSuggestionItem(e,t,{},n.items),e.callbacks.embed(e,n.container)},n.callbacks.destructListSuggestion=function(e,t){t&&cm.isFunction(t.controller.destruct)&&t.controller.destruct()},n.callbacks.renderListSuggestionItem=function(e,t,n,a){return n.nodes=e.callbacks.renderListSuggestionItemStructure(e,t,n),e.params.listItemNowrap&&cm.addClass(n.nodes.container,"is-nowrap"),e.params.suggestionConstructor&&e.callbacks.renderListSuggestionItemConstructor(e,t,n),cm.appendChild(n.nodes.container,a),e.suggestionItem=n},n.callbacks.renderListSuggestionItemConstructor=function(e,t,n){e.suggestionItem&&e.suggestionItem.controller&&!e.suggestionItem.controller.isDestructed?e.callbacks.renderListSuggestionItemControllerCached(e,t,n):e.callbacks.renderListSuggestionItemController(e,t,n),cm.addEvent(n.nodes.container,"click",function(){e.callbacks.renderListSuggestionItemEvent(e,t,n)})},n.callbacks.renderListSuggestionItemEvent=function(e,t,n){var a={};a[e.params.suggestionQueryName]=t.query,n.controller.set(a),e.hide(),e.clear()},n.callbacks.renderListSuggestionItemStructure=function(e,t,n){var a={};return a.container=cm.node("li",{class:e.params.classes.listItem},cm.node("div",{class:"inner"},cm.node("div",{class:"content"},cm.node("span",{class:"icon small add"}),cm.node("span",{innerHTML:e.lang("suggestion",{"%query%":t.query})})))),a},n.callbacks.renderListSuggestionItemController=function(n,e,t){cm.getConstructor(n.params.suggestionConstructor,function(e){t.controller=new e(cm.merge(t.suggestionParams,{node:t.nodes.container})),t.controller.addEvent("onSuccess",function(e,t){n.set(t,!0)})})},n.callbacks.renderListSuggestionItemControllerCached=function(e,t,n){n.controller=e.suggestionItem.controller,n.controller.setTarget(n.nodes.container)}}),Com.FormFields.add("autocomplete",{node:cm.node("input",{type:"search",autocomplete:"none"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Autocomplete"}),cm.define("Com.AutocompleteField",{extend:"Com.AbstractInput",params:{controllerEvents:!0,type:"text",autocompleteConstructor:"Com.Autocomplete",autocompleteParams:{minLength:1,direction:"start"}}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.AutocompleteField",function(e,t,n){var a=n._inherit;n.construct=function(){return this.options=[],a.prototype.construct.apply(this,arguments),this},n.validateParams=function(){var t=this;a.prototype.validateParams.apply(t,arguments);var e=t.params.node.options;cm.forEach(e,function(e){t.options.push({value:e.value,text:e.innerHTML})})},n.validateParamsValue=function(){var e;cm.isNode(this.params.node)&&(e=cm.getSelectValue(this.params.node),this.params.value=cm.isEmpty(e)?this.params.value:e),this.params.value=cm.isEmpty(this.params.value)?this.params.defaultValue:this.params.value},n.renderContent=function(){var e={};return this.nodes.content=e,this.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"pt__input"},e.input=cm.node("input",{type:this.params.type})),cm.isEmpty(this.params.placeholder)||(e.input.placeholder=this.params.placeholder),this.triggerEvent("onRenderContentProcess"),this.triggerEvent("onRenderContentEnd"),e.container},n.renderViewModel=function(){var n=this;a.prototype.renderViewModel.apply(n,arguments),cm.getConstructor(n.params.autocompleteConstructor,function(e){n.components.autocomplete=new e(cm.merge(n.params.autocompleteParams,{node:n.nodes.content.input,data:n.options})),n.components.autocomplete.addEvent("onChange",function(e,t){n.set(t,!0)})})},n.setData=function(){var e=this.value,t=this.getOption(this.value);return t&&(e=cm.isEmpty(t.text)?t.value:t.text),this.nodes.content.input.value=e,this},n.getOption=function(t){var n;return cm.forEach(this.options,function(e){e.value===t&&(n=e)}),n}}),Com.FormFields.add("autocomplete-field",{node:cm.node("select"),fieldConstructor:"Com.AbstractFormField",constructor:"Com.AutocompleteField"}),cm.define("Com.BoxRadiusTools",{extend:"Com.BoxTools",params:{className:"com__box-tools com__box-tools--radius",inputs:[{name:"topleft",icon:"icon svg__radius-topleft small linked",iconPosition:"outsideLeft"},{name:"topright",icon:"icon svg__radius-topright small linked",iconPosition:"outsideRight"},{name:"bottomright",icon:"icon svg__radius-bottomright small linked",iconPosition:"outsideRight"},{name:"bottomleft",icon:"icon svg__radius-bottomleft small linked",iconPosition:"outsideLeft"}]}},function(e){Com.BoxTools.apply(this,arguments)}),cm.getConstructor("Com.BoxRadiusTools",function(e,t,n){n._inherit;n.renderContent=function(){var e=this,t={};return e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"com__box-tools__content"},cm.node("div",{class:"b-line"},e.renderInput(e.params.inputs[0],0),e.renderInput(e.params.inputs[1],1)),cm.node("div",{class:"b-line"},e.renderInput(e.params.inputs[3],3),e.renderInput(e.params.inputs[2],2)),cm.node("div",{class:"b-line"},cm.node("div",{class:"b-link-container"},t.link=cm.node("div",{class:"b-link",title:e.lang("link")},cm.node("div",{class:"icon"}))))),e.triggerEvent("onRenderContentProcess"),cm.addEvent(t.link,"click",e.linkInputsHandler),e.triggerEvent("onRenderContentEnd"),t.container}}),cm.define("Com.Check",{extend:"Com.AbstractInput",params:{controllerEvents:!0,type:"checkbox",multiple:!1,inline:!1}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.Check",function(e,t,n,a){n.onConstructStart=function(){this.inputs=[],this.hidden=[],this.setValueHandler=this.setValue.bind(this)},n.onValidateParamsProcess=function(){var t=this;cm.isEmpty(t.params.options)||(t.params.multiple="checkbox"===t.params.type,cm.forEach(t.params.options,function(e){cm.isEmpty(e.value)||!e.checked&&!e.selected||(cm.isEmpty(t.params.value)?t.params.value=[]:(cm.isString(t.params.value)||cm.isNumber(t.params.value))&&(t.params.value=[t.params.value]),cm.arrayAdd(t.params.value,e.value))}))},n.renderHiddenContent=function(){var t,n=this,a={};return(n.nodes.hiddenContent=a).container=cm.node("div",{class:"display-none"}),cm.isEmpty(n.params.options)?(t=n.renderHiddenInput(),cm.appendChild(t,a.container)):cm.forEach(n.params.options,function(e){t=n.renderHiddenInput(e),cm.appendChild(t,a.container)}),a.container},n.renderHiddenInput=function(e){var t={};return e=cm.merge({nodes:t,value:null},e),t.container=t.input=cm.node("input",{type:this.params.type}),e.input=t.input,cm.isEmpty(e.value)||(e.input.value=e.value),cm.isEmpty(this.params.name)||e.input.setAttribute("name",this.params.name),this.hidden.push(e),t.container},n.renderContent=function(){var t,n=this,a={};return n.nodes.content=a,n.triggerEvent("onRenderContentStart"),a.container=cm.node("div",{class:"pt__check-line"}),n.params.inline?cm.addClass(a.container,"is-line"):cm.addClass(a.container,"is-box"),n.triggerEvent("onRenderContentProcess"),cm.isEmpty(n.params.options)?(t=n.renderInput({text:n.params.placeholder}),cm.appendChild(t,a.container)):cm.forEach(n.params.options,function(e){t=n.renderInput(e),cm.appendChild(t,a.container)}),n.triggerEvent("onRenderContentEnd"),a.container},n.renderInput=function(t){var n=this,e={};return t=cm.merge({nodes:e,text:"",value:null},t),e.container=cm.node("label",e.input=cm.node("input",{type:n.params.type}),e.label=cm.node("span",{class:"label",innerHTML:t.text})),t.input=e.input,cm.isEmpty(t.value)||(e.input.value=t.value),cm.addEvent(t.input,"click",function(e){n.setValue(t,!0)}),n.inputs.push(t),e.container},n.setHiddenAttributes=function(){},n.validateValue=function(e){return e},n.setValue=function(e,t){var n=null;return t=!!cm.isUndefined(t)||t,cm.isEmpty(this.params.options)?n=e.input.checked:this.params.multiple?(n=[],cm.forEach(this.inputs,function(e){e.input.checked&&n.push(e.value)})):n=e.value,this.set(n,t),this},n.saveHiddenValue=function(t){cm.isEmpty(this.params.options)?this.hidden[0].input.checked=!(cm.isEmpty(t)||0===t||"0"===t||!1===t):this.params.multiple?cm.forEach(this.hidden,function(e){e.input.checked=cm.inArray(t,e.value)}):cm.forEach(this.hidden,function(e){e.input.checked=t===e.value})},n.setData=function(t){cm.isEmpty(this.params.options)?this.inputs[0].input.checked=!(cm.isEmpty(t)||0===t||"0"===t||!1===t):this.params.multiple?cm.forEach(this.inputs,function(e){e.input.checked=cm.inArray(t,e.value)}):cm.forEach(this.inputs,function(e){e.input.checked=t===e.value})}}),Com.FormFields.add("checkbox",{node:cm.node("div",{class:"pt__check-line"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Check",constructorParams:{type:"checkbox"}}),Com.FormFields.add("radio",{node:cm.node("div",{class:"pt__check-line"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Check",constructorParams:{type:"radio",inline:!0}}),Com.FormFields.add("check",{node:cm.node("div",{class:"pt__check-line"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Check",constructorParams:{type:"checkbox",inline:!0}}),cm.define("Com.CheckTrigger",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,checked:!1,unchecked:!1}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.CheckTrigger",function(e,t,n){n._inherit;n.onConstructStart=function(){this.checked=!1,this.checkedA=[],this.uncheckedA=[],this.toggleHandler=this.toggle.bind(this)},n.onValidateParams=function(){this.checked=this.params.node.checked},n.renderViewModel=function(){var e=this;cm.addEvent(e.params.node,"change",e.toggleHandler),cm.isObject(e.params.checked)?e.find(e.params.checked,e.checkedA):cm.isString(e.params.checked)&&e.find({type:"input",name:e.params.checked},e.checkedA),cm.isObject(e.params.unchecked)?e.find(e.params.unchecked,e.uncheckedA):cm.isString(e.params.unchecked)&&e.find({type:"input",name:e.params.unchecked},e.uncheckedA)},n.find=function(n,a){var o=this;switch((n=cm.merge({type:"controller",className:null,classObject:null,name:null,container:null,node:null,method:"disable"},n)).type){case"controller":new cm.Finder(n.className,n.name,n.container,function(e){var t=cm.merge(n,{classObject:e});a.push(t),o.toggle()});break;case"input":var e=cm.getByName(n.name,n.container);cm.forEach(e,function(e){var t=cm.merge(n,{node:e});a.push(t),o.toggle()})}},n.toggle=function(){var e=this;return e.checked=e.params.node.checked,e.checked?(e.enableTrigger(e.checkedA),e.disableTrigger(e.uncheckedA)):(e.disableTrigger(e.checkedA),e.enableTrigger(e.uncheckedA)),e},n.enableTrigger=function(e){return cm.forEach(e,function(e){switch(e.type){case"controller":e.classObject&&cm.isFunction(e.classObject.enable)&&e.classObject.enable();break;case"input":cm.isNode(e.node)&&(e.node.disabled=!1,e.node.focus())}}),this},n.disableTrigger=function(e){return cm.forEach(e,function(e){switch(e.type){case"controller":e.classObject&&cm.isFunction(e.classObject.disable)&&e.classObject.disable();break;case"input":cm.isNode(e.node)&&(e.node.disabled=!0,e.node.blur())}}),this}}),cm.define("Com.CodeHighlight",{modules:["Params","Events","DataConfig","Stack"],events:["onRender"],params:{node:cm.Node("div"),name:"",language:"javascript",lineNumbers:!0,customEvents:!0,disabled:!1,title:""}},function(e){var t=this;t.components={},t.disabled=!1;var n=function(){cm.isNode(t.params.node)&&(t.params.title=t.params.node.getAttribute("title")||t.params.title,t.params.name=t.params.node.getAttribute("name")||t.params.name,t.params.disabled=t.params.node.disabled||t.params.node.readOnly||t.params.disabled),t.disabled=t.params.disabled},a=function(){cm.loadScript({path:"CodeMirror",src:"%assetsUrl%/libs/codemirror_comp/codemirror.min.js?%version%",callback:function(e){e&&(t.components.codemirror=e.fromTextArea(t.params.node,{lineNumbers:t.params.lineNumbers,viewportMargin:1/0,mode:t.params.language}),t.components.codemirror.on("change",function(e){t.params.node.value=e.getValue()})),t.disabled?t.disable():t.enable()}}),t.params.customEvents&&cm.customEvent.add(t.params.node,"redraw",t.redraw)};t.redraw=function(){return t.components.codemirror&&t.components.codemirror.refresh(),t},t.disable=function(){return t.disabled=!0,t.components.codemirror&&t.components.codemirror.setOption("readOnly","nocursor"),t},t.enable=function(){return t.disabled=!1,t.components.codemirror&&t.components.codemirror.setOption("readOnly",!1),t},t.setParams(e),t.convertEvents(t.params.events),t.getDataConfig(t.params.node),n(),a(),t.addToStack(t.params.node),t.triggerEvent("onRender")}),cm.define("Com.ColorPicker",{modules:["Params","Events","Langs","Structure","DataConfig","Storage","Stack"],require:["Com.Tooltip","Com.Palette"],events:["onRender","onSelect","onChange","onClear"],params:{input:null,node:cm.node("input",{type:"text"}),container:null,embedStructure:"replace",name:"",value:null,defaultValue:"transparent",title:"",showLabel:!0,showClearButton:!1,showTitleTooltip:!0,renderInBody:!0,disabled:!1,size:"default",icons:{picker:"icon default linked",clear:"icon default linked"},"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,className:"com__colorpicker__tooltip",top:cm._config.tooltipDown},"Com.Palette":{setOnInit:!1}},strings:{Transparent:"Transparent",Clear:"Clear"}},function(e){var n=this;n.nodes={},n.components={},n.value=null,n.previousValue=null,n.disabled=!1;var t=function(){cm.isNode(n.params.input)&&(n.params.node=n.params.input)},a=function(){cm.isNode(n.params.node)&&(n.params.title=n.params.node.getAttribute("title")||n.params.title,n.params.disabled=n.params.node.disabled||n.params.disabled,n.value=n.params.node.value,n.params.name=n.params.node.getAttribute("name")||n.params.name),n.value=n.params.value||n.value||n.params.defaultValue,n.disabled=n.params.disabled,n.params["Com.Palette"].name=[n.params.name,"palette"].join("-")},o=function(){n.nodes.container=cm.Node("div",{class:"com__colorpicker"},n.nodes.hidden=cm.Node("input",{type:"hidden"}),n.nodes.target=cm.Node("div",{class:"pt__input"},n.nodes.input=cm.Node("input",{type:"text",readOnly:"true"}),n.nodes.icon=cm.Node("div",{class:n.params.icons.picker})),n.nodes.menuContainer=cm.Node("div",{class:"form"},n.nodes.paletteContainer=cm.Node("div"))),cm.isEmpty(n.params.size)||cm.addClass(n.nodes.container,["size",n.params.size].join("-")),n.params.showTitleTooltip&&!cm.isEmpty(n.params.title)&&(n.nodes.container.title=n.params.title),n.params.node.id&&(n.nodes.container.id=n.params.node.id),n.params.name&&n.nodes.hidden.setAttribute("name",n.params.name),n.params.showLabel||cm.addClass(n.nodes.target,"is-no-label"),n.params.showClearButton&&(cm.addClass(n.nodes.container,"has-clear-button"),n.nodes.container.appendChild(n.nodes.clearButton=cm.Node("div",{class:n.params.icons.clear,title:n.lang("Clear")}))),n.embedStructure(n.nodes.container)},r=function(){cm.addEvent(n.nodes.input,"keydown",function(e){e=cm.getEvent(e),cm.preventDefault(e),8==e.keyCode&&(n.clear(),n.components.tooltip.hide())}),n.params.showClearButton&&cm.addEvent(n.nodes.clearButton,"click",function(){n.clear(),n.components.tooltip.hide()}),n.components.tooltip=new Com.Tooltip(cm.merge(n.params["Com.Tooltip"],{container:n.params.renderInBody?document.body:n.nodes.container,content:n.nodes.menuContainer,target:n.nodes.target,events:{onShowStart:c,onHideStart:i}})),n.components.palette=new Com.Palette(cm.merge(n.params["Com.Palette"],{node:n.nodes.menuContainer,events:{onChange:function(e,t){s(e.get("rgb"),!0),n.components.tooltip.hide()}}})),n.disabled?n.disable():n.enable()},s=function(e,t){n.previousValue=n.value,cm.isEmpty(e)&&(e=n.params.defaultValue),n.value=e,n.components.palette.set(n.value,!1),n.nodes.hidden.value=n.components.palette.get("rgb"),"transparent"===n.value?(n.params.showLabel&&(n.nodes.input.value=n.lang("Transparent")),cm.replaceClass(n.nodes.input,"input-dark input-light","input-checkers")):(n.params.showLabel&&(n.nodes.input.value=n.components.palette.get("hex")),n.nodes.input.style.backgroundColor=n.components.palette.get("hex"),n.components.palette.isDark()?cm.replaceClass(n.nodes.input,"input-checkers input-light","input-dark"):cm.replaceClass(n.nodes.input,"input-checkers input-dark","input-light")),t&&(n.triggerEvent("onSelect",n.value),d())},i=function(){n.nodes.input.blur(),cm.removeClass(n.nodes.container,"active"),n.components.palette.set(n.value,!1)},c=function(){cm.addClass(n.nodes.container,"active"),n.components.palette.redraw()},d=function(){n.value!=n.previousValue&&n.triggerEvent("onChange",n.value)};n.set=function(e,t){return s(e,t=void 0===t||t),n},n.get=function(){return n.value},n.clear=function(e){return e=void 0===e||e,s(n.params.defaultValue,!1),e&&(n.triggerEvent("onClear",n.value),d()),n},n.disable=function(){return n.disabled=!0,cm.addClass(n.nodes.container,"disabled"),n.nodes.input.disabled=!0,n.components.tooltip.disable(),n},n.enable=function(){return n.disabled=!1,cm.removeClass(n.nodes.container,"disabled"),n.nodes.input.disabled=!1,n.components.tooltip.enable(),n},n.setParams(e),t(),n.convertEvents(n.params.events),n.getDataConfig(n.params.node),a(),o(),r(),n.addToStack(n.nodes.container),n.set(n.value,!1),n.triggerEvent("onRender",n.value)}),cm.define("Com.FieldContent",{extend:"Com.AbstractInput",params:{controllerEvents:!0,renderHiddenContent:!1,setHiddenInput:!1}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.FieldContent",function(e,t,n,a){n.setData=function(){var e=this.value;return cm.clearNode(this.nodes.content.container),cm.isNode(e)||(e=cm.node("div",{innerHTML:e})),cm.appendChild(e,this.nodes.content.container),this}}),Com.FormFields.add("content",{node:cm.node("div"),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.FieldContent"}),Com.Elements.Datepicker={},Com.GetDatepicker=function(e){return Com.Elements.Datepicker[e]||null},cm.define("Com.Datepicker",{modules:["Params","Events","DataConfig","Structure","Langs","Stack"],events:["onRender","onSelect","onChange","onClear","onFocus","onBlur"],params:{input:null,node:cm.node("input",{type:"text"}),container:null,name:"",embedStructure:"replace",customEvents:!0,renderInBody:!0,format:"cm._config.dateFormat",displayFormat:"cm._config.displayDateFormat",isDateTime:!1,dateTimeFormat:"cm._config.dateTimeFormat",displayDateTimeFormat:"cm._config.displayDateTimeFormat",setEmptyDateByFormat:!0,minutesInterval:1,startYear:1950,endYear:"current + 10",startWeekDay:0,showTodayButton:!0,showClearButton:!1,showTitleTooltip:!0,showPlaceholder:!0,title:"",placeholder:"",menuMargin:4,value:0,disabled:!1,icons:{datepicker:"icon default linked",clear:"icon default linked"},"Com.Tooltip":{targetEvent:"click",hideOnReClick:!1,className:"com__datepicker__tooltip",top:cm._config.tooltipDown}},strings:{daysAbbr:["S","M","T","W","T","F","S"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],"Clear date":"Clear date",Today:"Today",Now:"Now",Time:"Time:"}},function(params){var that=this,nodes={},components={};that.date=null,that.previousDate=null,that.value=null,that.previousValue=null,that.format=null,that.displayFormat=null,that.disabled=!1,that.isDestructed=null;var init=function(){that.destructHandler=that.destruct.bind(that),that.setParams(params),preValidateParams(),that.convertEvents(that.params.events),that.getDataConfig(that.params.node),validateParams(),render(),setLogic(),setEvents(),that.addToStack(nodes.container),that.params.value?that.set(that.params.value,that.format,!1):that.set(that.params.node.value,that.format,!1),that.triggerEvent("onRender",that.value)},preValidateParams=function(){cm.isNode(that.params.input)&&(that.params.node=that.params.input)},validateParams=function(){cm.isNode(that.params.node)&&(that.params.placeholder=that.params.node.getAttribute("placeholder")||that.params.placeholder,that.params.title=that.params.node.getAttribute("title")||that.params.title,that.params.disabled=that.params.node.disabled||that.params.disabled,that.params.name=that.params.node.getAttribute("name")||that.params.name),"now"===that.params.value&&(that.params.value=new Date),/current/.test(that.params.startYear)&&(that.params.startYear=eval(cm.strReplace(that.params.startYear,{current:(new Date).getFullYear()}))),/current/.test(that.params.endYear)&&(that.params.endYear=eval(cm.strReplace(that.params.endYear,{current:(new Date).getFullYear()}))),that.format=that.params.isDateTime?that.params.dateTimeFormat:that.params.format,that.displayFormat=that.params.isDateTime?that.params.displayDateTimeFormat:that.params.displayFormat,that.disabled=that.params.disabled},render=function(){nodes.container=cm.Node("div",{class:"com__datepicker-input"},nodes.hidden=cm.Node("input",{type:"hidden"}),nodes.target=cm.Node("div",{class:"pt__input has-icon-right"},nodes.input=cm.Node("input",{type:"text"}),nodes.icon=cm.Node("div",{class:that.params.icons.datepicker})),nodes.menuContainer=cm.Node("div",{class:"form"},nodes.calendarContainer=cm.Node("div",{class:"calendar-holder"}))),that.params.showTitleTooltip&&!cm.isEmpty(that.params.title)&&(nodes.container.title=that.params.title),that.params.node.id&&(nodes.container.id=that.params.node.id),that.params.name&&nodes.hidden.setAttribute("name",that.params.name),that.params.showPlaceholder&&!cm.isEmpty(that.params.placeholder)&&nodes.input.setAttribute("placeholder",that.params.placeholder),that.params.showClearButton&&(cm.addClass(nodes.container,"has-clear-button"),nodes.container.appendChild(nodes.clearButton=cm.Node("div",{class:that.params.icons.clear,title:that.lang("Clear date")}))),that.params.showTodayButton&&nodes.menuContainer.appendChild(nodes.todayButton=cm.Node("div",{class:"button today is-wide"},that.lang(that.params.isDateTime?"Now":"Today"))),that.params.isDateTime&&(nodes.timeHolder=cm.Node("div",{class:"time-holder"},cm.Node("dl",{class:"form-box"},cm.Node("dt",that.lang("Time")),nodes.timeContainer=cm.Node("dd"))),cm.insertAfter(nodes.timeHolder,nodes.calendarContainer)),that.embedStructure(nodes.container)},setLogic=function(){cm.addEvent(nodes.input,"keypress",inputKeypressHandler),cm.addEvent(nodes.input,"keyup",inputKeyHandler),that.params.showClearButton&&cm.addEvent(nodes.clearButton,"click",function(){that.clear(),components.menu.hide(!1)}),that.params.showTodayButton&&cm.addEvent(nodes.todayButton,"click",function(){that.set(new Date),components.menu.hide(!1)}),components.menu=new Com.Tooltip(cm.merge(that.params["Com.Tooltip"],{container:that.params.renderInBody?document.body:nodes.container,content:nodes.menuContainer,target:nodes.target,events:{onShowStart:onShow,onHideStart:onHide}})),components.calendar=new Com.Calendar({node:nodes.calendarContainer,renderSelectsInBody:!1,className:"com__datepicker-calendar",startYear:that.params.startYear,endYear:that.params.endYear,startWeekDay:that.params.startWeekDay,langs:that.params.langs,renderMonthOnInit:!1,events:{onMonthRender:function(){that.date&&components.calendar.selectDay(that.date)},onDayClick:function(e,t){setDate(null,null,t.day),components.calendar.unSelectDay(that.previousDate),components.calendar.selectDay(that.date),set(!0),that.params.isDateTime||components.menu.hide(!1)}}}),that.params.isDateTime&&(components.time=new Com.TimeSelect({container:nodes.timeContainer,renderSelectsInBody:!1,minutesInterval:that.params.minutesInterval}),components.time.addEvent("onChange",function(){setDate(),components.calendar.set(that.date.getFullYear(),that.date.getMonth(),!1),components.calendar.selectDay(that.date),set(!0)})),that.disabled?that.disable():that.enable()},inputKeypressHandler=function(e){cm.isKey(e,"enter")&&cm.preventDefault(e)},inputKeyHandler=function(e){var t=nodes.input.value;cm.isKey(e,"enter")&&(cm.preventDefault(e),validateInputValue(),components.menu.hide(!1)),cm.isKey(e,"delete")&&cm.isEmpty(t)&&that.clear(!0)},setEvents=function(){that.params.customEvents&&cm.customEvent.add(nodes.container,"destruct",that.destructHandler)},unsetEvents=function(){that.params.customEvents&&cm.customEvent.remove(nodes.container,"destruct",that.destructHandler)},onShow=function(){renderCalendarMonth(),cm.addClass(nodes.container,"active"),that.triggerEvent("onFocus",that.value)},onHide=function(){setInputValues(),nodes.input.blur(),cm.removeClass(nodes.container,"active"),that.triggerEvent("onBlur",that.value)},validateInputValue=function(){var e=nodes.input.value,t=new Date(e);cm.isEmpty(e)||!cm.isDateValid(t)?that.clear(!0):that.set(t,null,!0)},set=function(e){that.previousValue=that.value,that.date?(setDate(),that.value=cm.dateFormat(that.date,that.format,that.lang())):that.value=cm.dateFormat(!1,that.format,that.lang()),setInputValues(),renderCalendarMonth(),e&&(that.triggerEvent("onSelect",that.value),onChange())},setDate=function(e,t,n,a,o,r){that.date?that.previousDate=cm.clone(that.date):(that.date=new Date,that.previousDate=null),e=cm.isUndefined(e)?components.calendar.getFullYear():e,t=cm.isUndefined(t)?components.calendar.getMonth():t,cm.isEmpty(e)||that.date.setFullYear(e),cm.isEmpty(t)||that.date.setMonth(t),cm.isEmpty(n)||that.date.setDate(n),that.params.isDateTime&&(a=cm.isUndefined(a)?components.time.getHours():a,o=cm.isUndefined(o)?components.time.getMinutes():o,r=cm.isUndefined(r)?0:r,cm.isEmpty(a)||that.date.setHours(a),cm.isEmpty(o)||that.date.setMinutes(o),cm.isEmpty(r)||that.date.setSeconds(r))},renderCalendarMonth=function(){that.date&&components.calendar.set(that.date.getFullYear(),that.date.getMonth()),components.calendar.renderMonth()},setInputValues=function(){that.date?(nodes.input.value=cm.dateFormat(that.date,that.displayFormat,that.strings),nodes.hidden.value=that.value):(nodes.input.value="",that.params.setEmptyDateByFormat?nodes.hidden.value=cm.dateFormat(!1,that.format,that.strings):nodes.hidden.value="")},onChange=function(){that.previousValue&&(that.value||!that.previousValue)&&that.value===that.previousValue||that.triggerEvent("onChange",that.value)};that.destruct=function(){return this.isDestructed||(this.isDestructed=!0,cm.customEvent.trigger(nodes.calendarContainer,"destruct",{direction:"child",self:!1}),unsetEvents(),this.removeFromStack()),this},that.get=function(e){return e=cm.isUndefined(e)?that.format:e,that.date||that.params.setEmptyDateByFormat?cm.dateFormat(that.date,e,that.strings):""},that.getDate=function(){return that.date},that.getFullYear=function(){return that.date?that.date.getFullYear():null},that.getMonth=function(){return that.date?that.date.getMonth():null},that.getDay=function(){return that.date?that.date.getDate():null},that.getHours=function(){return that.date?that.date.getHours():null},that.getMinutes=function(){return that.date?that.date.getMinutes():null},that.set=function(e,t,n){t=cm.isUndefined(t)?that.format:t,n=!!cm.isUndefined(n)||n;var a=cm.dateFormat(!1,t,that.lang());return cm.isEmpty(e)||e===a?that.clear():(cm.isDate(e)?that.date=e:that.date=cm.parseDate(e,t),components.calendar.set(that.date.getFullYear(),that.date.getMonth(),!1),that.params.isDateTime&&components.time.set(that.date,null,!1),set(n)),that},that.clear=function(e){return e=!!cm.isUndefined(e)||e,that.date=null,components.calendar.clear(!1),that.params.isDateTime&&components.time.clear(!1),set(!1),e&&(that.triggerEvent("onClear",that.value),onChange()),that},that.disable=function(){return that.disabled=!0,cm.addClass(nodes.container,"disabled"),nodes.input.disabled=!0,components.menu.disable(),that},that.enable=function(){return that.disabled=!1,cm.removeClass(nodes.container,"disabled"),nodes.input.disabled=!1,components.menu.enable(),that},that.getNodes=function(e){return nodes[e]||nodes},init()}),Com.FormFields.add("date-picker",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Datepicker"}),cm.define("Com.DateSelect",{modules:["Params","DataConfig","Langs","Events","Structure","Stack"],events:["onSelect","onChange"],params:{input:null,node:cm.Node("input",{type:"text"}),name:"",embedStructure:"replace",container:null,fields:["year","month","day"],format:"cm._config.dateFormat",startYear:1950,endYear:"current + 10",renderSelectsInBody:!0,fieldSizes:{year:"small",month:"medium",day:"x-small"}},strings:{Day:"Day",Month:"Month",Year:"Year",months:["January","February","March","April","May","June","July","August","September","October","November","December"]}},function(params){var that=this,nodes={},components={},defaultDate={day:"00",month:"00",year:"0000"};that.isDestructed=!1,that.previous=cm.clone(defaultDate),that.selected=cm.clone(defaultDate);var init=function(){that.setParams(params),preValidateParams(),that.convertEvents(that.params.events),that.getDataConfig(that.params.node),validateParams(),render(),that.addToStack(nodes.container),set(that.params.node.value)},preValidateParams=function(){cm.isNode(that.params.input)&&(that.params.node=that.params.input)},validateParams=function(){cm.isNode(that.params.node)&&(that.params.name=that.params.node.getAttribute("name")||that.params.name),"now"===that.params.value&&(that.params.value=new Date),/current/.test(that.params.startYear)&&(that.params.startYear=eval(cm.strReplace(that.params.startYear,{current:(new Date).getFullYear()}))),/current/.test(that.params.endYear)&&(that.params.endYear=eval(cm.strReplace(that.params.endYear,{current:(new Date).getFullYear()})))},render=function(){nodes.container=cm.Node("div",{class:"com__dateselect"},nodes.hidden=cm.Node("input",{type:"hidden"}),cm.Node("div",{class:"pt__toolbar bottom"},cm.Node("div",{class:"inner clear"},nodes.fields=cm.Node("ul",{class:"group"})))),renderFields(),that.params.name&&nodes.hidden.setAttribute("name",that.params.name),that.embedStructure(nodes.container)},renderFields=function(){cm.forEach(that.params.fields,function(e){switch(e){case"year":renderYearField();break;case"month":renderMonthField();break;case"day":renderDayField()}})},renderYearField=function(){nodes.year=cm.Node("li",{class:"is-field"}),cm.addClass(nodes.year,that.params.fieldSizes.year),cm.appendChild(nodes.year,nodes.fields);for(var e=[{value:"0000",text:that.lang("Year")}],t=that.params.endYear;t>=that.params.startYear;t--)e.push({value:t,text:t});components.year=new Com.Select({container:nodes.year,options:e,renderInBody:that.params.renderSelectsInBody,events:{onChange:function(e,t){that.previous=cm.clone(that.selected),that.selected.year=t,setMisc(!0)}}})},renderMonthField=function(){nodes.month=cm.Node("li",{class:"is-field"}),cm.addClass(nodes.month,that.params.fieldSizes.month),cm.appendChild(nodes.month,nodes.fields);var n=[{value:"00",text:that.lang("Month")}];cm.forEach(that.lang("months"),function(e,t){n.push({value:cm.addLeadZero(parseInt(t+1)),text:e})}),components.month=new Com.Select({container:nodes.month,options:n,renderInBody:that.params.renderSelectsInBody,events:{onChange:function(e,t){that.previous=cm.clone(that.selected),that.selected.month=t,setMisc(!0)}}})},renderDayField=function(){nodes.day=cm.Node("li",{class:"is-field"}),cm.addClass(nodes.day,that.params.fieldSizes.day),cm.appendChild(nodes.day,nodes.fields);for(var e=[{value:"00",text:that.lang("Day")}],t=1;t<=31;t++)e.push({value:cm.addLeadZero(t),text:t});components.day=new Com.Select({container:nodes.day,options:e,renderInBody:that.params.renderSelectsInBody,events:{onChange:function(e,t){that.previous=cm.clone(that.selected),that.selected.day=t,setMisc(!0)}}})},set=function(e,t){that.previous=cm.clone(that.selected),e&&e!=toStr(defaultDate)?e instanceof Date?that.selected=fromStr(cm.parseDate(e)):that.selected=fromStr(e):that.selected=cm.clone(defaultDate),components.day&&components.day.set(that.selected.day,!1),components.month&&components.month.set(that.selected.month,!1),components.year&&components.year.set(that.selected.year,!1),setMisc(t)},setMisc=function(e){nodes.hidden.value=toStr(that.selected),e&&(that.triggerEvent("onSelect",toStr(that.selected)),toStr(that.selected)!=toStr(that.previous)&&that.triggerEvent("onChange",toStr(that.selected)))},fromStr=function(n,a){var t={},e={YYYY:function(e){t.year=e},mm:function(e){t.month=e},dd:function(e){t.day=e}},o=0;return a=a||that.params.format,cm.forEach({"%Y":"YYYY","%m":"mm","%d":"dd"},function(e,t){a=a.replace(t,e)}),cm.forEach(e,function(e,t){for(o=a.indexOf(t);-1!=o;)e(n.substr(o,t.length)),o=a.indexOf(t,o+1)}),t},toStr=function(e,t){var n,a=t||that.params.format;return cm.forEach((n=e,{"%Y":function(){return n.year},"%m":function(){return n.month},"%d":function(){return n.day}}),function(e,t){a=a.replace(t,e)}),a};that.destruct=function(){return this.isDestructed||(this.isDestructed=!0,this.removeFromStack()),this},that.get=function(e){return e=e||that.params.format,toStr(that.selected,e)},that.getDate=function(){return that.selected},that.set=function(e){return set(e,!0),that},init()}),Com.FormFields.add("date-select",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.DateSelect"}),cm.define("Com.FileInput",{extend:"Com.AbstractInput",params:{controllerEvents:!0,embedStructure:"replace",className:"com__file-input",size:"full",hiddenType:"textarea",file:null,showLink:!0,showFilename:!0,autoOpen:!1,placeholder:null,formData:!1,local:!0,fileManager:!1,fileManagerConstructor:"Com.AbstractFileManagerContainer",fileManagerParams:{params:{max:1}},fileUploader:!1,fileUploaderConstructor:"Com.FileUploaderContainer",fileUploaderParams:{params:{max:1}},dropzone:!0,dropzoneConstructor:"Com.FileDropzone",dropzoneParams:{embedStructure:"append",max:1,rollover:!0},"Com.FileReader":{}},strings:{browse:"Browse",browse_local:"Browse Local",browse_filemanager:"Browse File Manager",remove:"Remove",open:"Open"}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.FileInput",function(e,t,n,a){n.construct=function(){this.browseActionHandler=this.browseAction.bind(this),this.processFilesHandler=this.processFiles.bind(this),a.prototype.construct.apply(this,arguments)},n.onInitComponentsStart=function(){var t=this;cm.getConstructor("Com.FileReader",function(e){t.components.validator=new e})},n.onValidateParamsEnd=function(){var e=this;e.setLangs({_browse_local:e.params.fileManager?e.lang("browse_local"):e.lang("browse"),_browse_filemanager:e.params.local?e.lang("browse_filemanager"):e.lang("browse")}),e.params.dropzone=!!e.params.local&&e.params.dropzone,e.params.fileUploaderParams.openOnConstruct=e.params.autoOpen,e.params.fileUploaderParams.params.local=e.params.local,e.params.fileUploaderParams.params.fileManager=e.params.fileManager,e.params.local=!e.params.fileUploader&&e.params.local,e.params.fileManagerParams.openOnConstruct=e.params.autoOpen,e.params.fileManager=!e.params.fileUploader&&e.params.fileManager},n.onReset=function(){this.releaseFileURL()},n.onDestruct=function(){this.releaseFileURL()},n.renderViewModel=function(){var n=this;return a.prototype.renderViewModel.apply(n,arguments),cm.getConstructor("Com.FileReader",function(e,t){n.components.reader=new e(n.params[t]),n.components.reader.addEvent("onReadSuccess",function(e,t){n.set(t,!0)})}),n.params.dropzone&&cm.getConstructor(n.params.dropzoneConstructor,function(e){n.components.dropzone=new e(cm.merge(n.params.dropzoneParams,{container:n.nodes.content.inner,target:n.nodes.content.content})),n.components.dropzone.addEvent("onDrop",function(e,t){n.processFiles(t)})}),n.params.fileManager&&cm.getConstructor(n.params.fileManagerConstructor,function(e){n.components.fileManager=new e(cm.merge(n.params.fileManagerParams,{node:n.nodes.content.browseFileManager})),n.components.fileManager.addEvent("onComplete",function(e,t){n.processFiles(t)})}),n.params.fileUploader&&cm.getConstructor(n.params.fileUploaderConstructor,function(e){n.components.fileUploader=new e(cm.merge(n.params.fileUploaderParams,{node:n.nodes.content.browseFileUploader})),n.components.fileUploader.addEvent("onComplete",function(e,t){n.processFiles(t)})}),n},n.renderContent=function(){var e=this,t={};return e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"com__file-input__content"},t.inner=cm.node("div",{class:"inner"},t.content=cm.node("div",{class:"com__file-input__holder"},cm.node("div",{class:"pt__file-line"},t.buttonsInner=cm.node("div",{class:"inner"},t.clear=cm.node("button",{type:"button",class:"button button-primary"},e.lang("remove")),t.label=cm.node("div",{class:"label"}),t.placeholder=cm.node("div",{class:"label label-placeholder",innerHTML:e.params.placeholder})))))),e.params.local&&(t.browseLocal=cm.node("div",{class:"browse-button"},cm.node("button",{type:"button",class:"button button-primary"},e.lang("_browse_local")),cm.node("div",{class:"inner"},t.input=cm.node("input",{type:"file"}))),cm.addEvent(t.input,"change",e.browseActionHandler),cm.insertFirst(t.browseLocal,t.buttonsInner)),e.params.fileManager&&(t.browseFileManager=cm.node("button",{type:"button",class:"button button-primary"},e.lang("_browse_filemanager")),cm.insertFirst(t.browseFileManager,t.buttonsInner)),e.params.fileUploader&&(t.browseFileUploader=cm.node("button",{type:"button",class:"button button-primary"},e.lang("browse")),cm.insertFirst(t.browseFileUploader,t.buttonsInner)),e.triggerEvent("onRenderContentProcess"),cm.addEvent(t.clear,"click",e.clearEventHandler),e.triggerEvent("onRenderContentEnd"),t.container},n.browseAction=function(e){var t=e.target.files[0];return cm.preventDefault(e),this.processFiles(t),this},n.processFiles=function(e){var t=this;return cm.isFile(e)?t.components.reader.read(e):cm.isArray(e)?cm.forEach(e,function(e){t.processFiles(e)}):cm.isEmpty(e)||t.set(e,!0),t},n.releaseFileURL=function(){cm.isEmpty(this.value)||cm.isEmpty(this.value.url)||window.URL.revokeObjectURL(this.value.url)},n.get=function(){var e=this.params.formData?this.value.file||this.value.value||this.value.value||"":this.value||"";return e},n.validateValue=function(e){var t=this.components.validator.validate(e);return cm.isEmpty(t.value)&&cm.isEmpty(t.file)?"":t},n.setData=function(){var e=this;return cm.isEmpty(e.value)?(cm.isEmpty(e.params.placeholder)?cm.addClass(e.nodes.content.placeholder,"is-hidden"):cm.removeClass(e.nodes.content.placeholder,"is-hidden"),cm.clearNode(e.nodes.content.label),cm.addClass(e.nodes.content.label,"is-hidden"),cm.removeClass(e.nodes.content.browseLocal,"is-hidden"),cm.removeClass(e.nodes.content.browseFileManager,"is-hidden"),cm.removeClass(e.nodes.content.browseFileUploader,"is-hidden"),cm.addClass(e.nodes.content.clear,"is-hidden")):(cm.addClass(e.nodes.content.placeholder,"is-hidden"),cm.clearNode(e.nodes.content.label),e.params.showFilename&&(e.params.showLink?e.nodes.content.link=cm.node("a",{target:"_blank",href:e.value.url,title:e.lang("open")},e.value.name):e.nodes.content.link=cm.textNode(e.value.name),cm.appendChild(e.nodes.content.link,e.nodes.content.label)),cm.addClass(e.nodes.content.browseLocal,"is-hidden"),cm.addClass(e.nodes.content.browseFileManager,"is-hidden"),cm.addClass(e.nodes.content.browseFileUploader,"is-hidden"),cm.removeClass(e.nodes.content.clear,"is-hidden"),cm.removeClass(e.nodes.content.label,"is-hidden")),e},n.browse=function(){return this.params.local&&this.nodes.content.input.click(),this}}),Com.FormFields.add("file",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.FileInput"}),cm.define("Com.HiddenStoreField",{extend:"Com.AbstractInputContainer",params:{constructor:"Com.AbstractInput",storeRaw:!1,triggerName:null}},function(e){Com.AbstractInputContainer.apply(this,arguments)}),cm.getConstructor("Com.HiddenStoreField",function(e,t,n,a){n.onConstructStart=function(){this.processDataHandler=this.processData.bind(this)},n.onRenderController=function(){var e=this.components.form.getField(this.params.triggerName);e&&(this.components.trigger=e.controller,this.components.trigger.addEvent("onChange",this.processDataHandler),this.components.trigger.addEvent("onReset",this.resetHandler))},n.processData=function(){var e=this.params.storeRaw?this.components.trigger.getRaw():this.components.trigger.get();this.set(e)}}),Com.FormFields.add("hidden-store",{node:cm.node("input",{type:"hidden"}),visible:!1,fieldConstructor:"Com.AbstractFormField",constructor:"Com.HiddenStoreField"}),cm.define("Com.ImageInput",{extend:"Com.FileInput",params:{hiddenType:"textarea",className:"com__image-input",size:"default",aspect:!1,types:{video:/video\/(mp4|webm|ogg|avi)/},preview:!0,previewConstructor:"Com.ImagePreviewContainer",previewParams:{}},strings:{preview:"Preview"}},function(e){Com.FileInput.apply(this,arguments)}),cm.getConstructor("Com.ImageInput",function(e,t,n,a){n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),t.params.preview&&cm.getConstructor(t.params.previewConstructor,function(e){t.components.preview=new e(cm.merge(t.params.previewParams,{node:t.nodes.content.preview}))})},n.renderContent=function(){var e={};return this.nodes.content=e,this.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"com__image-input__content"},e.inner=cm.node("div",{class:"inner"},e.content=cm.node("div",{class:"input__holder"},cm.node("div",{class:"input__cover"},e.label=cm.node("div",{class:"input__label"}),e.buttonsInner=cm.node("div",{class:"input__buttons"},e.clear=cm.node("div",{class:"cm__button-wrapper"},cm.node("button",{type:"button",class:"button button-danger"},cm.node("span",this.lang("remove")))))),e.imageContainer=cm.node("div",{class:"pt__image is-cover"},cm.node("div",{class:"inner"},e.image=cm.node("div",{class:"descr"})))))),this.params.aspect&&(cm.addClass(e.imageContainer,"is-background has-aspect"),cm.addClass(e.imageContainer,["cm__aspect",this.params.aspect].join("-"))),this.renderButtons(),this.triggerEvent("onRenderContentProcess"),cm.addEvent(e.clear,"click",this.clearEventHandler),this.triggerEvent("onRenderContentEnd"),e.container},n.renderButtons=function(){var e=this;return e.params.preview&&(e.nodes.content.preview=cm.node("div",{class:"cm__button-wrapper"},cm.node("button",{type:"button",class:"button button-primary"},cm.node("span",e.lang("preview")))),cm.insertFirst(e.nodes.content.preview,e.nodes.content.buttonsInner)),e.params.local&&(e.nodes.content.browseLocal=cm.node("div",{class:"browse-button"},cm.node("button",{type:"button",class:"button button-primary"},cm.node("span",e.lang("_browse_local"))),cm.node("div",{class:"inner"},e.nodes.content.input=cm.node("input",{type:"file"}))),cm.addEvent(e.nodes.content.input,"change",e.browseActionHandler),cm.insertFirst(e.nodes.content.browseLocal,e.nodes.content.buttonsInner)),e.params.fileManager&&(e.nodes.content.browseFileManager=cm.node("div",{class:"cm__button-wrapper"},cm.node("button",{type:"button",class:"button button-primary"},cm.node("span",e.lang("_browse_filemanager")))),cm.insertFirst(e.nodes.content.browseFileManager,e.nodes.content.buttonsInner)),e.params.fileUploader&&(e.nodes.content.browseFileUploader=cm.node("div",{class:"cm__button-wrapper"},cm.node("button",{type:"button",class:"button button-primary"},cm.node("span",e.lang("browse")))),cm.insertFirst(e.nodes.content.browseFileUploader,e.nodes.content.buttonsInner)),e},n.setData=function(){var e=this;return cm.isEmpty(e.value)?(cm.clearNode(e.nodes.content.label),cm.addClass(e.nodes.content.label,"is-hidden"),cm.addClass(e.nodes.content.clear,"is-hidden")):(cm.clearNode(e.nodes.content.label),e.params.showLink?e.nodes.content.link=cm.node("a",{target:"_blank",href:e.value.url,title:e.lang("open")},e.value.name):e.nodes.content.link=cm.textNode(e.value.name),cm.appendChild(e.nodes.content.link,e.nodes.content.label),cm.removeClass(e.nodes.content.label,"is-hidden"),cm.removeClass(e.nodes.content.clear,"is-hidden")),e.setPreviewData(),e},n.setPreviewData=function(){var e=this;return e.nodes.content.image.style.backgroundImage="",cm.remove(e.nodes.content.video),cm.isEmpty(e.value)?(e.components.preview&&e.components.preview.clear(),cm.addClass(e.nodes.content.preview,"is-hidden"),cm.addClass(e.nodes.content.imageContainer,"is-default-image")):(e.components.preview&&e.components.preview.set(e.value),e.params.types.video.test(e.value.type)?(e.nodes.content.video=cm.node("video",cm.node("source",{src:e.value.url})),e.nodes.content.video.muted=!0,e.nodes.content.video.autoplay=!1,e.nodes.content.video.loop=!0,cm.appendChild(e.nodes.content.video,e.nodes.content.image)):e.nodes.content.image.style.backgroundImage=cm.URLToCSSURL(e.value.url),cm.removeClass(e.nodes.content.preview,"is-hidden"),cm.removeClass(e.nodes.content.imageContainer,"is-default-image")),e}}),Com.FormFields.add("image",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.ImageInput"}),cm.define("Com.IndentInput",{extend:"Com.AbstractInput",params:{maxLength:3,units:"px",defaultValue:"",allowCustom:!1,allowNegative:!1,allowFloat:!1}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.IndentInput",function(e,t,n,a){n.construct=function(){this.setValueHandler=this.setValue.bind(this),a.prototype.construct.apply(this,arguments)},n.renderContent=function(){var n=this,e={allowNegative:n.params.allowNegative,allowFloat:n.params.allowFloat},t={};return n.nodes.content=t,n.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"pt__input"},t.input=cm.node("input",{type:"text"})),cm.isEmpty(n.params.placeholder)||(t.input.placeholder=n.params.placeholder),cm.setInputMaxLength(t.input,n.params.maxLength,n.params.max),n.triggerEvent("onRenderContentProcess"),cm.addEvent(t.input,"blur",n.setValueHandler),cm.addEvent(t.input,"keypress",function(e){cm.isKeyCode(e.keyCode,"enter")&&(cm.preventDefault(e),n.setValue(),t.input.blur())}),n.params.allowCustom?cm.addEvent(t.input,"input",function(e){n.selectAction(t.input.value,!0)}):cm.allowOnlyNumbersInputEvent(t.input,function(e,t){n.selectAction(n.validateValue(t),!0)},e),n.triggerEvent("onRenderContentEnd"),t.container},n.validateValue=function(e){return this.rawValue=cm.isEmpty(e)?this.params.defaultValue:e,cm.isEmpty(this.rawValue)||isNaN(this.rawValue)?this.rawValue:this.rawValue+this.params.units},n.setValue=function(e){return e=!!cm.isUndefined(e)||e,this.set(this.rawValue,e),this},n.setData=function(){return this.nodes.content.input.value=this.rawValue,this}}),Com.FormFields.add("indent",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.IndentInput"}),cm.define("Com.Input",{extend:"Com.AbstractInput",events:["onEnterPress","onFocus","onBlur"],params:{controllerEvents:!0,type:"text",lazy:!1,delay:"cm._config.requestDelay",icon:null}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.Input",function(e,t,n,a){n.construct=function(){var e=this;e.selectionStartInitial=null,e.selectionEndInitial=null,e.isFocus=!1,e.lazyDelay=null,e.constraints={},e.focusHandler=e.focus.bind(e),e.blurHandler=e.blur.bind(e),e.inputEventHandler=e.inputEvent.bind(e),e.focusEventHandler=e.focusEvent.bind(e),e.blurEventHandler=e.blurEvent.bind(e),e.setValueHandler=e.setValue.bind(e),e.selectValueHandler=e.selectValue.bind(e),e.lazyValueHandler=e.lazyValue.bind(e),e.inputKeyDownHanlder=e.inputKeyDown.bind(e),e.inputKeyPressHanlder=e.inputKeyPress.bind(e),e.iconEventHanlder=e.iconEvent.bind(e),a.prototype.construct.apply(e,arguments)},n.onEnable=function(){this.nodes.content.input.disabled=!1},n.onDisable=function(){this.nodes.content.input.disabled=!0},n.renderContent=function(){return this.triggerEvent("onRenderContentStart"),this.nodes.content=this.renderContentView(),this.renderContentAttributes(),this.triggerEvent("onRenderContentProcess"),this.renderContentEvents(),this.triggerEvent("onRenderContentEnd"),this.nodes.content.container},n.renderContentView=function(){var e={};return"textarea"===this.params.type?e.container=e.input=cm.node("textarea"):(e.container=cm.node("div",{class:"pt__input"},e.inner=cm.node("div",{class:"inner"},e.input=cm.node("input",{type:this.params.type}))),this.params.icon&&(e.icon=cm.node("div",{class:this.params.icon}),cm.appendChild(e.icon,e.inner))),e},n.renderContentAttributes=function(){var e=this;e.nodes.content.input.required=e.params.required,cm.setInputMinLength(e.nodes.content.input,e.params.minLength,e.params.min),cm.setInputMaxLength(e.nodes.content.input,e.params.maxLength,e.params.max),cm.isEmpty(e.params.id)||e.nodes.content.input.setAttribute("id",e.params.id),cm.isEmpty(e.params.placeholder)||(e.nodes.content.input.placeholder=e.params.placeholder,e.nodes.content.icon&&(e.nodes.content.icon.title=e.params.placeholder)),cm.isEmpty(e.params.autocomplete)||e.nodes.content.input.setAttribute("autocomplete",e.params.autocomplete),cm.isEmpty(e.params.title)||(e.nodes.content.input.title=e.params.title,e.nodes.content.icon&&(e.nodes.content.icon.title=e.params.title)),cm.isEmpty(e.params.ariaLabel)||e.nodes.content.input.setAttribute("aria-label",e.params.ariaLabel),e.params.renderName&&(e.nodes.content.input.name=e.params.visibleName||e.params.name)},n.renderContentEvents=function(){var e=this;cm.addEvent(e.nodes.content.input,"input",e.inputEventHandler),cm.addEvent(e.nodes.content.input,"focus",e.focusEventHandler),cm.addEvent(e.nodes.content.input,"blur",e.blurEventHandler),cm.addEvent(e.nodes.content.input,"change",e.setValueHandler),cm.addEvent(e.nodes.content.input,"keydown",e.inputKeyDownHanlder),cm.addEvent(e.nodes.content.input,"keypress",e.inputKeyPressHanlder),cm.addEvent(e.nodes.content.icon,"click",e.iconEventHanlder)},n.inputKeyDown=function(e){this.selectionStartInitial=this.nodes.content.input.selectionStart,this.selectionEndInitial=this.nodes.content.input.selectionStart},n.inputKeyPress=function(e){"textarea"!==this.params.type&&cm.isKeyCode(e.keyCode,"enter")&&(cm.preventDefault(e),this.setValue(),this.nodes.content.input.blur(),this.triggerEvent("onEnterPress",this.value))},n.inputEvent=function(){this.execConstraint("onInput",!1),this.selectValue(!0),this.params.lazy&&this.lazyValue(!0)},n.focusEvent=function(){this.isFocus=!0,this.execConstraint("onFocus",!1),this.triggerEvent("onFocus",this.value)},n.blurEvent=function(){this.isFocus=!1,this.execConstraint("onBlur",!1),this.setValue(!0),this.triggerEvent("onBlur",this.value)},n.iconEvent=function(e){var t=this.nodes.content.input.value;cm.preventDefault(e),this.nodes.content.input.setSelectionRange(0,t.length),this.focus()},n.addConstraint=function(e,t){return cm.isFunction(t)&&(this.constraints[e]=t),this},n.removeConstraint=function(e,t){return this.constraints[e]=null,this},n.execConstraint=function(e,t){var n,a,o,r=this;if(t=!!cm.isUndefined(t)||t,cm.isFunction(r.constraints[e])&&(n=r.nodes.content.input.selectionStart,a=r.nodes.content.input.value,o=r.constraints[e](a),r.nodes.content.input.value=r.constraints[e](a),-1<a.indexOf(o)||a===o?r.nodes.content.input.setSelectionRange(n,n):r.nodes.content.input.setSelectionRange(r.selectionStartInitial,r.selectionStartInitial),t))switch(e){case"onInput":r.selectValue(!0);break;case"onChange":r.setValue(!0)}return r},n.lazyValue=function(e){var t=this;e=!!cm.isUndefined(e)||e,t.lazyDelay&&clearTimeout(t.lazyDelay),t.lazyDelay=setTimeout(function(){e&&t.setValue(!0)},t.params.delay)},n.setValue=function(e){var t=this.nodes.content.input.value;return e=!!cm.isUndefined(e)||e,this.set(t,e),this},n.selectValue=function(e){var t=this.nodes.content.input.value;return e=!!cm.isUndefined(e)||e,this.selectAction(t,e),this},n.setData=function(e){return this.nodes.content.input.value=cm.isUndefined(e)?this.value:e,this},n.focus=function(){return this.nodes.content.input.focus(),this},n.blur=function(){return this.nodes.content.input.blur(),this}}),Com.FormFields.add("input",{node:cm.node("input",{type:"text"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"text"}}),Com.FormFields.add("textarea",{node:cm.node("textarea"),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"textarea"}}),Com.FormFields.add("password",{node:cm.node("input",{type:"password"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"password"}}),Com.FormFields.add("email",{node:cm.node("input",{type:"email"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"email"}}),Com.FormFields.add("phone",{node:cm.node("input",{type:"phone"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"phone"}}),Com.FormFields.add("number",{node:cm.node("input",{type:"number"}),value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"number"}}),Com.FormFields.add("hidden",{node:cm.node("input",{type:"hidden"}),visible:!1,value:"",defaultValue:"",fieldConstructor:"Com.AbstractFormField",constructor:"Com.Input",constructorParams:{type:"hidden"}}),cm.define("Com.InputTrigger",{extend:"Com.AbstractController",events:["onChange","onInput","onClick"],params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,type:"radio",triggerDefault:!1}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.InputTrigger",function(e,t,n){n._inherit;n.onConstructStart=function(){var e=this;e.inputs=[],e.changeHandler=e.change.bind(e),e.inputHandler=e.input.bind(e),e.clickHandler=e.click.bind(e)},n.renderViewModel=function(){var t=this;t.inputs=cm.getByAttr("type",t.params.type,t.params.node),cm.forEach(t.inputs,function(e){cm.addEvent(e,"input",t.inputHandler),cm.addEvent(e,"change",t.changeHandler),cm.addEvent(e,"click",t.clickHandler),t.params.triggerDefault&&cm.triggerEvent(e,"change")})},n.change=function(e){var t=cm.getEventTarget(e),n=t.value,a=/radio|checkbox/.test(t.type);return(!a||a&&t.checked)&&this.triggerEvent("onChange",t,n),this},n.input=function(e){var t=cm.getEventTarget(e),n=t.value;return this.triggerEvent("onInput",t,n),this},n.click=function(e){var t=cm.getEventTarget(e),n=t.value;return this.triggerEvent("onClick",t,n),this}}),cm.define("Com.IntegerInput",{extend:"Com.AbstractInput",params:{controllerEvents:!0,maxLength:3,max:0,defaultValue:0,allowNegative:!1,allowFloat:!1}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.IntegerInput",function(e,t,n,a){n.construct=function(){this.setValueHandler=this.setValue.bind(this),a.prototype.construct.apply(this,arguments)},n.onValidateParams=function(){cm.isNode(this.params.node)&&(this.params.type=this.params.node.getAttribute("type")||this.params.max,this.params.max=this.params.node.getAttribute("max")||this.params.max)},n.renderContent=function(){var n=this,e={allowNegative:n.params.allowNegative,allowFloat:n.params.allowFloat},t={};return n.nodes.content=t,n.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"pt__input"},t.input=cm.node("input",{type:n.params.type})),cm.setInputMaxLength(t.input,n.params.maxLength,n.params.max),n.triggerEvent("onRenderContentProcess"),cm.addEvent(t.input,"blur",n.setValueHandler),cm.addEvent(t.input,"keypress",function(e){cm.isKeyCode(e.keyCode,"enter")&&(cm.preventDefault(e),n.setValue(),t.input.blur())}),cm.allowOnlyNumbersInputEvent(t.input,function(e,t){n.selectAction(n.validateValue(t),!0)},e),n.triggerEvent("onRenderContentEnd"),t.container},n.validateValue=function(e){return e=cm.isEmpty(e)?this.params.defaultValue:e,e=parseFloat(e),this.rawValue=isNaN(e)?"":e,this.rawValue},n.setValue=function(e){return e=!!cm.isUndefined(e)||e,this.set(this.rawValue,e),this},n.setData=function(){return this.nodes.content.input.value=this.rawValue,this}}),Com.FormFields.add("integer",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.IntegerInput"}),cm.define("Com.MultipleAutocomplete",{extend:"Com.MultipleInput",params:{embedStructure:"replace",className:"com__multiple-autocomplete",sortable:!1,showToolbar:!1,showControls:!0,focusInput:!0,inputConstructor:"Com.Autocomplete"}},function(e){Com.MultipleInput.apply(this,arguments)}),Com.FormFields.add("multi-autocomplete",{node:cm.node("div"),fieldConstructor:"Com.AbstractFormField",constructor:"Com.MultipleAutocomplete"}),cm.define("Com.MultipleFileInput",{extend:"Com.MultipleInput",params:{embedStructure:"replace",className:"com__multiple-file-input",local:!0,sortable:!1,showToolbar:!0,showControls:!1,showList:!0,focusInput:!1,buttonsAlign:"left",inputConstructor:"Com.FileInput",inputParams:{embedStructure:"replace",dropzone:!1},fileManager:!1,fileManagerConstructor:"Com.AbstractFileManagerContainer",fileManagerParams:{params:{}},fileUploader:!1,fileUploaderConstructor:"Com.FileUploaderContainer",fileUploaderParams:{params:{}},dropzone:!0,dropzoneConstructor:"Com.FileDropzone",dropzoneParams:{embedStructure:"append",rollover:!0},"Com.FileReader":{}},strings:{browse:"Browse",browse_local:"Browse Local",browse_filemanager:"Browse File Manager"}},function(e){this.myComponents={},this.dragInterval=null,this.isDropzoneShow=!1,this.hasButtons=!1,Com.MultipleInput.apply(this,arguments)}),cm.getConstructor("Com.MultipleFileInput",function(e,t,n){var a=n._inherit;n.construct=function(){var e=this;return e.validateParamsEndHandler=e.validateParamsEnd.bind(e),e.itemAddProcessHandler=e.itemAddProcess.bind(e),e.browseActionHandler=e.browseAction.bind(e),e.processFilesHandler=e.processFiles.bind(e),e.addEvent("onValidateParamsEnd",e.validateParamsEndHandler),e.addEvent("onItemAddProcess",e.itemAddProcessHandler),a.prototype.construct.apply(e,arguments),e},n.clear=function(){return this.params.showToolbar&&cm.removeClass(this.nodes.toolbar.browseHolder,"is-hidden"),a.prototype.clear.apply(this,arguments),this},n.validateParamsEnd=function(){var e=this;return e.isMultiple=!e.params.max||1<e.params.max,e.setLangs({_browse_local:e.params.fileManager?e.lang("browse_local"):e.lang("browse"),_browse_filemanager:e.params.local?e.lang("browse_filemanager"):e.lang("browse")}),e.params.dropzoneParams.max=e.params.max,e.params.fileManagerParams.params.max=e.params.max,e.params.fileUploaderParams.params.max=e.params.max,e.params.fileUploaderParams.params.local=e.params.local,e.params.fileUploaderParams.params.fileManager=e.params.fileManager,e.params.dropzone=!!e.params.local&&e.params.dropzone,e.params.local=!e.params.fileUploader&&e.params.local,e.params.fileManager=!e.params.fileUploader&&e.params.fileManager,e.hasButtons=e.params.local||e.params.fileManager||e.params.fileUploader,e},n.renderViewModel=function(){var n=this;return a.prototype.renderViewModel.apply(n,arguments),cm.getConstructor("Com.FileReader",function(e,t){n.myComponents.reader=new e(n.params[t]),n.myComponents.reader.addEvent("onReadSuccess",function(e,t){n.addItem({value:t},!0)})}),n.params.dropzone&&cm.getConstructor(n.params.dropzoneConstructor,function(e){n.myComponents.dropzone=new e(cm.merge(n.params.dropzoneParams,{container:n.nodes.inner,target:n.nodes.holder})),n.myComponents.dropzone.addEvent("onDrop",function(e,t){n.processFiles(t)})}),n.params.showToolbar&&n.params.fileManager&&cm.getConstructor(n.params.fileManagerConstructor,function(e){n.myComponents.fileManager=new e(cm.merge(n.params.fileManagerParams,{node:n.nodes.toolbar.browseFileManager})),n.myComponents.fileManager.addEvent("onComplete",function(e,t){n.processFiles(t)})}),n.params.showToolbar&&n.params.fileUploader&&cm.getConstructor(n.params.fileUploaderConstructor,function(e){n.myComponents.fileUploader=new e(cm.merge(n.params.fileUploaderParams,{node:n.nodes.toolbar.browseFileUploader})),n.myComponents.fileUploader.addEvent("onComplete",function(e,t){n.processFiles(t)})}),n},n.renderToolbarView=function(){var e=this,t={};return t.container=cm.node("div",{class:"com__multiple-input__toolbar"},t.content=cm.node("div",{class:"pt__buttons"},t.contentInner=cm.node("div",{class:"inner"}))),cm.addClass(t.content,["pull",e.params.buttonsAlign].join("-")),e.params.local&&(t.browseLocal=cm.node("div",{class:"browse-button"},cm.node("button",{type:"button",class:"button button-primary"},e.lang("_browse_local")),cm.node("div",{class:"inner"},t.input=cm.node("input",{type:"file"}))),e.isMultiple&&t.input.setAttribute("multiple","multiple"),cm.insertFirst(t.browseLocal,t.contentInner)),e.params.fileManager&&(t.browseFileManager=cm.node("button",{type:"button",class:"button button-primary"},e.lang("_browse_filemanager")),cm.insertFirst(t.browseFileManager,t.contentInner)),e.params.fileUploader&&(t.browseFileUploader=cm.node("button",{type:"button",class:"button button-primary"},e.lang("browse")),cm.insertFirst(t.browseFileUploader,t.contentInner)),e.hasButtons||cm.addClass(t.container,"is-hidden"),cm.addEvent(t.input,"change",e.browseActionHandler),(e.nodes.toolbar=t).container},n.itemAddProcess=function(e,t){var n=this;return t.controller.addEvent("onClear",function(){n.removeItem(t)}),n},n.browseAction=function(t){var n=this,e=n.params.max?Math.min(t.target.files.length,n.params.max-n.items.length):t.target.files.length;return cm.forEach(e,function(e){n.processFiles(t.target.files[e])}),n},n.processFiles=function(e){var t=this;return cm.isFile(e)?t.myComponents.reader.read(e):cm.isArray(e)?cm.forEach(e,function(e){t.processFiles(e)}):cm.isEmpty(e)||t.addItem({value:e},!0),t},n.browse=function(){return this.params.local&&this.nodes.toolbar.input.click(),this}}),Com.FormFields.add("multi-file-input",{node:cm.node("div"),fieldConstructor:"Com.AbstractFormField",constructor:"Com.MultipleFileInput"}),cm.define("Com.OpacityRange",{extend:"Com.AbstractRange",params:{className:"com__range",theme:"theme--arrows",min:100,max:0,value:100,color:"red"}},function(e){Com.AbstractRange.apply(this,arguments)}),cm.getConstructor("Com.OpacityRange",function(e,t,n){n._inherit;n.onConstructEnd=function(){this.setColor(this.params.color)},n.renderRangeContent=function(){var e={};return(this.nodes.rangeContent=e).container=cm.node("div",{class:"com__opacity-range__content"},e.inner=cm.node("div",{class:"inner range-helper"})),e.container},n.setColor=function(e){switch(this.params.direction){case"horizontal":this.nodes.rangeContent.inner.style.background="linear-gradient(to right, "+e+", rgba(255,255,255,0))";break;case"vertical":this.nodes.rangeContent.inner.style.background="linear-gradient(to bottom, "+e+", rgba(255,255,255,0))"}}}),Com.FormFields.add("opacity-range",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.OpacityRange"}),cm.define("Com.PositionTools",{extend:"Com.AbstractInput",params:{controllerEvents:!0,className:"com__position-tools",defaultValue:"center center",fieldSize:"medium",options:[{name:"left top",icon:"svg__position-topleft",iconActive:"svg__position-topleft--light"},{name:"center top",icon:"svg__position-topcenter",iconActive:"svg__position-topcenter--light"},{name:"right top",icon:"svg__position-topright",iconActive:"svg__position-topright--light"},{name:"left center",icon:"svg__position-middleleft",iconActive:"svg__position-middleleft--light"},{name:"center center",icon:"svg__position-middlecenter",iconActive:"svg__position-middlecenter--light"},{name:"right center",icon:"svg__position-middleright",iconActive:"svg__position-middleright--light"},{name:"left bottom",icon:"svg__position-bottomleft",iconActive:"svg__position-bottomleft--light"},{name:"center bottom",icon:"svg__position-bottomcenter",iconActive:"svg__position-bottomcenter--light"},{name:"right bottom",icon:"svg__position-bottomright",iconActive:"svg__position-bottomright--light"}]}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.PositionTools",function(e,t,n){var a=n._inherit;n.onConstructStart=function(){return this.options={},this},n.set=function(){return a.prototype.set.apply(this,arguments),this.setOption(),this},n.renderContent=function(){var t=this,e={};return t.nodes.content=e,t.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"com__position-tools__content"},e.inner=cm.node("div",{class:"inner"})),cm.addClass(e.container,["size",t.params.fieldSize].join("-")),cm.forEach(t.params.options,function(e){t.renderOption(e)}),t.triggerEvent("onRenderContentProcess"),t.triggerEvent("onRenderContentEnd"),e.container},n.renderOption=function(e){var t=this;return(e=cm.merge({iconType:"icon",icon:"",iconActive:"",name:"",nodes:{}},e)).nodes.container=cm.node("div",{class:"option__item"},e.nodes.icon=cm.node("div",{class:[e.iconType,e.icon].join(" ")})),cm.appendChild(e.nodes.container,t.nodes.content.inner),cm.addEvent(e.nodes.container,"click",function(){t.disabled||t.set(e.name)}),t.options[e.name]=e,t},n.setOption=function(){var e;this.options[this.previousValue]&&(e=this.options[this.previousValue],cm.removeClass(e.nodes.container,"active"),cm.replaceClass(e.nodes.icon,e.iconActive,e.icon)),this.options[this.value]&&(e=this.options[this.value],cm.addClass(e.nodes.container,"active"),cm.replaceClass(e.nodes.icon,e.icon,e.iconActive))}}),cm.define("Com.Range",{extend:"Com.AbstractRange",params:{className:"com__range",theme:"theme--default",min:0,max:100,value:0}},function(e){Com.AbstractRange.apply(this,arguments)}),cm.getConstructor("Com.Range",function(e,t,n,a){n.renderRangeContent=function(){var e={};return(this.nodes.rangeContent=e).container=cm.node("div",{class:"com__range__field"},e.bar=cm.node("div",{class:"bar"},e.range=cm.node("div",{class:"range"})),cm.node("div",{class:"min"},this.params.min),cm.node("div",{class:"max"},this.params.max)),e.container},n.setBarRange=function(){var e=cm.clone(this.tempRawValue);this.params.range||e.push(this.params.min),(e=cm.arraySort(e,!1,"desc"))[0]=this.getBarRangeValuePosition(e[0]),e[1]=this.getBarRangeValuePosition(e[1]),this.nodes.rangeContent.range.style.left=e[0]+"px",this.nodes.rangeContent.range.style.width=e[1]-e[0]+"px"},n.getBarRangeValuePosition=function(e){var t,n=cm.getFullRect(this.nodes.rangeContent.bar),a=e-this.params.min,o=this.params.max-this.params.min;switch(this.params.direction){case"horizontal":t=n.absoluteWidth/o*a,e=Math.round(t);break;case"vertical":t=n.absoluteHeight/o*a,e=Math.round(t)}return e},n.selectData=function(){this.setBarRange()},n.setData=function(){a.prototype.setData.apply(this,arguments),this.setBarRange()}}),Com.FormFields.add("range",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Range"}),cm.define("Com.RepeatTools",{extend:"Com.AbstractInput",params:{className:"com__repeat-tools",defaultValue:"no-repeat",fieldStyle:"row",options:[{name:"no-repeat",icon:"svg__repeat-no"},{name:"repeat-x",icon:"svg__repeat-horizontal"},{name:"repeat-y",icon:"svg__repeat-vertical"},{name:"repeat",icon:"svg__repeat-both"}]},strings:{"no-repeat":"No","repeat-x":"Horizontally","repeat-y":"Vertically",repeat:"Both"}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.RepeatTools",function(e,t,n){var a=n._inherit;n.construct=function(){return this.options={},a.prototype.construct.apply(this,arguments),this},n.set=function(){return a.prototype.set.apply(this,arguments),this.setOption(),this},n.renderContent=function(){var t=this,e={};return t.nodes.content=e,t.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"com__repeat-tools__content"},e.inner=cm.node("div",{class:"inner"})),cm.addClass(e.container,["style",t.params.fieldStyle].join("-")),cm.forEach(t.params.options,function(e){t.renderOption(e)}),t.triggerEvent("onRenderContentProcess"),t.triggerEvent("onRenderContentEnd"),e.container},n.renderOption=function(e){var t=this;return(e=cm.merge({iconType:"icon",icon:"",name:"",nodes:{}},e)).nodes.container=cm.node("div",{class:"option__item",title:t.lang(e.name)},e.nodes.icon=cm.node("div",{class:[e.iconType,e.icon].join(" ")})),cm.appendChild(e.nodes.container,t.nodes.content.inner),cm.addEvent(e.nodes.container,"click",function(){t.set(e.name)}),t.options[e.name]=e,t},n.setOption=function(){var e;this.options[this.previousValue]&&(e=this.options[this.previousValue],cm.removeClass(e.nodes.container,"is-active")),this.options[this.value]&&(e=this.options[this.value],cm.addClass(e.nodes.container,"is-active"))}}),cm.define("Com.ScaleTools",{extend:"Com.AbstractInput",params:{className:"com__scale-tools",defaultValue:"auto",fieldStyle:"row",options:[{name:"auto",icon:"svg__scale-auto"},{name:"contain",icon:"svg__scale-contain"},{name:"cover",icon:"svg__scale-cover"},{name:"100% 100%",icon:"svg__scale-fill"}]},strings:{auto:"Auto",contain:"Contain",cover:"Cover","100% 100%":"Fill"}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.ScaleTools",function(e,t,n){var a=n._inherit;n.construct=function(){return this.options={},a.prototype.construct.apply(this,arguments),this},n.set=function(){return a.prototype.set.apply(this,arguments),this.setOption(),this},n.renderContent=function(){var t=this,e={};return t.nodes.content=e,t.triggerEvent("onRenderContentStart"),e.container=cm.node("div",{class:"com__scale-tools__content"},e.inner=cm.node("div",{class:"inner"})),cm.addClass(e.container,["style",t.params.fieldStyle].join("-")),cm.forEach(t.params.options,function(e){t.renderOption(e)}),t.triggerEvent("onRenderContentProcess"),t.triggerEvent("onRenderContentEnd"),e.container},n.renderOption=function(e){var t=this;return(e=cm.merge({iconType:"icon",icon:"",name:"",nodes:{}},e)).nodes.container=cm.node("div",{class:"option__item",title:t.lang(e.name)},e.nodes.icon=cm.node("div",{class:[e.iconType,e.icon].join(" ")})),cm.appendChild(e.nodes.container,t.nodes.content.inner),cm.addEvent(e.nodes.container,"click",function(){t.set(e.name)}),t.options[e.name]=e,t},n.setOption=function(){var e;this.options[this.previousValue]&&(e=this.options[this.previousValue],cm.removeClass(e.nodes.container,"is-active")),this.options[this.value]&&(e=this.options[this.value],cm.addClass(e.nodes.container,"is-active"))}}),Com.Elements.Selects={},Com.GetSelect=function(e){return Com.Elements.Selects[e]||null},cm.define("Com.Select",{modules:["Params","Events","Structure","DataConfig","Stack"],events:["onRender","onRenderStart","onSelect","onChange","onReset","onFocus","onBlur"],params:{select:null,node:null,container:null,name:"",embedStructure:"replace",customEvents:!0,renderInBody:!0,multiple:!1,placeholder:"",showTitleTag:!0,title:!1,options:[],selected:0,setInitialValue:!0,value:null,defaultValue:null,disabled:!1,id:"",className:"",inputClassName:"",tabindex:0,icons:{arrow:"icon default linked"},"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,className:"com__select__tooltip",width:"targetWidth",top:cm._config.tooltipDown}}},function(e){var t,r,s=this,i={menu:{}},o={},c={},d=[],l=0,a=[];s.disabled=!1,s.isDestructed=null;var n=function(){cm.isNode(s.params.select)&&(s.params.node=s.params.select)},m=function(){var e;cm.isNode(s.params.node)&&(e=cm.getSelectValue(s.params.node),s.params.value=cm.isEmpty(s.params.selected)?s.params.value:s.params.selected,s.params.value=cm.isEmpty(e)?s.params.value:e,s.params.placeholder=s.params.node.getAttribute("placeholder")||s.params.placeholder,s.params.multiple=s.params.node.multiple,s.params.title=s.params.node.getAttribute("title")||s.params.title,s.params.name=s.params.node.getAttribute("name")||s.params.name,s.params.disabled=s.params.node.disabled||s.params.node.readOnly||s.params.disabled,s.params.className=s.params.node.className||s.params.className,s.params.tabindex=s.params.node.getAttribute("tabindex")||s.params.tabindex,s.params.id=s.params.node.id||s.params.id),s.params.value=cm.isEmpty(s.params.value)?s.params.defaultValue:s.params.value,s.disabled=s.params.disabled},u=function(){(s.params.multiple?h:p)(),cm.addClass(i.container,s.params.className),s.params.showTitleTag&&s.params.title&&(i.container.title=s.params.title),s.params.tabindex&&i.container.setAttribute("tabindex",s.params.tabindex),s.params.id&&(i.container.id=s.params.id),cm.isNode(s.params.node)&&cm.forEach(s.params.node.attributes,function(e){/^data-(?!node|element)/.test(e.name)&&(i.hidden.setAttribute(e.name,e.value),i.container.setAttribute(e.name,e.value))}),s.params.name&&i.hidden.setAttribute("name",s.params.name),cm.isEmpty(s.params.placeholder)||i.items.appendChild(i.placeholder=cm.node("li",{class:"title"},s.params.placeholder)),cm.isNode(s.params.node)&&v(),cm.forEach(s.params.options,function(e){C(e)}),s.embedStructure(i.container)},p=function(){i.container=cm.node("div",{class:"com__select"},i.hidden=cm.node("select",{class:"display-none"}),i.target=cm.node("div",{class:"pt__input"},i.text=cm.node("input",{type:"text",readOnly:"true"}),i.arrow=cm.node("div",{class:s.params.icons.arrow})),i.scroll=cm.node("div",{class:"pt__listing-items"},i.items=cm.node("ul"))),cm.addClass(i.target,s.params.inputClassName)},h=function(){i.container=cm.node("div",{class:"com__select-multi"},i.hidden=cm.node("select",{class:"display-none",multiple:!0}),i.inner=cm.node("div",{class:"inner"},i.scroll=cm.node("div",{class:"pt__listing-items"},i.items=cm.node("ul"))))},g=function(){s.params.multiple||(cm.addEvent(i.container,"keydown",function(e){if(l){var t,n=c[r],a=d.indexOf(n);switch(e.keyCode){case 38:cm.preventDefault(e),t=0<=a-1?d[a-1]:d[l-1];break;case 40:cm.preventDefault(e),t=a+1<l?d[a+1]:d[0];break;case 13:o.menu.hide()}t&&(E(t,!0),R(t))}}),cm.addEvent(i.container,"focus",function(){cm.addEvent(window,"keydown",N)}),cm.addEvent(i.container,"blur",function(){cm.removeEvent(window,"keydown",N)}),o.menu=new Com.Tooltip(cm.merge(s.params["Com.Tooltip"],{container:s.params.renderInBody?document.body:i.container,content:i.scroll,target:i.target,disabled:!l,events:{onShowStart:T,onHideStart:P}})),i.menu=o.menu.getNodes()),s.disabled?s.disable():s.enable()},f=function(){s.params.customEvents&&cm.customEvent.add(i.container,"destruct",s.destructHandler)},v=function(){var e=s.params.node.childNodes;cm.forEach(e,function(e,t){var n,a;cm.isElementNode(e)&&("optgroup"===e.tagName.toLowerCase()?(n=e.querySelectorAll("option"),a=[],cm.forEach(n,function(e){a.push({value:e.value,text:e.innerHTML,className:e.className})}),b(e.getAttribute("label"),a)):"option"===e.tagName.toLowerCase()&&C({value:e.value,text:e.innerHTML,className:e.className}))})},b=function(e,t){var n={name:e,options:t};n.optgroup=cm.node("optgroup",{label:e}),n.container=cm.node("li",{class:"group"},n.items=cm.node("ul",{class:"pt__listing-items"})),cm.isEmpty(e)||cm.insertFirst(cm.node("div",{class:"title",innerHTML:e}),n.container),cm.forEach(t,function(e){C(e,n)}),i.items.appendChild(n.container),i.hidden.appendChild(n.optgroup),a.push(n)},C=function(e,t){return c[e.value]&&y(c[e.value]),(e=cm.merge({hidden:!1,selected:!1,disabled:!1,value:"",text:"",className:"",group:null},e)).group=t,e.node=cm.node("li",{class:e.className},cm.node("a",{innerHTML:e.text,title:e.text})),e.option=cm.node("option",{value:e.value,innerHTML:e.text}),cm.addEvent(e.node,"click",function(){e.disabled||s.disabled||E(e,!0),s.params.multiple||o.menu.hide(!1)}),e.hidden&&cm.addClass(e.node,"hidden"),e.disabled&&cm.addClass(e.node,"disabled"),t?(t.items.appendChild(e.node),t.optgroup.appendChild(e.option)):(i.items.appendChild(e.node),i.hidden.appendChild(e.option)),d.push(c[e.value]=e),l=d.length,!0},y=function(t){var n=cm.isUndefined(t.value)?t.text:t.value;cm.remove(t.node),cm.remove(t.option),d=d.filter(function(e){return t!=e}),l=d.length,delete c[t.value],s.params.multiple?r=r.filter(function(e){return n!=e}):n===r&&(l?E(d[0],!0):(r=null,i.text.value=""))},E=function(e,t){e&&(s.params.multiple?w:S)(e),t&&(s.triggerEvent("onSelect",r),x())},w=function(e){var t=cm.isUndefined(e.value)?e.text:e.value;e.selected?_(e):(r.push(t),k(e))},S=function(e){t=r,r=cm.isUndefined(e.value)?e.text:e.value,d.forEach(function(e){cm.removeClass(e.node,"active")}),e.group?i.text.value=[cm.decode(e.group.name),cm.decode(e.text)].join(" > "):i.text.value=cm.decode(e.text),i.hidden.value=r,k(e)},k=function(e){e.option.selected=!0,e.selected=!0,cm.addClass(e.node,"active")},_=function(e){var t=cm.isUndefined(e.value)?e.text:e.value;r=r.filter(function(e){return t!=e}),e.option.selected=!1,e.selected=!1,cm.removeClass(e.node,"active")},x=function(){cm.stringifyJSON(r)!==cm.stringifyJSON(t)&&s.triggerEvent("onChange",r)},T=function(){l?(cm.addClass(i.container,"active"),i.text.focus(),r&&c[r]&&R(c[r])):o.menu.hide(),s.triggerEvent("onFocus",r)},P=function(){i.text.blur(),cm.removeClass(i.container,"active"),s.triggerEvent("onBlur",r)},R=function(e){i.menu.content.scrollTop=e.node.offsetTop-i.menu.content.offsetTop},N=function(e){38!==(e=cm.getEvent(e)).keyCode&&40!==e.keyCode||cm.preventDefault(e)};s.destruct=function(){return this.isDestructed||(this.isDestructed=!0,s.params.customEvents&&cm.customEvent.remove(i.container,"destruct",s.destructHandler),this.removeFromStack()),this},s.get=function(){return r},s.getText=function(){var e=c[r];return e?e.text:null},s.set=function(e,t){return t=!!cm.isUndefined(t)||t,cm.isUndefined(e)||(cm.isArray(e)?(cm.forEach(e,function(e){c[e]&&E(c[e],!1)}),t&&(s.triggerEvent("onSelect",r),s.triggerEvent("onChange",r))):c[e]&&E(c[e],t)),s},s.reset=function(e){e=!!cm.isUndefined(e)||e,s.params.multiple?s.deselectAll(e):l&&E(d[0],e),s.triggerEvent("onReset",r)},s.selectAll=function(e){return e=!!cm.isUndefined(e)||e,s.params.multiple&&(cm.forEach(c,_),cm.forEach(c,w),e&&(s.triggerEvent("onSelect",r),x())),s},s.deselectAll=function(e){return e=!!cm.isUndefined(e)||e,s.params.multiple&&(cm.forEach(c,_),e&&(s.triggerEvent("onSelect",r),x())),s},s.addOption=function(e,t){return cm.isObject(e)?C(e):C({value:e,text:t}),s.params.multiple||s.disabled||!l||o.menu.enable(),s},s.addOptions=function(e){return cm.forEach(e,function(e){C(e)}),s},s.editOption=function(e,t){var n,a,o;return!cm.isUndefined(e)&&c[e]&&(n=c[e],a=t,o=cm.isUndefined(n.value)?n.text:n.value,n.text=a,n.node.innerHTML=a,n.option.innerHTML=a,s.params.multiple||o!==r||(i.text.value=cm.decode(a))),s},s.removeOption=function(e){return!cm.isUndefined(e)&&c[e]&&y(c[e]),s.params.multiple||d||o.menu.disable(),s},s.removeOptions=s.removeOptionsAll=function(){return cm.forEach(c,function(e){y(e)}),s},s.getOption=function(e){return!cm.isUndefined(e)&&c[e]?c[e]:null},s.getSelectedOption=function(){return s.getOption(r)},s.getOptions=s.getOptionsAll=s.getAllOptions=function(){var t=[];return cm.forEach(d,function(e){t.push({text:e.text,value:e.value})}),t},s.hideOption=function(e){var t;!cm.isUndefined(e)&&c[e]&&((t=c[e]).hidden=!0,cm.addClass(t.node,"hidden"))},s.showOption=function(e){var t;!cm.isUndefined(e)&&c[e]&&((t=c[e]).hidden=!1,cm.removeClass(t.node,"hidden"))},s.disable=function(){return s.disabled=!0,cm.addClass(i.container,"disabled"),cm.addClass(i.scroll,"disabled"),cm.addClass(i.target,"disabled"),s.params.multiple||(i.text.disabled=!0,o.menu.disable()),s},s.enable=function(){return s.disabled=!1,cm.removeClass(i.container,"disabled"),cm.removeClass(i.scroll,"disabled"),cm.removeClass(i.target,"disabled"),s.params.multiple||(i.text.disabled=!1,l&&o.menu.enable()),s},s.getNodes=function(e){return i[e]||i},s.destructHandler=s.destruct.bind(s),s.setParams(e),n(),s.convertEvents(s.params.events),s.getDataConfig(s.params.node),m(),s.addToStack(s.params.node),s.triggerEvent("onRenderStart"),u(),g(),f(),s.params.multiple?(r=[],s.params.value&&cm.isArray(s.params.value)&&cm.forEach(s.params.value,function(e){c[e]&&E(c[e],!0)})):s.params.value&&c[s.params.value]?E(c[s.params.value]):s.params.setInitialValue&&l&&E(d[0]),s.addToStack(i.container),s.triggerEvent("onRender",r)}),Com.FormFields.add("select",{node:cm.node("select"),fieldConstructor:"Com.AbstractFormField",constructor:"Com.Select"}),cm.define("Com.SelectFieldTrigger",{extend:"Com.AbstractController",params:{renderStructure:!0,embedStructureOnRender:!0,controllerEvents:!0,triggerName:null,triggerFieldSize:null,options:[],"Com.Toolbar":{embedStructure:"append"}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("Com.SelectFieldTrigger",function(e,t,n){var a=n._inherit;n.onConstructStart=function(){this.fields={},this.changeEventHandler=this.changeEvent.bind(this)},n.onValidateParams=function(){this.components.form=this.params.form,this.components.formField=this.params.formField},n.onRender=function(){this.toggle()},n.renderView=function(){return this.triggerEvent("onRenderViewStart"),this.nodes.container=cm.node("div",{class:"app__select-trigger"}),this.triggerEvent("onRenderViewProcess"),this.triggerEvent("onRenderViewEnd"),this},n.renderViewModel=function(){a.prototype.renderViewModel.apply(this,arguments),this.getTriggerField(),this.getFields(),this.renderToolbar()},n.getTriggerField=function(){var e=this.components.form.getField(this.params.triggerName);e&&(this.components.trigger=e.controller,this.components.trigger.addEvent("onChange",this.changeEventHandler))},n.getFields=function(){var n=this;cm.forEach(n.params.options,function(t){cm.forEach(t.fields,function(e){cm.isObject(e)?n.processField(t.value,e):n.processField(t.value,{name:e})})})},n.processField=function(e,t){(t=cm.merge({value:e,name:null,size:null,field:null,controller:null,container:null},t)).field=this.components.form.getField(t.name),t.field&&(t.controller=t.field.controller,t.container=t.controller.getContainer()),this.fields[t.name]=t},n.renderToolbar=function(){var n=this;cm.getConstructor("Com.Toolbar",function(e,t){n.components.toolbar=new e(cm.merge(n.params[t],{container:n.nodes.container})),n.components.toolbar.addGroup({name:"trigger",position:"left"}).addGroup({name:"fields",position:"left"}).addField({group:"trigger",name:"trigger",node:n.components.trigger.getContainer(),size:n.params.triggerFieldSize})}),cm.forEach(n.fields,function(e,t){n.components.toolbar.addField({group:"fields",name:e.name,node:e.container,size:e.size,hidden:!0})})},n.changeEvent=function(){this.toggle()},n.toggle=function(){var n=this,a=n.components.trigger.get();cm.forEach(n.fields,function(e,t){e.value==a?n.components.toolbar.showField(e.name,"fields"):n.components.toolbar.hideField(e.name,"fields")})}}),Com.FormFields.add("select-field-trigger",{field:!1,fieldConstructor:"Com.AbstractFormField",constructor:"Com.SelectFieldTrigger"}),cm.define("Com.TagsInput",{modules:["Params","Events","Langs","Structure","DataConfig","Stack"],require:["Com.Autocomplete"],events:["onRender","onAdd","onRemove","onChange","onOpen","onClose","onReset"],params:{input:null,node:cm.node("input",{type:"text"}),container:null,name:"",embedStructure:"replace",data:[],maxSingleTagLength:255,max:0,autocomplete:!1,icons:{add:"icon default linked",remove:"icon default linked"},"Com.Autocomplete":{clearOnEmpty:!1}},strings:{tags:"Tags",add:"Add",remove:"Remove",placeholder:"Add tags..."}},function(e){var n=this,a={},o=[],r={};n.isDestructed=null,n.value=null,n.components={},n.isAutocomplete=!1;var t,s,i=function(){cm.isNode(n.params.input)&&(n.params.node=n.params.input)},c=function(){cm.isNode(n.params.node)&&(n.params.name=n.params.node.getAttribute("name")||n.params.name),n.isAutocomplete=n.params.autocomplete},d=function(){a.container=cm.node("div",{class:"com__tags-input"},a.hidden=cm.node("input",{type:"hidden"}),a.inner=cm.node("div",{class:"inner input"},a.tags=cm.node("div",{class:"tags"}))),l(),n.params.name&&a.hidden.setAttribute("name",n.params.name),cm.addEvent(a.container,"click",function(e){var t=cm.getEventTarget(e);cm.isParent(a.tags,t,!0)||a.input.focus()}),n.embedStructure(a.container)},l=function(){a.input=cm.node("input",{type:"text",maxlength:n.params.maxSingleTagLength,class:"adder",placeholder:n.lang("placeholder")}),cm.appendChild(a.input,a.inner),n.isAutocomplete&&(cm.getConstructor("Com.Autocomplete",function(e){n.components.autocomplete=new e(cm.merge(n.params["Com.Autocomplete"],{events:{onClickSelect:function(){m(!0)}}}))}),n.components.autocomplete.setTarget(a.input),n.components.autocomplete.setInput(a.input)),cm.addEvent(a.input,"keypress",function(e){44!==e.charCode&&59!==e.charCode||(cm.preventDefault(e),m(!0),n.isAutocomplete&&n.components.autocomplete.hide())}),cm.addEvent(a.input,"keydown",function(e){cm.isKey(e,["enter","escape"])&&(cm.preventDefault(e),m(!0),n.isAutocomplete&&n.components.autocomplete.hide())}),cm.addEvent(a.input,"focus",function(){cm.addClass(a.container,"active"),cm.addClass(a.inner,"input-focus")}),cm.addEvent(a.input,"blur",function(){m(!0),cm.removeClass(a.container,"active"),cm.removeClass(a.inner,"input-focus")})},m=function(t){var e=a.input.value.split(",");cm.forEach(e,function(e){u(e,t)}),a.input.value="",n.isAutocomplete&&n.components.autocomplete.clear()},u=function(e,t){(e=e.trim())&&e.length&&!/^[\s]*$/.test(e)&&!cm.inArray(o,e)&&(o.push(e),p(e),g(),t&&(n.triggerEvent("onChange",{tag:e}),n.triggerEvent("onAdd",{tag:e})))},p=function(e){var t={tag:e};t.container=cm.node("div",{class:"item"},cm.node("div",{class:"inner"},cm.node("div",{class:"text",title:e},e),t.button=cm.node("div",{class:n.params.icons.remove,title:n.lang("remove")}))),t.anim=new cm.Animation(t.container),cm.appendChild(t.container,a.tags),cm.addEvent(t.button,"click",function(){h(t)}),r[e]=t},h=function(e){o=cm.arrayRemove(o,e.tag),delete r[e.tag],g(),n.triggerEvent("onChange",{tag:e.tag}),n.triggerEvent("onRemove",{tag:e.tag}),cm.remove(e.container),e=null},g=function(){n.value=o.join(","),a.hidden.value=n.value};n.destruct=function(){return this.isDestructed||(this.isDestructed=!0,this.removeFromStack()),this},n.get=function(){return cm.isEmpty(n.value)?"":n.value},n.set=function(e){return n.add(e),n},n.add=function(e){var t=e?cm.isArray(e)?e:e.split(","):[];return cm.forEach(t,function(e){u(e,!0)}),n},n.remove=function(e){var t=e?cm.isArray(e)?e:e.split(","):[];return cm.forEach(t,function(e){cm.inArray(o,e)&&h(r[e])}),n},n.reset=function(){return cm.forEach(r,function(e){h(e,!0)}),n.triggerEvent("onReset"),n},n.getAutocomplete=function(){return n.components.autocomplete},i(),n.setParams(e),n.convertEvents(n.params.events),n.getDataConfig(n.params.node),c(),d(),n.addToStack(a.container),n.triggerEvent("onRender"),s=n.params.node.value.split(","),t=cm.extend(n.params.data,s),cm.forEach(t,function(e){u(e)})}),Com.FormFields.add("tags",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.TagsInput"}),cm.define("Com.TimeSelect",{modules:["Params","Events","Langs","Structure","DataConfig","Stack"],events:["onRender","onSelect","onChange","onClear"],params:{input:null,node:cm.Node("input",{type:"text"}),container:null,embedStructure:"replace",name:"",renderSelectsInBody:!0,format:"cm._config.timeFormat",showTitleTag:!0,title:!1,withHours:!0,hoursInterval:0,withMinutes:!0,minutesInterval:0,withSeconds:!1,secondsInterval:0,selected:0},strings:{separator:":",Hours:"HH",Minutes:"MM",Seconds:"SS",HoursTitle:"Hours",MinutesTitle:"Minutes",SecondsTitle:"Seconds"}},function(e){var a=this,o={},r={};a.date=new Date,a.value=0,a.previousValue=0;var t=function(){cm.isNode(a.params.input)&&(a.params.node=a.params.input)},n=function(){cm.isNode(a.params.node)&&(a.params.title=a.params.node.getAttribute("title")||a.params.title,a.params.name=a.params.node.getAttribute("name")||a.params.name),!cm.isEmpty(a.params.hoursInterval)&&0!==a.params.hoursInterval||(a.params.hoursInterval=1),!cm.isEmpty(a.params.minutesInterval)&&0!==a.params.minutesInterval||(a.params.minutesInterval=1),!cm.isEmpty(a.params.secondsInterval)&&0!==a.params.secondsInterval||(a.params.secondsInterval=1)},s=function(){var e=0,t=0,n=0;if(o.container=cm.Node("div",{class:"com__timeselect"},o.hidden=cm.Node("input",{type:"hidden"}),o.inner=cm.Node("div",{class:"inner"})),a.params.withHours)for(o.inner.childNodes.length&&o.inner.appendChild(cm.Node("div",{class:"sep"},a.lang("separator"))),o.inner.appendChild(cm.Node("div",{class:"field"},o.selectHours=cm.Node("select",{placeholder:a.lang("Hours"),title:a.lang("HoursTitle")})));e<24;)o.selectHours.appendChild(cm.Node("option",{value:e},cm.addLeadZero(e))),e+=a.params.hoursInterval;if(a.params.withMinutes)for(o.inner.childNodes.length&&o.inner.appendChild(cm.Node("div",{class:"sep"},a.lang("separator"))),o.inner.appendChild(cm.Node("div",{class:"field"},o.selectMinutes=cm.Node("select",{placeholder:a.lang("Minutes"),title:a.lang("MinutesTitle")})));t<60;)o.selectMinutes.appendChild(cm.Node("option",{value:t},cm.addLeadZero(t))),t+=a.params.minutesInterval;if(a.params.withSeconds)for(o.inner.childNodes.length&&o.inner.appendChild(cm.Node("div",{class:"sep"},a.lang("separator"))),o.inner.appendChild(cm.Node("div",{class:"field"},o.selectSeconds=cm.Node("select",{placeholder:a.lang("Seconds"),title:a.lang("SecondsTitle")})));n<60;)o.selectSeconds.appendChild(cm.Node("option",{value:n},cm.addLeadZero(n))),n+=a.params.secondsInterval;a.params.showTitleTag&&a.params.title&&(o.container.title=a.params.title),a.params.name&&o.hidden.setAttribute("name",a.params.name),a.embedStructure(o.container)},i=function(){a.params.withHours&&(r.selectHours=new Com.Select({select:o.selectHours,renderInBody:a.params.renderSelectsInBody}).addEvent("onChange",function(){c(!0)})),a.params.withMinutes&&(r.selectMinutes=new Com.Select({select:o.selectMinutes,renderInBody:a.params.renderSelectsInBody}).addEvent("onChange",function(){c(!0)})),a.params.withSeconds&&(r.selectSeconds=new Com.Select({select:o.selectSeconds,renderInBody:a.params.renderSelectsInBody}).addEvent("onChange",function(){c(!0)})),a.triggerEvent("onRender")},c=function(e){a.previousValue=a.value,a.params.withHours&&a.date.setHours(r.selectHours.get()),a.params.withMinutes&&a.date.setMinutes(r.selectMinutes.get()),a.params.withSeconds&&a.date.setSeconds(r.selectSeconds.get()),a.value=cm.dateFormat(a.date,a.params.format),o.hidden.value=a.value,e&&(a.triggerEvent("onSelect",a.value),d())},d=function(){a.previousValue&&(a.value||!a.previousValue)&&a.value==a.previousValue||a.triggerEvent("onChange",a.value)};a.set=function(e,t,n){return t=void 0!==t?t:a.params.format,n=void 0===n||n,cm.isEmpty(e)||"string"==typeof e&&new RegExp(cm.dateFormat(!1,a.params.format)).test(e)?a.clear():(a.date="object"==typeof e?e:cm.parseDate(e,t),a.params.withHours&&r.selectHours.set(a.date.getHours(),!1),a.params.withMinutes&&r.selectMinutes.set(a.date.getMinutes(),!1),a.params.withSeconds&&r.selectSeconds.set(a.date.getSeconds(),!1),c(n)),a},a.get=function(){return a.value},a.getDate=function(){return a.date},a.getHours=function(){return a.date.getHours()},a.getMinutes=function(){return a.date.getMinutes()},a.getSeconds=function(){return a.date.getSeconds()},a.clear=function(e){return e=void 0===e||e,a.date.setHours(0),a.date.setMinutes(0),a.date.setSeconds(0),a.params.withHours&&r.selectHours.set(a.date.getHours(),!1),a.params.withMinutes&&r.selectMinutes.set(a.date.getMinutes(),!1),a.params.withSeconds&&r.selectSeconds.set(a.date.getSeconds(),!1),c(!1),e&&(a.triggerEvent("onClear",a.value),d()),a},a.setParams(e),t(),a.convertEvents(a.params.events),a.getDataConfig(a.params.node),n(),s(),i(),a.addToStack(o.container),a.params.selected?a.set(a.params.selected,a.params.format,!1):a.set(a.params.node.value,a.params.format,!1)}),cm.define("Com.TintRange",{extend:"Com.AbstractRange",params:{className:"com__range",theme:"theme--arrows",min:360,max:0,value:360}},function(e){Com.AbstractRange.apply(this,arguments)}),cm.getConstructor("Com.TintRange",function(e,t,n){n.renderRangeContent=function(){var e={};return(this.nodes.rangeContent=e).container=cm.node("div",{class:"com__tint-range__content"}),e.container}}),Com.FormFields.add("tint-range",{node:cm.node("input",{type:"text"}),fieldConstructor:"Com.AbstractFormField",constructor:"Com.TintRange"}),cm.define("Com.TwoSideMultiSelect",{extend:"Com.AbstractInput",params:{controllerEvents:!0,className:"com__two-side-multi-select",setHiddenInput:!0,defaultValue:[],options:[],showLabels:!1,selectConstructor:"Com.Select",selectParams:{node:cm.node("select",{multiple:!0}),multiple:!0,className:"is-max"}},strings:{firstLabel:"Left:",secondLabel:"Right:",add:">>",remove:"<<",addTitle:"Add",removeTitle:"Remove"}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("Com.TwoSideMultiSelect",function(e,t,n){var a=n._inherit;n.onConstructStart=function(){var e=this;e.value=[],e.options={},e.keyPressHandler=e.keyPressHelper.bind(e),e.moveToLeftHandler=e.moveToLeft.bind(e),e.moveToRightHandler=e.moveToRight.bind(e)},n.validateParamsValue=function(){var e;cm.isNode(this.params.node)&&(e=cm.getSelectValue(this.params.node),this.params.value=cm.isEmpty(e)?this.params.value:e),this.params.value=cm.isEmpty(this.params.value)?this.params.defaultValue:this.params.value},n.onSetEvents=function(){cm.addEvent(window,"keypress",this.keyPressHandler)},n.onUnsetEvents=function(){cm.removeEvent(window,"keypress",this.keyPressHandler)},n.renderHiddenContent=function(){var e={};return(this.nodes.hiddenContent=e).container=e.input=cm.node("select",{class:"display-none",multiple:!0}),e.container},n.renderContent=function(){var e=this,t={};return e.nodes.content=t,e.triggerEvent("onRenderContentStart"),t.container=cm.node("div",{class:"com__two-side__content"},t.inner=cm.node("div",{class:"inner"},t.firstColumn=cm.node("div",{class:"column column--first"}),t.controls=cm.node("div",{class:"controls"},t.moveToRight=cm.node("button",{class:"button button-primary is-box",type:"button",title:e.lang("addTitle")},e.lang("add")),t.moveToLeft=cm.node("button",{class:"button button-primary is-box",type:"button",title:e.lang("removeTitle")},e.lang("remove"))),t.secondColumn=cm.node("div",{class:"column column--second"}))),e.params.showLabels&&(cm.appendChild(cm.node("div",{class:"label"},e.lang("firstLabel")),t.firstColumn),cm.appendChild(cm.node("div",{class:"label"},e.lang("secondLabel")),t.secondColumn),cm.addClass(t.container,"has-labels")),e.triggerEvent("onRenderContentProcess"),cm.addEvent(t.moveToRight,"click",e.moveToRightHandler),cm.addEvent(t.moveToLeft,"click",e.moveToLeftHandler),e.triggerEvent("onRenderContentEnd"),t.container},n.renderViewModel=function(){var t=this;a.prototype.renderViewModel.apply(t,arguments),cm.getConstructor(t.params.selectConstructor,function(e){t.components.firstSelect=new e(cm.merge(t.params.selectParams,{container:t.nodes.content.firstColumn})),t.components.secondSelect=new e(cm.merge(t.params.selectParams,{container:t.nodes.content.secondColumn}))}),t.collectOptions(),cm.forEach(t.params.options,function(e){t.renderOption(e)})},n.collectOptions=function(){var t=this;cm.forEach(t.params.node.options,function(e){t.renderOption({value:e.value,text:e.innerHTML})})},n.renderOption=function(e){(e=cm.merge({value:null,text:null},e)).value=cm.isUndefined(e.value)?e.text:e.value,e.option=cm.node("option",{value:e.value,innerHTML:e.text}),this.nodes.hidden.appendChild(e.option),this.components.firstSelect.addOption(e.value,e.text),this.options[e.value]=e},n.moveToLeft=function(){var e=this.components.secondSelect.get();cm.isEmpty(e)||(this.components.secondSelect.deselectAll(),e=cm.extract(this.value,e),this.set(e,!0))},n.moveToRight=function(){var e=this.components.firstSelect.get();cm.isEmpty(e)||(this.components.firstSelect.deselectAll(),e=cm.extend(this.value,e),this.set(e,!0))},n.moveOptionToLeft=function(e){e.selected&&(e.selected=!1,this.components.secondSelect.removeOption(e.value),this.components.firstSelect.showOption(e.value))},n.moveOptionToRight=function(e){e.selected||(e.selected=!0,this.components.secondSelect.addOption(e.value,e.text),this.components.firstSelect.hideOption(e.value))},n.keyPressHelper=function(e){var t=this,n=cm.getElementAbove(e);cm.handleKey(e,"enter",function(e){cm.isParent(t.nodes.content.firstColumn,n,!0)&&(cm.preventDefault(e),t.moveToRight()),cm.isParent(t.nodes.content.secondColumn,n,!0)&&(cm.preventDefault(e),t.moveToLeft())})},n.saveHiddenValue=function(t){var n,a;cm.forEach(this.options,function(e){cm.isEmpty(t)?e.option.selected=!1:(n=cm.isArray(t)&&cm.inArray(t,e.value),a=n||e.value===t,e.option.selected=a)})},n.setData=function(t){var n,a=this;cm.forEach(a.options,function(e){cm.isEmpty(t)?a.moveOptionToLeft(e):(n=cm.isArray(t)&&cm.inArray(t,e.value),n||e.value===t?a.moveOptionToRight(e):a.moveOptionToLeft(e))})}});